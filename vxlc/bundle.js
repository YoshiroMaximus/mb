!function(e){function t(t){for(var r,a,s=t[0],u=t[1],l=t[2],f=0,h=[];f<s.length;f++)a=s[f],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&h.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(c&&c(t);h.length;)h.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={1:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=globalThis.webpackJsonp=globalThis.webpackJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var c=u;o.push([668,0]),n()}([,function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return l}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function s(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function l(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}Object.create},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return b})),n.d(t,"a",(function(){return _})),n.d(t,"d",(function(){return k})),n.d(t,"c",(function(){return x}));var r=n(31),i=n(20),o=n(65);const a=new o.EventEmitter;a.setMaxListeners(100);let s,u,l,c,f,h,d,p,m,y=!1,v=3,g=3;function b(e){g=e;let t=w();setTimeout(()=>{a.emit("scale-change",t)},100)}function w(){const e=window.innerWidth;let t;return t=e>=2e3?5:e>=1500?4:e>=900?3:e>=450?2:1,v=t>g?g:t,t>g?g:t}function _(e){const t=e.rendering.getScene();m=t.getEngine(),s=new r.h(m),u=new r.h(m),l=i.a.CreateFullscreenUI("UI",!0,t,r.k.NEAREST_SAMPLINGMODE),c=i.a.CreateFullscreenUI("UI",!1,s,r.k.NEAREST_SAMPLINGMODE),f=i.a.CreateFullscreenUI("UI",!1,u,r.k.NEAREST_SAMPLINGMODE),h=new i.g,h.thickness=0,h.isPointerBlocker=!1,h.zIndex=1e3,l.addControl(h),d=new i.g,d.thickness=0,d.isPointerBlocker=!1,d.zIndex=1e3,c.addControl(d),p=new i.g,p.thickness=0,p.isPointerBlocker=!1,p.zIndex=1e3,f.addControl(p),m.onResizeObservable.add(e=>{l.getContext().imageSmoothingEnabled=!1,c.getContext().imageSmoothingEnabled=!1,f.getContext().imageSmoothingEnabled=!1,a.emit("resize",e),w(),setTimeout(()=>{a.emit("scale-change",v)},50)}),l.getContext().imageSmoothingEnabled=!1,c.getContext().imageSmoothingEnabled=!1,f.getContext().imageSmoothingEnabled=!1,s.autoClear=!1,u.autoClear=!1,new r.a("Camera",-Math.PI/2,7*Math.PI/16,10,r.l.Zero(),s),new r.a("Camera",-Math.PI/2,7*Math.PI/16,10,r.l.Zero(),u),y=!0,e.on("afterRender",()=>{s.render(),u.render()}),w()}function k(e){if(!y)throw"UIs aren't initialized yet!";if(0==e)return l;if(1==e)return c;if(2==e)return f;throw"Invalid number"}function x(e){if(!y)throw"UIs aren't initialized yet!";if(0==e)return h;if(1==e)return d;if(2==e)return p;throw"Invalid number"}window.scale=b},,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"i",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"m",(function(){return l})),n.d(t,"p",(function(){return c})),n.d(t,"d",(function(){return f})),n.d(t,"h",(function(){return h})),n.d(t,"w",(function(){return d})),n.d(t,"q",(function(){return p})),n.d(t,"v",(function(){return m})),n.d(t,"e",(function(){return y})),n.d(t,"o",(function(){return v})),n.d(t,"c",(function(){return g})),n.d(t,"s",(function(){return w})),n.d(t,"n",(function(){return x})),n.d(t,"l",(function(){return P})),n.d(t,"a",(function(){return S})),n.d(t,"t",(function(){return E})),n.d(t,"u",(function(){return j})),n.d(t,"f",(function(){return A})),n.d(t,"k",(function(){return z})),n.d(t,"j",(function(){return D})),n.d(t,"r",(function(){return R})),n.d(t,"b",(function(){return B}));var r=n(90),i=n(67),o=n(4),a=n(227);const s="0.2.0-beta.19.1",u=a.protocolVersion,l="https://voxelsrv.pb4.eu",c="wss://pb4.eu:9001",f={version:"0.0.0",nickname:"Player"+Math.round(1e5*Math.random()),autostep:i.isMobile,gamepad:!1,singleplayer:!1,allowcustom:!1,mouse:i.isMobile?50:15,viewDistance:i.isMobile?3:i.isFirefox?2:5,hotbarsize:9,scale:3,fov:70,fpslimit:0,debugInfo:!1,showFPS:!1,autoSaveInterval:300,controls:{forward:"W",left:"A",backward:"S",right:"D",fire:"<mouse 1>","mid-fire":"<mouse 2>","alt-fire":"<mouse 3>",jump:"<space>",inventory:"E",thirdprsn:"M",chatenter:"<enter>",chat:"T",cmd:"/",tab:"`",menu:"<escape>",screenshot:"P",hide:"O",zoom:"Z"},debugSettings:{printRegistryToConsole:!1,printProtocolToConsole:!1,makeSettingsVisible:!1,printAuthToConsole:!1}};let h={...f,version:s};function d(e){const t=h;h={...f,...t,...e},h.controls={...f.controls,...t.controls,...e.controls},h.debugSettings={...f.debugSettings,...t.debugSettings,...e.debugSettings},Object(o.f)(h.scale),Object(r.i)(h)}let p={cheats:!1,control:!1,ingame:!1};function m(e){p={...p,...e}}const y={fogMode:3,fogStart:500,fogEnd:4e3,fogDensity:1e-6,fogColor:[.8,.9,1],blockTestDistance:7,clearColor:[.8,.9,1],skyColor:[.2,.3,.7],backgroundColor:"#00000077",menuColor:"#11111177"};function v(){return{debug:!1,showFPS:!1,inverseY:!1,inverseX:!1,sensitivityX:h.mouse,sensitivityY:h.mouse,chunkSize:32,chunkAddDistance:[h.viewDistance,h.viewDistance],chunkRemoveDistance:[h.viewDistance,h.viewDistance],blockTestDistance:y.blockTestDistance,tickRate:20,texturePath:"",playerStart:[0,100,0],playerHeight:1.85,playerWidth:.6,playerAutoStep:h.autostep?1:0,clearColor:y.clearColor,ambientColor:[1,1,1],lightDiffuse:[1,1,1],lightSpecular:[1,1,1],groundLightColor:[1,1,1],useAO:!0,AOmultipliers:[.93,.8,.5],reverseAOmultiplier:1,preserveDrawingBuffer:!0,stickyPointerLock:!1,adaptToDeviceRatio:!1,gravity:[0,-14,0],bindings:{},tickInUnloadedChunks:!0,ignorePointerLock:!1,manuallyControlChunkLoading:!0}}const g=["silkscreen","Lato","Lato-Italic","Lato-Black","Lato-BlackItalic","Lato-Bold","Lato-BoldItalic","Lato-Light","Lato-LightItalic","Lato-Thin","Lato-ThinItalic","PixelOperator-Bold","PixelOperator","PixelOperator8-Bold","PixelOperator8","PixelOperatorHB","PixelOperatorHB8","PixelOperatorHBSC","PixelOperatorMono-Bold","PixelOperatorMono","PixelOperatorMono8-Bold","PixelOperatorMono8","PixelOperatorMonoHB","PixelOperatorMonoHB8","PixelOperatorSC-Bold","PixelOperatorSC"];let b=null;function w(e){b=e}let _="???";const k=window.location.hostname;new URLSearchParams(window.location.search);_="0.0.0.0"==k||"localhost"==k?"Localhost/DEV":"voxelsrv-master.pb4.eu"==k?"Development":"voxelsrv.pb4.eu"==k||"pb4.eu"==k?"":"www.newgrounds.com"==k||"uploads.ungrounded.net"==k?"Newgrounds":null!=window.electron?"":"@NFT2626";let x=_;const O=[[{text:"It's not Minecraft clone... or is it?"}],[{text:"Written in Typescript"}],[{text:"Powered by Noa Engine"}],[{text:"Open Source"}],[{text:"Multiplayer supported!"}],[{text:"You can fork it!"}],[{text:"Available on github"}],[{text:"Bottom text"}],[{text:"Pixelated",font:"PixelOperator-Bold"}],[{text:"In development"}],[{text:"404: File not found"}],[{text:":concern:"}],[{text:"[🥔]"}],[{text:"Works in browser"}],[{text:"youtu.be/dQw4w9WgXcQ"}],[{text:"Do not do it"}],[{text:"discord.gg/"}],[{text:"Not for sale"}],[{text:"Includes bugs"}],[{text:"Checkout on github!"}],[{text:"+ 5 new DLC characters"}],[{text:"Undefined"}],[{text:"Does anyone read these?"}],[{text:"Created by NFT2626"}],[{text:"Classical gameplay"}],[{text:"Hello World"}],[{text:"Works on mobile"}],[{text:s}],[{text:"PixelPerfection!"}],[{text:"Singleplayer supported!"}],[{text:"Since 2020"}]];function P(){let e=Math.floor(Math.random()*O.length);return O[e]}3==(new Date).getDay()&&O.push([{text:"It Is Wednesday My Dudes"}]);const S=[{text:"Created by: "},{text:"NFT2626",url:"https://github.com/NFT2626",color:"lightblue"},{text:"\nBuild on top of "},{text:"Noa Engine by Andy Hall",color:"lightblue",url:"https://github.com/andyhall/noa"},{text:"\nUsed textures and sounds: "},{text:"PixelPerfection",color:"lightblue",url:"https://github.com/Athemis/PixelPerfectionCE"},{text:" by XSSheep and others"},{text:"\n\n\n"},{text:"MC Classic support is based on work by "},{text:"rom1504 and mhsjlw",color:"lightblue",url:"https://github.com/mhsjlw/minecraft-classic-protocol"},{text:"\nClassic server list is provided by "},{text:"MineOnline",color:"lightblue",url:"https://mineonline.codie.gg/servers"}],E={name:"Singleplayer World",ip:"Internal",rawIP:"",motd:"",protocol:u,software:"VoxelCraft2",featured:!0,icon:"VoxelCraft2",type:0,players:{max:1,online:0},useProxy:!1,useProxyProtocol:!1,auth:!1},j=["normal","flat"];let C,T=0;async function A(){try{C=await(await fetch(l+"/api/servers")).json()}catch(e){C={}}return T=Date.now(),C}async function z(){return Date.now()-T==3e4?await A():C}let I=null;function D(){return I}function R(e,t){I=e,null!=e&&d({username:e.username}),t&&Object(r.h)(e)}function B(){I=null,Object(r.a)()}},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"e",(function(){return I})),n.d(t,"f",(function(){return B})),n.d(t,"c",(function(){return M})),n.d(t,"b",(function(){return N})),n.d(t,"a",(function(){return U})),n.d(t,"d",(function(){return $}));var r=n(17),i=n(67),o=n(187),a=n(149),s=n(111),u=n(46),l=n(122),c=n(166),f=n(233),h=n(141);function d(){null!=s.b&&s.b.dispose(),null!=h.b&&h.b.dispose(),null!=f.b&&f.b.dispose(),null!=u.c&&u.c.dispose(),null!=u.d&&u.d.dispose(),null!=c.c&&c.c.dispose(),null!=a.a&&a.a.dispose(),null!=a.b&&a.b.dispose(),null!=l.b&&l.b.dispose()}var p=n(31);var m=n(234),y=n(103),v=n(105),g=n(110);const b={},w={};var _=n(123),k=n(77),x=n(147),O=n(183),P=n(293),S=n(109),E=n(4),j=n(185),C=n(227),T=n(473);class A{constructor(e){this.clientListeners={},this.serverListener=()=>{},this.ready=()=>{},this.server=e}setSocket(e){this.socket=e}async receiveServerMessage(e,t){switch(e){case"ProxyInfo":const e=t,n={name:e.name,protocol:r.g,onlinePlayers:e.onlinePlayers,maxPlayers:e.maxPlayers,motd:e.motd,software:e.software,auth:e.auth,secret:e.secret};this.socket.receive("LoginRequest",n);break;case"AuthResponce":this.setup(t);break;case"VoxelSrvMessage":const i=await this.socket.protocol.parseToObject("server",new Uint8Array(t));null!=i&&this.socket.receive(i.type,i.data);break;case"Disconnect":this.socket.receive("PlayerKick",{reason:t.reason}),this.socket.close();break;case"Data":this.serverListener(t.message)}}receiveClientMessage(e,t){switch(e){case"LoginResponse":const n=t;this.loginData=n;const r={username:n.username,protocol:n.protocol,client:n.client,uuid:n.uuid,secret:n.secret,serverId:this.server,proxySupportedVersion:C.proxyVersion};this.socket.sendProxy("AuthRequest",r);break;default:this.emitClient(e,t)}}setup(e){e.usePacketTranslation?"mc0.30c"==e.type?Object(T.a)(this):(this.socket.receive("PlayerKick",{reason:"Unsupported protocol translation: "+e.type}),this.socket.close()):this.serverListener=async e=>{const t=await this.socket.protocol.parseToObject("server",new Uint8Array(e));null!=t&&this.socket.receive(t.type,t.data)},this.socket.sendReady(),setTimeout(()=>this.ready(),100)}emitClient(e,t){null!=this.clientListeners[e]&&this.clientListeners[e].forEach(e=>{e(t)})}onClient(e,t){null!=this.clientListeners[e]||(this.clientListeners[e]=new Array),this.clientListeners[e].push(t)}}let z,I=null,D=null,R=null;function B(e,t){null!=I&&I.send(e,t)}function M(){return null!=I&&I.singleplayer}let L={},F=null;function N(e=!0){var t,n;if(I.close(0),function(e){null!=R&&e.off("tick",R);null!=R&&e.off("beforeRender",D);0}(z),null!=F&&F.dispose(),z.ents.getPhysics(z.playerEntity).body.airDrag=9999,null===(n=null===(t=z.ents.getState(z.playerEntity,"model"))||void 0===t?void 0:t.main)||void 0===n||n.dispose(),Object.values(L).forEach(e=>{z.ents.deleteEntity(e,!0)}),L={},d(),i.isMobile&&Object(P.b)(!1),Object(r.v)({ingame:!1}),document.exitPointerLock(),I.singleplayer){I.send("SingleplayerLeave",{});const e=new S.a([{text:""}]);return e.setCenterText([{text:"Saving world..."}]),Object(E.c)(2).addControl(e.main),I.on("ServerStoppingDone",()=>{console.log("World Saved!"),I.close(),e.dispose(),Object(o.a)(z)}),!1}return e&&Object(o.a)(z),!e}async function U(e,t){try{let n,i;i=(await Object(r.k)())[t.replace("*","")],null==i&&(i={name:"Multiplayer server",ip:t,rawIP:t,motd:"",protocol:r.g,software:"VoxelCraft2",featured:!1,icon:"VoxelCraft2",type:0,players:{max:0,online:0},useProxy:!1,useProxyProtocol:"*"==t[0],auth:!1}),n="*"==t[0]?t.startsWith("*wss://")||t.startsWith("*ws://")?new x.b(i.useProxy?r.p:t.slice(1),new A(t.replace("*wss://","").replace("*ws://",""))):new x.b(i.useProxy?r.p:"ws://"+t.slice(1),new A(t.slice(1))):t.startsWith("wss://")||t.startsWith("ws://")?new x.a(t):new x.a("ws://"+t),$(e,n,i)}catch(e){Object(j.a)([{text:e.name}],[{text:e.message}],j.c.error,5)}}function $(e,t,n){t.singleplayer?document.title="VoxelCraft2 - Loading world...":document.title="VoxelCraft2 - Connecting to server...",t.noa=e,z=e;const s=z.rendering.getScene().getEngine();z.worldName="World"+Math.round(1e3*Math.random()),I=t,console.log("Username: "+r.h.nickname,"Server/World: "+I.server||!1);let j=!0;L={},null!=o.b&&o.b.dispose();const C=new S.a([{text:n.name?n.name:I.server}]);F=C,I.singleplayer?(C.setSubtitle([{text:I.world}]),C.setCenterText([{text:"Loading world..."}])):(C.setSubtitle([{text:n.motd?n.motd:"Unknown server"}]),C.setCenterText([{text:"Logging in..."}]),C.createItem("Disconnect",()=>{N()})),Object(E.c)(2).addControl(C.main),I.on("PlayerKick",e=>{console.log("You has been kicked from server \nReason: "+e.reason);if(N(!1)){document.title="VoxelCraft2 - Disconnected!";const t=new S.a([{text:I.singleplayer?"":"Disconnected!"}]);t.setCenterText([{text:e.reason}]),I.singleplayer||t.createItem("Reconnect",()=>{t.dispose(),U(z,(I instanceof x.b?"*":"")+I.server)}),t.createItem("Main menu",()=>{t.dispose(),Object(o.a)(z)}),Object(E.c)(2).addControl(t.main),document.exitPointerLock()}}),I.on("LoginStatus",e=>{e.message&&(C.main.isVisible=!0,z.ents.getPhysics(z.playerEntity).body.airDrag=9999,C.setCenterText([{text:e.message}]))}),I.on("LoginRequest",async e=>{var t;z.worldName="World-"+1e4*Math.random(),z.camera.heading=0,z.camera.pitch=0,Object(v.d)(),z.world._chunksKnown.forEach(e=>{z.world.manuallyUnloadChunk(32*e[0],32*e[1],32*e[2])});const n=z.rendering.getScene(),o=Object(r.j)();let x="",S=r.h.nickname.toLowerCase(),E=(null==o?void 0:o.username)||r.h.nickname;if(e.auth)try{r.h.debugSettings.printAuthToConsole&&console.log("Auth: Requesting token");const n=await(await fetch(r.m+"/api/createToken",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({serverSecret:e.secret,loginToken:null===(t=Object(r.j)())||void 0===t?void 0:t.token})})).json();r.h.debugSettings.printAuthToConsole&&console.log("Auth: Response!",n),n.error||(x=n.token,S=n.uuid,E=n.username)}catch(e){r.h.debugSettings.printAuthToConsole&&console.log("Auth: Error!"),console.error(e)}else null!=o&&(S=o.uuid,E=o.username);Object(g.b)(I.server),I.send("LoginResponse",{username:E,protocol:r.g,mobile:i.isMobile,client:"VoxelCraft2 "+r.i,uuid:S,secret:x});let T="";I.on("PlayerEntity",e=>{console.log("Ignoring player-entity: "+e.uuid),T=e.uuid,null!=L[e.uuid]&&null!=z&&z.ents.deleteEntity(L[e.uuid]),delete L[e.uuid],Object(m.b)(z.playerEntity,e.uuid,e.model||"player",e.texture||"skins:"+S,1.85,!1,"",[0,0,0])}),n.fogMode=r.e.fogMode,n.fogStart=r.e.fogStart,n.fogEnd=r.e.fogEnd,n.fogDensity=r.e.fogDensity,n.fogColor=new p.b(...r.e.fogColor),z.blockTestDistance=r.e.blockTestDistance,n.cameras[0].fov=r.h.fov*Math.PI/180,n.clearColor=new p.c(...r.e.clearColor,1),_.a.isVisible=!0,j&&I.on("LoginSuccess",e=>{z.ents.getPhysics(z.playerEntity).body.airDrag=9999,C.main.isVisible=!1,Object(r.v)({ingame:!0}),I.singleplayer?document.title="VoxelCraft2 - Playing on singleplayer world":document.title="VoxelCraft2 - Playing on "+I.server,Object(y.d)(z,JSON.parse(e.blocksDef)),Object(y.e)(z,JSON.parse(e.itemsDef)),function(e,t,n,r){const i=e.playerEntity,o=e.entities.getPositionData(i),a=e.rendering.getScene(),s=(o.width,o.height),u=(e.ents.getPositionData(e.playerEntity).height,[0,s/2,0]),l=e.entities.getMovement(i);r&&Object.entries(r).forEach(e=>{l[e[0]]=e[1]}),null!=t&&e.ents.addComponentAgain(i,"inventory",t),null!=n&&(e.ents.getState(i,"inventory").armor=n),e.ents.getState(i,"inventory").crafting={1:{},2:{},3:{},4:{}},e.entities.addComponentAgain(i,"mesh",{mesh:new p.f("main",a),offset:u})}(z,JSON.parse(e.inventory),JSON.parse(e.armor),JSON.parse(e.movement)),_.a.dispose(),Object(_.b)(z),_.d.dispose(),Object(_.c)(z),z.ents.setPosition(z.playerEntity,e.xPos,e.yPos,e.zPos);let t=setInterval(()=>{z.world.playerChunkLoaded&&(z.ents.getPhysics(z.playerEntity).body.airDrag=-1,clearInterval(t))},1);if(!j)return;var o,x;j=!1,d(),Object(v.d)(),o=z,x=I,Object(f.a)(o,x),Object(a.d)(),Object(a.c)(o,x.server),Object(u.e)(),Object(l.a)(o),Object(c.b)(),i.isMobile&&Object(P.b)(!1),I.on("RegistryUpdate",e=>{Object(y.d)(z,JSON.parse(e.blocksDef)),Object(y.e)(z,JSON.parse(e.itemsDef))}),I.on("WorldChunkLoad",e=>{Object(v.g)(e)}),I.on("WorldChunkUnload",e=>{const t=e.height>0?e.height:1;for(let n=0;n<=t;n++)Object(v.f)(`${e.x}|${e.y+n}|${e.z}`)}),I.on("WorldChunksRemoveAll",e=>{e.confirm&&Object(v.d)()}),I.on("WorldChunkIsLoaded",e=>{I.send("WorldChunkIsLoadedResponce",{x:e.x,y:e.y,z:e.z,loaded:Object(v.b)([e.x,e.y,e.z].join("|"))})}),I.on("WorldMultiBlockUpdate",e=>{Object.values(e.blocks).forEach(e=>{z.setBlock(e.id,e.x,e.y,e.z),Object(v.c)(e.id,e.x,e.y,e.z,100)})}),I.on("WorldBlockUpdate",e=>{z.setBlock(e.id,e.x,e.y,e.z),Object(v.c)(e.id,e.x,e.y,e.z,100)}),I.on("EnvironmentFogUpdate",e=>{null!=e.mode&&(n.fogMode=e.mode),null!=e.start&&(n.fogStart=e.start),null!=e.end&&(n.fogEnd=e.end),null!=e.density&&(n.fogDensity=e.density),e.colorRed,e.colorGreen,null!=e.colorBlue&&(n.fogColor=new p.b(e.colorRed,e.colorGreen,e.colorBlue))}),I.on("EnvironmentSkyUpdate",e=>{e.colorRed,e.colorGreen,null!=e.colorBlue&&(n.clearColor=new p.c(e.colorRed,e.colorGreen,e.colorBlue,1)),e.colorRedTop,e.colorGreenTop,null!=e.colorBlueTop&&(_.d.material.emissiveColor=new p.b(e.colorRedTop,e.colorGreenTop,e.colorBlueTop)),_.d.material.diffuseColor=_.d.material.emissiveColor,null!=e.clouds&&(_.a.isVisible=e.clouds)}),I.on("PlayerInventory",(function(e){const t=JSON.parse(e.inventory);"armor"==e.type?z.ents.getState(z.playerEntity,"inventory").armor=t:"hook"==e.type?z.ents.getState(z.playerEntity,"inventory").hook=t:(z.ents.getState(z.playerEntity,"inventory").items=t.items,z.ents.getState(z.playerEntity,"inventory").tempslot=t.tempslot)})),I.on("PlayerSlotUpdate",(function(e){const t=JSON.parse(e.data),n=z.ents.getState(z.playerEntity,"inventory");"temp"==e.type?n.tempslot=t:"main"==e.type?n.items[e.slot]=t:"armor"==e.type?n.armor.items[e.slot]=t:"crafting"==e.type?n.crafting[e.slot]=t:"hook"==e.type&&(n.hook.items[e.slot]=t)})),I.on("PlayerSetBlockReach",e=>{z.blockTestDistance=e.value}),I.on("PlayerOpenInventory",e=>{if(e.type==O.PlayerOpenInventory.Type.MAIN)z.inputs.down.emit("inventory");else if(e.type==O.PlayerOpenInventory.Type.CRAFTING){const t=JSON.parse(e.data);z.ents.getState(z.playerEntity,"inventory").hook=t,Object(h.c)(z,I)}}),I.on("ChatMessage",e=>{Object(u.a)(e.message)}),I.on("UpdateTextBoard",e=>{e.type==O.UpdateTextBoard.Type.TAB&&Object(c.a)(e.message)}),I.on("PlayerTeleport",(function(e){z.ents.setPosition(z.playerEntity,e.x,e.y,e.z)})),I.on("PlayerUpdateMovement",e=>{z.ents.getMovement(z.playerEntity)[e.key]=e.value}),I.on("PlayerUpdatePhysics",e=>{z.ents.getPhysicsBody(z.playerEntity)[e.key]=e.value}),I.on("PlayerApplyImpulse",e=>{z.ents.getPhysicsBody(z.playerEntity).applyImpulse([e.x,e.y,e.z])}),I.on("EntityCreate",async e=>{if(T!=e.uuid){const t=JSON.parse(e.data);L[e.uuid]=z.ents.add(Object.values(t.position),1,2,null,null,!1,!0),Object(m.b)(L[e.uuid],e.uuid,t.model,t.texture,t.offset,t.nametag,t.name,t.hitbox),z.ents.getState(L[e.uuid],"position").newPosition=z.ents.getState(L[e.uuid],"position").position}}),I.on("EntityNameUpdate",e=>{const t=z.ents.getState(L[e.uuid],"model");t.nametag.dispose(),t.nametag=Object(m.a)(t.main,e.name,z.ents.getPositionData(L[e.uuid]).height,e.visible)}),I.on("EntityRemove",e=>{null!=L[e.uuid]&&z.ents.deleteEntity(L[e.uuid]),delete L[e.uuid]}),I.on("EntityMove",e=>{if(null!=L[e.uuid]){var t=[e.x,e.y,e.z];z.ents.getState(L[e.uuid],"position").newPosition=t,z.ents.getState(L[e.uuid],"position").rotation=2*e.rotation,z.ents.getState(L[e.uuid],"position").pitch=2*e.pitch}}),I.on("EntityHeldItem",e=>{}),I.on("EntityArmor",e=>{}),I.on("SoundPlay",e=>{!function(e,t,n,r){const i=Object.keys(b)[Object.keys(b).length-1]+1;let o=t/10;0>t?o=0:1<t&&(o=.1),console.log("Playing: "+e,"Volume: "+t,"Position: "+n);let a=Object(g.a)(e,"sound");const s=r.rendering.getScene();b[i]=new p.i("Sound",a,s,()=>b[i].play(),{volume:o}),null!=n&&3==n.length&&(b[i]=new p.i("Sound",a,s,()=>b[i].play(),{volume:o}),w[i]=new p.f("",s),r.rendering.addMeshToScene(w[i],!0,n),b[i].attachToMesh(w[i])),b[i].onended=function(){w[i].dispose(),delete w[i],b[i].dispose(),delete b[i]}}(e.sound,e.volume,null!=e.x?[e.x,e.y,e.z]:null,z)});const S=z.ents.getState(z.playerEntity,"position");let E=[],A=0,B=0,M=0,F=0;function N(e,t,n,r){const i=t.position;let o=k.create();k.lerp(o,i,n,12/s.getFps());const a=t.rotation?t.rotation:0,u=t.pitch?t.pitch:0,l=[n[0],0,n[2]],c=[i[0],0,i[2]];null==e.x&&(e.x=0,e.y=0,e.z=!1);let f=Math.sin(e.x);if(k.dist(l,c)>.05)e.y=k.dist(l,c)/5,e.x=e.x+e.y,Math.abs(f)>.95?e.z=!0:Math.abs(f)<.05&&(e.z=!1);else{const t=parseFloat(f.toFixed(1));0==t||e.z||(e.x=e.x-.05),0!=t&&e.z&&(e.x=e.x+.05)}e.models.left_arm.rotation.x=-f,e.models.right_arm.rotation.x=f,e.models.right_leg.rotation.x=-f,e.models.left_leg.rotation.x=f,r.rotation.y||(r.rotation.y=0);const h=r.rotation.y;r.rotation.y=a/2-h>5?a/2:(a/2+h)/2,e.models.head.rotation.x=u/2,null!=e.nametag&&(e.nametag.rotation.y=z.camera.heading-r.rotation.y,e.nametag.rotation.x=z.camera.pitch)}R=()=>{if(0==F){const e=z.camera.heading,t=z.camera.pitch;k.dist(E,S.position)>.15||A!=e||B!=t?(E=[...S.position],B=t,A=e,I.send("ActionMoveLook",{x:S.position[0],y:S.position[1],z:S.position[2],rotation:e,pitch:t})):k.dist(E,S.position)>.15?(E=[...S.position],I.send("ActionMove",{x:S.position[0],y:S.position[1],z:S.position[2]})):A==e&&B==t||(B=t,A=e,I.send("ActionLook",{rotation:e,pitch:t})),F=2}F-=1,M+=1,M>=120&&(I.send("Ping",{time:Date.now()}),M=0)},z.on("tick",R),D=async function(){const e=z.ents.getState(z.playerEntity,"model"),t=z.ents.getState(z.playerEntity,"position");if(null!=e){const r=0!=z.camera.zoomDistance;e.main.visibility=r;var n=e.main.getChildMeshes(!1);let i;for(i=0;i<n.length;i++)n[i].visibility=r;r&&(N(e,t,z.camera.getTargetPosition(),e.main),e.main.rotation.y=z.camera.heading,e.models.head.rotation.x=z.camera.pitch)}Object.values(L).forEach((async function(e){const t=z.ents.getState(e,"position"),n=t.newPosition,r=z.ents.getState(e,"mesh"),i=z.ents.getState(e,"model");if(null!=r&&null!=n&&null!=t.position){let o=k.create();k.lerp(o,t.position,n,12/s.getFps()),z.ents.setPosition(e,o[0],o[1],o[2]),N(i,t,n,r.mesh)}}))},z.on("beforeRender",D)})})}},function(e,t,n){var r,i,o;i=[n(112)],void 0===(o="function"==typeof(r=function(e){"use strict";var t=e.Reader,n=e.Writer,r=e.util,i=e.roots.default||(e.roots.default={});return i.LoginResponse=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.username="",o.prototype.protocol=0,o.prototype.mobile=!1,o.prototype.client="",o.prototype.uuid="",o.prototype.secret="",o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.username&&Object.hasOwnProperty.call(e,"username")&&t.uint32(10).string(e.username),null!=e.protocol&&Object.hasOwnProperty.call(e,"protocol")&&t.uint32(16).uint32(e.protocol),null!=e.mobile&&Object.hasOwnProperty.call(e,"mobile")&&t.uint32(24).bool(e.mobile),null!=e.client&&Object.hasOwnProperty.call(e,"client")&&t.uint32(34).string(e.client),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(42).string(e.uuid),null!=e.secret&&Object.hasOwnProperty.call(e,"secret")&&t.uint32(50).string(e.secret),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.LoginResponse;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.username=e.string();break;case 2:o.protocol=e.uint32();break;case 3:o.mobile=e.bool();break;case 4:o.client=e.string();break;case 5:o.uuid=e.string();break;case 6:o.secret=e.string();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.username&&e.hasOwnProperty("username")&&!r.isString(e.username)?"username: string expected":null!=e.protocol&&e.hasOwnProperty("protocol")&&!r.isInteger(e.protocol)?"protocol: integer expected":null!=e.mobile&&e.hasOwnProperty("mobile")&&"boolean"!=typeof e.mobile?"mobile: boolean expected":null!=e.client&&e.hasOwnProperty("client")&&!r.isString(e.client)?"client: string expected":null!=e.uuid&&e.hasOwnProperty("uuid")&&!r.isString(e.uuid)?"uuid: string expected":null!=e.secret&&e.hasOwnProperty("secret")&&!r.isString(e.secret)?"secret: string expected":null},o.fromObject=function(e){if(e instanceof i.LoginResponse)return e;var t=new i.LoginResponse;return null!=e.username&&(t.username=String(e.username)),null!=e.protocol&&(t.protocol=e.protocol>>>0),null!=e.mobile&&(t.mobile=Boolean(e.mobile)),null!=e.client&&(t.client=String(e.client)),null!=e.uuid&&(t.uuid=String(e.uuid)),null!=e.secret&&(t.secret=String(e.secret)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.username="",n.protocol=0,n.mobile=!1,n.client="",n.uuid="",n.secret=""),null!=e.username&&e.hasOwnProperty("username")&&(n.username=e.username),null!=e.protocol&&e.hasOwnProperty("protocol")&&(n.protocol=e.protocol),null!=e.mobile&&e.hasOwnProperty("mobile")&&(n.mobile=e.mobile),null!=e.client&&e.hasOwnProperty("client")&&(n.client=e.client),null!=e.uuid&&e.hasOwnProperty("uuid")&&(n.uuid=e.uuid),null!=e.secret&&e.hasOwnProperty("secret")&&(n.secret=e.secret),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.Ping=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.time=r.Long?r.Long.fromBits(0,0,!0):0,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.time&&Object.hasOwnProperty.call(e,"time")&&t.uint32(8).uint64(e.time),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.Ping;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.time=e.uint64();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.time&&e.hasOwnProperty("time")&&!(r.isInteger(e.time)||e.time&&r.isInteger(e.time.low)&&r.isInteger(e.time.high))?"time: integer|Long expected":null},o.fromObject=function(e){if(e instanceof i.Ping)return e;var t=new i.Ping;return null!=e.time&&(r.Long?(t.time=r.Long.fromValue(e.time)).unsigned=!0:"string"==typeof e.time?t.time=parseInt(e.time,10):"number"==typeof e.time?t.time=e.time:"object"==typeof e.time&&(t.time=new r.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0))),t},o.toObject=function(e,t){t||(t={});var n={};if(t.defaults)if(r.Long){var i=new r.Long(0,0,!0);n.time=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.time=t.longs===String?"0":0;return null!=e.time&&e.hasOwnProperty("time")&&("number"==typeof e.time?n.time=t.longs===String?String(e.time):e.time:n.time=t.longs===String?r.Long.prototype.toString.call(e.time):t.longs===Number?new r.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0):e.time),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.ActionMove=function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return r.prototype.x=0,r.prototype.y=0,r.prototype.z=0,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=n.create()),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(9).double(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(17).double(e.y),null!=e.z&&Object.hasOwnProperty.call(e,"z")&&t.uint32(25).double(e.z),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.ActionMove;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.x=e.double();break;case 2:o.y=e.double();break;case 3:o.z=e.double();break;default:e.skipType(7&a)}}return o},r.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},r.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.x&&e.hasOwnProperty("x")&&"number"!=typeof e.x?"x: number expected":null!=e.y&&e.hasOwnProperty("y")&&"number"!=typeof e.y?"y: number expected":null!=e.z&&e.hasOwnProperty("z")&&"number"!=typeof e.z?"z: number expected":null},r.fromObject=function(e){if(e instanceof i.ActionMove)return e;var t=new i.ActionMove;return null!=e.x&&(t.x=Number(e.x)),null!=e.y&&(t.y=Number(e.y)),null!=e.z&&(t.z=Number(e.z)),t},r.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.x=0,n.y=0,n.z=0),null!=e.x&&e.hasOwnProperty("x")&&(n.x=t.json&&!isFinite(e.x)?String(e.x):e.x),null!=e.y&&e.hasOwnProperty("y")&&(n.y=t.json&&!isFinite(e.y)?String(e.y):e.y),null!=e.z&&e.hasOwnProperty("z")&&(n.z=t.json&&!isFinite(e.z)?String(e.z):e.z),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},r}(),i.ActionLook=function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return r.prototype.rotation=0,r.prototype.pitch=0,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=n.create()),null!=e.rotation&&Object.hasOwnProperty.call(e,"rotation")&&t.uint32(13).float(e.rotation),null!=e.pitch&&Object.hasOwnProperty.call(e,"pitch")&&t.uint32(21).float(e.pitch),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.ActionLook;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.rotation=e.float();break;case 2:o.pitch=e.float();break;default:e.skipType(7&a)}}return o},r.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},r.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.rotation&&e.hasOwnProperty("rotation")&&"number"!=typeof e.rotation?"rotation: number expected":null!=e.pitch&&e.hasOwnProperty("pitch")&&"number"!=typeof e.pitch?"pitch: number expected":null},r.fromObject=function(e){if(e instanceof i.ActionLook)return e;var t=new i.ActionLook;return null!=e.rotation&&(t.rotation=Number(e.rotation)),null!=e.pitch&&(t.pitch=Number(e.pitch)),t},r.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.rotation=0,n.pitch=0),null!=e.rotation&&e.hasOwnProperty("rotation")&&(n.rotation=t.json&&!isFinite(e.rotation)?String(e.rotation):e.rotation),null!=e.pitch&&e.hasOwnProperty("pitch")&&(n.pitch=t.json&&!isFinite(e.pitch)?String(e.pitch):e.pitch),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},r}(),i.ActionMoveLook=function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return r.prototype.x=0,r.prototype.y=0,r.prototype.z=0,r.prototype.rotation=0,r.prototype.pitch=0,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=n.create()),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(9).double(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(17).double(e.y),null!=e.z&&Object.hasOwnProperty.call(e,"z")&&t.uint32(25).double(e.z),null!=e.rotation&&Object.hasOwnProperty.call(e,"rotation")&&t.uint32(37).float(e.rotation),null!=e.pitch&&Object.hasOwnProperty.call(e,"pitch")&&t.uint32(45).float(e.pitch),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.ActionMoveLook;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.x=e.double();break;case 2:o.y=e.double();break;case 3:o.z=e.double();break;case 4:o.rotation=e.float();break;case 5:o.pitch=e.float();break;default:e.skipType(7&a)}}return o},r.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},r.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.x&&e.hasOwnProperty("x")&&"number"!=typeof e.x?"x: number expected":null!=e.y&&e.hasOwnProperty("y")&&"number"!=typeof e.y?"y: number expected":null!=e.z&&e.hasOwnProperty("z")&&"number"!=typeof e.z?"z: number expected":null!=e.rotation&&e.hasOwnProperty("rotation")&&"number"!=typeof e.rotation?"rotation: number expected":null!=e.pitch&&e.hasOwnProperty("pitch")&&"number"!=typeof e.pitch?"pitch: number expected":null},r.fromObject=function(e){if(e instanceof i.ActionMoveLook)return e;var t=new i.ActionMoveLook;return null!=e.x&&(t.x=Number(e.x)),null!=e.y&&(t.y=Number(e.y)),null!=e.z&&(t.z=Number(e.z)),null!=e.rotation&&(t.rotation=Number(e.rotation)),null!=e.pitch&&(t.pitch=Number(e.pitch)),t},r.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.x=0,n.y=0,n.z=0,n.rotation=0,n.pitch=0),null!=e.x&&e.hasOwnProperty("x")&&(n.x=t.json&&!isFinite(e.x)?String(e.x):e.x),null!=e.y&&e.hasOwnProperty("y")&&(n.y=t.json&&!isFinite(e.y)?String(e.y):e.y),null!=e.z&&e.hasOwnProperty("z")&&(n.z=t.json&&!isFinite(e.z)?String(e.z):e.z),null!=e.rotation&&e.hasOwnProperty("rotation")&&(n.rotation=t.json&&!isFinite(e.rotation)?String(e.rotation):e.rotation),null!=e.pitch&&e.hasOwnProperty("pitch")&&(n.pitch=t.json&&!isFinite(e.pitch)?String(e.pitch):e.pitch),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},r}(),i.ActionMessage=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.message="",o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(10).string(e.message),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.ActionMessage;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.message=e.string();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!r.isString(e.message)?"message: string expected":null},o.fromObject=function(e){if(e instanceof i.ActionMessage)return e;var t=new i.ActionMessage;return null!=e.message&&(t.message=String(e.message)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.message=""),null!=e.message&&e.hasOwnProperty("message")&&(n.message=e.message),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.ActionBlockPlace=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.x=0,o.prototype.y=0,o.prototype.z=0,o.prototype.x2=0,o.prototype.y2=0,o.prototype.z2=0,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(8).sint32(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(16).sint32(e.y),null!=e.z&&Object.hasOwnProperty.call(e,"z")&&t.uint32(24).sint32(e.z),null!=e.x2&&Object.hasOwnProperty.call(e,"x2")&&t.uint32(32).sint32(e.x2),null!=e.y2&&Object.hasOwnProperty.call(e,"y2")&&t.uint32(40).sint32(e.y2),null!=e.z2&&Object.hasOwnProperty.call(e,"z2")&&t.uint32(48).sint32(e.z2),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.ActionBlockPlace;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.x=e.sint32();break;case 2:o.y=e.sint32();break;case 3:o.z=e.sint32();break;case 4:o.x2=e.sint32();break;case 5:o.y2=e.sint32();break;case 6:o.z2=e.sint32();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.x&&e.hasOwnProperty("x")&&!r.isInteger(e.x)?"x: integer expected":null!=e.y&&e.hasOwnProperty("y")&&!r.isInteger(e.y)?"y: integer expected":null!=e.z&&e.hasOwnProperty("z")&&!r.isInteger(e.z)?"z: integer expected":null!=e.x2&&e.hasOwnProperty("x2")&&!r.isInteger(e.x2)?"x2: integer expected":null!=e.y2&&e.hasOwnProperty("y2")&&!r.isInteger(e.y2)?"y2: integer expected":null!=e.z2&&e.hasOwnProperty("z2")&&!r.isInteger(e.z2)?"z2: integer expected":null},o.fromObject=function(e){if(e instanceof i.ActionBlockPlace)return e;var t=new i.ActionBlockPlace;return null!=e.x&&(t.x=0|e.x),null!=e.y&&(t.y=0|e.y),null!=e.z&&(t.z=0|e.z),null!=e.x2&&(t.x2=0|e.x2),null!=e.y2&&(t.y2=0|e.y2),null!=e.z2&&(t.z2=0|e.z2),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.x=0,n.y=0,n.z=0,n.x2=0,n.y2=0,n.z2=0),null!=e.x&&e.hasOwnProperty("x")&&(n.x=e.x),null!=e.y&&e.hasOwnProperty("y")&&(n.y=e.y),null!=e.z&&e.hasOwnProperty("z")&&(n.z=e.z),null!=e.x2&&e.hasOwnProperty("x2")&&(n.x2=e.x2),null!=e.y2&&e.hasOwnProperty("y2")&&(n.y2=e.y2),null!=e.z2&&e.hasOwnProperty("z2")&&(n.z2=e.z2),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.ActionBlockBreak=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.x=0,o.prototype.y=0,o.prototype.z=0,o.prototype.finished=!1,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(8).sint32(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(16).sint32(e.y),null!=e.z&&Object.hasOwnProperty.call(e,"z")&&t.uint32(24).sint32(e.z),null!=e.finished&&Object.hasOwnProperty.call(e,"finished")&&t.uint32(32).bool(e.finished),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.ActionBlockBreak;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.x=e.sint32();break;case 2:o.y=e.sint32();break;case 3:o.z=e.sint32();break;case 4:o.finished=e.bool();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.x&&e.hasOwnProperty("x")&&!r.isInteger(e.x)?"x: integer expected":null!=e.y&&e.hasOwnProperty("y")&&!r.isInteger(e.y)?"y: integer expected":null!=e.z&&e.hasOwnProperty("z")&&!r.isInteger(e.z)?"z: integer expected":null!=e.finished&&e.hasOwnProperty("finished")&&"boolean"!=typeof e.finished?"finished: boolean expected":null},o.fromObject=function(e){if(e instanceof i.ActionBlockBreak)return e;var t=new i.ActionBlockBreak;return null!=e.x&&(t.x=0|e.x),null!=e.y&&(t.y=0|e.y),null!=e.z&&(t.z=0|e.z),null!=e.finished&&(t.finished=Boolean(e.finished)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.x=0,n.y=0,n.z=0,n.finished=!1),null!=e.x&&e.hasOwnProperty("x")&&(n.x=e.x),null!=e.y&&e.hasOwnProperty("y")&&(n.y=e.y),null!=e.z&&e.hasOwnProperty("z")&&(n.z=e.z),null!=e.finished&&e.hasOwnProperty("finished")&&(n.finished=e.finished),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.ActionInventoryClick=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var a,s;return o.prototype.slot=0,o.prototype.type=0,o.prototype.inventory=0,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.slot&&Object.hasOwnProperty.call(e,"slot")&&t.uint32(8).sint32(e.slot),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(16).int32(e.type),null!=e.inventory&&Object.hasOwnProperty.call(e,"inventory")&&t.uint32(24).int32(e.inventory),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.ActionInventoryClick;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.slot=e.sint32();break;case 2:o.type=e.int32();break;case 3:o.inventory=e.int32();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.slot&&e.hasOwnProperty("slot")&&!r.isInteger(e.slot))return"slot: integer expected";if(null!=e.type&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:}if(null!=e.inventory&&e.hasOwnProperty("inventory"))switch(e.inventory){default:return"inventory: enum value expected";case 0:case 1:case 2:case 3:}return null},o.fromObject=function(e){if(e instanceof i.ActionInventoryClick)return e;var t=new i.ActionInventoryClick;switch(null!=e.slot&&(t.slot=0|e.slot),e.type){case"LEFT":case 0:t.type=0;break;case"RIGHT":case 1:t.type=1;break;case"MIDDLE":case 2:t.type=2;break;case"SELECT":case 3:t.type=3}switch(e.inventory){case"MAIN":case 0:t.inventory=0;break;case"ARMOR":case 1:t.inventory=1;break;case"CRAFTING":case 2:t.inventory=2;break;case"HOOK":case 3:t.inventory=3}return t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.slot=0,n.type=t.enums===String?"LEFT":0,n.inventory=t.enums===String?"MAIN":0),null!=e.slot&&e.hasOwnProperty("slot")&&(n.slot=e.slot),null!=e.type&&e.hasOwnProperty("type")&&(n.type=t.enums===String?i.ActionInventoryClick.Type[e.type]:e.type),null!=e.inventory&&e.hasOwnProperty("inventory")&&(n.inventory=t.enums===String?i.ActionInventoryClick.TypeInv[e.inventory]:e.inventory),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o.Type=(a={},(s=Object.create(a))[a[0]="LEFT"]=0,s[a[1]="RIGHT"]=1,s[a[2]="MIDDLE"]=2,s[a[3]="SELECT"]=3,s),o.TypeInv=function(){var e={},t=Object.create(e);return t[e[0]="MAIN"]=0,t[e[1]="ARMOR"]=1,t[e[2]="CRAFTING"]=2,t[e[3]="HOOK"]=3,t}(),o}(),i.ActionInventoryPick=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.slot=0,o.prototype.slot2=0,o.prototype.block=0,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.slot&&Object.hasOwnProperty.call(e,"slot")&&t.uint32(8).sint32(e.slot),null!=e.slot2&&Object.hasOwnProperty.call(e,"slot2")&&t.uint32(16).sint32(e.slot2),null!=e.block&&Object.hasOwnProperty.call(e,"block")&&t.uint32(24).sint32(e.block),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.ActionInventoryPick;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.slot=e.sint32();break;case 2:o.slot2=e.sint32();break;case 3:o.block=e.sint32();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.slot&&e.hasOwnProperty("slot")&&!r.isInteger(e.slot)?"slot: integer expected":null!=e.slot2&&e.hasOwnProperty("slot2")&&!r.isInteger(e.slot2)?"slot2: integer expected":null!=e.block&&e.hasOwnProperty("block")&&!r.isInteger(e.block)?"block: integer expected":null},o.fromObject=function(e){if(e instanceof i.ActionInventoryPick)return e;var t=new i.ActionInventoryPick;return null!=e.slot&&(t.slot=0|e.slot),null!=e.slot2&&(t.slot2=0|e.slot2),null!=e.block&&(t.block=0|e.block),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.slot=0,n.slot2=0,n.block=0),null!=e.slot&&e.hasOwnProperty("slot")&&(n.slot=e.slot),null!=e.slot2&&e.hasOwnProperty("slot2")&&(n.slot2=e.slot2),null!=e.block&&e.hasOwnProperty("block")&&(n.block=e.block),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.ActionInventoryOpen=function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var o,a;return r.prototype.inventory=0,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=n.create()),null!=e.inventory&&Object.hasOwnProperty.call(e,"inventory")&&t.uint32(8).int32(e.inventory),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.ActionInventoryOpen;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.inventory=e.int32();break;default:e.skipType(7&a)}}return o},r.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},r.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.inventory&&e.hasOwnProperty("inventory"))switch(e.inventory){default:return"inventory: enum value expected";case 0:case 1:case 2:case 3:}return null},r.fromObject=function(e){if(e instanceof i.ActionInventoryOpen)return e;var t=new i.ActionInventoryOpen;switch(e.inventory){case"MAIN":case 0:t.inventory=0;break;case"CHEST":case 1:t.inventory=1;break;case"CRAFTING":case 2:t.inventory=2;break;case"FURNACE":case 3:t.inventory=3}return t},r.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.inventory=t.enums===String?"MAIN":0),null!=e.inventory&&e.hasOwnProperty("inventory")&&(n.inventory=t.enums===String?i.ActionInventoryOpen.Type[e.inventory]:e.inventory),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},r.Type=(o={},(a=Object.create(o))[o[0]="MAIN"]=0,a[o[1]="CHEST"]=1,a[o[2]="CRAFTING"]=2,a[o[3]="FURNACE"]=3,a),r}(),i.ActionInventoryClose=function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var o,a;return r.prototype.inventory=0,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=n.create()),null!=e.inventory&&Object.hasOwnProperty.call(e,"inventory")&&t.uint32(8).int32(e.inventory),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.ActionInventoryClose;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.inventory=e.int32();break;default:e.skipType(7&a)}}return o},r.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},r.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.inventory&&e.hasOwnProperty("inventory"))switch(e.inventory){default:return"inventory: enum value expected";case 0:case 1:case 2:case 3:}return null},r.fromObject=function(e){if(e instanceof i.ActionInventoryClose)return e;var t=new i.ActionInventoryClose;switch(e.inventory){case"MAIN":case 0:t.inventory=0;break;case"CHEST":case 1:t.inventory=1;break;case"CRAFTING":case 2:t.inventory=2;break;case"FURNACE":case 3:t.inventory=3}return t},r.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.inventory=t.enums===String?"MAIN":0),null!=e.inventory&&e.hasOwnProperty("inventory")&&(n.inventory=t.enums===String?i.ActionInventoryClose.Type[e.inventory]:e.inventory),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},r.Type=(o={},(a=Object.create(o))[o[0]="MAIN"]=0,a[o[1]="CHEST"]=1,a[o[2]="CRAFTING"]=2,a[o[3]="FURNACE"]=3,a),r}(),i.ActionClick=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.x=0,o.prototype.y=0,o.prototype.z=0,o.prototype.type="",o.prototype.onBlock=!1,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(8).sint32(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(16).sint32(e.y),null!=e.z&&Object.hasOwnProperty.call(e,"z")&&t.uint32(24).sint32(e.z),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(34).string(e.type),null!=e.onBlock&&Object.hasOwnProperty.call(e,"onBlock")&&t.uint32(40).bool(e.onBlock),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.ActionClick;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.x=e.sint32();break;case 2:o.y=e.sint32();break;case 3:o.z=e.sint32();break;case 4:o.type=e.string();break;case 5:o.onBlock=e.bool();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.x&&e.hasOwnProperty("x")&&!r.isInteger(e.x)?"x: integer expected":null!=e.y&&e.hasOwnProperty("y")&&!r.isInteger(e.y)?"y: integer expected":null!=e.z&&e.hasOwnProperty("z")&&!r.isInteger(e.z)?"z: integer expected":null!=e.type&&e.hasOwnProperty("type")&&!r.isString(e.type)?"type: string expected":null!=e.onBlock&&e.hasOwnProperty("onBlock")&&"boolean"!=typeof e.onBlock?"onBlock: boolean expected":null},o.fromObject=function(e){if(e instanceof i.ActionClick)return e;var t=new i.ActionClick;return null!=e.x&&(t.x=0|e.x),null!=e.y&&(t.y=0|e.y),null!=e.z&&(t.z=0|e.z),null!=e.type&&(t.type=String(e.type)),null!=e.onBlock&&(t.onBlock=Boolean(e.onBlock)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.x=0,n.y=0,n.z=0,n.type="",n.onBlock=!1),null!=e.x&&e.hasOwnProperty("x")&&(n.x=e.x),null!=e.y&&e.hasOwnProperty("y")&&(n.y=e.y),null!=e.z&&e.hasOwnProperty("z")&&(n.z=e.z),null!=e.type&&e.hasOwnProperty("type")&&(n.type=e.type),null!=e.onBlock&&e.hasOwnProperty("onBlock")&&(n.onBlock=e.onBlock),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.ActionClickEntity=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.uuid="",o.prototype.type="",o.prototype.distance=0,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(10).string(e.uuid),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(18).string(e.type),null!=e.distance&&Object.hasOwnProperty.call(e,"distance")&&t.uint32(29).float(e.distance),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.ActionClickEntity;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.uuid=e.string();break;case 2:o.type=e.string();break;case 3:o.distance=e.float();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.uuid&&e.hasOwnProperty("uuid")&&!r.isString(e.uuid)?"uuid: string expected":null!=e.type&&e.hasOwnProperty("type")&&!r.isString(e.type)?"type: string expected":null!=e.distance&&e.hasOwnProperty("distance")&&"number"!=typeof e.distance?"distance: number expected":null},o.fromObject=function(e){if(e instanceof i.ActionClickEntity)return e;var t=new i.ActionClickEntity;return null!=e.uuid&&(t.uuid=String(e.uuid)),null!=e.type&&(t.type=String(e.type)),null!=e.distance&&(t.distance=Number(e.distance)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.uuid="",n.type="",n.distance=0),null!=e.uuid&&e.hasOwnProperty("uuid")&&(n.uuid=e.uuid),null!=e.type&&e.hasOwnProperty("type")&&(n.type=e.type),null!=e.distance&&e.hasOwnProperty("distance")&&(n.distance=t.json&&!isFinite(e.distance)?String(e.distance):e.distance),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.ActionKeyPress=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.key="",o.prototype.type=!1,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(16).bool(e.type),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.ActionKeyPress;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.key=e.string();break;case 2:o.type=e.bool();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.key&&e.hasOwnProperty("key")&&!r.isString(e.key)?"key: string expected":null!=e.type&&e.hasOwnProperty("type")&&"boolean"!=typeof e.type?"type: boolean expected":null},o.fromObject=function(e){if(e instanceof i.ActionKeyPress)return e;var t=new i.ActionKeyPress;return null!=e.key&&(t.key=String(e.key)),null!=e.type&&(t.type=Boolean(e.type)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.key="",n.type=!1),null!=e.key&&e.hasOwnProperty("key")&&(n.key=e.key),null!=e.type&&e.hasOwnProperty("type")&&(n.type=e.type),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.WorldChunkIsLoadedResponce=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.x=0,o.prototype.y=0,o.prototype.z=0,o.prototype.loaded=!1,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(8).sint32(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(16).sint32(e.y),null!=e.z&&Object.hasOwnProperty.call(e,"z")&&t.uint32(24).sint32(e.z),null!=e.loaded&&Object.hasOwnProperty.call(e,"loaded")&&t.uint32(32).bool(e.loaded),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.WorldChunkIsLoadedResponce;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.x=e.sint32();break;case 2:o.y=e.sint32();break;case 3:o.z=e.sint32();break;case 4:o.loaded=e.bool();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.x&&e.hasOwnProperty("x")&&!r.isInteger(e.x)?"x: integer expected":null!=e.y&&e.hasOwnProperty("y")&&!r.isInteger(e.y)?"y: integer expected":null!=e.z&&e.hasOwnProperty("z")&&!r.isInteger(e.z)?"z: integer expected":null!=e.loaded&&e.hasOwnProperty("loaded")&&"boolean"!=typeof e.loaded?"loaded: boolean expected":null},o.fromObject=function(e){if(e instanceof i.WorldChunkIsLoadedResponce)return e;var t=new i.WorldChunkIsLoadedResponce;return null!=e.x&&(t.x=0|e.x),null!=e.y&&(t.y=0|e.y),null!=e.z&&(t.z=0|e.z),null!=e.loaded&&(t.loaded=Boolean(e.loaded)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.x=0,n.y=0,n.z=0,n.loaded=!1),null!=e.x&&e.hasOwnProperty("x")&&(n.x=e.x),null!=e.y&&e.hasOwnProperty("y")&&(n.y=e.y),null!=e.z&&e.hasOwnProperty("z")&&(n.z=e.z),null!=e.loaded&&e.hasOwnProperty("loaded")&&(n.loaded=e.loaded),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.PluginMessage=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.key="",o.prototype.version=0,o.prototype.value=r.newBuffer([]),o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(16).uint32(e.version),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(26).bytes(e.value),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.PluginMessage;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.key=e.string();break;case 2:o.version=e.uint32();break;case 3:o.value=e.bytes();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.key&&e.hasOwnProperty("key")&&!r.isString(e.key)?"key: string expected":null!=e.version&&e.hasOwnProperty("version")&&!r.isInteger(e.version)?"version: integer expected":null!=e.value&&e.hasOwnProperty("value")&&!(e.value&&"number"==typeof e.value.length||r.isString(e.value))?"value: buffer expected":null},o.fromObject=function(e){if(e instanceof i.PluginMessage)return e;var t=new i.PluginMessage;return null!=e.key&&(t.key=String(e.key)),null!=e.version&&(t.version=e.version>>>0),null!=e.value&&("string"==typeof e.value?r.base64.decode(e.value,t.value=r.newBuffer(r.base64.length(e.value)),0):e.value.length&&(t.value=e.value)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.key="",n.version=0,t.bytes===String?n.value="":(n.value=[],t.bytes!==Array&&(n.value=r.newBuffer(n.value)))),null!=e.key&&e.hasOwnProperty("key")&&(n.key=e.key),null!=e.version&&e.hasOwnProperty("version")&&(n.version=e.version),null!=e.value&&e.hasOwnProperty("value")&&(n.value=t.bytes===String?r.base64.encode(e.value,0,e.value.length):t.bytes===Array?Array.prototype.slice.call(e.value):e.value),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i})?r.apply(t,i):r)||(e.exports=o)},,,,,,function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return h})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return p}));var r=n(67),i=n(4),o=n(80),a=n(20);let s,u,l=[],c=0,f=!1;function h(e){f=e}function d(){for(c=0,s=new a.f;0!=l.length;)l[0].dispose(),l.shift();s.width=100,s.horizontalAlignment=0,s.verticalAlignment=1,s.zIndex=10,s.height="36px",s.color="white",s.background="#111111aa",s.focusedBackground="#111111bb",s.thickness=0,s.isVisible=!1,s.shadowColor="",s.fontSize="32",s.promptMessage="Enter chat message",Object(i.c)(2).addControl(s),u=new a.j,r.isMobile?(u.verticalAlignment=0,u.horizontalAlignment=1,u.width=140*i.e+"px"):(u.verticalAlignment=1,u.horizontalAlignment=0,u.top=-26*i.e+"px",u.width=176*i.e+"px"),u.name="textContainer",u.useBitmapCache=!0,u.zIndex=10,u.background="#11111177",u.height=0,Object(i.c)(1).addControl(u);const e=e=>{r.isMobile?u.width=140*i.e+"px":(u.top=-26*e+"px",u.width=176*e+"px"),l.forEach(t=>{t.fontSize=8*e,t.paddingLeft=2*e+"px",r.isMobile?t.width=140*e+"px":t.width=176*e+"px",t.height=t.computeExpectedHeight()+"px"}),m()};i.b.on("scale-change",e);const t=setInterval(async()=>{if(f){let e=0;l.forEach(t=>{t.shouldhide&&!t.isVisible&&(t.isVisible=!0,e+=1)}),0!=e&&m()}else{let e=0;l.forEach(t=>{t.shouldhide&&t.isVisible&&(t.isVisible=!1),e+=1}),0!=e&&m()}},100);u.onDisposeObservable.add(()=>{for(clearInterval(t);0!=l.length;)l[0].dispose(),l.shift();c=0,i.b.off("scale-change",e)})}async function p(e){const t=Object.values(e);let n="";t.forEach(e=>{n+=e.text});const a=new o.a;for(a.fontSize=8*i.e,a.paddingLeft=2*i.e+"px",a.textVerticalAlignment=1,a.textHorizontalAlignment=0,a.fontFamily="Lato",a.color="white",r.isMobile?a.width=140*i.e+"px":a.width=176*i.e+"px",a.zIndex=11,a.text=t,a.height=a.computeExpectedHeight()+"px",a.useBitmapCache=!0,l.unshift(a),u.addControl(a);l.length>50;)l[l.length-1].dispose(),l.pop();setInterval(async()=>{a.shouldhide=!0,f||(a.isVisible=!1),m()},8e3),m(),console.log("Chat: "+n)}function m(){c=0,l.forEach(e=>{!f&&e.isVisible&&c>200*i.e?(e.shouldhide=!0,e.isVisible=!1):e.isVisible&&(c+=e.heightInPixels)}),0!=c?(u.height=c+5+"px",u.isVisible=!0):u.isVisible&&(u.isVisible=!1)}},,,,,,,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return l}));var r=n(4),i=n(80),o=n(20);function a(e=100,t=10,n=18){const a=new o.g;a.width=e*r.e+"px",a.height=n*r.e+"px",a.isPointerBlocker=!0,a.horizontalAlignment=2,a.thickness=0,a.paddingBottom="10px",a.zIndex=10;const s=new i.a;s.text=[{text:"MenuItemText",color:"white",font:"Lato"}],s.fontSize=t*r.e,s.textHorizontalAlignment=2,a.addControl(s),a.onPointerEnterObservable.add(e=>{s.text.forEach(e=>e.underline=!0),s._markAsDirty()}),a.onPointerOutObservable.add(e=>{s.text.forEach(e=>e.underline=!1),s._markAsDirty()});const u=i=>{a.width=e*r.e+"px",a.height=n*r.e+"px",s.fontSize=t*r.e};return r.b.on("scale-change",u),a.onDisposeObservable.add(()=>{r.b.off("scale-change",u)}),{item:a,text:s}}function s(e=!1){const t=new o.g;t.height=28*r.e+"px",t.adaptWidthToChildren=!0,t.thickness=0;const n=new o.k;n.fontFamily="Lato",n.fontSize=9*r.e,n.textVerticalAlignment=0,n.color="white",n.text="Input",n.top=r.e,n.verticalAlignment=0,t.addControl(n);const i=e?new o.e:new o.f;i.thickness=0,i.background="#ffffffaa",i.focusedBackground="#ffffffff",i.placeholderText="Placeholder",i.color="#666666",i.verticalAlignment=0,i.height=15*r.e+"px",i.width=100*r.e+"px",i.top=14*r.e+"px",t.addControl(i);const a=e=>{t.height=28*r.e+"px",n.fontSize=9*r.e,i.height=15*r.e+"px",i.width=100*r.e+"px",i.top=14*r.e+"px"};return r.b.on("scale-change",a),t.onDisposeObservable.add(()=>{r.b.off("scale-change",a)}),{main:t,name:n,input:i}}function u(){const e=new o.g;e.height=28*r.e+"px",e.adaptWidthToChildren=!0,e.thickness=0;const t=new o.k;t.fontFamily="Lato",t.fontSize=9*r.e,t.textVerticalAlignment=0,t.color="white",t.text="Slider",t.top=r.e,t.verticalAlignment=0,e.addControl(t);const n=new o.i;n.minimum=0,n.maximum=100,n.value=0,n.height=13*r.e+"px",n.width=100*r.e+"px",n.top=14*r.e+"px",n.verticalAlignment=0,n.color="#666666",n.thumbColor="#888888",n.background="#ffffffaa",n.borderColor="#00000000",n.barOffset=6,e.addControl(n);const i=i=>{e.height=28*r.e+"px",t.fontSize=9*r.e,n.height=13*r.e+"px",n.width=100*r.e+"px",n.top=14*r.e+"px"};return r.b.on("scale-change",i),e.onDisposeObservable.add(()=>{r.b.off("scale-change",i)}),{main:e,name:t,slider:n}}function l(e=64,t){const n=new o.g;n.height=17*r.e+"px",n.width=e*r.e+"px",n.verticalAlignment=0,n.horizontalAlignment=0,n.thickness=0,n.background="#4d4d4daa",n.color="#666666";const a=new i.a;a.text=[{text:"Text",color:"white",font:"Lato"}],a.textHorizontalAlignment=2,a.fontSize=6*r.e,a.onPointerEnterObservable.add(e=>{a.text.forEach(e=>e.underline=!0),a._markAsDirty()}),a.onPointerOutObservable.add(e=>{a.text.forEach(e=>e.underline=!1),a._markAsDirty()}),n.addControl(a),t&&n.onPointerClickObservable.add(t);const s=t=>{n.height=17*r.e+"px",n.width=e*r.e+"px",a.fontSize=6*r.e};return r.b.on("scale-change",s),n.onDisposeObservable.add(()=>{r.b.off("scale-change",s)}),{button:n,buttonText:a}}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,l=[],c=!1,f=-1;function h(){c&&u&&(c=!1,u.length?l=u.concat(l):f=-1,l.length&&d())}function d(){if(!c){var e=s(h);c=!0;for(var t=l.length;t;){for(u=l,l=[];++f<t;)u&&u[f].run();f=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return s}));var r=n(158);let i=r.a;function o(e){i=Object(r.b)(i,e)}function a(e){return i.deserialize(e)}function s(e){return i.serialize(e)}},,function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(){void 0!==o&&e.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==t&&(o=function(n){e.removeListener(t,i),r(n)},e.once("error",o)),e.once(t,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,o,a,s;if(l(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):y(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else{var l=u.length,c=y(u,l);for(n=0;n<l;++n)o(c[n],this,t)}return!0},s.prototype.addListener=function(e,t){return f(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return f(this,e,t,!0)},s.prototype.once=function(e,t){return l(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,o,a;if(l(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},,function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";var r={MOBILE:"mobile",TABLET:"tablet",SMART_TV:"smarttv",CONSOLE:"console",WEARABLE:"wearable",BROWSER:void 0};e.exports={BROWSER_TYPES:{CHROME:"Chrome",FIREFOX:"Firefox",OPERA:"Opera",YANDEX:"Yandex",SAFARI:"Safari",INTERNET_EXPLORER:"Internet Explorer",EDGE:"Edge",CHROMIUM:"Chromium",IE:"IE",MOBILE_SAFARI:"Mobile Safari",EDGE_CHROMIUM:"Edge Chromium"},DEVICE_TYPES:r,OS_TYPES:{IOS:"iOS",ANDROID:"Android",WINDOWS_PHONE:"Windows Phone",WINDOWS:"Windows",MAC_OS:"Mac OS"},defaultData:{isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1}}},function(e,t,n){"use strict";var r,i=n(2),o=n(0),a=o.BROWSER_TYPES,s=o.OS_TYPES,u=o.DEVICE_TYPES,l=n(4),c=l.checkType,f=l.broPayload,h=l.mobilePayload,d=l.wearPayload,p=l.consolePayload,m=l.stvPayload,y=l.getNavigatorInstance,v=l.isIOS13Check,g=new i,b=g.getBrowser(),w=g.getDevice(),_=g.getEngine(),k=g.getOS(),x=g.getUA(),O=a.CHROME,P=a.CHROMIUM,S=a.IE,E=a.INTERNET_EXPLORER,j=a.OPERA,C=a.FIREFOX,T=a.SAFARI,A=a.EDGE,z=a.YANDEX,I=a.MOBILE_SAFARI,D=u.MOBILE,R=u.TABLET,B=u.SMART_TV,M=u.BROWSER,L=u.WEARABLE,F=u.CONSOLE,N=s.ANDROID,U=s.WINDOWS_PHONE,$=s.IOS,V=s.WINDOWS,q=s.MAC_OS,W=function(){return k.name===s.WINDOWS&&"10"===k.version&&("string"==typeof x&&-1!==x.indexOf("Edg/"))},H=function(){return b.name===A},K=function(){return v("iPad")},G=w.type===B,J=w.type===F,Z=w.type===L,Y=b.name===I||K(),Q=b.name===P,X=function(){switch(w.type){case D:case R:return!0;default:return!1}}()||K(),ee=w.type===D,te=w.type===R||K(),ne=w.type===M,re=k.name===N,ie=k.name===U,oe=k.name===$||K(),ae=b.name===O,se=b.name===C,ue=b.name===T||b.name===I,le=b.name===j,ce=b.name===E||b.name===S,fe=k.version?k.version:"none",he=k.name?k.name:"none",de=b.major,pe=b.version,me=b.name,ye=w.vendor?w.vendor:"none",ve=w.model?w.model:"none",ge=_.name,be=_.version,we=x,_e=H()||W(),ke=b.name===z,xe=w.type,Oe=(r=y())&&(/iPad|iPhone|iPod/.test(r.platform)||"MacIntel"===r.platform&&r.maxTouchPoints>1)&&!window.MSStream,Pe=K(),Se=v("iPhone"),Ee=v("iPod"),je=function(){var e=y(),t=e&&e.userAgent.toLowerCase();return"string"==typeof t&&/electron/.test(t)}(),Ce=W(),Te=H(),Ae=k.name===V,ze=k.name===q,Ie=c(w.type);e.exports={deviceDetect:function(){var e=Ie.isBrowser,t=Ie.isMobile,n=Ie.isTablet,r=Ie.isSmartTV,i=Ie.isConsole,o=Ie.isWearable;return e?f(e,b,_,k,x):r?m(r,_,k,x):i?p(i,_,k,x):t||n?h(Ie,w,k,x):o?d(o,_,k,x):void 0},isSmartTV:G,isConsole:J,isWearable:Z,isMobileSafari:Y,isChromium:Q,isMobile:X,isMobileOnly:ee,isTablet:te,isBrowser:ne,isAndroid:re,isWinPhone:ie,isIOS:oe,isChrome:ae,isFirefox:se,isSafari:ue,isOpera:le,isIE:ce,osVersion:fe,osName:he,fullBrowserVersion:de,browserVersion:pe,browserName:me,mobileVendor:ye,mobileModel:ve,engineName:ge,engineVersion:be,getUA:we,isEdge:_e,isYandex:ke,deviceType:xe,isIOS13:Oe,isIPad13:Pe,isIPhone13:Se,isIPod13:Ee,isElectron:je,isEdgeChromium:Ce,isLegacyEdge:Te,isWindows:Ae,isMacOs:ze}},function(e,t,n){var r;
/*!
 * UAParser.js v0.7.18
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>
 * Dual licensed under GPLv2 or MIT
 */!function(i,o){"use strict";var a="model",s="name",u="type",l="vendor",c="version",f="mobile",h="tablet",d={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},p={rgx:function(e,t){for(var n,r,i,o,a,s,u=0;u<t.length&&!a;){var l=t[u],c=t[u+1];for(n=r=0;n<l.length&&!a;)if(a=l[n++].exec(e))for(i=0;i<c.length;i++)s=a[++r],"object"==typeof(o=c[i])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;u+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(d.has(t[n][r],e))return"?"===n?void 0:n}else if(d.has(t[n],e))return"?"===n?void 0:n;return e}},m={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},y={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,c],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],c],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],c],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[s,c],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],c],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[s,"Edge"],c],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],c],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],c],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],c],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],c],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],c],[/(qqbrowserlite)\/([\w\.]+)/i],[s,c],[/(QQ)\/([\d\.]+)/i],[s,c],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,c],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[s,c],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[s,c],[/(MetaSr)[\/\s]?([\w\.]+)/i],[s],[/(LBBROWSER)/i],[s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[c,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[c,[s,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[c,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],c],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],c],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[c,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,c],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],c],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],c],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],c],[/fxios\/([\w\.-]+)/i],[c,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[c,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[c,s],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],c],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[c,p.str,m.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[s,c],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],c],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,c]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",d.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",d.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",d.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[a,l,[u,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[a,[l,"Apple"],[u,h]],[/(apple\s{0,1}tv)/i],[[a,"Apple TV"],[l,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,a,[u,h]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[a,[l,"Amazon"],[u,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[a,p.str,m.device.amazon.model],[l,"Amazon"],[u,f]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,l,[u,f]],[/\((ip[honed|\s\w*]+);/i],[a,[l,"Apple"],[u,f]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,a,[u,f]],[/\(bb10;\s(\w+)/i],[a,[l,"BlackBerry"],[u,f]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[a,[l,"Asus"],[u,h]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[l,"Sony"],[a,"Xperia Tablet"],[u,h]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[a,[l,"Sony"],[u,f]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[l,a,[u,"console"]],[/android.+;\s(shield)\sbuild/i],[a,[l,"Nvidia"],[u,"console"]],[/(playstation\s[34portablevi]+)/i],[a,[l,"Sony"],[u,"console"]],[/(sprint\s(\w+))/i],[[l,p.str,m.device.sprint.vendor],[a,p.str,m.device.sprint.model],[u,f]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[l,a,[u,h]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[l,[a,/_/g," "],[u,f]],[/(nexus\s9)/i],[a,[l,"HTC"],[u,h]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[a,[l,"Huawei"],[u,f]],[/(microsoft);\s(lumia[\s\w]+)/i],[l,a,[u,f]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[a,[l,"Microsoft"],[u,"console"]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[l,"Microsoft"],[u,f]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[a,[l,"Motorola"],[u,f]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[l,"Motorola"],[u,h]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[l,d.trim],[a,d.trim],[u,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[l,"Samsung"],[u,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[a,[l,"Sharp"],[u,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[l,"Samsung"],a,[u,h]],[/smart-tv.+(samsung)/i],[l,[u,"smarttv"],a],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[l,"Samsung"],a,[u,f]],[/sie-(\w*)/i],[a,[l,"Siemens"],[u,f]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[l,"Nokia"],a,[u,f]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[a,[l,"Acer"],[u,h]],[/android.+([vl]k\-?\d{3})\s+build/i],[a,[l,"LG"],[u,h]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],a,[u,h]],[/(lg) netcast\.tv/i],[l,a,[u,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[a,[l,"LG"],[u,f]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[a,[l,"Lenovo"],[u,h]],[/linux;.+((jolla));/i],[l,a,[u,f]],[/((pebble))app\/[\d\.]+\s/i],[l,a,[u,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[l,a,[u,f]],[/crkey/i],[[a,"Chromecast"],[l,"Google"]],[/android.+;\s(glass)\s\d/i],[a,[l,"Google"],[u,"wearable"]],[/android.+;\s(pixel c)\s/i],[a,[l,"Google"],[u,h]],[/android.+;\s(pixel xl|pixel)\s/i],[a,[l,"Google"],[u,f]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[l,"Xiaomi"],[u,f]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[l,"Xiaomi"],[u,h]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[a,[l,"Meizu"],[u,h]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[a,[l,"OnePlus"],[u,f]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[a,[l,"RCA"],[u,h]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[a,[l,"Dell"],[u,h]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[a,[l,"Verizon"],[u,h]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[l,"Barnes & Noble"],a,[u,h]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[a,[l,"NuVision"],[u,h]],[/android.+;\s(k88)\sbuild/i],[a,[l,"ZTE"],[u,h]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[a,[l,"Swiss"],[u,f]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[a,[l,"Swiss"],[u,h]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[a,[l,"Zeki"],[u,h]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[l,"Dragon Touch"],a,[u,h]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[a,[l,"Insignia"],[u,h]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[a,[l,"NextBook"],[u,h]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[l,"Voice"],a,[u,f]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[l,"LvTel"],a,[u,f]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[a,[l,"Envizen"],[u,h]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[l,a,[u,h]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[a,[l,"MachSpeed"],[u,h]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[l,a,[u,h]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[a,[l,"Rotor"],[u,h]],[/android.+(KS(.+))\s+build/i],[a,[l,"Amazon"],[u,h]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[l,a,[u,h]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,d.lowerize],l,a],[/(android[\w\.\s\-]{0,9});.+build/i],[a,[l,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[c,[s,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,c],[/rv\:([\w\.]{1,9}).+(gecko)/i],[c,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,c],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[c,p.str,m.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[c,p.str,m.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],c],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[s,c],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[s,"Symbian"],c],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],c],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[s,c],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],c],[/(sunos)\s?([\w\.\d]*)/i],[[s,"Solaris"],c],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[s,c],[/(haiku)\s(\w+)/i],[s,c],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[c,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[c,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[s,c]]},v=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof v))return new v(e,t).getResult();var n=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),r=t?d.extend(y,t):y;return this.getBrowser=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,n,r.browser),e.major=d.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return p.rgx.call(e,n,r.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return p.rgx.call(e,n,r.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,n,r.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};v.VERSION="0.7.18",v.BROWSER={NAME:s,MAJOR:"major",VERSION:c},v.CPU={ARCHITECTURE:"architecture"},v.DEVICE={MODEL:a,VENDOR:l,TYPE:u,CONSOLE:"console",MOBILE:f,SMARTTV:"smarttv",TABLET:h,WEARABLE:"wearable",EMBEDDED:"embedded"},v.ENGINE={NAME:s,VERSION:c},v.OS={NAME:s,VERSION:c},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=v),t.UAParser=v):n(3)?void 0===(r=function(){return v}.call(t,n,t,e))||(e.exports=r):i&&(i.UAParser=v);var g=i&&(i.jQuery||i.Zepto);if(void 0!==g){var b=new v;g.ua=b.getResult(),g.ua.get=function(){return b.getUA()},g.ua.set=function(e){b.setUA(e);var t=b.getResult();for(var n in t)g.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0),o=i.DEVICE_TYPES,a=i.defaultData,s=t.getNavigatorInstance=function(){return!("undefined"==typeof window||!window.navigator&&!navigator)&&(window.navigator||navigator)},u=t.isIOS13Check=function(e){var t=s();return t&&t.platform&&(-1!==t.platform.indexOf(e)||"MacIntel"===t.platform&&t.maxTouchPoints>1&&!window.MSStream)};e.exports={checkType:function(e){switch(e){case o.MOBILE:return{isMobile:!0};case o.TABLET:return{isTablet:!0};case o.SMART_TV:return{isSmartTV:!0};case o.CONSOLE:return{isConsole:!0};case o.WEARABLE:return{isWearable:!0};case o.BROWSER:return{isBrowser:!0};default:return a}},broPayload:function(e,t,n,r,i){return{isBrowser:e,browserMajorVersion:t.major,browserFullVersion:t.version,browserName:t.name,engineName:n.name||!1,engineVersion:n.version,osName:r.name,osVersion:r.version,userAgent:i}},mobilePayload:function(e,t,n,i){return r({},e,{vendor:t.vendor,model:t.model,os:n.name,osVersion:n.version,ua:i})},stvPayload:function(e,t,n,r){return{isSmartTV:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},consolePayload:function(e,t,n,r){return{isConsole:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},wearPayload:function(e,t,n,r){return{isWearable:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},getNavigatorInstance:s,isIOS13Check:u}}])},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return s}));const r=Symbol("thread.errors"),i=Symbol("thread.events"),o=Symbol("thread.terminate"),a=Symbol("thread.transferable"),s=Symbol("thread.worker")},function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},a={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(r)},,,,,,function(e,t,n){e.exports={EPSILON:n(235),create:n(236),clone:n(348),angle:n(349),fromValues:n(237),copy:n(350),set:n(351),equals:n(352),exactEquals:n(353),add:n(354),subtract:n(240),sub:n(355),multiply:n(241),mul:n(356),divide:n(242),div:n(357),min:n(358),max:n(359),floor:n(360),ceil:n(361),round:n(362),scale:n(363),scaleAndAdd:n(364),distance:n(243),dist:n(365),squaredDistance:n(244),sqrDist:n(366),length:n(245),len:n(367),squaredLength:n(246),sqrLen:n(368),negate:n(369),inverse:n(370),normalize:n(238),dot:n(239),cross:n(371),lerp:n(372),random:n(373),transformMat4:n(374),transformMat3:n(375),transformQuat:n(376),rotateX:n(377),rotateY:n(378),rotateZ:n(379),forEach:n(380)}},function(e,t,n){var r=n(247),i=n(248),o="undefined"!=typeof Float64Array;function a(e,t){return e[0]-t[0]}function s(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(a);var r=new Array(n.length);for(e=0;e<r.length;++e)r[e]=n[e][1];return r}function u(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var i="generic"===e;if(-1===t){var o="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return new Function(o)()}if(0===t){o="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}";return new Function("TrivialArray",o)(l[e][0])}o=["'use strict'"];var a=r(t),u=a.map((function(e){return"i"+e})),c="this.offset+"+a.map((function(e){return"this.stride["+e+"]*i"+e})).join("+"),f=a.map((function(e){return"b"+e})).join(","),h=a.map((function(e){return"c"+e})).join(",");o.push("function "+n+"(a,"+f+","+h+",d){this.data=a","this.shape=["+f+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),o.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+a.map((function(e){return"this.shape["+e+"]"})).join("*"),"}})"),1===t?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),t<4?(o.push("function "+n+"_order(){"),2===t?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+n+"_set("+u.join(",")+",v){"),i?o.push("return this.data.set("+c+",v)}"):o.push("return this.data["+c+"]=v}"),o.push("proto.get=function "+n+"_get("+u.join(",")+"){"),i?o.push("return this.data.get("+c+")}"):o.push("return this.data["+c+"]}"),o.push("proto.index=function "+n+"_index(",u.join(),"){return "+c+"}"),o.push("proto.hi=function "+n+"_hi("+u.join(",")+"){return new "+n+"(this.data,"+a.map((function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")})).join(",")+","+a.map((function(e){return"this.stride["+e+"]"})).join(",")+",this.offset)}");var d=a.map((function(e){return"a"+e+"=this.shape["+e+"]"})),p=a.map((function(e){return"c"+e+"=this.stride["+e+"]"}));o.push("proto.lo=function "+n+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+p.join(","));for(var m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");o.push("return new "+n+"(this.data,"+a.map((function(e){return"a"+e})).join(",")+","+a.map((function(e){return"c"+e})).join(",")+",b)}"),o.push("proto.step=function "+n+"_step("+u.join(",")+"){var "+a.map((function(e){return"a"+e+"=this.shape["+e+"]"})).join(",")+","+a.map((function(e){return"b"+e+"=this.stride["+e+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");o.push("return new "+n+"(this.data,"+a.map((function(e){return"a"+e})).join(",")+","+a.map((function(e){return"b"+e})).join(",")+",c)}");var y=new Array(t),v=new Array(t);for(m=0;m<t;++m)y[m]="a[i"+m+"]",v[m]="b[i"+m+"]";o.push("proto.transpose=function "+n+"_transpose("+u+"){"+u.map((function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+y.join(",")+","+v.join(",")+",this.offset)}"),o.push("proto.pick=function "+n+"_pick("+u+"){var a=[],b=[],c=this.offset");for(m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");return o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+a.map((function(e){return"shape["+e+"]"})).join(",")+","+a.map((function(e){return"stride["+e+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",o.join("\n"))(l[e],s)}var l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};e.exports=function(e,t,n,r){if(void 0===e)return(0,l.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var a=t.length;if(void 0===n){n=new Array(a);for(var s=a-1,c=1;s>=0;--s)n[s]=c,c*=t[s]}if(void 0===r){r=0;for(s=0;s<a;++s)n[s]<0&&(r-=(t[s]-1)*n[s])}for(var f=function(e){if(i(e))return"buffer";if(o)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}(e),h=l[f];h.length<=a+1;)h.push(u(f,h.length-1));return(0,h[a+1])(e,t,n,r)}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(5),i=n(37),o=n(23);class a extends o.a{constructor(e,t=[]){super(e),this.name=e,this._text=[],this._textPos=[],this._textHorizontalAlignment=o.a.HORIZONTAL_ALIGNMENT_CENTER,this._textVerticalAlignment=o.a.VERTICAL_ALIGNMENT_CENTER,this._resizeToFit=!1,this._lineSpacing=new i.a(0),this.shouldhide=!1,this.onTextChangedObservable=new r.c,this.onLinesReadyObservable=new r.c,this.text=t}get getTextAreas(){return this._textPos}get lines(){return this._lines}get resizeToFit(){return this._resizeToFit}set resizeToFit(e){this._resizeToFit!==e&&(this._resizeToFit=e,this._resizeToFit&&(this._width.ignoreAdaptiveScaling=!0,this._height.ignoreAdaptiveScaling=!0),this._markAsDirty())}get text(){return this._text}set text(e){this._text!==e&&(this._text=e,this._markAsDirty(),this.onTextChangedObservable.notifyObservers(this))}get textHorizontalAlignment(){return this._textHorizontalAlignment}set textHorizontalAlignment(e){this._textHorizontalAlignment!==e&&(this._textHorizontalAlignment=e,this._markAsDirty())}get textVerticalAlignment(){return this._textVerticalAlignment}set textVerticalAlignment(e){this._textVerticalAlignment!==e&&(this._textVerticalAlignment=e,this._markAsDirty())}set lineSpacing(e){this._lineSpacing.fromString(e)&&this._markAsDirty()}get lineSpacing(){return this._lineSpacing.toString(this._host)}_getTypeName(){return"FormTextBlock"}_processMeasures(e,t){this._fontOffset||(this._fontOffset=o.a._GetFontOffset(t.font)),super._processMeasures(e,t),this._lines=this._breakLines(this._currentMeasure.width,t),this.onLinesReadyObservable.notifyObservers(this);let n=0;for(let e=0;e<this._lines.length;e++){const t=this._lines[e];t.width>n&&(n=t.width)}if(this._resizeToFit){let e=this.paddingTopInPixels+this.paddingBottomInPixels+this._fontOffset.height*this._lines.length|0;if(this._lines.length>0&&0!==this._lineSpacing.internalValue){let t=0;t=this._lineSpacing.isPixel?this._lineSpacing.getValue(this._host):this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height),e+=(this._lines.length-1)*t}e!==this._height.internalValue&&(this._height.updateInPlace(e,i.a.UNITMODE_PIXEL),this._rebuildLayout=!0)}}_drawText(e,t,n,r,i){var a=this._currentMeasure.width,s=0;switch(this._textHorizontalAlignment){case o.a.HORIZONTAL_ALIGNMENT_LEFT:s=0;break;case o.a.HORIZONTAL_ALIGNMENT_RIGHT:s=a-t;break;case o.a.HORIZONTAL_ALIGNMENT_CENTER:s=(a-t)/2}if((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(r.shadowColor=this.shadowColor,r.shadowBlur=this.shadowBlur,r.shadowOffsetX=this.shadowOffsetX,r.shadowOffsetY=this.shadowOffsetY),null==e)return;const u=r.fillStyle,l=r.font,c=r.strokeStyle,f=r.lineWidth;e.forEach(e=>{if(null==e.text)return;null==e.ref.font&&(e.ref.font=l),r.font=`${this.fontSize} ${e.ref.font}`,r.fillStyle=e.ref.color||u;const t=r.measureText(e.text);r.lineWidth=Math.round(.05*this.fontSizeInPixels),r.lineCap="square",r.strokeStyle=r.fillStyle,e.ref.underline&&(r.beginPath(),r.moveTo(this._currentMeasure.left+s,n+3),r.lineTo(this._currentMeasure.left+s+t.width,n+3),r.stroke(),r.closePath()),r.fillText(e.text,this._currentMeasure.left+s,n),e.ref.linethrough&&(r.beginPath(),r.moveTo(this._currentMeasure.left+s,n-this.fontSizeInPixels/3),r.lineTo(this._currentMeasure.left+s+t.width,n-this.fontSizeInPixels/3),r.stroke(),r.closePath()),r.font=l,r.strokeStyle=c,r.lineWidth=f;const o={x1:this._currentMeasure.left+s,x2:this._currentMeasure.left+s+t.width,y1:n,y2:n-this.fontSizeInPixels,text:e.text,ref:e.ref};i.push(o),s+=t.width}),r.fillStyle=u,r.font=l,r.strokeStyle=c,r.lineWidth=f}_draw(e,t){e.save(),this._applyStates(e),this._renderLines(e),e.restore()}_applyStates(e){super._applyStates(e)}_breakLines(e,t){var n=[];let r=[[]];for(var i of(this.text.forEach(e=>{let t=e.text.split("\n");if(t.length>1){r[r.length-1].push({text:t[0],ref:e});for(let n=1;n<t.length;n++)r.push([{text:t[n],ref:e}])}else r[r.length-1].push({text:e.text,ref:e})}),r))n.push(...this._parseLineWordWrap(i,e,t));return n}_parseLine(e="",t){return{text:e,width:t.measureText(e).width}}_parseLineWordWrap(e=[],t,n){var r=[],i=[],o="";let a=this.fontFamily;e.forEach(e=>{null==e.ref.font&&(e.ref.font=a),e.text.split(" ").forEach(r=>{if(0==r.length)return;n.font=`${this.fontSize} ${e.ref.font}`;let o=n.measureText(r);if(n.font=a,o.width<t)i.push({text:r+" ",ref:e});else{const s=r.substring(0,Math.ceil(r.length/2)),u=r.substring(Math.floor(r.length/2));n.font=`${this.fontSize} ${e.ref.font}`,o=n.measureText(s);let l=n.measureText(u);n.font=a,o.width<t?i.push({text:s+" ",ref:e}):i.push({text:" [...] ",ref:e}),l.width<t?i.push({text:u+" ",ref:e}):i.push({text:" [...] ",ref:e})}}),o+=e.text});n.font=`${this.fontSize} ${e[0].ref.font}`;let s=n.measureText(o);if(n.font=a,s.width<t)return[{text:e,width:s.width}];let u="",l=0,c=[];for(var f=0;f<i.length;f++){let e=0==f?i[0].text:u+i[f].text;n.font=`${this.fontSize} ${i[f].font}`;let o=n.measureText(e);if(n.font=a,o.width>t){r.push({text:[...c],width:l}),c=[],e="",l=0;for(let e=0;e<f;e++)i.shift();f=-1}else u=e,l=o.width,c.push(i[f])}return r.push({text:[...c],width:l}),r}_renderLines(e){var t=this._currentMeasure.height,n=0;switch(this._textVerticalAlignment){case o.a.VERTICAL_ALIGNMENT_TOP:n=this._fontOffset.ascent;break;case o.a.VERTICAL_ALIGNMENT_BOTTOM:n=t-this._fontOffset.height*(this._lines.length-1)-this._fontOffset.descent;break;case o.a.VERTICAL_ALIGNMENT_CENTER:n=this._fontOffset.ascent+(t-this._fontOffset.height*this._lines.length)/2}n+=this._currentMeasure.top;const r=[];for(let t=0;t<this._lines.length;t++){const i=this._lines[t];0!==t&&0!==this._lineSpacing.internalValue&&(this._lineSpacing.isPixel?n+=this._lineSpacing.getValue(this._host):n+=this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height)),this._drawText(i.text,i.width,n,e,r),n+=this._fontOffset.height}this._textPos=r}computeExpectedHeight(){if(this.text&&this.widthInPixels){const e=document.createElement("canvas").getContext("2d");if(e){this._applyStates(e),this._fontOffset||(this._fontOffset=o.a._GetFontOffset(e.font));const t=this._lines?this._lines:this._breakLines(this.widthInPixels-this.paddingLeftInPixels-this.paddingRightInPixels,e);let n=this.paddingTopInPixels+this.paddingBottomInPixels+this._fontOffset.height*t.length;if(t.length>0&&0!==this._lineSpacing.internalValue){let e=0;e=this._lineSpacing.isPixel?this._lineSpacing.getValue(this._host):this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height),n+=(t.length-1)*e}return n}}return 0}dispose(){super.dispose(),this.onTextChangedObservable.clear()}_onPointerDown(e,t,n,r,i){return!!super._onPointerDown(e,t,n,r,i)}}},function(e,t,n){"use strict";(function(e){var r=t;function i(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(254),r.base64=n(255),r.EventEmitter=n(256),r.float=n(257),r.inquire=n(258),r.utf8=n(259),r.pool=n(260),r.LongBits=n(261),r.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),r.global=r.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=i,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}}).call(this,n(53))},,,,function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(392),i=n(393),o=n(313);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=h(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|d(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(c(t),e=s(e,t<0?0:0|d(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|d(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(e).length;default:if(r)return N(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return E(this,t,n);case"latin1":case"binary":return j(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(l(e,o+h)!==l(t,h)){f=!1;break}if(f)return o}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function w(e,t,n,r){return $(N(t,e.length-n),e,n,r)}function _(e,t,n,r){return $(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function k(e,t,n,r){return _(e,t,n,r)}function x(e,t,n,r){return $(U(t),e,n,r)}function O(e,t,n,r){return $(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function P(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,l=e[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return l(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):m.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(r,i),c=e.slice(t,n),f=0;f<s;++f)if(l[f]!==c[f]){o=l[f],a=c[f];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return k(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function j(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function C(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=F(e[o]);return i}function T(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function A(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function z(e,t,n,r,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function I(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function R(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,o){return o||R(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function M(e,t,n,r,o){return o||R(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);z(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);z(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return M(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return M(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=u.isBuffer(e)?e:N(new u(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function U(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(53))},,,function(e,t,n){"use strict";var r,i;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),function(e){e.cancel="cancel",e.run="run"}(r||(r={})),function(e){e.error="error",e.init="init",e.result="result",e.running="running",e.uncaughtError="uncaughtError"}(i||(i={}))},,function(e,t,n){"use strict";n.d(t,"g",(function(){return Rn})),n.d(t,"j",(function(){return Bn})),n.d(t,"k",(function(){return Mn})),n.d(t,"b",(function(){return Ln})),n.d(t,"e",(function(){return Fn})),n.d(t,"f",(function(){return Nn})),n.d(t,"d",(function(){return Un})),n.d(t,"i",(function(){return $n})),n.d(t,"c",(function(){return Vn})),n.d(t,"h",(function(){return qn})),n.d(t,"a",(function(){return Wn}));var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var o=Object.keys,a=Array.isArray,s="undefined"!=typeof self?self:"undefined"!=typeof window?window:global;function u(e,t){return"object"!=typeof t||o(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||s.Promise||(s.Promise=Promise);var l=Object.getPrototypeOf,c={}.hasOwnProperty;function f(e,t){return c.call(e,t)}function h(e,t){"function"==typeof t&&(t=t(l(e))),o(t).forEach((function(n){p(e,n,t[n])}))}var d=Object.defineProperty;function p(e,t,n,r){d(e,t,u(n&&f(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function m(e){return{from:function(t){return e.prototype=Object.create(t.prototype),p(e.prototype,"constructor",e),{extend:h.bind(null,e.prototype)}}}}var y=Object.getOwnPropertyDescriptor;function v(e,t){var n;return y(e,t)||(n=l(e))&&v(n,t)}var g=[].slice;function b(e,t,n){return g.call(e,t,n)}function w(e,t){return t(e)}function _(e){if(!e)throw new Error("Assertion Failed")}function k(e){s.setImmediate?setImmediate(e):setTimeout(e,0)}function x(e,t){return e.reduce((function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function O(e,t){if(f(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=O(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(-1!==a){var s=e[t.substr(0,a)];return void 0===s?void 0:O(s,t.substr(a+1))}}function P(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){_("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)P(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var s=t.substr(0,o),u=t.substr(o+1);if(""===u)void 0===n?a(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var l=e[s];l||(l=e[s]={}),P(l,u,n)}}else void 0===n?a(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function S(e,t){"string"==typeof t?P(e,t,void 0):"length"in t&&[].map.call(t,(function(t){P(e,t,void 0)}))}function E(e){var t={};for(var n in e)f(e,n)&&(t[n]=e[n]);return t}var j=[].concat;function C(e){return j.apply([],e)}var T="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(C([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return s[e]})),A=T.map((function(e){return s[e]})),z=x(T,(function(e){return[e,!0]}));function I(e){if(!e||"object"!=typeof e)return e;var t;if(a(e)){t=[];for(var n=0,r=e.length;n<r;++n)t.push(I(e[n]))}else if(A.indexOf(e.constructor)>=0)t=e;else for(var i in t=e.constructor?Object.create(e.constructor.prototype):{},e)f(e,i)&&(t[i]=I(e[i]));return t}var D={}.toString;function R(e){return D.call(e).slice(8,-1)}var B=function(e,t){return"Array"===t?""+e.map((function(e){return B(e,R(e))})):"ArrayBuffer"===t?""+new Uint8Array(e):"Date"===t?e.getTime():ArrayBuffer.isView(e)?""+new Uint8Array(e.buffer):e};function M(e,t,n,r){return n=n||{},r=r||"",o(e).forEach((function(i){if(f(t,i)){var o=e[i],a=t[i];if("object"==typeof o&&"object"==typeof a&&o&&a){var s=R(o),u=R(a);s===u?z[s]?B(o,s)!==B(a,u)&&(n[r+i]=t[i]):M(o,a,n,r+i+"."):n[r+i]=t[i]}else o!==a&&(n[r+i]=t[i])}else n[r+i]=void 0})),o(t).forEach((function(i){f(e,i)||(n[r+i]=t[i])})),n}var L="undefined"!=typeof Symbol&&Symbol.iterator,F=L?function(e){var t;return null!=e&&(t=e[L])&&t.apply(e)}:function(){return null},N={};function U(e){var t,n,r,i;if(1===arguments.length){if(a(e))return e.slice();if(this===N&&"string"==typeof e)return[e];if(i=F(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var $="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},V="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function q(e,t){V=e,W=t}var W=function(){return!0},H=!new Error("").stack;function K(){if(H)try{throw new Error}catch(e){return e}return new Error}function G(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(W).map((function(e){return"\n"+e})).join("")):""}var J=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Z=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(J),Y={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function Q(e,t){this._e=K(),this.name=e,this.message=t}function X(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function ee(e,t,n,r){this._e=K(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=X(e,t)}function te(e,t){this._e=K(),this.name="BulkError",this.failures=t,this.message=X(e,t)}m(Q).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+G(this._e,2))}},toString:function(){return this.name+": "+this.message}}),m(ee).from(Q),m(te).from(Q);var ne=Z.reduce((function(e,t){return e[t]=t+"Error",e}),{}),re=Q,ie=Z.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=K(),this.name=n,e?"string"==typeof e?(this.message=e+(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=Y[t]||n,this.inner=null)}return m(r).from(re),e[t]=r,e}),{});ie.Syntax=SyntaxError,ie.Type=TypeError,ie.Range=RangeError;var oe=J.reduce((function(e,t){return e[t+"Error"]=ie[t],e}),{});var ae=Z.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=ie[t]),e}),{});function se(){}function ue(e){return e}function le(e,t){return null==e||e===ue?t:function(n){return t(e(n))}}function ce(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function fe(e,t){return e===se?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ce(r,this.onsuccess):r),i&&(this.onerror=this.onerror?ce(i,this.onerror):i),void 0!==o?o:n}}function he(e,t){return e===se?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ce(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ce(r,this.onerror):r)}}function de(e,t){return e===se?t:function(n){var r=e.apply(this,arguments);u(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ce(i,this.onsuccess):i),o&&(this.onerror=this.onerror?ce(o,this.onerror):o),void 0===r?void 0===a?void 0:a:u(r,a)}}function pe(e,t){return e===se?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function me(e,t){return e===se?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}ae.ModifyError=ee,ae.DexieError=Q,ae.BulkError=te;var ye={},ve="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,e.__proto__,e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,t.__proto__,e]}(),ge=ve[0],be=ve[1],we=ve[2],_e=be&&be.then,ke=ge&&ge.constructor,xe=!!we,Oe=!1,Pe=we?function(){we.then(Ke)}:s.setImmediate?setImmediate.bind(null,Ke):s.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){Ke(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Ke,0)},Se=function(e,t){Re.push([e,t]),je&&(Pe(),je=!1)},Ee=!0,je=!0,Ce=[],Te=[],Ae=null,ze=ue,Ie={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:vt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{vt(e[0],e[1])}catch(e){}}))}},De=Ie,Re=[],Be=0,Me=[];function Le(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=se,this._lib=!1;var t=this._PSD=De;if(V&&(this._stackHolder=K(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==ye)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&$e(this,this._value))}this._state=null,this._value=null,++t.ref,Ue(this,e)}var Fe={get:function(){var e=De,t=rt;function n(n,r){var i=this,o=!e.global&&(e!==De||t!==rt),a=o&&!st(),s=new Le((function(t,s){qe(i,new Ne(mt(n,e,o,a),mt(r,e,o,a),t,s,e))}));return V&&He(s,this),s}return n.prototype=ye,n},set:function(e){p(this,"then",e&&e.prototype===ye?Fe:{get:function(){return e},set:Fe.set})}};function Ne(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function Ue(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Ge();t&&"function"==typeof t.then?Ue(e,(function(e,n){t instanceof Le?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Ve(e)),n&&Je()}}),$e.bind(null,e))}catch(t){$e(e,t)}}function $e(e,t){if(Te.push(t),null===e._state){var n=e._lib&&Ge();t=ze(t),e._state=!1,e._value=t,V&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}((function(){var n=v(t,"stack");t._promise=e,p(t,"stack",{get:function(){return Oe?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){Ce.some((function(t){return t._value===e._value}))||Ce.push(e)}(e),Ve(e),n&&Je()}}function Ve(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)qe(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===Be&&(++Be,Se((function(){0==--Be&&Ze()}),[]))}function qe(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Be,Se(We,[n,e,t])}else e._listeners.push(t)}function We(e,t,n){try{Ae=t;var r,i=t._value;t._state?r=e(i):(Te.length&&(Te=[]),r=e(i),-1===Te.indexOf(i)&&function(e){var t=Ce.length;for(;t;)if(Ce[--t]._value===e._value)return void Ce.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Ae=null,0==--Be&&Ze(),--n.psd.ref||n.psd.finalize()}}function He(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function Ke(){Ge()&&Je()}function Ge(){var e=Ee;return Ee=!1,je=!1,e}function Je(){var e,t,n;do{for(;Re.length>0;)for(e=Re,Re=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Re.length>0);Ee=!0,je=!0}function Ze(){var e=Ce;Ce=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Me.slice(0),n=t.length;n;)t[--n]()}function Ye(e){return new Le(ye,!1,e)}function Qe(e,t){var n=De;return function(){var r=Ge(),i=De;try{return ft(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{ft(i,!1),r&&Je()}}}h(Le.prototype,{then:Fe,_then:function(e,t){qe(this,new Ne(null,null,e,t,De))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):Ye(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):Ye(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),Ye(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{Oe=!0;var e=function e(t,n,r){if(n.length===r)return n;var i="";if(!1===t._state){var o,a,s=t._value;null!=s?(o=s.name||"Error",a=s.message||s,i=G(s,0)):(o=s,a=""),n.push(o+(a?": "+a:"")+i)}V&&((i=G(t._stackHolder,2))&&-1===n.indexOf(i)&&n.push(i),t._prev&&e(t._prev,n,r));return n}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Oe=!1}}},timeout:function(e,t){var n=this;return e<1/0?new Le((function(r,i){var o=setTimeout((function(){return i(new ie.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&p(Le.prototype,Symbol.toStringTag,"Dexie.Promise"),Ie.env=ht(),h(Le,{all:function(){var e=U.apply(null,arguments).map(ut);return new Le((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,o){return Le.resolve(i).then((function(n){e[o]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof Le)return e;if(e&&"function"==typeof e.then)return new Le((function(t,n){e.then(t,n)}));var t=new Le(ye,!0,e);return He(t,Ae),t},reject:Ye,race:function(){var e=U.apply(null,arguments).map(ut);return new Le((function(t,n){e.map((function(e){return Le.resolve(e).then(t,n)}))}))},PSD:{get:function(){return De},set:function(e){return De=e}},totalEchoes:{get:function(){return rt}},newPSD:ot,usePSD:dt,scheduler:{get:function(){return Se},set:function(e){Se=e}},rejectionMapper:{get:function(){return ze},set:function(e){ze=e}},follow:function(e,t){return new Le((function(n,r){return ot((function(t,n){var r=De;r.unhandleds=[],r.onunhandled=n,r.finalize=ce((function(){var e=this;!function(e){Me.push((function t(){e(),Me.splice(Me.indexOf(t),1)})),++Be,Se((function(){0==--Be&&Ze()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}}),ke&&(ke.allSettled&&p(Le,"allSettled",(function(){var e=U.apply(null,arguments).map(ut);return new Le((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,i){return Le.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),ke.any&&"undefined"!=typeof AggregateError&&p(Le,"any",(function(){var e=U.apply(null,arguments).map(ut);return new Le((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach((function(e,o){return Le.resolve(e).then((function(e){return t(e)}),(function(e){i[o]=e,--r||n(new AggregateError(i))}))}))}))})));var Xe={awaits:0,echoes:0,id:0},et=0,tt=[],nt=0,rt=0,it=0;function ot(e,t,n,r){var i=De,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++it;var a=Ie.env;o.env=xe?{Promise:Le,PromiseProp:{value:Le,configurable:!0,writable:!0},all:Le.all,race:Le.race,allSettled:Le.allSettled,any:Le.any,resolve:Le.resolve,reject:Le.reject,nthen:yt(a.nthen,o),gthen:yt(a.gthen,o)}:{},t&&u(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=dt(o,e,n,r);return 0===o.ref&&o.finalize(),s}function at(){return Xe.id||(Xe.id=++et),++Xe.awaits,Xe.echoes+=100,Xe.id}function st(){return!!Xe.awaits&&(0==--Xe.awaits&&(Xe.id=0),Xe.echoes=100*Xe.awaits,!0)}function ut(e){return Xe.echoes&&e&&e.constructor===ke?(at(),e.then((function(e){return st(),e}),(function(e){return st(),gt(e)}))):e}function lt(e){++rt,Xe.echoes&&0!=--Xe.echoes||(Xe.echoes=Xe.id=0),tt.push(De),ft(e,!0)}function ct(){var e=tt[tt.length-1];tt.pop(),ft(e,!1)}function ft(e,t){var n=De;if((t?!Xe.echoes||nt++&&e===De:!nt||--nt&&e===De)||pt(t?lt.bind(null,e):ct),e!==De&&(De=e,n===Ie&&(Ie.env=ht()),xe)){var r=Ie.env.Promise,i=e.env;be.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(s,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function ht(){var e=s.Promise;return xe?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:be.then,gthen:e.prototype.then}:{}}function dt(e,t,n,r,i){var o=De;try{return ft(e,!0),t(n,r,i)}finally{ft(o,!1)}}function pt(e){_e.call(ge,e)}function mt(e,t,n,r){return"function"!=typeof e?e:function(){var i=De;n&&at(),ft(t,!0);try{return e.apply(this,arguments)}finally{ft(i,!1),r&&pt(st)}}}function yt(e,t){return function(n,r){return e.call(this,mt(n,t),mt(r,t))}}-1===(""+_e).indexOf("[native code]")&&(at=st=se);function vt(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,i={promise:t,reason:e};if(s.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),u(r,i)):s.CustomEvent&&u(r=new CustomEvent("unhandledrejection",{detail:i}),i),r&&s.dispatchEvent&&(dispatchEvent(r),!s.PromiseRejectionEvent&&s.onunhandledrejection))try{s.onunhandledrejection(r)}catch(e){}V&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var gt=Le.reject;var bt=String.fromCharCode(65535),wt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",_t=[],kt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),xt=kt,Ot=kt,Pt=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};function St(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Et={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function jt(e){return function(t){return void 0===O(t,e)&&S(t=I(t),e),t}}var Ct=function(){function e(){}return e.prototype._trans=function(e,t,n){var r=this._tx||De.trans,i=this.name;function o(e,n,r){if(!r.schema[i])throw new ie.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var a=Ge();try{return r&&r.db===this.db?r===De.trans?r._promise(e,o,n):ot((function(){return r._promise(e,o,n)}),{trans:r,transless:De.transless||De}):function e(t,n,r,i){if(t._state.openComplete||De.letThrough){var o=t._createTransaction(n,r,t._dbSchema);try{o.create()}catch(e){return gt(e)}return o._promise(n,(function(e,t){return ot((function(){return De.trans=o,i(e,t,o)}))})).then((function(e){return o._completion.then((function(){return e}))}))}if(!t._state.isBeingOpened){if(!t._options.autoOpen)return gt(new ie.DatabaseClosed);t.open().catch(se)}return t._state.dbReadyPromise.then((function(){return e(t,n,r,i)}))}(this.db,e,[this.name],o)}finally{a&&Je()}},e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},e.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(a(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=o(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&this.db._maxKey!==bt)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));!n&&V&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var r=this.schema.idxByName,i=this.db._deps.indexedDB;function s(e,t){try{return 0===i.cmp(e,t)}catch(e){return!1}}var u=t.reduce((function(t,n){var i=t[0],o=t[1],u=r[n],l=e[n];return[i||u,i||!u?St(o,u&&u.multi?function(e){var t=O(e,n);return a(t)&&t.some((function(e){return s(l,e)}))}:function(e){return s(l,O(e,n))}):o]}),[null,null]),l=u[0],c=u[1];return l?this.where(l.name).equals(e[l.keyPath]).filter(c):n?this.filter(c):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,a(e)?"["+e.join("+")+"]":e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(f(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},e.prototype.defineClass=function(){return this.mapToClass((function(e){u(this,e)}))},e.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=jt(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})})).then((function(e){return e.numFailures?Le.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{P(e,o,t)}catch(e){}return t}))},e.prototype.update=function(e,t){if("object"!=typeof t||a(t))throw new ie.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||a(e))return this.where(":id").equals(e).modify(t);o(t).forEach((function(n){P(e,n,t[n])}));var n=O(e,this.schema.primKey.keyPath);return void 0===n?gt(new ie.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)},e.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=jt(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?Le.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{P(e,o,t)}catch(e){}return t}))},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?Le.reject(e.failures[0]):void 0}))},e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Et})})).then((function(e){return e.numFailures?Le.reject(e.failures[0]):void 0}))},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},e.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,s=n.keyPath;if(s&&i)throw new ie.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ie.InvalidArgument("Arguments objects and keys must have the same length");var u=e.length,l=s&&a?e.map(jt(s)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:l,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,a=e.failures;if(0===t)return o?n:i;throw new te(r.name+".bulkAdd(): "+t+" of "+u+" operations failed",Object.keys(a).map((function(e){return a[e]})))}))}))},e.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,s=n.keyPath;if(s&&i)throw new ie.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ie.InvalidArgument("Arguments objects and keys must have the same length");var u=e.length,l=s&&a?e.map(jt(s)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:l,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,a=e.failures;if(0===t)return o?n:i;throw new te(r.name+".bulkPut(): "+t+" of "+u+" operations failed",Object.keys(a).map((function(e){return a[e]})))}))}))},e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult,o=e.failures;if(0===r)return i;throw new te(t.name+".bulkDelete(): "+r+" of "+n+" operations failed",o)}))},e}();function Tt(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return t[n].subscribe.apply(null,o),e}if("string"==typeof n)return t[n]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(e,r,i){if("object"==typeof e)return u(e);r||(r=pe),i||(i=se);var o={subscribers:[],fire:i,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter((function(t){return t!==e})),o.fire=o.subscribers.reduce(r,i)}};return t[e]=n[e]=o,o}function u(e){o(e).forEach((function(t){var n=e[t];if(a(n))s(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new ie.InvalidArgument("Invalid event config");var r=s(t,ue,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){k((function(){e.apply(null,t)}))}))}))}}))}}function At(e,t){return m(t).from({prototype:e}),t}function zt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function It(e,t){e.filter=St(e.filter,t)}function Dt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return St(r(),t())}:t,e.justLimit=n&&!r}function Rt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new ie.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Bt(e,t,n){var r=Rt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Mt(e,t,n,r){var i=e.replayFilter?St(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(e,n,r){if(!i||i(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var a=n.primaryKey,s=""+a;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(a)),f(o,s)||(o[s]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),Lt(Bt(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return Lt(Bt(e,r,n),St(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Lt(e,t,n,r){var i=Qe(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=se}),(function(t){e.fail(t),n=se}))||i(e.value,e,(function(e){return n=e})),n()}))}))}var Ft=function(){function e(){}return e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,gt.bind(null,n.error)):n.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,gt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=St(t.algorithm,e)},e.prototype._iterate=function(e,t){return Mt(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&u(n,e),t._ctx=n,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return Mt(t,e,n,t.table.core)}))},e.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(zt(n,!0))return r.count({trans:e,query:{index:Rt(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var i=0;return Mt(n,(function(){return++i,!1}),e,r).then((function(){return i}))})).then(e)},e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function s(e,t){var n=o(e,i),r=o(t,i);return n<r?-a:n>r?a:0}return this.toArray((function(e){return e.sort(s)})).then(t)},e.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&zt(n,!0)&&n.limit>0){var r=n.valueMapper,i=Rt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then((function(e){var t=e.result;return r?t.map(r):t}))}var o=[];return Mt(n,(function(e){return o.push(e)}),e,n.table.core).then((function(){return o}))}),e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,zt(t)?Dt(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):Dt(t,(function(){var t=e;return function(){return--t<0}}))),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Dt(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this},e.prototype.until=function(e,t){return It(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this},e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){var t,n;return It(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=St(t.isMatch,n),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&zt(t,!0)&&t.limit>0)return this._read((function(e){var n=Rt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return It(this._ctx,(function(e){var t=e.primaryKey.toString(),r=f(n,t);return n[t]=!0,!r})),this},e.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(r){var i;if("function"==typeof e)i=e;else{var a=o(e),s=a.length;i=function(t){for(var n=!1,r=0;r<s;++r){var i=a[r],o=e[i];O(t,i)!==o&&(P(t,i,o),n=!0)}return n}}var u=n.table.core,l=u.schema.primaryKey,c=l.outbound,f=l.extractKey,h="testmode"in An?1:2e3,d=t.db.core.cmp,p=[],m=0,y=[],v=function(e,t){var n=t.failures,r=t.numFailures;m+=e-r;for(var i=0,a=o(n);i<a.length;i++){var s=a[i];p.push(n[s])}};return t.clone().primaryKeys().then((function(e){var t=function(n){var o=Math.min(h,e.length-n);return u.getMany({trans:r,keys:e.slice(n,n+o)}).then((function(a){for(var s=[],l=[],p=c?[]:null,m=[],y=0;y<o;++y){var g=a[y],b={value:I(g),primKey:e[n+y]};!1!==i.call(b,b.value,b)&&(null==b.value?m.push(e[n+y]):c||0===d(f(g),f(b.value))?(l.push(b.value),c&&p.push(e[n+y])):(m.push(e[n+y]),s.push(b.value)))}return Promise.resolve(s.length>0&&u.mutate({trans:r,type:"add",values:s}).then((function(e){for(var t in e.failures)m.splice(parseInt(t),1);v(s.length,e)}))).then((function(e){return l.length>0&&u.mutate({trans:r,type:"put",keys:p,values:l}).then((function(e){return v(l.length,e)}))})).then((function(){return m.length>0&&u.mutate({trans:r,type:"delete",keys:m}).then((function(e){return v(m.length,e)}))})).then((function(){return e.length>n+o&&t(n+h)}))}))};return t(0).then((function(){if(p.length>0)throw new ee("Error modifying one or more objects",p,m,y);return e.length}))}))}))},e.prototype.delete=function(){var e=this._ctx,t=e.range;return zt(e)&&(e.isPrimKey&&!Ot||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((function(e){var n=e.failures,r=(e.lastResult,e.results,e.numFailures);if(r)throw new ee("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-r);return t-r}))}))})):this.modify((function(e,t){return t.value=null}))},e}();function Nt(e,t){return e<t?-1:e===t?0:1}function Ut(e,t){return e>t?-1:e===t?0:1}function $t(e,t,n){var r=e instanceof Gt?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Vt(e){return new e.Collection(e,(function(){return Kt("")})).limit(0)}function qt(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),s=-1,u=0;u<a;++u){var l=t[u];if(l!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[u],l)<0&&(s=u)}return a<r.length&&"next"===o?e+n.substr(e.length):a<e.length&&"prev"===o?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function Wt(e,t,n,r){var i,o,a,s,u,l,c,f=n.length;if(!n.every((function(e){return"string"==typeof e})))return $t(e,"String expected.");function h(e){i=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),o=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),a="next"===e?Nt:Ut;var t=n.map((function(e){return{lower:o(e),upper:i(e)}})).sort((function(e,t){return a(e.lower,t.lower)}));s=t.map((function(e){return e.upper})),u=t.map((function(e){return e.lower})),l=e,c="next"===e?"":r}h("next");var d=new e.Collection(e,(function(){return Ht(s[0],u[f-1]+r)}));d._ondirectionchange=function(e){h(e)};var p=0;return d._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var h=o(i);if(t(h,u,p))return!0;for(var d=null,m=p;m<f;++m){var y=qt(i,h,s[m],u[m],a,l);null===y&&null===d?p=m+1:(null===d||a(d,y)>0)&&(d=y)}return n(null!==d?function(){e.continue(d+c)}:r),!1})),d}function Ht(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Kt(e){return{type:1,lower:e,upper:e}}var Gt=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!0,configurable:!0}),e.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Vt(this):new this.Collection(this,(function(){return Ht(e,t,!n,!r)}))}catch(e){return $t(this,wt)}},e.prototype.equals=function(e){return null==e?$t(this,wt):new this.Collection(this,(function(){return Kt(e)}))},e.prototype.above=function(e){return null==e?$t(this,wt):new this.Collection(this,(function(){return Ht(e,void 0,!0)}))},e.prototype.aboveOrEqual=function(e){return null==e?$t(this,wt):new this.Collection(this,(function(){return Ht(e,void 0,!1)}))},e.prototype.below=function(e){return null==e?$t(this,wt):new this.Collection(this,(function(){return Ht(void 0,e,!1,!0)}))},e.prototype.belowOrEqual=function(e){return null==e?$t(this,wt):new this.Collection(this,(function(){return Ht(void 0,e)}))},e.prototype.startsWith=function(e){return"string"!=typeof e?$t(this,"String expected."):this.between(e,e+bt,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Wt(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],bt)},e.prototype.equalsIgnoreCase=function(e){return Wt(this,(function(e,t){return e===t[0]}),[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=U.apply(N,arguments);return 0===e.length?Vt(this):Wt(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=U.apply(N,arguments);return 0===e.length?Vt(this):Wt(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,bt)},e.prototype.anyOf=function(){var e=this,t=U.apply(N,arguments),n=this._cmp;try{t.sort(n)}catch(e){return $t(this,wt)}if(0===t.length)return Vt(this);var r=new this.Collection(this,(function(){return Ht(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm((function(e,r,o){for(var a=e.key;n(a,t[i])>0;)if(++i===t.length)return r(o),!1;return 0===n(a,t[i])||(r((function(){e.continue(t[i])})),!1)})),r},e.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=U.apply(N,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return $t(this,wt)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,i=this._ascending,o=this._descending,a=this._min,s=this._max;if(0===e.length)return Vt(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return $t(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ie.InvalidArgument);var u=!t||!1!==t.includeLowers,l=t&&!0===t.includeUppers;var c,f=i;function h(e,t){return f(e[0],t[0])}try{(c=e.reduce((function(e,t){for(var n=0,i=e.length;n<i;++n){var o=e[n];if(r(t[0],o[1])<0&&r(t[1],o[0])>0){o[0]=a(o[0],t[0]),o[1]=s(o[1],t[1]);break}}return n===i&&e.push(t),e}),[])).sort(h)}catch(e){return $t(this,wt)}var d=0,p=l?function(e){return i(e,c[d][1])>0}:function(e){return i(e,c[d][1])>=0},m=u?function(e){return o(e,c[d][0])>0}:function(e){return o(e,c[d][0])>=0};var y=p,v=new this.Collection(this,(function(){return Ht(c[0][0],c[c.length-1][1],!u,!l)}));return v._ondirectionchange=function(e){"next"===e?(y=p,f=i):(y=m,f=o),c.sort(h)},v._addAlgorithm((function(e,t,r){for(var o=e.key;y(o);)if(++d===c.length)return t(r),!1;return!!function(e){return!p(e)&&!m(e)}(o)||(0===n._cmp(o,c[d][1])||0===n._cmp(o,c[d][0])||t((function(){f===i?e.continue(c[d][0]):e.continue(c[d][1])})),!1)})),v},e.prototype.startsWithAnyOf=function(){var e=U.apply(N,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?Vt(this):this.inAnyRange(e.map((function(e){return[e,e+bt]}))):$t(this,"startsWithAnyOf() only works with strings")},e}();function Jt(e){return 1===e.length?e[0]:e}function Zt(e){try{return e.only([[]]),[[]]}catch(e){return bt}}function Yt(e){return Qe((function(t){return Qt(t),e(t.target.error),!1}))}function Qt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Xt=function(){function e(){}return e.prototype._lock=function(){return _(!De.global),++this._reculock,1!==this._reculock||De.global||(De.lockOwnerFor=this),this},e.prototype._unlock=function(){if(_(!De.global),0==--this._reculock)for(De.global||(De.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{dt(e[1],e[0])}catch(e){}}return this},e.prototype._locked=function(){return this._reculock&&De.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(_(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new ie.DatabaseClosed(r);case"MissingAPIError":throw new ie.MissingAPI(r.message,r);default:throw new ie.OpenFailed(r)}if(!this.active)throw new ie.TransactionInactive;return _(null===this._completion._state),(e=this.idbtrans=e||n.transaction(Jt(this.storeNames),this.mode)).onerror=Qe((function(n){Qt(n),t._reject(e.error)})),e.onabort=Qe((function(n){Qt(n),t.active&&t._reject(new ie.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=Qe((function(){t.active=!1,t._resolve()})),this},e.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return gt(new ie.ReadOnly("Transaction is readonly"));if(!this.active)return gt(new ie.TransactionInactive);if(this._locked())return new Le((function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},De])}));if(n)return ot((function(){var e=new Le((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new Le((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),n=Le.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new Le((function(e,r){n.then((function(n){return t._waitingQueue.push(Qe(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(Qe(r.bind(null,e)))})).finally((function(){t._waitingFor===i&&(t._waitingFor=null)}))}))},e.prototype.abort=function(){this.active&&this._reject(new ie.Abort),this.active=!1},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(f(t,e))return t[e];var n=this.schema[e];if(!n)throw new ie.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r},e}();function en(e,t,n,r,i,o,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+tn(t)}}function tn(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function nn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:x(n,(function(e){return[e.name,e]}))}}function rn(e){return null==e?function(){}:"string"==typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return O(t,e)}}(e):function(t){return O(t,e)}}function on(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}function an(e){return[].slice.call(e)}var sn=0;function un(e){return null==e?":id":"string"==typeof e?e:"["+e.join("+")+"]"}function ln(e,t,n,r){var o=t.cmp.bind(t);function s(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var t=e.lower,r=e.upper,i=e.lowerOpen,o=e.upperOpen;return void 0===t?void 0===r?null:n.upperBound(r,!!o):void 0===r?n.lowerBound(t,!!i):n.bound(t,r,!!i,!!o)}var u=function(e,t){var n=an(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=a(t),i=null==t,o={},s={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:rn(t)},indexes:an(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry,i=e.keyPath,s={name:t,compound:a(i),keyPath:i,unique:n,multiEntry:r,extractKey:rn(i)};return o[un(i)]=s,s})),getIndexByKeyPath:function(e){return o[un(e)]}};return o[":id"]=s.primaryKey,null!=t&&(o[un(t)]=s.primaryKey),s}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,r),l=u.schema,c=u.hasGetAll,f=l.tables.map((function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(n){var r=n.trans,o=n.type,a=n.keys,u=n.values,l=n.range,c=n.wantResults;return new Promise((function(n,f){n=Qe(n);var h=r.objectStore(t),d=null==h.keyPath,p="put"===o||"add"===o;if(!p&&"delete"!==o&&"deleteRange"!==o)throw new Error("Invalid operation type: "+o);var m=(a||u||{length:1}).length;if(a&&u&&a.length!==u.length)throw new Error("Given keys array must have same length as given values array.");if(0===m)return n({numFailures:0,failures:{},results:[],lastResult:void 0});var y,v=c&&i(a||on(e.primaryKey,{type:o,keys:a,values:u})),g=[],b=0,w=function(e){++b,Qt(e),v&&(v[e.target._reqno]=void 0),g[e.target._reqno]=e.target.error},_=function(e){var t=e.target;v[t._reqno]=t.result};if("deleteRange"===o){if(4===l.type)return n({numFailures:b,failures:g,results:v,lastResult:void 0});y=3===l.type?h.clear():h.delete(s(l))}else{var k=p?d?[u,a]:[u,null]:[a,null],x=k[0],O=k[1];if(p)for(var P=0;P<m;++P)(y=O&&void 0!==O[P]?h[o](x[P],O[P]):h[o](x[P]))._reqno=P,v&&void 0===v[P]&&(y.onsuccess=_),y.onerror=w;else for(P=0;P<m;++P)(y=h[o](x[P]))._reqno=P,y.onerror=w}var S=function(e){var t=e.target.result;v&&(v[m-1]=t),n({numFailures:b,failures:g,results:v,lastResult:t})};y.onerror=function(e){w(e),S(e)},y.onsuccess=S}))},getMany:function(e){var n=e.trans,r=e.keys;return new Promise((function(e,i){e=Qe(e);for(var o,a=n.objectStore(t),s=r.length,u=new Array(s),l=0,c=0,f=function(t){var n=t.target;null!=(u[n._pos]=n.result)&&0,++c===l&&e(u)},h=Yt(i),d=0;d<s;++d){null!=r[d]&&((o=a.get(r[d]))._pos=d,o.onsuccess=f,o.onerror=h,++l)}0===l&&e(u)}))},get:function(e){var n=e.trans,r=e.key;return new Promise((function(e,i){e=Qe(e);var o=n.objectStore(t).get(r);o.onsuccess=function(t){return e(t.target.result)},o.onerror=Yt(i)}))},query:function(e){return function(n){return new Promise((function(r,i){r=Qe(r);var o=n.trans,a=n.values,u=n.limit,l=n.query,c=u===1/0?void 0:u,f=l.index,h=l.range,d=o.objectStore(t),p=f.isPrimaryKey?d:d.index(f.name),m=s(h);if(0===u)return r({result:[]});if(e){var y=a?p.getAll(m,c):p.getAllKeys(m,c);y.onsuccess=function(e){return r({result:e.target.result})},y.onerror=Yt(i)}else{var v=0,g=a||!("openKeyCursor"in p)?p.openCursor(m):p.openKeyCursor(m),b=[];g.onsuccess=function(e){var t=g.result;return t?(b.push(a?t.value:t.primaryKey),++v===u?r({result:b}):void t.continue()):r({result:b})},g.onerror=Yt(i)}}))}}(c),openCursor:function(e){var n=e.trans,r=e.values,i=e.query,o=e.reverse,a=e.unique;return new Promise((function(e,u){e=Qe(e);var l=i.index,c=i.range,f=n.objectStore(t),h=l.isPrimaryKey?f:f.index(l.name),d=o?a?"prevunique":"prev":a?"nextunique":"next",p=r||!("openKeyCursor"in h)?h.openCursor(s(c),d):h.openKeyCursor(s(c),d);p.onerror=Yt(u),p.onsuccess=Qe((function(t){var r=p.result;if(r){r.___id=++sn,r.done=!1;var i=r.continue.bind(r),o=r.continuePrimaryKey;o&&(o=o.bind(r));var a=r.advance.bind(r),s=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=Qe(u),r.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var t=new Promise((function(e,t){e=Qe(e),p.onerror=Yt(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=s,e(t)}})),n=function(){if(p.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return p.onsuccess=Qe((function(e){p.onsuccess=n,n()})),r.continue=i,r.continuePrimaryKey=o,r.advance=a,n(),t},e(r)}else e(null)}),u)}))},count:function(e){var n=e.query,r=e.trans,i=n.index,o=n.range;return new Promise((function(e,n){var a=r.objectStore(t),u=i.isPrimaryKey?a:a.index(i.name),l=s(o),c=l?u.count(l):u.count();c.onsuccess=Qe((function(t){return e(t.target.result)})),c.onerror=Yt(n)}))}}}(e)})),h={};return f.forEach((function(e){return h[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!h[e])throw new Error("Table '"+e+"' not found");return h[e]},cmp:o,MIN_KEY:-1/0,MAX_KEY:Zt(n),schema:l}}function cn(e,t,n,i){var o=n.IDBKeyRange;return{dbcore:function(e,t){return t.reduce((function(e,t){var n=t.create;return r(r({},e),n(e))}),e)}(ln(t,n.indexedDB,o,i),e.dbcore)}}function fn(e,t){var n=t.db,r=cn(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((function(t){var n=t.name;e.core.schema.tables.some((function(e){return e.name===n}))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function hn(e,t,n,r){n.forEach((function(n){var i=r[n];t.forEach((function(t){var r=v(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?p(t,n,{get:function(){return this.table(n)},set:function(e){d(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,i))}))}))}function dn(e,t){t.forEach((function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]}))}function pn(e,t){return e._cfg.version-t._cfg.version}function mn(e,t,n,r){var i=e._dbSchema,a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var s=a._reject.bind(a),u=De.transless||De;ot((function(){De.trans=a,De.transless=u,0===t?(o(i).forEach((function(e){vn(n,e,i[e].primKey,i[e].indexes)})),fn(e,n),Le.follow((function(){return e.on.populate.fire(a)})).catch(s)):function(e,t,n,r){var i=[],a=e._versions,s=e._dbSchema=bn(e,e.idbdb,r),u=!1;function l(){return i.length?Le.resolve(i.shift()(n.idbtrans)).then(l):Le.resolve()}return a.filter((function(e){return e._cfg.version>=t})).forEach((function(a){i.push((function(){var i=s,l=a._cfg.dbschema;wn(e,i,r),wn(e,l,r),s=e._dbSchema=l;var c=yn(i,l);c.add.forEach((function(e){vn(r,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((function(e){if(e.recreate)throw new ie.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach((function(e){return gn(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),gn(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var f=a._cfg.contentUpgrade;if(f&&a._cfg.version>t){fn(e,r),n._memoizedTables={},u=!0;var h=E(l);c.del.forEach((function(e){h[e]=i[e]})),dn(e,[e.Transaction.prototype]),hn(e,[e.Transaction.prototype],o(h),h),n.schema=h;var d,p=$(f);p&&at();var m=Le.follow((function(){if((d=f(n))&&p){var e=st.bind(null,null);d.then(e,e)}}));return d&&"function"==typeof d.then?Le.resolve(d):m.then((function(){return d}))}})),i.push((function(t){u&&xt||function(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}(a._cfg.dbschema,t);dn(e,[e.Transaction.prototype]),hn(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}))})),l().then((function(){var e,t;t=r,o(e=s).forEach((function(n){t.db.objectStoreNames.contains(n)||vn(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,a,n).catch(s)}))}function yn(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],o=t[n];if(i){var a={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!kt)a.recreate=!0,r.change.push(a);else{var s=i.idxByName,u=o.idxByName,l=void 0;for(l in s)u[l]||a.del.push(l);for(l in u){var c=s[l],f=u[l];c?c.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&r.change.push(a)}}else r.add.push([n,o])}return r}function vn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return gn(i,e)})),i}function gn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function bn(e,t,n){var r={};return b(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),i=t.keyPath,o=en(tn(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),a=[],s=0;s<t.indexNames.length;++s){var u=t.index(t.indexNames[s]);i=u.keyPath;var l=en(u.name,i,!!u.unique,!!u.multiEntry,!1,i&&"string"!=typeof i,!1);a.push(l)}r[e]=nn(e,o,a)})),r}function wn(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var o=r[i],a=n.objectStore(o);e._hasGetAll="getAll"in a;for(var u=0;u<a.indexNames.length;++u){var l=a.indexNames[u],c=a.index(l).keyPath,f="string"==typeof c?c:"["+b(c).join("+")+"]";if(t[o]){var h=t[o].idxByName[f];h&&(h.name=l,delete t[o].idxByName[f],t[o].idxByName[l]=h)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}var _n,kn=function(){function e(){}return e.prototype._parseStoresSpec=function(e,t){o(e).forEach((function(n){if(null!==e[n]){var r=e[n].split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return en(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),a(r),0===t)})),i=r.shift();if(i.multi)throw new ie.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new ie.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new ie.Schema("Index must have a name and cannot be an empty string")})),t[n]=nn(n,i,r)}}))},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,e):e;var n=t._versions,r={},i={};return n.forEach((function(e){u(r,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(r,i)})),t._dbSchema=i,dn(t,[t._allTables,t,t.Transaction.prototype]),hn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],o(i),i),t._storeNames=o(i),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=e,this},e}();function xn(e){return ot((function(){return De.letThrough=!0,e()}))}function On(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?gt(t.dbOpenError):e}));V&&(t.openCanceller._stackHolder=K()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.dbReadyResolve,i=null;return Le.race([t.openCanceller,new Le((function(r,a){if(!n)throw new ie.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var s=e.name,u=t.autoSchema?n.open(s):n.open(s,Math.round(10*e.verno));if(!u)throw new ie.MissingAPI("IndexedDB API not available");u.onerror=Yt(a),u.onblocked=Qe(e._fireOnBlocked),u.onupgradeneeded=Qe((function(r){if(i=u.transaction,t.autoSchema&&!e._options.allowEmptyDB){u.onerror=Qt,i.abort(),u.result.close();var o=n.deleteDatabase(s);o.onsuccess=o.onerror=Qe((function(){a(new ie.NoSuchDatabase("Database "+s+" doesnt exist"))}))}else{i.onerror=Yt(a);var l=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;e.idbdb=u.result,mn(e,l/10,i,a)}}),a),u.onsuccess=Qe((function(){i=null;var n=e.idbdb=u.result,a=b(n.objectStoreNames);if(a.length>0)try{var l=n.transaction(Jt(a),"readonly");t.autoSchema?function(e,t,n){e.verno=t.version/10;var r=e._dbSchema=bn(0,t,n);e._storeNames=b(t.objectStoreNames,0),hn(e,[e._allTables],o(r),r)}(e,n,l):(wn(e,e._dbSchema,l),function(e,t){var n=yn(bn(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}(e,l)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),fn(e,l)}catch(e){}_t.push(e),n.onversionchange=Qe((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),_n.add(s),r()}),a)}))]).then((function(){return t.onReadyBeingFired=[],Le.resolve(xn(e.on.ready.fire)).then((function e(){if(t.onReadyBeingFired.length>0){var n=t.onReadyBeingFired.reduce(me,se);return t.onReadyBeingFired=[],Le.resolve(xn(n)).then(e)}}))})).finally((function(){t.onReadyBeingFired=null})).then((function(){return t.isBeingOpened=!1,e})).catch((function(n){try{i&&i.abort()}catch(e){}return t.isBeingOpened=!1,e.close(),t.dbOpenError=n,gt(t.dbOpenError)})).finally((function(){t.openComplete=!0,r()}))}function Pn(e){var t=function(t){return e.next(t)},n=i(t),r=i((function(t){return e.throw(t)}));function i(e){return function(t){var i=e(t),o=i.value;return i.done?o:o&&"function"==typeof o.then?o.then(n,r):a(o)?Promise.all(o).then(n,r):n(o)}}return i(t)()}function Sn(e,t,n){var r=arguments.length;if(r<2)throw new ie.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=C(i);return[e,o,n]}function En(e,t,n,r,i){return Le.resolve().then((function(){var o=De.transless||De,a=e._createTransaction(t,n,e._dbSchema,r),s={trans:a,transless:o};r?a.idbtrans=r.idbtrans:a.create();var u,l=$(i);l&&at();var c=Le.follow((function(){if(u=i.call(a,a))if(l){var e=st.bind(null,null);u.then(e,e)}else"function"==typeof u.next&&"function"==typeof u.throw&&(u=Pn(u))}),s);return(u&&"function"==typeof u.then?Le.resolve(u).then((function(e){return a.active?e:gt(new ie.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):c.then((function(){return u}))).then((function(e){return r&&a._resolve(),a._completion.then((function(){return e}))})).catch((function(e){return a._reject(e),gt(e)}))}))}function jn(e,t,n){for(var r=a(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var Cn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return r(r({},e),{table:function(t){var n=e.table(t),i=n.schema,o={},a=[];function s(e,t,n){var i=un(e),u=o[i]=o[i]||[],l=null==e?0:"string"==typeof e?1:e.length,c=t>0,f=r(r({},n),{isVirtual:c,isPrimaryKey:!c&&n.isPrimaryKey,keyTail:t,keyLength:l,extractKey:rn(e),unique:!c&&n.unique});(u.push(f),f.isPrimaryKey||a.push(f),l>1)&&s(2===l?e[0]:e.slice(0,l-1),t+1,n);return u.sort((function(e,t){return e.keyTail-t.keyTail})),f}var u=s(i.primaryKey.keyPath,0,i.primaryKey);o[":id"]=[u];for(var l=0,c=i.indexes;l<c.length;l++){var f=c[l];s(f.keyPath,0,f)}function h(t){var n,i,o=t.query.index;return o.isVirtual?r(r({},t),{query:{index:o,range:(n=t.query.range,i=o.keyTail,{type:1===n.type?2:n.type,lower:jn(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:jn(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}):t}return r(r({},n),{schema:r(r({},i),{primaryKey:u,indexes:a,getIndexByKeyPath:function(e){var t=o[un(e)];return t&&t[0]}}),count:function(e){return n.count(h(e))},query:function(e){return n.query(h(e))},openCursor:function(t){var r=t.query.index,i=r.keyTail,o=r.isVirtual,a=r.keyLength;if(!o)return n.openCursor(t);return n.openCursor(h(t)).then((function(n){return n&&function(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(jn(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(jn(n.key,t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(jn(t,e.MAX_KEY,i),r)}},key:{get:function(){var e=n.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:function(){return n.value}}})}(n)}))}})}})}},Tn={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return r(r({},e),{table:function(t){var n=e.table(t),o=n.schema.primaryKey;return r(r({},n),{mutate:function(e){var a=De.trans,s=a.table(t).hook,u=s.deleting,l=s.creating,c=s.updating;switch(e.type){case"add":if(l.fire===se)break;return a._promise("readwrite",(function(){return h(e)}),!0);case"put":if(l.fire===se&&c.fire===se)break;return a._promise("readwrite",(function(){return h(e)}),!0);case"delete":if(u.fire===se)break;return a._promise("readwrite",(function(){return h(e)}),!0);case"deleteRange":if(u.fire===se)break;return a._promise("readwrite",(function(){return function(e){return function e(t,i,a){return n.query({trans:t,values:!1,query:{index:o,range:i},limit:a}).then((function(n){var o=n.result;return h({type:"delete",keys:o,trans:t}).then((function(n){return n.numFailures>0?Promise.reject(n.failures[0]):o.length<a?{failures:[],numFailures:0,lastResult:void 0}:e(t,r(r({},i),{lower:o[o.length-1],lowerOpen:!0}),a)}))}))}(e.trans,e.range,1e4)}(e)}),!0)}return n.mutate(e);function h(e){var t=De.trans,a=e.keys||on(o,e);if(!a)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?r(r({},e),{keys:a,wantResults:!0}):r({},e)).type&&(e.values=i(e.values)),e.keys&&(e.keys=i(e.keys)),function(e,t,n){return"add"===t.type?Promise.resolve(new Array(t.values.length)):e.getMany({trans:t.trans,keys:n})}(n,e,a).then((function(r){var i=a.map((function(n,i){var a=r[i],s={onerror:null,onsuccess:null};if("delete"===e.type)u.fire.call(s,n,a,t);else if("add"===e.type||void 0===a){var h=l.fire.call(s,n,e.values[i],t);null==n&&null!=h&&(n=h,e.keys[i]=n,o.outbound||P(e.values[i],o.keyPath,n))}else{var d=M(a,e.values[i]),p=c.fire.call(s,d,n,a,t);if(p){var m=e.values[i];Object.keys(p).forEach((function(e){f(m,e)?m[e]=p[e]:P(m,e,p[e])}))}}return s}));return n.mutate(e).then((function(t){for(var n=t.failures,o=t.results,s=t.numFailures,u=t.lastResult,l=0;l<a.length;++l){var c=o?o[l]:a[l],f=i[l];null==c?f.onerror&&f.onerror(n[l]):f.onsuccess&&f.onsuccess("put"===e.type&&r[l]?e.values[l]:c)}return{failures:n,results:o,numFailures:s,lastResult:u}})).catch((function(e){return i.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}}})}})}},An=function(){function e(t,n){var i=this;this._middlewares={},this.verno=0;var o=e.dependencies;this._options=n=r({addons:e.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null;var s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:se,dbReadyPromise:null,cancelOpen:se,openCanceller:null,autoSchema:!0};s.dbReadyPromise=new Le((function(e){s.dbReadyResolve=e})),s.openCanceller=new Le((function(e,t){s.cancelOpen=t})),this._state=s,this.name=t,this.on=Tt(this,"populate","blocked","versionchange",{ready:[me,se]}),this.on.ready.subscribe=w(this.on.ready.subscribe,(function(t){return function(n,r){e.vip((function(){var e=i._state;if(e.openComplete)e.dbOpenError||Le.resolve().then(n),r&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),r&&t(n);else{t(n);var o=i;r||t((function e(){o.on.ready.unsubscribe(n),o.on.ready.unsubscribe(e)}))}}))}})),this.Collection=function(e){return At(Ft.prototype,(function(t,n){this.db=e;var r=Et,i=null;if(n)try{r=n()}catch(e){i=e}var o=t._ctx,a=o.table,s=a.hook.reading.fire;this._ctx={table:a,index:o.index,isPrimKey:!o.index||a.schema.primKey.keyPath&&o.index===a.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:o.or,valueMapper:s!==ue?s:null}}))}(this),this.Table=function(e){return At(Ct.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Tt(null,{creating:[fe,se],reading:[le,ue],updating:[de,se],deleting:[he,se]})}))}(this),this.Transaction=function(e){return At(Xt.prototype,(function(t,n,r,i){var o=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.idbtrans=null,this.on=Tt(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Le((function(e,t){o._resolve=e,o._reject=t})),this._completion.then((function(){o.active=!1,o.on.complete.fire()}),(function(e){var t=o.active;return o.active=!1,o.on.error.fire(e),o.parent?o.parent._reject(e):t&&o.idbtrans&&o.idbtrans.abort(),gt(e)}))}))}(this),this.Version=function(e){return At(kn.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return At(Gt.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};var i=e._deps.indexedDB;if(!i)throw new ie.MissingAPI("indexedDB API missing");this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(e,t){return i.cmp(t,e)},this._max=function(e,t){return i.cmp(e,t)>0?e:t},this._min=function(e,t){return i.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+i.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+i.name+"'. Closing db now to resume the delete request."),i.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+i.name+"') was blocked"):console.warn("Upgrade '"+i.name+"' blocked by other connection holding version "+e.oldVersion/10)})),this._maxKey=Zt(n.IDBKeyRange),this._createTransaction=function(e,t,n,r){return new i.Transaction(e,t,n,r)},this._fireOnBlocked=function(e){i.on("blocked").fire(e),_t.filter((function(e){return e.name===i.name&&e!==i&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(Cn),this.use(Tn),a.forEach((function(e){return e(i)}))}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new ie.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ie.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(pn),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(e){var t=this;return this._state.openComplete||De.letThrough?e():new Le((function(e,n){if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new ie.DatabaseClosed);t.open().catch(se)}t._state.dbReadyPromise.then(e,n)})).then(e)},e.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;i&&this.unuse({stack:t,name:i});var o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:null==r?10:r,name:i}),o.sort((function(e,t){return e.level-t.level})),this},e.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this},e.prototype.open=function(){return On(this)},e.prototype.close=function(){var e=_t.indexOf(this),t=this._state;if(e>=0&&_t.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}this._options.autoOpen=!1,t.dbOpenError=new ie.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError),t.dbReadyPromise=new Le((function(e){t.dbReadyResolve=e})),t.openCanceller=new Le((function(e,n){t.cancelOpen=n}))},e.prototype.delete=function(){var e=this,t=arguments.length>0,n=this._state;return new Le((function(r,i){var o=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=Qe((function(){_n.remove(e.name),r()})),t.onerror=Yt(i),t.onblocked=e._fireOnBlocked};if(t)throw new ie.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()}))},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return o(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!0,configurable:!0}),e.prototype.transaction=function(){var e=Sn.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,n){var r=this,i=De.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var o,a,s=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=t.map((function(e){var t=e instanceof r.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||"readonly"===e)o="readonly";else{if("rw"!=e&&"readwrite"!=e)throw new ie.InvalidArgument("Invalid transaction mode: "+e);o="readwrite"}if(i){if("readonly"===i.mode&&"readwrite"===o){if(!s)throw new ie.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!s)throw new ie.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),s&&i&&!i.active&&(i=null)}}catch(e){return i?i._promise(null,(function(t,n){n(e)})):gt(e)}var u=En.bind(null,this,o,a,i,n);return i?i._promise(o,u,"lock"):De.trans?dt(De.transless,(function(){return r._whenReady(u)})):this._whenReady(u)},e.prototype.table=function(e){if(!f(this._allTables,e))throw new ie.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},e}(),zn=An;h(zn,r(r({},ae),{delete:function(e){return new zn(e).delete()},exists:function(e){return new zn(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){return _n?_n.getDatabaseNames().then(e):Le.resolve([])},defineClass:function(){return function(e){u(this,e)}},ignoreTransaction:function(e){return De.trans?dt(De.transless,e):e()},vip:xn,async:function(e){return function(){try{var t=Pn(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Le.resolve(t)}catch(e){return gt(e)}}},spawn:function(e,t,n){try{var r=Pn(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Le.resolve(r)}catch(e){return gt(e)}},currentTransaction:{get:function(){return De.trans||null}},waitFor:function(e,t){var n=Le.resolve("function"==typeof e?zn.ignoreTransaction(e):e).timeout(t||6e4);return De.trans?De.trans.waitFor(n):n},Promise:Le,debug:{get:function(){return V},set:function(e){q(e,"dexie"===e?function(){return!0}:Pt)}},derive:m,extend:u,props:h,override:w,Events:Tt,getByKeyPath:O,setByKeyPath:P,delByKeyPath:S,shallowClone:E,deepClone:I,getObjectDiff:M,asap:k,minKey:-1/0,addons:[],connections:_t,errnames:ne,dependencies:function(){try{return{indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:"3.0.3",version:"3.0.3".split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)})),default:zn,Dexie:zn})),zn.maxKey=Zt(zn.dependencies.IDBKeyRange),function(e){try{_n=function(e){var t,n=e&&"function"==typeof e.databases;if(!n){var r=new An("__dbnames",{addons:[]});r.version(1).stores({dbnames:"name"}),t=r.table("dbnames")}return{getDatabaseNames:function(){return n?Le.resolve(e.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return"__dbnames"!==e}))})):t.toCollection().primaryKeys()},add:function(e){return!n&&"__dbnames"!==e&&t.put({name:e}).catch(se)},remove:function(e){return!n&&"__dbnames"!==e&&t.delete(e).catch(se)}}}(e)}catch(e){}}(An.dependencies.indexedDB),Le.rejectionMapper=function(e,t){if(!e||e instanceof Q||e instanceof TypeError||e instanceof SyntaxError||!e.name||!oe[e.name])return e;var n=new oe[e.name](t||e.message,e);return"stack"in e&&p(n,"stack",{get:function(){return this.inner.stack}}),n},q(V,Pt);var In=An;const Dn=new class extends In{constructor(){super("voxelsrv-storage"),this.version(1).stores({main:"name, data",resources:"name, data, active"}),this.version(2).stores({main:"name, data",resources:"name, data, active",world:"name, settings, lastplay",worlddata:"name, data"})}};async function Rn(){return await Dn.world.orderBy("lastplay").reverse().toArray()}async function Bn(e,t,n){await Dn.world.delete(e),await Dn.worlddata.delete(e),await Dn.world.add({name:e,settings:n,lastplay:Date.now()},e),await Dn.worlddata.add({name:e,data:t},e)}async function Mn(e,t,n){await Dn.world.delete(e),await Dn.world.add({name:e,settings:t,lastplay:n},e)}async function Ln(e){await Dn.world.delete(e),Dn.worlddata.delete(e)}async function Fn(e){return Dn.world.where("name").equals(e).first()}async function Nn(e){return Dn.worlddata.where("name").equals(e).first()}async function Un(){const e=(await Dn.main.where("name").equals("settings").toArray())[0];return null!=e?e.data:{}}async function $n(e){await Dn.main.put({name:"settings",data:e})}async function Vn(){const e=(await Dn.main.where("name").equals("auth").toArray())[0];return null!=e?e.data:null}async function qn(e){await Dn.main.put({name:"auth",data:e})}async function Wn(){await Dn.main.delete("auth")}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n(103),i=n(20);function o(e){const t={item:new i.d("hotbar",""),container:new i.g,count:new i.k},n=t.container;n.zIndex=20,n.height=16*e+"px",n.width=16*e+"px",n.thickness=0;const r=t.item;r.width=16*e+"px",r.height=16*e+"px",n.addControl(r);const o=t.count;return o.text="",o.fontFamily="silkscreen",o.color="#f0f0f0",o.fontSize=8*e+"px",o.left=2*e+"px",o.top=4*e+"px",o.shadowColor="#111111",o.shadowOffsetX=e,o.shadowOffsetY=e,n.addControl(o),t}function a(e,t){if(null!=t&&null!=t.id){e.item.alpha=1,e.count.alpha=1;const n=r.c[t.id];let i;return i=null==n?"./textures/error.png":n.texture.startsWith("https://")&&n.texture.startsWith("http://")?n.texture:"./textures/"+n.texture+".png",e.item.source=i,1==t.count?e.count.text="":t.count<=10?e.count.text=" "+t.count.toString():e.count.text=t.count.toString(),!0}return e.item.alpha=0,e.count.alpha=0,e.item.source="",e.count.text="",!1}},,,,,,,,,function(e,t,n){(function(r){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))}),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(394)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(56))},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return f}));var r=n(31),i=n(17),o=n(110);let a={},s={},u={},l={};function c(e,t){const n=e.rendering.getScene();i.h.debugSettings.printRegistryToConsole&&console.log("Blocks",t),a=t;Object.values(t).forEach(e=>{u[e.id]=e.rawid,l[e.rawid]=e.id}),e.registry.registerMaterial("water",[.5,.5,.8,.7],null,!0),e.registry.registerMaterial("barrier",[0,0,0,0],null,!0);Object.values(t).forEach((function(t){try{!function(t,i,a,s,u,l,c,f){if(0==a){let n,r=0==u.opaque,a=null!=u.color?Object.values(u.color):[0,0,0];if(null==s&&(s=[""]),1==s.length&&null==u.material)e.registry.registerMaterial(i,a,""!=s[0]?Object(o.a)(s[0],"texture"):null,r),n=i;else if(null==u.material){n=new Array;for(let t=0;t<s.length;t++)e.registry.registerMaterial(i+t,a,""!=s[t]?Object(o.a)(s[t],"texture"):null,r),n.push(i+t)}else n=u.material;const l=u;l.material=n,e.registry.registerBlock(t,l)}else if(1==a){const a=function(e,t,n,i){const a=i||"mat";let s=new r.k(Object(o.a)(n,"texture"),t,!0,!0,r.k.NEAREST_SAMPLINGMODE);s.hasAlpha=!0;const u=r.f.CreatePlane("sprite-"+a,1,t),l=e.rendering.makeStandardMaterial(a);l.backFaceCulling=!1,l.diffuseTexture=s,l.diffuseTexture.vOffset=.99,u.material=l,u.rotation.y+=.81;const c=r.e.Translation(0,.5,0);u.bakeTransformIntoVertices(c);const f=u.clone();return f.rotation.y+=1.62,r.f.MergeMeshes([u,f],!0)}(e,n,s[0],i),l=u;l.blockMesh=a,e.registry.registerBlock(t,l)}else if(2==a){const a=function(e,t,n,i){const a={};let s=i||"mat";const u=e.rendering.makeStandardMaterial(s),l=e.rendering.makeStandardMaterial(s);u.backFaceCulling=!1,l.backFaceCulling=!1;const c=Object(o.a)(n[0],"texture"),f=Object(o.a)(n[1],"texture");u.diffuseTexture=new r.k(f,t,!0,!0,r.k.NEAREST_LINEAR),u.diffuseTexture.hasAlpha=!0,l.diffuseTexture=new r.k(c,t,!0,!0,r.k.NEAREST_LINEAR),l.diffuseTexture.hasAlpha=!0;for(let e=0;e<6;e++){let n;switch(a[e]=r.f.CreatePlane("sprite-"+s,1,t),a[e].material=u,e){case 0:n=r.e.Translation(0,.5,.435),a[e].rotation.y=1.57;break;case 1:n=r.e.Translation(0,.5,-.435),a[e].rotation.y=1.57;break;case 2:n=r.e.Translation(0,.5,.435);break;case 3:n=r.e.Translation(0,.5,-.435);break;case 4:n=r.e.Translation(0,0,-1),a[e].rotation.x=1.57;break;case 5:n=r.e.Translation(0,0,0),a[e].rotation.x=1.57}a[e].bakeTransformIntoVertices(n)}const h=r.f.MergeMeshes(Object.values(a),!0,!0,void 0,!0,!1);for(let e=0;e<6;e++)switch(e){case 0:case 1:h.subMeshes[e].materialIndex=1;break;case 2:case 3:case 4:case 5:h.subMeshes[e].materialIndex=0}return h}(e,n,[s[0],s[1]],i),l=u;l.blockMesh=a,e.registry.registerBlock(t,l)}else if(4==a){let a;if(1==s.length&&null==u.material){const t=e.rendering.makeStandardMaterial(i);let u;u=new r.k(Object(o.a)(s[0],"texture"),n,!0,!0,r.k.NEAREST_SAMPLINGMODE),t.diffuseTexture=u,t.opacityTexture=t.diffuseTexture,t.backFaceCulling=!0,e.registry.registerMaterial(i,null,null,!1,t),a=i}else if(null==u.material){a=new Array;for(let t=0;t<s.length;t++){const a=e.rendering.makeStandardMaterial(i);let u;u=new r.k(Object(o.a)(s[0],"texture"),n,!0,!0,r.k.NEAREST_SAMPLINGMODE),a.diffuseTexture=u,a.opacityTexture=a.diffuseTexture,a.backFaceCulling=!0,e.registry.registerMaterial(i+t,null,null,!1,a),a.push(i+t)}}const l=u;l.material=a,e.registry.registerBlock(t,l)}}(t.rawid,t.id,t.type,t.texture,t.options,t.hardness,t.miningtime,t.tool)}catch(e){console.log(e)}}))}function f(e,t){s=t,i.h.debugSettings.printRegistryToConsole&&console.log("Items",{...t})}},,function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"g",(function(){return f})),n.d(t,"f",(function(){return h})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"h",(function(){return y})),n.d(t,"a",(function(){return v}));var r=n(78),i=n(65),o=n(198),a=n(291);const s=new i.EventEmitter;let u,l={};async function c(){const e=await Object(o.a)(new a.d("./inflate.js"));u=e}async function f(e){const t=e.height>0?e.height:1;if(e.compressed){let n=32768*t;e.data=await u(e.data,n)}let n=new Uint16Array(e.data.buffer,e.data.byteOffset);const i=new r(n,[32,32*t,32]);for(var o=0;o<t;o++){const t=new r(new Uint16Array(32768),[32,32,32]),n=[e.x,e.y+o,e.z].join("|");for(let e=0;e<32;e++)for(let n=0;n<32;n++)for(let r=0;r<32;r++){const a=i.get(e,r+32*o,n);t.set(e,r,n,a)}const a=new Uint8Array(32768),u={chunk:t,light:new r(a.fill(100,0,a.length),[32,32,32])};s.emit("load",[e.x,e.y+o,e.z],u),l[n]=u}}function h(e){delete l[e]}function d(e){return null!=l[e]}function p(e,t,n,r,i){const o=[Math.floor(t/32),Math.floor(n/32),Math.floor(r/32)].join("|");if(null==l[o])return;let a=t%32,s=n%32,u=r%32;a<0&&(a+=32),s<0&&(s+=32),u<0&&(u+=32),l[o].chunk.set(a,s,u,e),l[o].light.set(a,s,u,i)}function m(){l={}}function y(e){e.world.on("worldDataNeeded",async t=>{const n=t.split("|"),i=function(e){return null!=l[e]&&null!=l[e].chunk&&null!=l[e].light?{chunk:new r(l[e].chunk.data.subarray(0),[...l[e].chunk.shape]),light:new r(l[e].light.data.subarray(0),[...l[e].light.shape])}:null}(`${n[0]}|${n[1]}|${n[2]}`);null!=i&&e.world.setChunkData(t,i.chunk,{},i.light)}),e.world.on("playerEnteredChunk",(t,n,r)=>{v(e,t,n,r)}),s.on("load",([t,n,r])=>{const i=e.world.chunkAddDistance[0],o=e.world.chunkAddDistance[1],a=e.ents.getPosition(e.playerEntity),s=Math.ceil(a[0]/32),u=Math.ceil(a[1]/32),l=Math.ceil(a[2]/32);t>s-i&&t<s+i&&n>u-o&&n<u+o&&r>l-i&&r<l+i&&e.world.manuallyLoadChunk(32*t,32*n,32*r)}),setInterval(()=>{if(!e.world.playerChunkLoaded){const t=e.ents.getPosition(e.playerEntity),n=Math.ceil(t[0]/32),r=Math.ceil(t[1]/32),i=Math.ceil(t[2]/32);d([n,r,i].join("|"))&&e.world.manuallyLoadChunk(32*n,32*r,32*i)}},500)}function v(e,t,n,r){const i=e.world.chunkAddDistance[0],o=e.world.chunkAddDistance[1];let a,s,u;for(a=t-i;a<=t+i;++a)for(s=n-o;s<=n+o;++s)for(u=r-i;u<=r+i;++u)e.world._chunksKnown.includes(a,s,u)||d([a,s,u].join("|"))&&e.world.manuallyLoadChunk(32*a,32*s,32*u);const l=e.world.chunkRemoveDistance[0],c=e.world.chunkRemoveDistance[1];e.world._chunksKnown.forEach(i=>{if(!e.world._chunksToRemove.includes(i[0],i[1],i[2])){var o=i[0]-t,a=i[1]-n,s=i[2]-r;(l<=Math.abs(o)||c<=Math.abs(a)||l<=Math.abs(s))&&e.world.manuallyUnloadChunk(32*i[0],32*i[1],32*i[2])}})}},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),i=n(20),o=n(55),a=n(80),s=n(17);class u{constructor(e){this.settings={},this.lock=!1;const t=new i.g;t.thickness=0,t.horizontalAlignment=2,t.zIndex=20,t.height=120*r.e+"px",t.width=180*r.e+"px",t.background=s.e.menuColor,this.main=t;const n=new a.a;n.fontFamily="Lato",n.fontSize=12*r.e,n.textVerticalAlignment=0,n.color="white",n.text=e,n.top=r.e,t.addControl(n);const o=new a.a;o.fontFamily="Lato",o.fontSize=10*r.e,o.textVerticalAlignment=0,o.color="white",o.text=[{text:""}],o.top=14*r.e,t.addControl(o),this.title=n,this.subtitle=o;const u=new i.g;u.thickness=0,this.center=u,t.addControl(u);const l=new i.j;l.verticalAlignment=1,t.addControl(l),this.panel=l;const c=e=>{t.height=120*r.e+"px",t.width=180*r.e+"px",n.fontSize=12*r.e,n.top=r.e,o.fontSize=10*r.e,o.top=14*r.e};r.b.on("scale-change",c),t.onDisposeObservable.add(()=>{r.b.off("scale-change",c)})}setCenterText(e){if(null==this.centerText){this.centerText=new a.a,this.centerText.fontFamily="Lato",this.centerText.fontSize=10*r.e,this.centerText.color="white",this.centerText.text=[],this.center.addControl(this.centerText);const e=e=>{this.centerText.fontSize=10*r.e};r.b.on("scale-change",e),this.main.onDisposeObservable.add(()=>{r.b.off("scale-change",e)})}this.centerText.text=e}setTitle(e){this.title.text=e}setSubtitle(e){this.subtitle.text=e}createItem(e,t){const n=Object(o.c)();return n.text.text=[{text:e,color:"white",font:"Lato"}],this.panel.addControl(n.item),n.item.onPointerClickObservable.add(t),n}dispose(){this.main.dispose()}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var r=n(17);let i="";function o(e){i=e}function a(e,t){if(e.startsWith("http://")||e.startsWith("https://"))return e;if(e.startsWith("server:")){if(!r.h.allowcustom)return"texture"==t?"./textures/error.png":"model"==t?"./models/player.json":"";switch(e=e.substr(7),t){case"texture":return`${i}/${e}.png`;case"sound":case"audio":return`${i}/${e}.ogg`;case"model":return`${i}/${e}.json`;default:return`${i}/${e}`}}else{if(e.startsWith("skins:"))return r.m+"/playerSkins/"+e.slice(6)+".png";switch(t){case"texture":return`./textures/${e}.png`;case"sound":case"audio":return`./audio/${e}.ogg`;case"model":return`./models/${e}.json`;default:return`./${t}/${e}`}}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return f}));var r=n(4),i=n(20),o=n(40),a=n(93),s=n(17),u=n(230);let l=null;function c(e,t){const n=Object(r.c)(2);l=new i.g,l.zIndex=15,l.verticalAlignment=2,l.background=s.e.backgroundColor,l.thickness=0,n.addControl(l);const c=Object(u.a)(e,t);c.inventory.top=27*r.e+"px";const f=new i.d("inventory","./textures/gui/container/inventory.png");f.width=180*r.e+"px",f.height=176*r.e+"px",f.zIndex=18,l.addControl(f),c.inventory.zIndex=19,l.addControl(c.inventory),l.addControl(c.tempslot.container);const h=new Array(5),d=new i.g;d.zIndex=40,d.verticalAlignment=2,d.top=-39*r.e+"px",d.left=-72*r.e+"px",d.height=72*r.e+"px",d.width=18*r.e+"px",d.thickness=0,l.addControl(d);const p=new Array(4);for(let e=0;e<4;e++){p[e]=Object(a.a)(r.e);const n=p[e].container;n.zIndex=50,n.verticalAlignment=0,n.top=18*r.e*e+"px",n.onPointerClickObservable.add(n=>{let r=o.ActionInventoryClick.Type.LEFT;switch(n.buttonIndex){case 0:r=o.ActionInventoryClick.Type.LEFT;break;case 1:r=o.ActionInventoryClick.Type.MIDDLE;break;case 2:r=o.ActionInventoryClick.Type.RIGHT}t.send("ActionInventoryClick",{slot:e,type:r,inventory:o.ActionInventoryClick.TypeInv.ARMOR})}),n.onPointerEnterObservable.add(e=>{n.background="#ffffff22"}),n.onPointerOutObservable.add(e=>{n.background="#00000000"}),n.isPointerBlocker=!0,d.addControl(n)}const m=new i.g;m.zIndex=40,m.verticalAlignment=2,m.horizontalAlignment=2,m.top=-47*r.e+"px",m.left=43*r.e+"px",m.height=35*r.e+"px",m.width=66*r.e+"px",m.thickness=0,l.addControl(m);for(let e=0;e<5;e++){h[e]=Object(a.a)(r.e);const n=h[e].container;n.zIndex=50,n.verticalAlignment=0,n.horizontalAlignment=0,4==e?(n.left=48*r.e+"px",n.top=10*r.e+"px"):(e%2==1&&(n.left=18*r.e+"px"),e>1&&(n.top=18*r.e+"px")),n.onPointerClickObservable.add(n=>{let r=o.ActionInventoryClick.Type.LEFT;switch(n.buttonIndex){case 0:r=o.ActionInventoryClick.Type.LEFT;break;case 1:r=o.ActionInventoryClick.Type.MIDDLE;break;case 2:r=o.ActionInventoryClick.Type.RIGHT}t.send("ActionInventoryClick",{slot:e,type:r,inventory:o.ActionInventoryClick.TypeInv.CRAFTING})}),n.onPointerEnterObservable.add(e=>{n.background="#ffffff22"}),n.onPointerOutObservable.add(e=>{n.background="#00000000"}),n.isPointerBlocker=!0,m.addControl(n)}const y=async()=>{if(0==l.isVisible)return;const t=e.ents.getState(e.playerEntity,"inventory");for(let e=0;e<4;e++){if(0==Object(a.b)(p[e],t.armor.items[e])){let t;switch(p[e].count.alpha=0,e){case 0:t="./textures/item/empty_armor_slot_helmet.png";break;case 1:t="./textures/item/empty_armor_slot_chestplate.png";break;case 2:t="./textures/item/empty_armor_slot_leggings.png";break;case 3:t="./textures/item/empty_armor_slot_boots.png"}p[e].item.source=t,p[e].count.text=""}}for(let e=0;e<5;e++)Object(a.b)(h[e],t.crafting[e])};e.on("tick",y);const v=e=>{c.inventory.top=27*r.e+"px",f.width=180*e+"px",f.height=176*e+"px",d.top=-39*e+"px",d.left=-72*e+"px",d.height=72*e+"px",d.width=18*e+"px";for(let t=0;t<p.length;t++)p[t].container.height=16*e+"px",p[t].container.width=16*e+"px",p[t].item.width=16*e+"px",p[t].item.height=16*e+"px",p[t].count.fontSize=8*e+"px",p[t].count.left=2*e+"px",p[t].count.top=4*e+"px",p[t].count.shadowOffsetX=e,p[t].count.shadowOffsetY=e;m.top=-47*r.e+"px",m.left=43*r.e+"px",m.height=35*r.e+"px",m.width=66*r.e+"px";for(let t=0;t<5;t++)4==t?(h[t].container.left=48*e+"px",h[t].container.top=10*e+"px"):(t%2==1&&(h[t].container.left=18*e+"px"),t>1&&(h[t].container.top=18*e+"px")),h[t].container.height=16*e+"px",h[t].container.width=16*e+"px",h[t].item.width=16*e+"px",h[t].item.height=16*e+"px",h[t].count.fontSize=8*e+"px",h[t].count.left=2*e+"px",h[t].count.top=4*e+"px",h[t].count.shadowOffsetX=e,h[t].count.shadowOffsetY=e};r.b.on("scale-change",v),l.onDisposeObservable.add(()=>{r.b.off("scale-change",v),e.off("tick",y)})}function f(){null!=l&&l.dispose(),l=null}},function(e,t,n){"use strict";e.exports=n(253)},,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return h}));var r=n(4),i=n(20),o=n(39),a=n(55),s=n(345),u=n(17),l=n(346),c=n(292);let f;function h(e){const t=Object(r.c)(2);let n,h;f=new i.g,f.zIndex=20,f.verticalAlignment=2,f.background=u.e.backgroundColor,f.thickness=0,f.isVisible=!1,t.addControl(f);const d=new i.g;d.thickness=0,d.horizontalAlignment=2,d.zIndex=10,d.height=200*r.e+"px",d.width=160*r.e+"px",d.background=u.e.menuColor,f.addControl(d);const p=new i.k;function m(t){switch(null!=n&&n.dispose(),d.isVisible=!1,t){case"settings":n=Object(s.a)(e,m,f),h="settings";break;case"about":n=Object(l.a)(m),h="about";break;case"login":n=Object(c.a)(m,f),h="login";break;default:return n.dispose(),n=null,d.isVisible=!0,void(h="main")}f.addControl(n)}p.fontFamily="Lato",p.fontSize=13*r.e,p.textVerticalAlignment=0,p.color="white",p.text="Pause",p.top=r.e,d.addControl(p);const y=new i.j;d.addControl(y);const v=Object(a.c)();v.item.verticalAlignment=1,v.text.text=[{text:"Back to game",color:"white",font:"Lato"}],v.item.onPointerClickObservable.add(()=>{f.isVisible=!1,e.container.canvas.requestPointerLock()}),y.addControl(v.item);const g=Object(a.c)();g.item.verticalAlignment=1,g.text.text=[{text:"Settings",color:"white",font:"Lato"}],g.item.onPointerClickObservable.add(()=>{d.isVisible=!1,m("settings")}),y.addControl(g.item);const b=Object(a.c)();b.item.verticalAlignment=1,b.text.text=[{text:"About",color:"white",font:"Lato"}],b.item.onPointerClickObservable.add(()=>{d.isVisible=!1,m("about")}),y.addControl(b.item);const w=Object(a.c)();w.text.text=[{text:"Discord",color:"white",font:"Lato"}],w.item.onPointerClickObservable.add(e=>{window.open("https://discord.com/","_blank")}),y.addControl(w.item);const _=Object(a.c)();_.item.verticalAlignment=1,_.text.text=[{text:Object(o.c)()?"Save and leave":"Disconnect",color:"white",font:"Lato"}],_.item.onPointerClickObservable.add(()=>{f.dispose(),Object(o.b)()}),y.addControl(_.item);const k=e=>{d.height=200*r.e+"px",d.width=160*r.e+"px",p.fontSize=13*r.e,y._children.forEach(e=>{e.width=100*r.e+"px",e.height=18*r.e+"px",e._children[0].fontSize=10*r.e})};return r.b.on("scale-change",k),d.onDisposeObservable.add(()=>{r.b.off("scale-change",k)}),d}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u}));var r=n(31),i=n(17);let o,a;function s(e){const t=e.rendering.getScene();o=r.g.CreatePlane("cloudMesh",{height:1500,width:1500},t);const n=new r.j("cloud",t),i=new r.k("./textures/environment/clouds.png",t,!0,!0,r.k.NEAREST_SAMPLINGMODE);i.hasAlpha=!0,i.vScale=.75,i.uScale=.75,n.diffuseTexture=i,n.opacityTexture=i,n.backFaceCulling=!1,n.emissiveColor=new r.b(1,1,1),o.rotation.x=-Math.PI/2,o.material=n,e.rendering.addMeshToScene(o,!1),o.setPositionWithLocalVector(new r.l(0,0,200));let a=[...e.camera.getPosition()];const s=()=>{const t=e.ents.getState(e.playerEntity,e.ents.names.mesh);null!=t&&o.setParent(t.mesh),i.vOffset+=1e-5+(a[2]-e.camera.getPosition()[2])/1e4,i.uOffset-=(a[0]-e.camera.getPosition()[0])/1e4,a=[...e.camera.getPosition()],o.setPositionWithLocalVector(new r.l(0,0,250-e.camera.getPosition()[1]))};e.on("beforeRender",s),o.onDisposeObservable.add(()=>{e.off("beforeRender",s)})}function u(e){const t=e.rendering.getScene();null==a||a.isDisposed||a.dispose(),a=r.g.CreatePlane("skyMesh",{height:12e3,width:12e3},t);const n=new r.j("sky",t);n.backFaceCulling=!1,n.emissiveColor=new r.b(...i.e.skyColor),n.diffuseColor=n.emissiveColor,a.infiniteDistance=!0,a.renderingGroupId,a.material=n,a.rotation.x=-Math.PI/2,e.rendering.addMeshToScene(a,!1),a.setPositionWithLocalVector(new r.l(0,0,500));const s=()=>{a.setPositionWithLocalVector(new r.l(0,0,500))};e.on("beforeRender",s),o.onDisposeObservable.add(()=>{e.off("beforeRender",s)})}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},,,,,,,function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n(70);function i(e){return e&&"object"==typeof e&&e[r.d]}function o(e,t){if(!t){if(!(n=e)||"object"!=typeof n)throw Error();t=[e]}var n;return{[r.d]:!0,send:e,transferables:t}}},,,,function(e,t,n){"use strict";const r=()=>"function"==typeof Symbol,i=e=>r()&&Boolean(Symbol[e]),o=e=>i(e)?Symbol[e]:"@@"+e;i("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));const a=o("iterator"),s=o("observable"),u=o("species");function l(e,t){const n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function c(e){let t=e.constructor;return void 0!==t&&(t=t[u],null===t&&(t=void 0)),void 0!==t?t:b}function f(e){f.log?f.log(e):setTimeout(()=>{throw e},0)}function h(e){Promise.resolve().then(()=>{try{e()}catch(e){f(e)}})}function d(e){const t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{const e=l(t,"unsubscribe");e&&e.call(t)}}catch(e){f(e)}}function p(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function m(e,t,n){e._state="running";const r=e._observer;try{const i=r?l(r,t):void 0;switch(t){case"next":i&&i.call(r,n);break;case"error":if(p(e),!i)throw n;i.call(r,n);break;case"complete":p(e),i&&i.call(r)}}catch(e){f(e)}"closed"===e._state?d(e):"running"===e._state&&(e._state="ready")}function y(e,t,n){if("closed"!==e._state)return"buffering"===e._state?(e._queue=e._queue||[],void e._queue.push({type:t,value:n})):"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void h(()=>function(e){const t=e._queue;if(t){e._queue=void 0,e._state="ready";for(const n of t)if(m(e,n.type,n.value),"closed"===e._state)break}}(e))):void m(e,t,n)}class v{constructor(e,t){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";const n=new g(this);try{this._cleanup=t.call(void 0,n)}catch(e){n.error(e)}"initializing"===this._state&&(this._state="ready")}get closed(){return"closed"===this._state}unsubscribe(){"closed"!==this._state&&(p(this),d(this))}}class g{constructor(e){this._subscription=e}get closed(){return"closed"===this._subscription._state}next(e){y(this._subscription,"next",e)}error(e){y(this._subscription,"error",e)}complete(){y(this._subscription,"complete")}}class b{constructor(e){if(!(this instanceof b))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof e)throw new TypeError("Observable initializer must be a function");this._subscriber=e}subscribe(e,t,n){return"object"==typeof e&&null!==e||(e={next:e,error:t,complete:n}),new v(e,this._subscriber)}pipe(e,...t){let n=this;for(const r of[e,...t])n=r(n);return n}tap(e,t,n){const r="object"!=typeof e||null===e?{next:e,error:t,complete:n}:e;return new b(e=>this.subscribe({next(t){r.next&&r.next(t),e.next(t)},error(t){r.error&&r.error(t),e.error(t)},complete(){r.complete&&r.complete(),e.complete()},start(e){r.start&&r.start(e)}}))}forEach(e){return new Promise((t,n)=>{if("function"!=typeof e)return void n(new TypeError(e+" is not a function"));function r(){i.unsubscribe(),t()}const i=this.subscribe({next(t){try{e(t,r)}catch(e){n(e),i.unsubscribe()}},error:n,complete:t})})}map(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(c(this))(t=>this.subscribe({next(n){let r=n;try{r=e(n)}catch(e){return t.error(e)}t.next(r)},error(e){t.error(e)},complete(){t.complete()}}))}filter(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(c(this))(t=>this.subscribe({next(n){try{if(!e(n))return}catch(e){return t.error(e)}t.next(n)},error(e){t.error(e)},complete(){t.complete()}}))}reduce(e,t){if("function"!=typeof e)throw new TypeError(e+" is not a function");const n=c(this),r=arguments.length>1;let i=!1,o=t;return new n(t=>this.subscribe({next(n){const a=!i;if(i=!0,!a||r)try{o=e(o,n)}catch(e){return t.error(e)}else o=n},error(e){t.error(e)},complete(){if(!i&&!r)return t.error(new TypeError("Cannot reduce an empty sequence"));t.next(o),t.complete()}}))}concat(...e){const t=c(this);return new t(n=>{let r,i=0;return function o(a){r=a.subscribe({next(e){n.next(e)},error(e){n.error(e)},complete(){i===e.length?(r=void 0,n.complete()):o(t.from(e[i++]))}})}(this),()=>{r&&(r.unsubscribe(),r=void 0)}})}flatMap(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");const t=c(this);return new t(n=>{const r=[],i=this.subscribe({next(i){let a;if(e)try{a=e(i)}catch(e){return n.error(e)}else a=i;const s=t.from(a).subscribe({next(e){n.next(e)},error(e){n.error(e)},complete(){const e=r.indexOf(s);e>=0&&r.splice(e,1),o()}});r.push(s)},error(e){n.error(e)},complete(){o()}});function o(){i.closed&&0===r.length&&n.complete()}return()=>{r.forEach(e=>e.unsubscribe()),i.unsubscribe()}})}[s](){return this}static from(e){const t="function"==typeof this?this:b;if(null==e)throw new TypeError(e+" is not an object");const n=l(e,s);if(n){const r=n.call(e);if(Object(r)!==r)throw new TypeError(r+" is not an object");return function(e){return e instanceof b}(r)&&r.constructor===t?r:new t(e=>r.subscribe(e))}if(i("iterator")){const n=l(e,a);if(n)return new t(t=>{h(()=>{if(!t.closed){for(const r of n.call(e))if(t.next(r),t.closed)return;t.complete()}})})}if(Array.isArray(e))return new t(t=>{h(()=>{if(!t.closed){for(const n of e)if(t.next(n),t.closed)return;t.complete()}})});throw new TypeError(e+" is not observable")}static of(...e){return new("function"==typeof this?this:b)(t=>{h(()=>{if(!t.closed){for(const n of e)if(t.next(n),t.closed)return;t.complete()}})})}static get[u](){return this}}r()&&Object.defineProperty(b,Symbol("extensions"),{value:{symbol:s,hostReportError:f},configurable:!0});t.a=b},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),i=n(20),o=n(55),a=n(80),s=n(17),u=n(421),l=n.n(u);class c{constructor(e,t){this.settings={},this.lock=!1,this.entries={},this.main=new i.g,this.main.thickness=0,this.main.horizontalAlignment=2,this.main.zIndex=10,window.innerHeight>230*r.e?this.main.height=230*r.e+"px":this.main.height="100%",this.main.width=220*r.e+"px",this.main.background=s.e.menuColor;const n=new a.a;n.fontFamily="Lato",n.fontSize=14*r.e,n.textVerticalAlignment=0,n.color="white",n.text=t,n.top=r.e,this.main.addControl(n);const o=new i.h;o.verticalAlignment=0,o.top=18*r.e+"px",o.width=210*r.e+"px",o.height="80%",o.thickness=0,o.barColor="#ffffff44",o.barBackground="#00000000",this.scroll=o,this.main.addControl(o);const u=new i.j;o.addControl(u),this.panel=u;const l=new i.j;l.verticalAlignment=1,this.main.addControl(l),this.downPanel=l;const c=e=>{window.innerHeight>230*r.e?this.main.height=230*r.e+"px":this.main.height="100%",this.main.width=220*r.e+"px",n.fontSize=14*r.e,o.top=18*r.e+"px",o.width=210*r.e+"px"};r.b.on("scale-change",c),this.main.onDisposeObservable.add(()=>{r.b.off("scale-change",c)})}createSlider(e,t,n,r,i,a){const s=Object(o.d)();return s.name.text=t(n),s.slider.value=n,s.slider.minimum=r,s.slider.maximum=i,s.slider.step=a,this.settings[e]=n,s.slider.onValueChangedObservable.add(n=>{s.name.text=t(n),this.settings[e]=n}),this.panel.addControl(s.main),this.entries[e]={gui:s,type:"slider",updateName:()=>{s.name.text=t(this.settings[e])}},s}createInput(e,t,n,r,i,a=!1){const s=Object(o.b)(a);return s.name.text=t,s.input.placeholderText=r,s.input.text=n,s.input.promptMessage=i,this.settings[e]=n,s.input.onTextChangedObservable.add(t=>{this.settings[e]=t.text}),this.panel.addControl(s.main),this.entries[e]={gui:s,type:"input",updateName:()=>{}},s}createSelectable(e,t,n,r){let i=n;this.settings[e]=i;const a=Object(o.c)(200);return a.text.text=[{text:t(i),color:"white",font:"Lato"}],a.item.onPointerClickObservable.add(()=>{i+=1,i>=r.length&&(i=0),this.settings[e]=i,a.text.text[0].text=t(i),a.text._markAsDirty()}),this.panel.addControl(a.item),this.entries[e]={gui:a,type:"selectable",updateName:()=>{a.text.text[0].text=t(i),a.text._markAsDirty()}},a}createLabel(e,t){const n=new i.g;n.width=200*r.e+"px",n.height=18*r.e+"px",n.isPointerBlocker=!0,n.horizontalAlignment=2,n.thickness=0,n.paddingBottom="10px",n.zIndex=10;const o=new i.k;o.fontFamily="lato",o.fontSize=12*r.e+"px",o.text=t,o.color="white",n.addControl(o);const a=()=>{o.fontSize=12*r.e+"px",n.width=200*r.e+"px",n.height=20*r.e+"px"};return r.b.on("scale",a),n.onDisposeObservable.add(()=>{r.b.off("scale",a)}),this.panel.addControl(n),this.entries[e]={gui:n,type:"label",updateName:()=>{}},n}createKeybind(e,t,n){const r=Object(o.c)(200);return r.text.text=[{text:t(n),color:"white",font:"Lato"}],r.item.onPointerClickObservable.add(()=>{if(this.lock)return;this.lock=!0;const n=n=>{document.removeEventListener("keydown",i),document.removeEventListener("mousedown",o),null!=n&&(this.settings[e]=n),r.text.text[0].text=t(this.settings[e]),r.text._markAsDirty(),setTimeout(()=>this.lock=!1,100)},i=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),n(l.a[e.keyCode])},o=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();e.button;n("<mouse "+(e.button+1)+">")};document.addEventListener("keydown",i),document.addEventListener("mousedown",o),r.text.text[0].text=t(null),r.text._markAsDirty()}),this.panel.addControl(r.item),this.entries[e]={gui:r,type:"keybind",updateName:()=>{r.text.text[0].text=t(this.settings[e]),r.text._markAsDirty()}},r}createItem(e,t,n){const r=Object(o.c)(200,11);return r.text.text=[{text:t,color:"white",font:"Lato"}],this.panel.addControl(r.item),n&&r.item.onPointerClickObservable.add(n),this.entries[e]={gui:r,type:"item",updateName:()=>{}},r}setValue(e,t){null!=this.entries[e]&&(this.settings[e]=t,this.entries[e].updateName())}createSettingButton(e,t){const n=Object(o.c)(150,10,14);return n.text.text=[{text:e,color:"white",font:"Lato"}],this.downPanel.addControl(n.item),n.item.onPointerClickObservable.add(t),n}}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.internalError="internalError",e.message="message",e.termination="termination"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return f}));var r=n(4),i=n(20),o=n(40),a=n(93),s=n(17),u=n(230);let l=null;function c(e,t){const n=Object(r.c)(2);l=new i.g,l.zIndex=15,l.verticalAlignment=2,l.background=s.e.backgroundColor,l.thickness=0,n.addControl(l);const c=Object(u.a)(e,t);c.inventory.top=27*r.e+"px";const f=new i.d("inventory","./textures/gui/container/crafting_table.png");f.width=180*r.e+"px",f.height=176*r.e+"px",f.zIndex=18,l.addControl(f),c.inventory.zIndex=19,l.addControl(c.inventory),l.addControl(c.tempslot.container);const h=new Array(5),d=new i.g;d.zIndex=40,d.verticalAlignment=2,d.horizontalAlignment=2,d.top=-40*r.e+"px",d.height=52*r.e+"px",d.width=160*r.e+"px",d.thickness=0,l.addControl(d);for(let e=0;e<10;e++){h[e]=Object(a.a)(r.e);const n=h[e].container;if(n.zIndex=50,n.verticalAlignment=0,n.horizontalAlignment=0,9==e)n.left=116*r.e+"px",n.top=18*r.e+"px";else{n.left=e%3==1?40*r.e+"px":e%3==2?58*r.e+"px":22*r.e+"px";const t=Math.floor(e/3);1==t?n.top=18*r.e+"px":2==t&&(n.top=36*r.e+"px")}n.onPointerClickObservable.add(n=>{let r=o.ActionInventoryClick.Type.LEFT;switch(n.buttonIndex){case 0:r=o.ActionInventoryClick.Type.LEFT;break;case 1:r=o.ActionInventoryClick.Type.MIDDLE;break;case 2:r=o.ActionInventoryClick.Type.RIGHT}t.send("ActionInventoryClick",{slot:e,type:r,inventory:o.ActionInventoryClick.TypeInv.HOOK})}),n.onPointerEnterObservable.add(e=>{n.background="#ffffff22"}),n.onPointerOutObservable.add(e=>{n.background="#00000000"}),n.isPointerBlocker=!0,d.addControl(n)}const p=async()=>{const t=e.ents.getState(e.playerEntity,"inventory").hook;for(let e=0;e<10;e++)Object(a.b)(h[e],t.items[e])};e.on("tick",p);const m=e=>{c.inventory.top=27*r.e+"px",f.width=180*e+"px",f.height=176*e+"px",d.top=-40*r.e+"px",d.height=52*r.e+"px",d.width=160*r.e+"px";for(let t=0;t<10;t++){if(9==t)h[t].container.left=116*r.e+"px",h[t].container.top=18*r.e+"px";else{h[t].container.left=t%3==1?40*r.e+"px":t%3==2?58*r.e+"px":22*r.e+"px";const e=Math.floor(t/3);1==e?h[t].container.top=18*r.e+"px":2==e&&(h[t].container.top=36*r.e+"px")}h[t].container.height=16*e+"px",h[t].container.width=16*e+"px",h[t].item.width=16*e+"px",h[t].item.height=16*e+"px",h[t].count.fontSize=8*e+"px",h[t].count.left=2*e+"px",h[t].count.top=4*e+"px",h[t].count.shadowOffsetX=e,h[t].count.shadowOffsetY=e}};r.b.on("scale-change",m),l.onDisposeObservable.add(()=>{r.b.off("scale-change",m),e.off("tick",p)})}function f(){null!=l&&l.dispose(),l=null}},,,,,,function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return f}));var r=n(198),i=n(291),o=n(17);let a;async function s(){const e=await Object(r.a)(new i.d("./protocol.js"));a=e}class u{constructor(){this.listeners={},this.singleplayer=!1,this.protocol=a}async send(e,t){o.h.debugSettings.printProtocolToConsole&&console.log("s->c",e,t)}close(e){this.listeners={}}emit(e,t){null!=this.listeners[e]&&this.listeners[e].forEach(e=>{e(t)}),o.h.debugSettings.printProtocolToConsole&&console.log("s->c",e,t)}on(e,t){null!=this.listeners[e]||(this.listeners[e]=new Array),this.listeners[e].push(t)}}class l extends u{constructor(e){super(),this.server=e,this.socket=new WebSocket(e),this.socket.binaryType="arraybuffer",this.socket.onopen=()=>{setTimeout(()=>this.emit("connection",{}),50)},this.socket.onerror=()=>{setTimeout(()=>this.emit("PlayerKick",{reason:"Can't connect to "+e}),500)},this.socket.onclose=()=>{setTimeout(()=>this.emit("PlayerKick",{reason:"Connection closed!"}),500)},this.socket.onmessage=async e=>{const t=await a.parseToObject("server",new Uint8Array(e.data));null!=t&&this.emit(t.type,t.data)}}async send(e,t){super.send(e,t);const n=await a.parseToMessage("client",e,t);null!=n&&this.socket.send(n)}close(e){this.listeners={},this.socket.close()}}class c extends u{constructor(e,t){super(),this.handler=t,this.server=t.server,this.socket=new WebSocket(e),t.setSocket(this),this.socket.binaryType="arraybuffer",this.socket.onopen=async()=>{setTimeout(()=>this.emit("connection",{}),50)},this.socket.onerror=()=>{setTimeout(()=>this.emit("PlayerKick",{reason:`Can't connect to ${t.server} (proxy ${e})`}),500)},this.socket.onclose=()=>{setTimeout(()=>this.emit("PlayerKick",{reason:`Connection closed! (proxy ${e})`}),500)},this.socket.onmessage=async e=>{const t=await a.parseToObject("proxy-server",new Uint8Array(e.data));null!=t&&this.handler.receiveServerMessage(t.type,t.data)}}async sendReady(){this.socket.send(await a.parseToMessage("proxy-client","Ready",{ready:!0}))}async sendData(e){this.socket.send(await a.parseToMessage("proxy-client","Data",{message:e}))}async sendProxy(e,t){this.socket.send(await a.parseToMessage("proxy-client",e,t))}receive(e,t){this.emit(e,t)}async send(e,t){super.send(e,t),this.handler.receiveClientMessage(e,t)}close(e){this.listeners={},this.socket.close()}}class f extends u{constructor(e,t,n){super(),this.closed=!1,this.server=n,this.toClient=e,this.toServer=t,this.toClient.on("open",()=>{setTimeout(()=>this.toClient.emit("connection",{}),500)}),this.toClient.on("error",e=>{this.closed||(this.closed=!0,setTimeout(()=>this.toClient.emit("PlayerKick",{reason:e}),500))}),this.toClient.on("close",()=>{this.closed||(this.closed=!0,setTimeout(()=>this.toClient.emit("PlayerKick",{reason:"Connection closed!"}),500))})}async send(e,t){super.send(e,t),this.toServer.emit(e,t),this.toServer.emit("packet",e,t)}close(e){this.listeners={},this.closed||(this.closed=!0,this.toServer.emit("close",e))}on(e,t){this.toClient.on(e,t)}}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return c}));var r=n(4),i=n(20),o=n(17),a=n(105);let s,u;function l(e,t){const n=Object(r.d)(1),u=e.rendering.getScene().getEngine(),l=e.playerEntity,c=e.entities.getPositionData(l);let f;s=new i.k,n.addControl(s),s.text="",s.color="#f0f0f0",s.fontSize=8*r.e+"px",s.left="5px",s.top="5px",s.shadowColor="#111111",s.shadowOffsetX=1,s.shadowOffsetY=1,s.textHorizontalAlignment=i.b.HORIZONTAL_ALIGNMENT_LEFT,s.textVerticalAlignment=i.b.VERTICAL_ALIGNMENT_TOP,f=null!=t?`Server: ${t}\n`:"Singleplayer world\n";let h=o.h.showFPS?`[FPS: ${u.getFps().toFixed(0)}]`:"",d=0;const p=async()=>{if(d<3)d+=1;else if(d=0,h=o.h.showFPS?`[FPS: ${u.getFps().toFixed(0)}]`:"",o.h.debugInfo){const t=Math.floor(c.position[0]/32),n=Math.floor(c.position[1]/32),r=Math.floor(c.position[2]/32),i=`${c.position[0].toFixed(1)}, ${c.position[1].toFixed(1)}, ${c.position[2].toFixed(1)}`,u=`${t}, ${n}, ${r} [${Object(a.b)([t,n,r].join("|"))}]`;s.text=`VoxelCraft2 ${o.i} ${h}\nNoa: ${e.version}\nXYZ: ${i}\nChunk: ${u}\n${f}`}else d=-5,s.text=`VoxelCraft2 ${o.i} (Noa ${e.version}) ${h}`},m=async()=>{s.fontSize=8*r.e+"px"};e.on("tick",p),r.b.on("scale-change",m),s.onDisposeObservable.add(()=>{e.off("tick",p),r.b.off("scale-change",m)})}function c(){const e=Object(r.d)(0);u=new i.c,u.background="#eeeeee88",u.height=2*r.e+"px",u.width=2*r.e+"px",u.thickness=0;const t=()=>{u.height=2*r.e+"px",u.width=2*r.e+"px"};r.b.on("scale-change",t),u.onDisposeObservable.add(()=>{r.b.off("scale-change",t)}),e.addControl(u)}},,,,function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},,,,function(e,t,n){"use strict";function r(e,t){const n=e.deserialize.bind(e),r=e.serialize.bind(e);return{deserialize:e=>t.deserialize(e,n),serialize:e=>t.serialize(e,r)}}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));const i={deserialize:e=>Object.assign(Error(e.message),{name:e.name,stack:e.stack}),serialize:e=>({__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack})},o={deserialize(e){return(t=e)&&"object"==typeof t&&"__error_marker"in t&&"$$error"===t.__error_marker?i.deserialize(e):e;var t},serialize:e=>e instanceof Error?i.serialize(e):e}},function(e,t,n){"use strict";var r={};(0,n(71).assign)(r,n(270),n(272),n(154)),e.exports=r},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(147),i=n(65),o=n(90),a=n(17);function s(e,t,n){const s=new i.EventEmitter,u=new i.EventEmitter,l=new r.c(u,s);l.singleplayer=!0,l.world=t.displayName||e;const c=new Worker("./server.js");return l.attachedData=c,Object(o.f)(e).then(e=>{c.postMessage({type:"SingleplayerViewDistance",data:{value:a.h.viewDistance}}),c.postMessage({type:"SingleplayerWorldData",data:null!=e?e.data:{}}),c.postMessage({type:"SingleplayerSettings",data:t})}),c.onmessage=t=>{const r=t.data.type,i=t.data.data;switch(r){case"ServerStopped":Object(o.j)(e,i.save,i.settings).then(()=>{console.log("Saved!"),c.terminate(),u.emit("ServerStoppingDone",{})}),u.emit("ServerStopped",{});break;case"ServerAutoSave":u.emit("ServerSavingStarted",{}),console.log("Starting saving..."),Object(o.j)(e,i.save,i.settings).then(()=>{console.log("Saved!"),u.emit("ServerSavingDone",{})});break;case"ServerStarted":n&&c.postMessage({type:"SingleplayerConnectPlayer",data:{}})}u.emit(t.data.type,t.data.data)},s.on("packet",(e,t)=>{c.postMessage({type:e,data:t})}),l}},,,function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}));var r=n(4),i=n(80),o=n(20);let a,s=[],u=0;function l(){const e=Object(r.c)(2);a=new o.j,a.verticalAlignment=2,a.horizontalAlignment=2,a.width=180*r.e+"px",a.name="textContainer",a.useBitmapCache=!0,a.zIndex=100,a.background="#11111155",e.addControl(a);const t=e=>{a.width=180*r.e+"px",s.forEach(t=>{t.fontSize=8*e,t.paddingLeft=2*e+"px",t.width=176*e+"px",t.height=t.computeExpectedHeight()+"px"}),f(),a.isVisible=!1};r.b.on("scale-change",t),a.onDisposeObservable.add(()=>{s.forEach(e=>e.dispose()),s=[],u=0,r.b.off("scale-change",t)}),a.isVisible=!1}async function c(e){s.forEach(e=>e.dispose()),s=[];const t=Object.values(e);let n="";t.forEach(e=>{n+=e.text});const o=new i.a;o.fontSize=8*r.e,o.paddingLeft=2*r.e+"px",o.textVerticalAlignment=1,o.textHorizontalAlignment=2,o.fontFamily="Lato",o.width=176*r.e+"px",o.text=t,o.height=o.computeExpectedHeight()+"px",o.useBitmapCache=!0,s.unshift(o),a.addControl(o),f()}function f(){u=0,s.forEach(e=>{u+=e.heightInPixels}),0!=u&&(a.height=u+5+"px")}},,,,function(e,t,n){"use strict";e.exports=f;var r,i=n(81),o=i.LongBits,a=i.base64,s=i.utf8;function u(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function l(){}function c(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function f(){this.len=0,this.head=new u(l,0,0),this.tail=this.head,this.states=null}var h=function(){return i.Buffer?function(){return(f.create=function(){return new r})()}:function(){return new f}};function d(e,t,n){t[n]=255&e}function p(e,t){this.len=e,this.next=void 0,this.val=t}function m(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function y(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}f.create=h(),f.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(f.alloc=i.pool(f.alloc,i.Array.prototype.subarray)),f.prototype._push=function(e,t,n){return this.tail=this.tail.next=new u(e,t,n),this.len+=t,this},p.prototype=Object.create(u.prototype),p.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},f.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new p((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},f.prototype.int32=function(e){return e<0?this._push(m,10,o.fromNumber(e)):this.uint32(e)},f.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},f.prototype.uint64=function(e){var t=o.from(e);return this._push(m,t.length(),t)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(m,t.length(),t)},f.prototype.bool=function(e){return this._push(d,1,e?1:0)},f.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(e){var t=o.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},f.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var v=i.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};f.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(d,1,0);if(i.isString(e)){var n=f.alloc(t=a.length(e));a.decode(e,n,0),e=n}return this.uint32(t)._push(v,t,e)},f.prototype.string=function(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(d,1,0)},f.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new u(l,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(l,0,0),this.len=0),this},f.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},f.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},f._configure=function(e){r=e,f.create=h(),r._configure()}},function(e,t,n){"use strict";e.exports=u;var r,i=n(81),o=i.LongBits,a=i.utf8;function s(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function u(e){this.buf=e,this.pos=0,this.len=e.length}var l,c="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new u(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new u(e);throw Error("illegal buffer")},f=function(){return i.Buffer?function(e){return(u.create=function(e){return i.Buffer.isBuffer(e)?new r(e):c(e)})(e)}:c};function h(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw s(this,8);return new o(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}u.create=f(),u.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,u.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return l}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return d(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|d(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},u.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},u.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},u.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},u.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},u._configure=function(e){r=e,u.create=f(),r._configure();var t=i.Long?"toLong":"toNumber";i.merge(u.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},function(e,t){function n(e,t){const n=e.split("/");let r=0;if(""===n[r]){for(;void 0!==t[".."];)t=t[".."];r++}for(;r<n.length;r++)t=t[n[r]];return t}function r(e){if("string"==typeof e)return{type:e};if(Array.isArray(e))return{type:e[0],typeArgs:e[1]};if("string"==typeof e.type)return e;throw new Error("Not a fieldinfo")}function i(e,t){throw e.field=e.field?t+"."+e.field:t,e}function o(e,t){try{return e()}catch(e){t(e)}}function a(e,t){return o(e,e=>i(e,t))}class s extends Error{constructor(e){super(e),this.name=this.constructor.name,this.message=e,null!=Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor.name)}}e.exports={getField:n,getFieldInfo:r,addErrorField:i,getCount:function(e,t,{count:i,countType:o},s){let u=0,l=0;return"number"==typeof i?u=i:void 0!==i?u=n(i,s):void 0!==o?({size:l,value:u}=a(()=>this.read(e,t,r(o),s),"$count")):u=0,{count:u,size:l}},sendCount:function(e,t,n,{count:i,countType:o},a){return void 0!==i&&e!==i||void 0!==o&&(n=this.write(e,t,n,r(o),a)),n},calcCount:function(e,{count:t,countType:n},i){return void 0===t&&void 0!==n?a(()=>this.sizeOf(e,r(n),i),"$count"):0},tryCatch:o,tryDoc:a,PartialReadError:class extends s{constructor(e){super(e),this.partialReadError=!0}}}},function(e){e.exports=JSON.parse('{"varint":{"enum":["varint"]},"bool":{"enum":["bool"]},"pstring":{"title":"pstring","type":"array","items":[{"enum":["pstring"]},{"oneOf":[{"type":"object","properties":{"countType":{"$ref":"dataType"}},"additionalProperties":false,"required":["countType"]},{"type":"object","properties":{"count":{"$ref":"definitions#/definitions/dataTypeArgsCount"}},"additionalProperties":false,"required":["count"]}]}],"additionalItems":false},"buffer":{"title":"buffer","type":"array","items":[{"enum":["buffer"]},{"oneOf":[{"type":"object","properties":{"countType":{"$ref":"dataType"}},"additionalProperties":false,"required":["countType"]},{"type":"object","properties":{"count":{"$ref":"definitions#/definitions/dataTypeArgsCount"}},"additionalProperties":false,"required":["count"]}]}]},"void":{"enum":["void"]},"bitfield":{"title":"bitfield","type":"array","items":[{"enum":["bitfield"]},{"type":"array","items":{"type":"object","properties":{"name":{"$ref":"definitions#/definitions/fieldName"},"size":{"type":"number"},"signed":{"type":"boolean"}},"required":["name","size","signed"],"additionalProperties":false},"additionalItems":false}],"additionalItems":false},"cstring":{"enum":["cstring"]},"mapper":{"title":"mapper","type":"array","items":[{"enum":["mapper"]},{"type":"object","properties":{"type":{"$ref":"dataType"},"mappings":{"type":"object","patternProperties":{"^[-a-zA-Z0-9 _]+$":{"type":"string"}},"additionalProperties":false}},"required":["type","mappings"],"additionalProperties":false}],"additionalItems":false}}')},function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,i){var o=r,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},function(e,t,n){"use strict";var r=n(71),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function u(e,t){if(t<65534&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}a[254]=a[254]=1,t.string2buf=function(e){var t,n,i,o,a,s=e.length,u=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(u),a=0,o=0;a<u;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},t.buf2binstring=function(e){return u(e,e.length)},t.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,r,i,o,s=t||e.length,l=new Array(2*s);for(r=0,n=0;n<s;)if((i=e[n++])<128)l[r++]=i;else if((o=a[i])>4)l[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<s;)i=i<<6|63&e[n++],o--;o>1?l[r++]=65533:i<65536?l[r++]=i:(i-=65536,l[r++]=55296|i>>10&1023,l[r++]=56320|1023&i)}return u(l,r)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},,,,,,,function(e,t,n){var r,i,o;i=[n(112)],void 0===(o="function"==typeof(r=function(e){"use strict";var t=e.Reader,n=e.Writer,r=e.util,i=e.roots.default||(e.roots.default={});return i.LoginRequest=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.name="",o.prototype.protocol=0,o.prototype.onlinePlayers=0,o.prototype.maxPlayers=0,o.prototype.motd="",o.prototype.software="",o.prototype.auth=!1,o.prototype.secret="",o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.protocol&&Object.hasOwnProperty.call(e,"protocol")&&t.uint32(16).uint32(e.protocol),null!=e.onlinePlayers&&Object.hasOwnProperty.call(e,"onlinePlayers")&&t.uint32(24).uint32(e.onlinePlayers),null!=e.maxPlayers&&Object.hasOwnProperty.call(e,"maxPlayers")&&t.uint32(32).uint32(e.maxPlayers),null!=e.motd&&Object.hasOwnProperty.call(e,"motd")&&t.uint32(42).string(e.motd),null!=e.software&&Object.hasOwnProperty.call(e,"software")&&t.uint32(50).string(e.software),null!=e.auth&&Object.hasOwnProperty.call(e,"auth")&&t.uint32(56).bool(e.auth),null!=e.secret&&Object.hasOwnProperty.call(e,"secret")&&t.uint32(66).string(e.secret),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.LoginRequest;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.name=e.string();break;case 2:o.protocol=e.uint32();break;case 3:o.onlinePlayers=e.uint32();break;case 4:o.maxPlayers=e.uint32();break;case 5:o.motd=e.string();break;case 6:o.software=e.string();break;case 7:o.auth=e.bool();break;case 8:o.secret=e.string();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.name&&e.hasOwnProperty("name")&&!r.isString(e.name)?"name: string expected":null!=e.protocol&&e.hasOwnProperty("protocol")&&!r.isInteger(e.protocol)?"protocol: integer expected":null!=e.onlinePlayers&&e.hasOwnProperty("onlinePlayers")&&!r.isInteger(e.onlinePlayers)?"onlinePlayers: integer expected":null!=e.maxPlayers&&e.hasOwnProperty("maxPlayers")&&!r.isInteger(e.maxPlayers)?"maxPlayers: integer expected":null!=e.motd&&e.hasOwnProperty("motd")&&!r.isString(e.motd)?"motd: string expected":null!=e.software&&e.hasOwnProperty("software")&&!r.isString(e.software)?"software: string expected":null!=e.auth&&e.hasOwnProperty("auth")&&"boolean"!=typeof e.auth?"auth: boolean expected":null!=e.secret&&e.hasOwnProperty("secret")&&!r.isString(e.secret)?"secret: string expected":null},o.fromObject=function(e){if(e instanceof i.LoginRequest)return e;var t=new i.LoginRequest;return null!=e.name&&(t.name=String(e.name)),null!=e.protocol&&(t.protocol=e.protocol>>>0),null!=e.onlinePlayers&&(t.onlinePlayers=e.onlinePlayers>>>0),null!=e.maxPlayers&&(t.maxPlayers=e.maxPlayers>>>0),null!=e.motd&&(t.motd=String(e.motd)),null!=e.software&&(t.software=String(e.software)),null!=e.auth&&(t.auth=Boolean(e.auth)),null!=e.secret&&(t.secret=String(e.secret)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.name="",n.protocol=0,n.onlinePlayers=0,n.maxPlayers=0,n.motd="",n.software="",n.auth=!1,n.secret=""),null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),null!=e.protocol&&e.hasOwnProperty("protocol")&&(n.protocol=e.protocol),null!=e.onlinePlayers&&e.hasOwnProperty("onlinePlayers")&&(n.onlinePlayers=e.onlinePlayers),null!=e.maxPlayers&&e.hasOwnProperty("maxPlayers")&&(n.maxPlayers=e.maxPlayers),null!=e.motd&&e.hasOwnProperty("motd")&&(n.motd=e.motd),null!=e.software&&e.hasOwnProperty("software")&&(n.software=e.software),null!=e.auth&&e.hasOwnProperty("auth")&&(n.auth=e.auth),null!=e.secret&&e.hasOwnProperty("secret")&&(n.secret=e.secret),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.LoginStatus=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.message="",o.prototype.time=r.Long?r.Long.fromBits(0,0,!0):0,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(10).string(e.message),null!=e.time&&Object.hasOwnProperty.call(e,"time")&&t.uint32(16).uint64(e.time),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.LoginStatus;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.message=e.string();break;case 2:o.time=e.uint64();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!r.isString(e.message)?"message: string expected":null!=e.time&&e.hasOwnProperty("time")&&!(r.isInteger(e.time)||e.time&&r.isInteger(e.time.low)&&r.isInteger(e.time.high))?"time: integer|Long expected":null},o.fromObject=function(e){if(e instanceof i.LoginStatus)return e;var t=new i.LoginStatus;return null!=e.message&&(t.message=String(e.message)),null!=e.time&&(r.Long?(t.time=r.Long.fromValue(e.time)).unsigned=!0:"string"==typeof e.time?t.time=parseInt(e.time,10):"number"==typeof e.time?t.time=e.time:"object"==typeof e.time&&(t.time=new r.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0))),t},o.toObject=function(e,t){t||(t={});var n={};if(t.defaults)if(n.message="",r.Long){var i=new r.Long(0,0,!0);n.time=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.time=t.longs===String?"0":0;return null!=e.message&&e.hasOwnProperty("message")&&(n.message=e.message),null!=e.time&&e.hasOwnProperty("time")&&("number"==typeof e.time?n.time=t.longs===String?String(e.time):e.time:n.time=t.longs===String?r.Long.prototype.toString.call(e.time):t.longs===Number?new r.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0):e.time),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.LoginSuccess=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.xPos=0,o.prototype.yPos=0,o.prototype.zPos=0,o.prototype.itemsDef="",o.prototype.blocksDef="",o.prototype.inventory="",o.prototype.armor="",o.prototype.movement="",o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.xPos&&Object.hasOwnProperty.call(e,"xPos")&&t.uint32(9).double(e.xPos),null!=e.yPos&&Object.hasOwnProperty.call(e,"yPos")&&t.uint32(17).double(e.yPos),null!=e.zPos&&Object.hasOwnProperty.call(e,"zPos")&&t.uint32(25).double(e.zPos),null!=e.itemsDef&&Object.hasOwnProperty.call(e,"itemsDef")&&t.uint32(34).string(e.itemsDef),null!=e.blocksDef&&Object.hasOwnProperty.call(e,"blocksDef")&&t.uint32(42).string(e.blocksDef),null!=e.inventory&&Object.hasOwnProperty.call(e,"inventory")&&t.uint32(50).string(e.inventory),null!=e.armor&&Object.hasOwnProperty.call(e,"armor")&&t.uint32(58).string(e.armor),null!=e.movement&&Object.hasOwnProperty.call(e,"movement")&&t.uint32(66).string(e.movement),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.LoginSuccess;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.xPos=e.double();break;case 2:o.yPos=e.double();break;case 3:o.zPos=e.double();break;case 4:o.itemsDef=e.string();break;case 5:o.blocksDef=e.string();break;case 6:o.inventory=e.string();break;case 7:o.armor=e.string();break;case 8:o.movement=e.string();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.xPos&&e.hasOwnProperty("xPos")&&"number"!=typeof e.xPos?"xPos: number expected":null!=e.yPos&&e.hasOwnProperty("yPos")&&"number"!=typeof e.yPos?"yPos: number expected":null!=e.zPos&&e.hasOwnProperty("zPos")&&"number"!=typeof e.zPos?"zPos: number expected":null!=e.itemsDef&&e.hasOwnProperty("itemsDef")&&!r.isString(e.itemsDef)?"itemsDef: string expected":null!=e.blocksDef&&e.hasOwnProperty("blocksDef")&&!r.isString(e.blocksDef)?"blocksDef: string expected":null!=e.inventory&&e.hasOwnProperty("inventory")&&!r.isString(e.inventory)?"inventory: string expected":null!=e.armor&&e.hasOwnProperty("armor")&&!r.isString(e.armor)?"armor: string expected":null!=e.movement&&e.hasOwnProperty("movement")&&!r.isString(e.movement)?"movement: string expected":null},o.fromObject=function(e){if(e instanceof i.LoginSuccess)return e;var t=new i.LoginSuccess;return null!=e.xPos&&(t.xPos=Number(e.xPos)),null!=e.yPos&&(t.yPos=Number(e.yPos)),null!=e.zPos&&(t.zPos=Number(e.zPos)),null!=e.itemsDef&&(t.itemsDef=String(e.itemsDef)),null!=e.blocksDef&&(t.blocksDef=String(e.blocksDef)),null!=e.inventory&&(t.inventory=String(e.inventory)),null!=e.armor&&(t.armor=String(e.armor)),null!=e.movement&&(t.movement=String(e.movement)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.xPos=0,n.yPos=0,n.zPos=0,n.itemsDef="",n.blocksDef="",n.inventory="",n.armor="",n.movement=""),null!=e.xPos&&e.hasOwnProperty("xPos")&&(n.xPos=t.json&&!isFinite(e.xPos)?String(e.xPos):e.xPos),null!=e.yPos&&e.hasOwnProperty("yPos")&&(n.yPos=t.json&&!isFinite(e.yPos)?String(e.yPos):e.yPos),null!=e.zPos&&e.hasOwnProperty("zPos")&&(n.zPos=t.json&&!isFinite(e.zPos)?String(e.zPos):e.zPos),null!=e.itemsDef&&e.hasOwnProperty("itemsDef")&&(n.itemsDef=e.itemsDef),null!=e.blocksDef&&e.hasOwnProperty("blocksDef")&&(n.blocksDef=e.blocksDef),null!=e.inventory&&e.hasOwnProperty("inventory")&&(n.inventory=e.inventory),null!=e.armor&&e.hasOwnProperty("armor")&&(n.armor=e.armor),null!=e.movement&&e.hasOwnProperty("movement")&&(n.movement=e.movement),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.Ping=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.time=r.Long?r.Long.fromBits(0,0,!0):0,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.time&&Object.hasOwnProperty.call(e,"time")&&t.uint32(8).uint64(e.time),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.Ping;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.time=e.uint64();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.time&&e.hasOwnProperty("time")&&!(r.isInteger(e.time)||e.time&&r.isInteger(e.time.low)&&r.isInteger(e.time.high))?"time: integer|Long expected":null},o.fromObject=function(e){if(e instanceof i.Ping)return e;var t=new i.Ping;return null!=e.time&&(r.Long?(t.time=r.Long.fromValue(e.time)).unsigned=!0:"string"==typeof e.time?t.time=parseInt(e.time,10):"number"==typeof e.time?t.time=e.time:"object"==typeof e.time&&(t.time=new r.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0))),t},o.toObject=function(e,t){t||(t={});var n={};if(t.defaults)if(r.Long){var i=new r.Long(0,0,!0);n.time=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.time=t.longs===String?"0":0;return null!=e.time&&e.hasOwnProperty("time")&&("number"==typeof e.time?n.time=t.longs===String?String(e.time):e.time:n.time=t.longs===String?r.Long.prototype.toString.call(e.time):t.longs===Number?new r.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0):e.time),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.PlayerKick=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.reason="",o.prototype.time=r.Long?r.Long.fromBits(0,0,!0):0,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(10).string(e.reason),null!=e.time&&Object.hasOwnProperty.call(e,"time")&&t.uint32(16).uint64(e.time),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.PlayerKick;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.reason=e.string();break;case 2:o.time=e.uint64();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.reason&&e.hasOwnProperty("reason")&&!r.isString(e.reason)?"reason: string expected":null!=e.time&&e.hasOwnProperty("time")&&!(r.isInteger(e.time)||e.time&&r.isInteger(e.time.low)&&r.isInteger(e.time.high))?"time: integer|Long expected":null},o.fromObject=function(e){if(e instanceof i.PlayerKick)return e;var t=new i.PlayerKick;return null!=e.reason&&(t.reason=String(e.reason)),null!=e.time&&(r.Long?(t.time=r.Long.fromValue(e.time)).unsigned=!0:"string"==typeof e.time?t.time=parseInt(e.time,10):"number"==typeof e.time?t.time=e.time:"object"==typeof e.time&&(t.time=new r.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0))),t},o.toObject=function(e,t){t||(t={});var n={};if(t.defaults)if(n.reason="",r.Long){var i=new r.Long(0,0,!0);n.time=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.time=t.longs===String?"0":0;return null!=e.reason&&e.hasOwnProperty("reason")&&(n.reason=e.reason),null!=e.time&&e.hasOwnProperty("time")&&("number"==typeof e.time?n.time=t.longs===String?String(e.time):e.time:n.time=t.longs===String?r.Long.prototype.toString.call(e.time):t.longs===Number?new r.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0):e.time),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.PlayerEntity=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.uuid="",o.prototype.model="",o.prototype.texture="",o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(10).string(e.uuid),null!=e.model&&Object.hasOwnProperty.call(e,"model")&&t.uint32(18).string(e.model),null!=e.texture&&Object.hasOwnProperty.call(e,"texture")&&t.uint32(26).string(e.texture),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.PlayerEntity;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.uuid=e.string();break;case 2:o.model=e.string();break;case 3:o.texture=e.string();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.uuid&&e.hasOwnProperty("uuid")&&!r.isString(e.uuid)?"uuid: string expected":null!=e.model&&e.hasOwnProperty("model")&&!r.isString(e.model)?"model: string expected":null!=e.texture&&e.hasOwnProperty("texture")&&!r.isString(e.texture)?"texture: string expected":null},o.fromObject=function(e){if(e instanceof i.PlayerEntity)return e;var t=new i.PlayerEntity;return null!=e.uuid&&(t.uuid=String(e.uuid)),null!=e.model&&(t.model=String(e.model)),null!=e.texture&&(t.texture=String(e.texture)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.uuid="",n.model="",n.texture=""),null!=e.uuid&&e.hasOwnProperty("uuid")&&(n.uuid=e.uuid),null!=e.model&&e.hasOwnProperty("model")&&(n.model=e.model),null!=e.texture&&e.hasOwnProperty("texture")&&(n.texture=e.texture),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.PlayerTeleport=function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return r.prototype.x=0,r.prototype.y=0,r.prototype.z=0,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=n.create()),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(9).double(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(17).double(e.y),null!=e.z&&Object.hasOwnProperty.call(e,"z")&&t.uint32(25).double(e.z),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.PlayerTeleport;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.x=e.double();break;case 2:o.y=e.double();break;case 3:o.z=e.double();break;default:e.skipType(7&a)}}return o},r.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},r.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.x&&e.hasOwnProperty("x")&&"number"!=typeof e.x?"x: number expected":null!=e.y&&e.hasOwnProperty("y")&&"number"!=typeof e.y?"y: number expected":null!=e.z&&e.hasOwnProperty("z")&&"number"!=typeof e.z?"z: number expected":null},r.fromObject=function(e){if(e instanceof i.PlayerTeleport)return e;var t=new i.PlayerTeleport;return null!=e.x&&(t.x=Number(e.x)),null!=e.y&&(t.y=Number(e.y)),null!=e.z&&(t.z=Number(e.z)),t},r.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.x=0,n.y=0,n.z=0),null!=e.x&&e.hasOwnProperty("x")&&(n.x=t.json&&!isFinite(e.x)?String(e.x):e.x),null!=e.y&&e.hasOwnProperty("y")&&(n.y=t.json&&!isFinite(e.y)?String(e.y):e.y),null!=e.z&&e.hasOwnProperty("z")&&(n.z=t.json&&!isFinite(e.z)?String(e.z):e.z),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},r}(),i.PlayerInventory=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.type="",o.prototype.inventory="",o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(10).string(e.type),null!=e.inventory&&Object.hasOwnProperty.call(e,"inventory")&&t.uint32(18).string(e.inventory),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.PlayerInventory;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.type=e.string();break;case 2:o.inventory=e.string();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.type&&e.hasOwnProperty("type")&&!r.isString(e.type)?"type: string expected":null!=e.inventory&&e.hasOwnProperty("inventory")&&!r.isString(e.inventory)?"inventory: string expected":null},o.fromObject=function(e){if(e instanceof i.PlayerInventory)return e;var t=new i.PlayerInventory;return null!=e.type&&(t.type=String(e.type)),null!=e.inventory&&(t.inventory=String(e.inventory)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.type="",n.inventory=""),null!=e.type&&e.hasOwnProperty("type")&&(n.type=e.type),null!=e.inventory&&e.hasOwnProperty("inventory")&&(n.inventory=e.inventory),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.PlayerSlotUpdate=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.slot=0,o.prototype.type="",o.prototype.data="",o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.slot&&Object.hasOwnProperty.call(e,"slot")&&t.uint32(8).uint32(e.slot),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(18).string(e.type),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(26).string(e.data),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.PlayerSlotUpdate;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.slot=e.uint32();break;case 2:o.type=e.string();break;case 3:o.data=e.string();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.slot&&e.hasOwnProperty("slot")&&!r.isInteger(e.slot)?"slot: integer expected":null!=e.type&&e.hasOwnProperty("type")&&!r.isString(e.type)?"type: string expected":null!=e.data&&e.hasOwnProperty("data")&&!r.isString(e.data)?"data: string expected":null},o.fromObject=function(e){if(e instanceof i.PlayerSlotUpdate)return e;var t=new i.PlayerSlotUpdate;return null!=e.slot&&(t.slot=e.slot>>>0),null!=e.type&&(t.type=String(e.type)),null!=e.data&&(t.data=String(e.data)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.slot=0,n.type="",n.data=""),null!=e.slot&&e.hasOwnProperty("slot")&&(n.slot=e.slot),null!=e.type&&e.hasOwnProperty("type")&&(n.type=e.type),null!=e.data&&e.hasOwnProperty("data")&&(n.data=e.data),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.PlayerApplyImpulse=function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return r.prototype.x=0,r.prototype.y=0,r.prototype.z=0,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=n.create()),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(13).float(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(21).float(e.y),null!=e.z&&Object.hasOwnProperty.call(e,"z")&&t.uint32(29).float(e.z),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.PlayerApplyImpulse;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.x=e.float();break;case 2:o.y=e.float();break;case 3:o.z=e.float();break;default:e.skipType(7&a)}}return o},r.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},r.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.x&&e.hasOwnProperty("x")&&"number"!=typeof e.x?"x: number expected":null!=e.y&&e.hasOwnProperty("y")&&"number"!=typeof e.y?"y: number expected":null!=e.z&&e.hasOwnProperty("z")&&"number"!=typeof e.z?"z: number expected":null},r.fromObject=function(e){if(e instanceof i.PlayerApplyImpulse)return e;var t=new i.PlayerApplyImpulse;return null!=e.x&&(t.x=Number(e.x)),null!=e.y&&(t.y=Number(e.y)),null!=e.z&&(t.z=Number(e.z)),t},r.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.x=0,n.y=0,n.z=0),null!=e.x&&e.hasOwnProperty("x")&&(n.x=t.json&&!isFinite(e.x)?String(e.x):e.x),null!=e.y&&e.hasOwnProperty("y")&&(n.y=t.json&&!isFinite(e.y)?String(e.y):e.y),null!=e.z&&e.hasOwnProperty("z")&&(n.z=t.json&&!isFinite(e.z)?String(e.z):e.z),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},r}(),i.PlayerUpdateMovement=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.key="",o.prototype.value=0,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.PlayerUpdateMovement;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.key=e.string();break;case 2:o.value=e.double();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.key&&e.hasOwnProperty("key")&&!r.isString(e.key)?"key: string expected":null!=e.value&&e.hasOwnProperty("value")&&"number"!=typeof e.value?"value: number expected":null},o.fromObject=function(e){if(e instanceof i.PlayerUpdateMovement)return e;var t=new i.PlayerUpdateMovement;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&(t.value=Number(e.value)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.key="",n.value=0),null!=e.key&&e.hasOwnProperty("key")&&(n.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(n.value=t.json&&!isFinite(e.value)?String(e.value):e.value),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.PlayerUpdatePhysics=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.key="",o.prototype.value=0,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.PlayerUpdatePhysics;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.key=e.string();break;case 2:o.value=e.double();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.key&&e.hasOwnProperty("key")&&!r.isString(e.key)?"key: string expected":null!=e.value&&e.hasOwnProperty("value")&&"number"!=typeof e.value?"value: number expected":null},o.fromObject=function(e){if(e instanceof i.PlayerUpdatePhysics)return e;var t=new i.PlayerUpdatePhysics;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&(t.value=Number(e.value)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.key="",n.value=0),null!=e.key&&e.hasOwnProperty("key")&&(n.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(n.value=t.json&&!isFinite(e.value)?String(e.value):e.value),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.PlayerHealth=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.value=0,o.prototype.max=0,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(8).sint32(e.value),null!=e.max&&Object.hasOwnProperty.call(e,"max")&&t.uint32(16).sint32(e.max),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.PlayerHealth;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.value=e.sint32();break;case 2:o.max=e.sint32();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.value&&e.hasOwnProperty("value")&&!r.isInteger(e.value)?"value: integer expected":null!=e.max&&e.hasOwnProperty("max")&&!r.isInteger(e.max)?"max: integer expected":null},o.fromObject=function(e){if(e instanceof i.PlayerHealth)return e;var t=new i.PlayerHealth;return null!=e.value&&(t.value=0|e.value),null!=e.max&&(t.max=0|e.max),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.value=0,n.max=0),null!=e.value&&e.hasOwnProperty("value")&&(n.value=e.value),null!=e.max&&e.hasOwnProperty("max")&&(n.max=e.max),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.PlayerSetBlockReach=function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return r.prototype.value=0,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=n.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(13).float(e.value),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.PlayerSetBlockReach;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.value=e.float();break;default:e.skipType(7&a)}}return o},r.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},r.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.value&&e.hasOwnProperty("value")&&"number"!=typeof e.value?"value: number expected":null},r.fromObject=function(e){if(e instanceof i.PlayerSetBlockReach)return e;var t=new i.PlayerSetBlockReach;return null!=e.value&&(t.value=Number(e.value)),t},r.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.value=0),null!=e.value&&e.hasOwnProperty("value")&&(n.value=t.json&&!isFinite(e.value)?String(e.value):e.value),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},r}(),i.PlayerOpenInventory=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var a,s;return o.prototype.type=0,o.prototype.name="",o.prototype.data="",o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(18).string(e.name),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(26).string(e.data),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.PlayerOpenInventory;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.type=e.int32();break;case 2:o.name=e.string();break;case 3:o.data=e.string();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.type&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:}return null!=e.name&&e.hasOwnProperty("name")&&!r.isString(e.name)?"name: string expected":null!=e.data&&e.hasOwnProperty("data")&&!r.isString(e.data)?"data: string expected":null},o.fromObject=function(e){if(e instanceof i.PlayerOpenInventory)return e;var t=new i.PlayerOpenInventory;switch(e.type){case"MAIN":case 0:t.type=0;break;case"CHEST":case 1:t.type=1;break;case"CRAFTING":case 2:t.type=2;break;case"FURNACE":case 3:t.type=3}return null!=e.name&&(t.name=String(e.name)),null!=e.data&&(t.data=String(e.data)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"MAIN":0,n.name="",n.data=""),null!=e.type&&e.hasOwnProperty("type")&&(n.type=t.enums===String?i.PlayerOpenInventory.Type[e.type]:e.type),null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),null!=e.data&&e.hasOwnProperty("data")&&(n.data=e.data),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o.Type=(a={},(s=Object.create(a))[a[0]="MAIN"]=0,s[a[1]="CHEST"]=1,s[a[2]="CRAFTING"]=2,s[a[3]="FURNACE"]=3,s),o}(),i.SoundPlay=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.sound="",o.prototype.volume=0,o.prototype.x=0,o.prototype.y=0,o.prototype.z=0,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.sound&&Object.hasOwnProperty.call(e,"sound")&&t.uint32(10).string(e.sound),null!=e.volume&&Object.hasOwnProperty.call(e,"volume")&&t.uint32(16).uint32(e.volume),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(25).double(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(33).double(e.y),null!=e.z&&Object.hasOwnProperty.call(e,"z")&&t.uint32(41).double(e.z),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.SoundPlay;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.sound=e.string();break;case 2:o.volume=e.uint32();break;case 3:o.x=e.double();break;case 4:o.y=e.double();break;case 5:o.z=e.double();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.sound&&e.hasOwnProperty("sound")&&!r.isString(e.sound)?"sound: string expected":null!=e.volume&&e.hasOwnProperty("volume")&&!r.isInteger(e.volume)?"volume: integer expected":null!=e.x&&e.hasOwnProperty("x")&&"number"!=typeof e.x?"x: number expected":null!=e.y&&e.hasOwnProperty("y")&&"number"!=typeof e.y?"y: number expected":null!=e.z&&e.hasOwnProperty("z")&&"number"!=typeof e.z?"z: number expected":null},o.fromObject=function(e){if(e instanceof i.SoundPlay)return e;var t=new i.SoundPlay;return null!=e.sound&&(t.sound=String(e.sound)),null!=e.volume&&(t.volume=e.volume>>>0),null!=e.x&&(t.x=Number(e.x)),null!=e.y&&(t.y=Number(e.y)),null!=e.z&&(t.z=Number(e.z)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.sound="",n.volume=0,n.x=0,n.y=0,n.z=0),null!=e.sound&&e.hasOwnProperty("sound")&&(n.sound=e.sound),null!=e.volume&&e.hasOwnProperty("volume")&&(n.volume=e.volume),null!=e.x&&e.hasOwnProperty("x")&&(n.x=t.json&&!isFinite(e.x)?String(e.x):e.x),null!=e.y&&e.hasOwnProperty("y")&&(n.y=t.json&&!isFinite(e.y)?String(e.y):e.y),null!=e.z&&e.hasOwnProperty("z")&&(n.z=t.json&&!isFinite(e.z)?String(e.z):e.z),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.ChatMessage=function(){function o(e){if(this.message={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.message=r.emptyObject,o.prototype.time=r.Long?r.Long.fromBits(0,0,!0):0,o.create=function(e){return new o(e)},o.encode=function(e,t){if(t||(t=n.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message"))for(var r=Object.keys(e.message),o=0;o<r.length;++o)t.uint32(10).fork().uint32(8).uint32(r[o]),i.ChatMessage.ChatComponent.encode(e.message[r[o]],t.uint32(18).fork()).ldelim().ldelim();return null!=e.time&&Object.hasOwnProperty.call(e,"time")&&t.uint32(16).uint64(e.time),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var o,a,s=void 0===n?e.len:e.pos+n,u=new i.ChatMessage;e.pos<s;){var l=e.uint32();switch(l>>>3){case 1:u.message===r.emptyObject&&(u.message={});var c=e.uint32()+e.pos;for(o=0,a=null;e.pos<c;){var f=e.uint32();switch(f>>>3){case 1:o=e.uint32();break;case 2:a=i.ChatMessage.ChatComponent.decode(e,e.uint32());break;default:e.skipType(7&f)}}u.message[o]=a;break;case 2:u.time=e.uint64();break;default:e.skipType(7&l)}}return u},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message")){if(!r.isObject(e.message))return"message: object expected";for(var t=Object.keys(e.message),n=0;n<t.length;++n){if(!r.key32Re.test(t[n]))return"message: integer key{k:uint32} expected";var o=i.ChatMessage.ChatComponent.verify(e.message[t[n]]);if(o)return"message."+o}}return null!=e.time&&e.hasOwnProperty("time")&&!(r.isInteger(e.time)||e.time&&r.isInteger(e.time.low)&&r.isInteger(e.time.high))?"time: integer|Long expected":null},o.fromObject=function(e){if(e instanceof i.ChatMessage)return e;var t=new i.ChatMessage;if(e.message){if("object"!=typeof e.message)throw TypeError(".ChatMessage.message: object expected");t.message={};for(var n=Object.keys(e.message),o=0;o<n.length;++o){if("object"!=typeof e.message[n[o]])throw TypeError(".ChatMessage.message: object expected");t.message[n[o]]=i.ChatMessage.ChatComponent.fromObject(e.message[n[o]])}}return null!=e.time&&(r.Long?(t.time=r.Long.fromValue(e.time)).unsigned=!0:"string"==typeof e.time?t.time=parseInt(e.time,10):"number"==typeof e.time?t.time=e.time:"object"==typeof e.time&&(t.time=new r.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0))),t},o.toObject=function(e,t){t||(t={});var n,o={};if((t.objects||t.defaults)&&(o.message={}),t.defaults)if(r.Long){var a=new r.Long(0,0,!0);o.time=t.longs===String?a.toString():t.longs===Number?a.toNumber():a}else o.time=t.longs===String?"0":0;if(e.message&&(n=Object.keys(e.message)).length){o.message={};for(var s=0;s<n.length;++s)o.message[n[s]]=i.ChatMessage.ChatComponent.toObject(e.message[n[s]],t)}return null!=e.time&&e.hasOwnProperty("time")&&("number"==typeof e.time?o.time=t.longs===String?String(e.time):e.time:o.time=t.longs===String?r.Long.prototype.toString.call(e.time):t.longs===Number?new r.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0):e.time),o},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o.ChatComponent=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.text="",o.prototype.font="",o.prototype.color="",o.prototype.linethrough=!1,o.prototype.underline=!1,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.text&&Object.hasOwnProperty.call(e,"text")&&t.uint32(10).string(e.text),null!=e.font&&Object.hasOwnProperty.call(e,"font")&&t.uint32(18).string(e.font),null!=e.color&&Object.hasOwnProperty.call(e,"color")&&t.uint32(26).string(e.color),null!=e.linethrough&&Object.hasOwnProperty.call(e,"linethrough")&&t.uint32(32).bool(e.linethrough),null!=e.underline&&Object.hasOwnProperty.call(e,"underline")&&t.uint32(40).bool(e.underline),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.ChatMessage.ChatComponent;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.text=e.string();break;case 2:o.font=e.string();break;case 3:o.color=e.string();break;case 4:o.linethrough=e.bool();break;case 5:o.underline=e.bool();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.text&&e.hasOwnProperty("text")&&!r.isString(e.text)?"text: string expected":null!=e.font&&e.hasOwnProperty("font")&&!r.isString(e.font)?"font: string expected":null!=e.color&&e.hasOwnProperty("color")&&!r.isString(e.color)?"color: string expected":null!=e.linethrough&&e.hasOwnProperty("linethrough")&&"boolean"!=typeof e.linethrough?"linethrough: boolean expected":null!=e.underline&&e.hasOwnProperty("underline")&&"boolean"!=typeof e.underline?"underline: boolean expected":null},o.fromObject=function(e){if(e instanceof i.ChatMessage.ChatComponent)return e;var t=new i.ChatMessage.ChatComponent;return null!=e.text&&(t.text=String(e.text)),null!=e.font&&(t.font=String(e.font)),null!=e.color&&(t.color=String(e.color)),null!=e.linethrough&&(t.linethrough=Boolean(e.linethrough)),null!=e.underline&&(t.underline=Boolean(e.underline)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.text="",n.font="",n.color="",n.linethrough=!1,n.underline=!1),null!=e.text&&e.hasOwnProperty("text")&&(n.text=e.text),null!=e.font&&e.hasOwnProperty("font")&&(n.font=e.font),null!=e.color&&e.hasOwnProperty("color")&&(n.color=e.color),null!=e.linethrough&&e.hasOwnProperty("linethrough")&&(n.linethrough=e.linethrough),null!=e.underline&&e.hasOwnProperty("underline")&&(n.underline=e.underline),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),o}(),i.UpdateTextBoard=function(){function o(e){if(this.message={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var a,s;return o.prototype.type=0,o.prototype.message=r.emptyObject,o.prototype.time=r.Long?r.Long.fromBits(0,0,!0):0,o.create=function(e){return new o(e)},o.encode=function(e,t){if(t||(t=n.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),null!=e.message&&Object.hasOwnProperty.call(e,"message"))for(var r=Object.keys(e.message),o=0;o<r.length;++o)t.uint32(18).fork().uint32(8).uint32(r[o]),i.UpdateTextBoard.ChatComponent.encode(e.message[r[o]],t.uint32(18).fork()).ldelim().ldelim();return null!=e.time&&Object.hasOwnProperty.call(e,"time")&&t.uint32(24).uint64(e.time),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var o,a,s=void 0===n?e.len:e.pos+n,u=new i.UpdateTextBoard;e.pos<s;){var l=e.uint32();switch(l>>>3){case 1:u.type=e.int32();break;case 2:u.message===r.emptyObject&&(u.message={});var c=e.uint32()+e.pos;for(o=0,a=null;e.pos<c;){var f=e.uint32();switch(f>>>3){case 1:o=e.uint32();break;case 2:a=i.UpdateTextBoard.ChatComponent.decode(e,e.uint32());break;default:e.skipType(7&f)}}u.message[o]=a;break;case 3:u.time=e.uint64();break;default:e.skipType(7&l)}}return u},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.type&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:}if(null!=e.message&&e.hasOwnProperty("message")){if(!r.isObject(e.message))return"message: object expected";for(var t=Object.keys(e.message),n=0;n<t.length;++n){if(!r.key32Re.test(t[n]))return"message: integer key{k:uint32} expected";var o=i.UpdateTextBoard.ChatComponent.verify(e.message[t[n]]);if(o)return"message."+o}}return null!=e.time&&e.hasOwnProperty("time")&&!(r.isInteger(e.time)||e.time&&r.isInteger(e.time.low)&&r.isInteger(e.time.high))?"time: integer|Long expected":null},o.fromObject=function(e){if(e instanceof i.UpdateTextBoard)return e;var t=new i.UpdateTextBoard;switch(e.type){case"TAB":case 0:t.type=0;break;case"SIDE":case 1:t.type=1;break;case"CENTER":case 2:t.type=2;break;case"HOTBAR":case 3:t.type=3}if(e.message){if("object"!=typeof e.message)throw TypeError(".UpdateTextBoard.message: object expected");t.message={};for(var n=Object.keys(e.message),o=0;o<n.length;++o){if("object"!=typeof e.message[n[o]])throw TypeError(".UpdateTextBoard.message: object expected");t.message[n[o]]=i.UpdateTextBoard.ChatComponent.fromObject(e.message[n[o]])}}return null!=e.time&&(r.Long?(t.time=r.Long.fromValue(e.time)).unsigned=!0:"string"==typeof e.time?t.time=parseInt(e.time,10):"number"==typeof e.time?t.time=e.time:"object"==typeof e.time&&(t.time=new r.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0))),t},o.toObject=function(e,t){t||(t={});var n,o={};if((t.objects||t.defaults)&&(o.message={}),t.defaults)if(o.type=t.enums===String?"TAB":0,r.Long){var a=new r.Long(0,0,!0);o.time=t.longs===String?a.toString():t.longs===Number?a.toNumber():a}else o.time=t.longs===String?"0":0;if(null!=e.type&&e.hasOwnProperty("type")&&(o.type=t.enums===String?i.UpdateTextBoard.Type[e.type]:e.type),e.message&&(n=Object.keys(e.message)).length){o.message={};for(var s=0;s<n.length;++s)o.message[n[s]]=i.UpdateTextBoard.ChatComponent.toObject(e.message[n[s]],t)}return null!=e.time&&e.hasOwnProperty("time")&&("number"==typeof e.time?o.time=t.longs===String?String(e.time):e.time:o.time=t.longs===String?r.Long.prototype.toString.call(e.time):t.longs===Number?new r.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0):e.time),o},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o.Type=(a={},(s=Object.create(a))[a[0]="TAB"]=0,s[a[1]="SIDE"]=1,s[a[2]="CENTER"]=2,s[a[3]="HOTBAR"]=3,s),o.ChatComponent=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.text="",o.prototype.font="",o.prototype.color="",o.prototype.linethrough=!1,o.prototype.underline=!1,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.text&&Object.hasOwnProperty.call(e,"text")&&t.uint32(10).string(e.text),null!=e.font&&Object.hasOwnProperty.call(e,"font")&&t.uint32(18).string(e.font),null!=e.color&&Object.hasOwnProperty.call(e,"color")&&t.uint32(26).string(e.color),null!=e.linethrough&&Object.hasOwnProperty.call(e,"linethrough")&&t.uint32(32).bool(e.linethrough),null!=e.underline&&Object.hasOwnProperty.call(e,"underline")&&t.uint32(40).bool(e.underline),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.UpdateTextBoard.ChatComponent;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.text=e.string();break;case 2:o.font=e.string();break;case 3:o.color=e.string();break;case 4:o.linethrough=e.bool();break;case 5:o.underline=e.bool();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.text&&e.hasOwnProperty("text")&&!r.isString(e.text)?"text: string expected":null!=e.font&&e.hasOwnProperty("font")&&!r.isString(e.font)?"font: string expected":null!=e.color&&e.hasOwnProperty("color")&&!r.isString(e.color)?"color: string expected":null!=e.linethrough&&e.hasOwnProperty("linethrough")&&"boolean"!=typeof e.linethrough?"linethrough: boolean expected":null!=e.underline&&e.hasOwnProperty("underline")&&"boolean"!=typeof e.underline?"underline: boolean expected":null},o.fromObject=function(e){if(e instanceof i.UpdateTextBoard.ChatComponent)return e;var t=new i.UpdateTextBoard.ChatComponent;return null!=e.text&&(t.text=String(e.text)),null!=e.font&&(t.font=String(e.font)),null!=e.color&&(t.color=String(e.color)),null!=e.linethrough&&(t.linethrough=Boolean(e.linethrough)),null!=e.underline&&(t.underline=Boolean(e.underline)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.text="",n.font="",n.color="",n.linethrough=!1,n.underline=!1),null!=e.text&&e.hasOwnProperty("text")&&(n.text=e.text),null!=e.font&&e.hasOwnProperty("font")&&(n.font=e.font),null!=e.color&&e.hasOwnProperty("color")&&(n.color=e.color),null!=e.linethrough&&e.hasOwnProperty("linethrough")&&(n.linethrough=e.linethrough),null!=e.underline&&e.hasOwnProperty("underline")&&(n.underline=e.underline),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),o}(),i.EntityCreate=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.uuid="",o.prototype.data="",o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(10).string(e.uuid),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).string(e.data),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.EntityCreate;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.uuid=e.string();break;case 2:o.data=e.string();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.uuid&&e.hasOwnProperty("uuid")&&!r.isString(e.uuid)?"uuid: string expected":null!=e.data&&e.hasOwnProperty("data")&&!r.isString(e.data)?"data: string expected":null},o.fromObject=function(e){if(e instanceof i.EntityCreate)return e;var t=new i.EntityCreate;return null!=e.uuid&&(t.uuid=String(e.uuid)),null!=e.data&&(t.data=String(e.data)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.uuid="",n.data=""),null!=e.uuid&&e.hasOwnProperty("uuid")&&(n.uuid=e.uuid),null!=e.data&&e.hasOwnProperty("data")&&(n.data=e.data),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.EntityRemove=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.uuid="",o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(10).string(e.uuid),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.EntityRemove;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.uuid=e.string();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.uuid&&e.hasOwnProperty("uuid")&&!r.isString(e.uuid)?"uuid: string expected":null},o.fromObject=function(e){if(e instanceof i.EntityRemove)return e;var t=new i.EntityRemove;return null!=e.uuid&&(t.uuid=String(e.uuid)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.uuid=""),null!=e.uuid&&e.hasOwnProperty("uuid")&&(n.uuid=e.uuid),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.EntityMove=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.uuid="",o.prototype.x=0,o.prototype.y=0,o.prototype.z=0,o.prototype.rotation=0,o.prototype.pitch=0,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(10).string(e.uuid),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(17).double(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(25).double(e.y),null!=e.z&&Object.hasOwnProperty.call(e,"z")&&t.uint32(33).double(e.z),null!=e.rotation&&Object.hasOwnProperty.call(e,"rotation")&&t.uint32(45).float(e.rotation),null!=e.pitch&&Object.hasOwnProperty.call(e,"pitch")&&t.uint32(53).float(e.pitch),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.EntityMove;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.uuid=e.string();break;case 2:o.x=e.double();break;case 3:o.y=e.double();break;case 4:o.z=e.double();break;case 5:o.rotation=e.float();break;case 6:o.pitch=e.float();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.uuid&&e.hasOwnProperty("uuid")&&!r.isString(e.uuid)?"uuid: string expected":null!=e.x&&e.hasOwnProperty("x")&&"number"!=typeof e.x?"x: number expected":null!=e.y&&e.hasOwnProperty("y")&&"number"!=typeof e.y?"y: number expected":null!=e.z&&e.hasOwnProperty("z")&&"number"!=typeof e.z?"z: number expected":null!=e.rotation&&e.hasOwnProperty("rotation")&&"number"!=typeof e.rotation?"rotation: number expected":null!=e.pitch&&e.hasOwnProperty("pitch")&&"number"!=typeof e.pitch?"pitch: number expected":null},o.fromObject=function(e){if(e instanceof i.EntityMove)return e;var t=new i.EntityMove;return null!=e.uuid&&(t.uuid=String(e.uuid)),null!=e.x&&(t.x=Number(e.x)),null!=e.y&&(t.y=Number(e.y)),null!=e.z&&(t.z=Number(e.z)),null!=e.rotation&&(t.rotation=Number(e.rotation)),null!=e.pitch&&(t.pitch=Number(e.pitch)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.uuid="",n.x=0,n.y=0,n.z=0,n.rotation=0,n.pitch=0),null!=e.uuid&&e.hasOwnProperty("uuid")&&(n.uuid=e.uuid),null!=e.x&&e.hasOwnProperty("x")&&(n.x=t.json&&!isFinite(e.x)?String(e.x):e.x),null!=e.y&&e.hasOwnProperty("y")&&(n.y=t.json&&!isFinite(e.y)?String(e.y):e.y),null!=e.z&&e.hasOwnProperty("z")&&(n.z=t.json&&!isFinite(e.z)?String(e.z):e.z),null!=e.rotation&&e.hasOwnProperty("rotation")&&(n.rotation=t.json&&!isFinite(e.rotation)?String(e.rotation):e.rotation),null!=e.pitch&&e.hasOwnProperty("pitch")&&(n.pitch=t.json&&!isFinite(e.pitch)?String(e.pitch):e.pitch),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.EntityNameUpdate=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.uuid="",o.prototype.name="",o.prototype.visible=!1,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(10).string(e.uuid),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(18).string(e.name),null!=e.visible&&Object.hasOwnProperty.call(e,"visible")&&t.uint32(24).bool(e.visible),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.EntityNameUpdate;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.uuid=e.string();break;case 2:o.name=e.string();break;case 3:o.visible=e.bool();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.uuid&&e.hasOwnProperty("uuid")&&!r.isString(e.uuid)?"uuid: string expected":null!=e.name&&e.hasOwnProperty("name")&&!r.isString(e.name)?"name: string expected":null!=e.visible&&e.hasOwnProperty("visible")&&"boolean"!=typeof e.visible?"visible: boolean expected":null},o.fromObject=function(e){if(e instanceof i.EntityNameUpdate)return e;var t=new i.EntityNameUpdate;return null!=e.uuid&&(t.uuid=String(e.uuid)),null!=e.name&&(t.name=String(e.name)),null!=e.visible&&(t.visible=Boolean(e.visible)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.uuid="",n.name="",n.visible=!1),null!=e.uuid&&e.hasOwnProperty("uuid")&&(n.uuid=e.uuid),null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),null!=e.visible&&e.hasOwnProperty("visible")&&(n.visible=e.visible),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.EntityHeldItem=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.uuid="",o.prototype.id="",o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(10).string(e.uuid),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(18).string(e.id),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.EntityHeldItem;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.uuid=e.string();break;case 2:o.id=e.string();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.uuid&&e.hasOwnProperty("uuid")&&!r.isString(e.uuid)?"uuid: string expected":null!=e.id&&e.hasOwnProperty("id")&&!r.isString(e.id)?"id: string expected":null},o.fromObject=function(e){if(e instanceof i.EntityHeldItem)return e;var t=new i.EntityHeldItem;return null!=e.uuid&&(t.uuid=String(e.uuid)),null!=e.id&&(t.id=String(e.id)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.uuid="",n.id=""),null!=e.uuid&&e.hasOwnProperty("uuid")&&(n.uuid=e.uuid),null!=e.id&&e.hasOwnProperty("id")&&(n.id=e.id),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.EntityArmor=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.uuid="",o.prototype.type=0,o.prototype.id="",o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(10).string(e.uuid),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(16).int32(e.type),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(26).string(e.id),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.EntityArmor;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.uuid=e.string();break;case 2:o.type=e.int32();break;case 3:o.id=e.string();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.uuid&&e.hasOwnProperty("uuid")&&!r.isString(e.uuid)?"uuid: string expected":null!=e.type&&e.hasOwnProperty("type")&&!r.isInteger(e.type)?"type: integer expected":null!=e.id&&e.hasOwnProperty("id")&&!r.isString(e.id)?"id: string expected":null},o.fromObject=function(e){if(e instanceof i.EntityArmor)return e;var t=new i.EntityArmor;return null!=e.uuid&&(t.uuid=String(e.uuid)),null!=e.type&&(t.type=0|e.type),null!=e.id&&(t.id=String(e.id)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.uuid="",n.type=0,n.id=""),null!=e.uuid&&e.hasOwnProperty("uuid")&&(n.uuid=e.uuid),null!=e.type&&e.hasOwnProperty("type")&&(n.type=e.type),null!=e.id&&e.hasOwnProperty("id")&&(n.id=e.id),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.EntityAnimate=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.uuid="",o.prototype.animation="",o.prototype.time=0,o.prototype.replace=!1,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(10).string(e.uuid),null!=e.animation&&Object.hasOwnProperty.call(e,"animation")&&t.uint32(18).string(e.animation),null!=e.time&&Object.hasOwnProperty.call(e,"time")&&t.uint32(24).uint32(e.time),null!=e.replace&&Object.hasOwnProperty.call(e,"replace")&&t.uint32(32).bool(e.replace),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.EntityAnimate;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.uuid=e.string();break;case 2:o.animation=e.string();break;case 3:o.time=e.uint32();break;case 4:o.replace=e.bool();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.uuid&&e.hasOwnProperty("uuid")&&!r.isString(e.uuid)?"uuid: string expected":null!=e.animation&&e.hasOwnProperty("animation")&&!r.isString(e.animation)?"animation: string expected":null!=e.time&&e.hasOwnProperty("time")&&!r.isInteger(e.time)?"time: integer expected":null!=e.replace&&e.hasOwnProperty("replace")&&"boolean"!=typeof e.replace?"replace: boolean expected":null},o.fromObject=function(e){if(e instanceof i.EntityAnimate)return e;var t=new i.EntityAnimate;return null!=e.uuid&&(t.uuid=String(e.uuid)),null!=e.animation&&(t.animation=String(e.animation)),null!=e.time&&(t.time=e.time>>>0),null!=e.replace&&(t.replace=Boolean(e.replace)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.uuid="",n.animation="",n.time=0,n.replace=!1),null!=e.uuid&&e.hasOwnProperty("uuid")&&(n.uuid=e.uuid),null!=e.animation&&e.hasOwnProperty("animation")&&(n.animation=e.animation),null!=e.time&&e.hasOwnProperty("time")&&(n.time=e.time),null!=e.replace&&e.hasOwnProperty("replace")&&(n.replace=e.replace),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.WorldBlockUpdate=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.x=0,o.prototype.y=0,o.prototype.z=0,o.prototype.id=0,o.prototype.particles=!1,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(8).sint32(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(16).sint32(e.y),null!=e.z&&Object.hasOwnProperty.call(e,"z")&&t.uint32(24).sint32(e.z),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(32).uint32(e.id),null!=e.particles&&Object.hasOwnProperty.call(e,"particles")&&t.uint32(40).bool(e.particles),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.WorldBlockUpdate;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.x=e.sint32();break;case 2:o.y=e.sint32();break;case 3:o.z=e.sint32();break;case 4:o.id=e.uint32();break;case 5:o.particles=e.bool();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.x&&e.hasOwnProperty("x")&&!r.isInteger(e.x)?"x: integer expected":null!=e.y&&e.hasOwnProperty("y")&&!r.isInteger(e.y)?"y: integer expected":null!=e.z&&e.hasOwnProperty("z")&&!r.isInteger(e.z)?"z: integer expected":null!=e.id&&e.hasOwnProperty("id")&&!r.isInteger(e.id)?"id: integer expected":null!=e.particles&&e.hasOwnProperty("particles")&&"boolean"!=typeof e.particles?"particles: boolean expected":null},o.fromObject=function(e){if(e instanceof i.WorldBlockUpdate)return e;var t=new i.WorldBlockUpdate;return null!=e.x&&(t.x=0|e.x),null!=e.y&&(t.y=0|e.y),null!=e.z&&(t.z=0|e.z),null!=e.id&&(t.id=e.id>>>0),null!=e.particles&&(t.particles=Boolean(e.particles)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.x=0,n.y=0,n.z=0,n.id=0,n.particles=!1),null!=e.x&&e.hasOwnProperty("x")&&(n.x=e.x),null!=e.y&&e.hasOwnProperty("y")&&(n.y=e.y),null!=e.z&&e.hasOwnProperty("z")&&(n.z=e.z),null!=e.id&&e.hasOwnProperty("id")&&(n.id=e.id),null!=e.particles&&e.hasOwnProperty("particles")&&(n.particles=e.particles),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.WorldMultiBlockUpdate=function(){function o(e){if(this.blocks={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.blocks=r.emptyObject,o.create=function(e){return new o(e)},o.encode=function(e,t){if(t||(t=n.create()),null!=e.blocks&&Object.hasOwnProperty.call(e,"blocks"))for(var r=Object.keys(e.blocks),o=0;o<r.length;++o)t.uint32(10).fork().uint32(8).int32(r[o]),i.WorldBlockUpdate.encode(e.blocks[r[o]],t.uint32(18).fork()).ldelim().ldelim();return t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var o,a,s=void 0===n?e.len:e.pos+n,u=new i.WorldMultiBlockUpdate;e.pos<s;){var l=e.uint32();switch(l>>>3){case 1:u.blocks===r.emptyObject&&(u.blocks={});var c=e.uint32()+e.pos;for(o=0,a=null;e.pos<c;){var f=e.uint32();switch(f>>>3){case 1:o=e.int32();break;case 2:a=i.WorldBlockUpdate.decode(e,e.uint32());break;default:e.skipType(7&f)}}u.blocks[o]=a;break;default:e.skipType(7&l)}}return u},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.blocks&&e.hasOwnProperty("blocks")){if(!r.isObject(e.blocks))return"blocks: object expected";for(var t=Object.keys(e.blocks),n=0;n<t.length;++n){if(!r.key32Re.test(t[n]))return"blocks: integer key{k:int32} expected";var o=i.WorldBlockUpdate.verify(e.blocks[t[n]]);if(o)return"blocks."+o}}return null},o.fromObject=function(e){if(e instanceof i.WorldMultiBlockUpdate)return e;var t=new i.WorldMultiBlockUpdate;if(e.blocks){if("object"!=typeof e.blocks)throw TypeError(".WorldMultiBlockUpdate.blocks: object expected");t.blocks={};for(var n=Object.keys(e.blocks),r=0;r<n.length;++r){if("object"!=typeof e.blocks[n[r]])throw TypeError(".WorldMultiBlockUpdate.blocks: object expected");t.blocks[n[r]]=i.WorldBlockUpdate.fromObject(e.blocks[n[r]])}}return t},o.toObject=function(e,t){t||(t={});var n,r={};if((t.objects||t.defaults)&&(r.blocks={}),e.blocks&&(n=Object.keys(e.blocks)).length){r.blocks={};for(var o=0;o<n.length;++o)r.blocks[n[o]]=i.WorldBlockUpdate.toObject(e.blocks[n[o]],t)}return r},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.WorldChunkLoad=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.x=0,o.prototype.y=0,o.prototype.z=0,o.prototype.data=r.newBuffer([]),o.prototype.height=0,o.prototype.compressed=!1,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(8).sint32(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(16).sint32(e.y),null!=e.z&&Object.hasOwnProperty.call(e,"z")&&t.uint32(24).sint32(e.z),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(34).bytes(e.data),null!=e.height&&Object.hasOwnProperty.call(e,"height")&&t.uint32(40).sint32(e.height),null!=e.compressed&&Object.hasOwnProperty.call(e,"compressed")&&t.uint32(48).bool(e.compressed),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.WorldChunkLoad;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.x=e.sint32();break;case 2:o.y=e.sint32();break;case 3:o.z=e.sint32();break;case 4:o.data=e.bytes();break;case 5:o.height=e.sint32();break;case 6:o.compressed=e.bool();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.x&&e.hasOwnProperty("x")&&!r.isInteger(e.x)?"x: integer expected":null!=e.y&&e.hasOwnProperty("y")&&!r.isInteger(e.y)?"y: integer expected":null!=e.z&&e.hasOwnProperty("z")&&!r.isInteger(e.z)?"z: integer expected":null!=e.data&&e.hasOwnProperty("data")&&!(e.data&&"number"==typeof e.data.length||r.isString(e.data))?"data: buffer expected":null!=e.height&&e.hasOwnProperty("height")&&!r.isInteger(e.height)?"height: integer expected":null!=e.compressed&&e.hasOwnProperty("compressed")&&"boolean"!=typeof e.compressed?"compressed: boolean expected":null},o.fromObject=function(e){if(e instanceof i.WorldChunkLoad)return e;var t=new i.WorldChunkLoad;return null!=e.x&&(t.x=0|e.x),null!=e.y&&(t.y=0|e.y),null!=e.z&&(t.z=0|e.z),null!=e.data&&("string"==typeof e.data?r.base64.decode(e.data,t.data=r.newBuffer(r.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),null!=e.height&&(t.height=0|e.height),null!=e.compressed&&(t.compressed=Boolean(e.compressed)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.x=0,n.y=0,n.z=0,t.bytes===String?n.data="":(n.data=[],t.bytes!==Array&&(n.data=r.newBuffer(n.data))),n.height=0,n.compressed=!1),null!=e.x&&e.hasOwnProperty("x")&&(n.x=e.x),null!=e.y&&e.hasOwnProperty("y")&&(n.y=e.y),null!=e.z&&e.hasOwnProperty("z")&&(n.z=e.z),null!=e.data&&e.hasOwnProperty("data")&&(n.data=t.bytes===String?r.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),null!=e.height&&e.hasOwnProperty("height")&&(n.height=e.height),null!=e.compressed&&e.hasOwnProperty("compressed")&&(n.compressed=e.compressed),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.WorldChunkUnload=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.x=0,o.prototype.y=0,o.prototype.z=0,o.prototype.height=0,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(8).sint32(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(16).sint32(e.y),null!=e.z&&Object.hasOwnProperty.call(e,"z")&&t.uint32(24).sint32(e.z),null!=e.height&&Object.hasOwnProperty.call(e,"height")&&t.uint32(32).sint32(e.height),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.WorldChunkUnload;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.x=e.sint32();break;case 2:o.y=e.sint32();break;case 3:o.z=e.sint32();break;case 4:o.height=e.sint32();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.x&&e.hasOwnProperty("x")&&!r.isInteger(e.x)?"x: integer expected":null!=e.y&&e.hasOwnProperty("y")&&!r.isInteger(e.y)?"y: integer expected":null!=e.z&&e.hasOwnProperty("z")&&!r.isInteger(e.z)?"z: integer expected":null!=e.height&&e.hasOwnProperty("height")&&!r.isInteger(e.height)?"height: integer expected":null},o.fromObject=function(e){if(e instanceof i.WorldChunkUnload)return e;var t=new i.WorldChunkUnload;return null!=e.x&&(t.x=0|e.x),null!=e.y&&(t.y=0|e.y),null!=e.z&&(t.z=0|e.z),null!=e.height&&(t.height=0|e.height),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.x=0,n.y=0,n.z=0,n.height=0),null!=e.x&&e.hasOwnProperty("x")&&(n.x=e.x),null!=e.y&&e.hasOwnProperty("y")&&(n.y=e.y),null!=e.z&&e.hasOwnProperty("z")&&(n.z=e.z),null!=e.height&&e.hasOwnProperty("height")&&(n.height=e.height),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.WorldChunkIsLoaded=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.x=0,o.prototype.y=0,o.prototype.z=0,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(8).sint32(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(16).sint32(e.y),null!=e.z&&Object.hasOwnProperty.call(e,"z")&&t.uint32(24).sint32(e.z),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.WorldChunkIsLoaded;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.x=e.sint32();break;case 2:o.y=e.sint32();break;case 3:o.z=e.sint32();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.x&&e.hasOwnProperty("x")&&!r.isInteger(e.x)?"x: integer expected":null!=e.y&&e.hasOwnProperty("y")&&!r.isInteger(e.y)?"y: integer expected":null!=e.z&&e.hasOwnProperty("z")&&!r.isInteger(e.z)?"z: integer expected":null},o.fromObject=function(e){if(e instanceof i.WorldChunkIsLoaded)return e;var t=new i.WorldChunkIsLoaded;return null!=e.x&&(t.x=0|e.x),null!=e.y&&(t.y=0|e.y),null!=e.z&&(t.z=0|e.z),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.x=0,n.y=0,n.z=0),null!=e.x&&e.hasOwnProperty("x")&&(n.x=e.x),null!=e.y&&e.hasOwnProperty("y")&&(n.y=e.y),null!=e.z&&e.hasOwnProperty("z")&&(n.z=e.z),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.WorldChunksRemoveAll=function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return r.prototype.confirm=!1,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=n.create()),null!=e.confirm&&Object.hasOwnProperty.call(e,"confirm")&&t.uint32(8).bool(e.confirm),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.WorldChunksRemoveAll;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.confirm=e.bool();break;default:e.skipType(7&a)}}return o},r.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},r.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.confirm&&e.hasOwnProperty("confirm")&&"boolean"!=typeof e.confirm?"confirm: boolean expected":null},r.fromObject=function(e){if(e instanceof i.WorldChunksRemoveAll)return e;var t=new i.WorldChunksRemoveAll;return null!=e.confirm&&(t.confirm=Boolean(e.confirm)),t},r.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.confirm=!1),null!=e.confirm&&e.hasOwnProperty("confirm")&&(n.confirm=e.confirm),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},r}(),i.RegistryUpdate=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.itemsDef="",o.prototype.blocksDef="",o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.itemsDef&&Object.hasOwnProperty.call(e,"itemsDef")&&t.uint32(10).string(e.itemsDef),null!=e.blocksDef&&Object.hasOwnProperty.call(e,"blocksDef")&&t.uint32(18).string(e.blocksDef),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.RegistryUpdate;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.itemsDef=e.string();break;case 2:o.blocksDef=e.string();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.itemsDef&&e.hasOwnProperty("itemsDef")&&!r.isString(e.itemsDef)?"itemsDef: string expected":null!=e.blocksDef&&e.hasOwnProperty("blocksDef")&&!r.isString(e.blocksDef)?"blocksDef: string expected":null},o.fromObject=function(e){if(e instanceof i.RegistryUpdate)return e;var t=new i.RegistryUpdate;return null!=e.itemsDef&&(t.itemsDef=String(e.itemsDef)),null!=e.blocksDef&&(t.blocksDef=String(e.blocksDef)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.itemsDef="",n.blocksDef=""),null!=e.itemsDef&&e.hasOwnProperty("itemsDef")&&(n.itemsDef=e.itemsDef),null!=e.blocksDef&&e.hasOwnProperty("blocksDef")&&(n.blocksDef=e.blocksDef),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.EnvironmentFogUpdate=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.mode=0,o.prototype.density=0,o.prototype.start=0,o.prototype.end=0,o.prototype.colorRed=0,o.prototype.colorGreen=0,o.prototype.colorBlue=0,o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(8).uint32(e.mode),null!=e.density&&Object.hasOwnProperty.call(e,"density")&&t.uint32(21).float(e.density),null!=e.start&&Object.hasOwnProperty.call(e,"start")&&t.uint32(29).float(e.start),null!=e.end&&Object.hasOwnProperty.call(e,"end")&&t.uint32(37).float(e.end),null!=e.colorRed&&Object.hasOwnProperty.call(e,"colorRed")&&t.uint32(45).float(e.colorRed),null!=e.colorGreen&&Object.hasOwnProperty.call(e,"colorGreen")&&t.uint32(53).float(e.colorGreen),null!=e.colorBlue&&Object.hasOwnProperty.call(e,"colorBlue")&&t.uint32(61).float(e.colorBlue),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.EnvironmentFogUpdate;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.mode=e.uint32();break;case 2:o.density=e.float();break;case 3:o.start=e.float();break;case 4:o.end=e.float();break;case 5:o.colorRed=e.float();break;case 6:o.colorGreen=e.float();break;case 7:o.colorBlue=e.float();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.mode&&e.hasOwnProperty("mode")&&!r.isInteger(e.mode)?"mode: integer expected":null!=e.density&&e.hasOwnProperty("density")&&"number"!=typeof e.density?"density: number expected":null!=e.start&&e.hasOwnProperty("start")&&"number"!=typeof e.start?"start: number expected":null!=e.end&&e.hasOwnProperty("end")&&"number"!=typeof e.end?"end: number expected":null!=e.colorRed&&e.hasOwnProperty("colorRed")&&"number"!=typeof e.colorRed?"colorRed: number expected":null!=e.colorGreen&&e.hasOwnProperty("colorGreen")&&"number"!=typeof e.colorGreen?"colorGreen: number expected":null!=e.colorBlue&&e.hasOwnProperty("colorBlue")&&"number"!=typeof e.colorBlue?"colorBlue: number expected":null},o.fromObject=function(e){if(e instanceof i.EnvironmentFogUpdate)return e;var t=new i.EnvironmentFogUpdate;return null!=e.mode&&(t.mode=e.mode>>>0),null!=e.density&&(t.density=Number(e.density)),null!=e.start&&(t.start=Number(e.start)),null!=e.end&&(t.end=Number(e.end)),null!=e.colorRed&&(t.colorRed=Number(e.colorRed)),null!=e.colorGreen&&(t.colorGreen=Number(e.colorGreen)),null!=e.colorBlue&&(t.colorBlue=Number(e.colorBlue)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.mode=0,n.density=0,n.start=0,n.end=0,n.colorRed=0,n.colorGreen=0,n.colorBlue=0),null!=e.mode&&e.hasOwnProperty("mode")&&(n.mode=e.mode),null!=e.density&&e.hasOwnProperty("density")&&(n.density=t.json&&!isFinite(e.density)?String(e.density):e.density),null!=e.start&&e.hasOwnProperty("start")&&(n.start=t.json&&!isFinite(e.start)?String(e.start):e.start),null!=e.end&&e.hasOwnProperty("end")&&(n.end=t.json&&!isFinite(e.end)?String(e.end):e.end),null!=e.colorRed&&e.hasOwnProperty("colorRed")&&(n.colorRed=t.json&&!isFinite(e.colorRed)?String(e.colorRed):e.colorRed),null!=e.colorGreen&&e.hasOwnProperty("colorGreen")&&(n.colorGreen=t.json&&!isFinite(e.colorGreen)?String(e.colorGreen):e.colorGreen),null!=e.colorBlue&&e.hasOwnProperty("colorBlue")&&(n.colorBlue=t.json&&!isFinite(e.colorBlue)?String(e.colorBlue):e.colorBlue),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i.EnvironmentSkyUpdate=function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return r.prototype.clouds=!1,r.prototype.colorRed=0,r.prototype.colorGreen=0,r.prototype.colorBlue=0,r.prototype.colorRedTop=0,r.prototype.colorGreenTop=0,r.prototype.colorBlueTop=0,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=n.create()),null!=e.clouds&&Object.hasOwnProperty.call(e,"clouds")&&t.uint32(8).bool(e.clouds),null!=e.colorRed&&Object.hasOwnProperty.call(e,"colorRed")&&t.uint32(21).float(e.colorRed),null!=e.colorGreen&&Object.hasOwnProperty.call(e,"colorGreen")&&t.uint32(29).float(e.colorGreen),null!=e.colorBlue&&Object.hasOwnProperty.call(e,"colorBlue")&&t.uint32(37).float(e.colorBlue),null!=e.colorRedTop&&Object.hasOwnProperty.call(e,"colorRedTop")&&t.uint32(45).float(e.colorRedTop),null!=e.colorGreenTop&&Object.hasOwnProperty.call(e,"colorGreenTop")&&t.uint32(53).float(e.colorGreenTop),null!=e.colorBlueTop&&Object.hasOwnProperty.call(e,"colorBlueTop")&&t.uint32(61).float(e.colorBlueTop),t},r.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},r.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.EnvironmentSkyUpdate;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.clouds=e.bool();break;case 2:o.colorRed=e.float();break;case 3:o.colorGreen=e.float();break;case 4:o.colorBlue=e.float();break;case 5:o.colorRedTop=e.float();break;case 6:o.colorGreenTop=e.float();break;case 7:o.colorBlueTop=e.float();break;default:e.skipType(7&a)}}return o},r.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},r.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.clouds&&e.hasOwnProperty("clouds")&&"boolean"!=typeof e.clouds?"clouds: boolean expected":null!=e.colorRed&&e.hasOwnProperty("colorRed")&&"number"!=typeof e.colorRed?"colorRed: number expected":null!=e.colorGreen&&e.hasOwnProperty("colorGreen")&&"number"!=typeof e.colorGreen?"colorGreen: number expected":null!=e.colorBlue&&e.hasOwnProperty("colorBlue")&&"number"!=typeof e.colorBlue?"colorBlue: number expected":null!=e.colorRedTop&&e.hasOwnProperty("colorRedTop")&&"number"!=typeof e.colorRedTop?"colorRedTop: number expected":null!=e.colorGreenTop&&e.hasOwnProperty("colorGreenTop")&&"number"!=typeof e.colorGreenTop?"colorGreenTop: number expected":null!=e.colorBlueTop&&e.hasOwnProperty("colorBlueTop")&&"number"!=typeof e.colorBlueTop?"colorBlueTop: number expected":null},r.fromObject=function(e){if(e instanceof i.EnvironmentSkyUpdate)return e;var t=new i.EnvironmentSkyUpdate;return null!=e.clouds&&(t.clouds=Boolean(e.clouds)),null!=e.colorRed&&(t.colorRed=Number(e.colorRed)),null!=e.colorGreen&&(t.colorGreen=Number(e.colorGreen)),null!=e.colorBlue&&(t.colorBlue=Number(e.colorBlue)),null!=e.colorRedTop&&(t.colorRedTop=Number(e.colorRedTop)),null!=e.colorGreenTop&&(t.colorGreenTop=Number(e.colorGreenTop)),null!=e.colorBlueTop&&(t.colorBlueTop=Number(e.colorBlueTop)),t},r.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.clouds=!1,n.colorRed=0,n.colorGreen=0,n.colorBlue=0,n.colorRedTop=0,n.colorGreenTop=0,n.colorBlueTop=0),null!=e.clouds&&e.hasOwnProperty("clouds")&&(n.clouds=e.clouds),null!=e.colorRed&&e.hasOwnProperty("colorRed")&&(n.colorRed=t.json&&!isFinite(e.colorRed)?String(e.colorRed):e.colorRed),null!=e.colorGreen&&e.hasOwnProperty("colorGreen")&&(n.colorGreen=t.json&&!isFinite(e.colorGreen)?String(e.colorGreen):e.colorGreen),null!=e.colorBlue&&e.hasOwnProperty("colorBlue")&&(n.colorBlue=t.json&&!isFinite(e.colorBlue)?String(e.colorBlue):e.colorBlue),null!=e.colorRedTop&&e.hasOwnProperty("colorRedTop")&&(n.colorRedTop=t.json&&!isFinite(e.colorRedTop)?String(e.colorRedTop):e.colorRedTop),null!=e.colorGreenTop&&e.hasOwnProperty("colorGreenTop")&&(n.colorGreenTop=t.json&&!isFinite(e.colorGreenTop)?String(e.colorGreenTop):e.colorGreenTop),null!=e.colorBlueTop&&e.hasOwnProperty("colorBlueTop")&&(n.colorBlueTop=t.json&&!isFinite(e.colorBlueTop)?String(e.colorBlueTop):e.colorBlueTop),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},r}(),i.PluginMessage=function(){function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return o.prototype.key="",o.prototype.version=0,o.prototype.value=r.newBuffer([]),o.create=function(e){return new o(e)},o.encode=function(e,t){return t||(t=n.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(16).uint32(e.version),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(26).bytes(e.value),t},o.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},o.decode=function(e,n){e instanceof t||(e=t.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i.PluginMessage;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:o.key=e.string();break;case 2:o.version=e.uint32();break;case 3:o.value=e.bytes();break;default:e.skipType(7&a)}}return o},o.decodeDelimited=function(e){return e instanceof t||(e=new t(e)),this.decode(e,e.uint32())},o.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.key&&e.hasOwnProperty("key")&&!r.isString(e.key)?"key: string expected":null!=e.version&&e.hasOwnProperty("version")&&!r.isInteger(e.version)?"version: integer expected":null!=e.value&&e.hasOwnProperty("value")&&!(e.value&&"number"==typeof e.value.length||r.isString(e.value))?"value: buffer expected":null},o.fromObject=function(e){if(e instanceof i.PluginMessage)return e;var t=new i.PluginMessage;return null!=e.key&&(t.key=String(e.key)),null!=e.version&&(t.version=e.version>>>0),null!=e.value&&("string"==typeof e.value?r.base64.decode(e.value,t.value=r.newBuffer(r.base64.length(e.value)),0):e.value.length&&(t.value=e.value)),t},o.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.key="",n.version=0,t.bytes===String?n.value="":(n.value=[],t.bytes!==Array&&(n.value=r.newBuffer(n.value)))),null!=e.key&&e.hasOwnProperty("key")&&(n.key=e.key),null!=e.version&&e.hasOwnProperty("version")&&(n.version=e.version),null!=e.value&&e.hasOwnProperty("value")&&(n.value=t.bytes===String?r.base64.encode(e.value,0,e.value.length):t.bytes===Array?Array.prototype.slice.call(e.value):e.value),n},o.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},o}(),i})?r.apply(t,i):r)||(e.exports=o)},,function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return l}));var r=n(4),i=n(80),o=n(20);let a;function s(){a=new o.j,a.verticalAlignment=0,a.horizontalAlignment=1,a.name="textContainer",a.useBitmapCache=!0,a.width=120*r.e+"px",a.zIndex=1e3,a.isPointerBlocker=!1,a.isHitTestVisible=!1,a.left=-1*r.e;r.b.on("scale-change",e=>{a.width=120*r.e+"px",a.top=r.e,a.left=-1*r.e}),Object(r.c)(2).addControl(a)}async function u(e,t,n,s){const u=new o.g;u.thickness=0,u.width=120*r.e+"px",u.height=30*r.e+"px",u.top=r.e,u.background=n,u.isPointerBlocker=!1,u.isHitTestVisible=!1;const l=new i.a;l.text=e,l.fontFamily="lato",l.color="white",l.fontSize=10*r.e,l.textHorizontalAlignment=0,l.textVerticalAlignment=0,l.left=5*r.e,u.addControl(l);const c=new i.a;c.text=t,c.fontFamily="lato",c.color="white",c.fontSize=6*r.e,c.textHorizontalAlignment=0,c.textVerticalAlignment=0,c.top=13*r.e,c.left=5*r.e,u.addControl(c);const f=e=>{c.fontSize=6*r.e,c.top=13*r.e,u.top=r.e,l.fontSize=10*r.e,u.width=120*r.e+"px",u.height=30*r.e+"px",c.left=5*r.e,l.left=5*r.e};r.b.on("scale-change",f),u.onDisposeObservable.add(()=>{r.b.off("scale-change",f)}),setTimeout(()=>{u.dispose(),a.removeControl(u)},1e3*s),a.addControl(u)}const l={error:"#b50c0099",message:"#5c5c5c99"}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return j}));var r=n(4),i=n(20),o=n(80),a=n(39),s=n(160),u=n(55),l=n(17);function c(){const e=new i.g;e.height=16*r.e+"px",e.thickness=0;const t=new i.d;t.width=16*r.e+"px",t.horizontalAlignment=0,e.addControl(t);const n=new i.g;n.width="18%",n.left="5%",n.horizontalAlignment=0,n.thickness=0,e.addControl(n);const o=new i.g;o.width="47%",o.horizontalAlignment=0,o.left="23%",o.thickness=0,e.addControl(o);const a=new i.g;a.width="10%",a.horizontalAlignment=0,a.left="70%",a.thickness=0,e.addControl(a);const s=new i.g;s.width="20%",s.horizontalAlignment=0,s.left="80%",s.thickness=0,e.addControl(s);const u=()=>{e.height=16*r.e+"px",t.width=16*r.e+"px"};return r.b.on("scale-change",u),e.onDisposeObservable.add(()=>{r.b.off("scale-change",u)}),{main:e,icon:t,name:n,motd:o,players:a,software:s}}function f(e,t){return e.featured==t.featured?e.type==t.type?e.players.online<t.players.online?1:e.players.online==t.players.online?0:-1:0==e.type?-1:1:0==e.featured?1:-1}var h=n(345),d=n(90),p=n(163),m=n(139);var y=n(109);var v=n(424),g=n.n(v),b=n(228);var w=n(185);function _(e,t,n){const o=new i.g;o.thickness=0,o.horizontalAlignment=2,o.zIndex=10,window.innerHeight>230*r.e?o.height=230*r.e+"px":o.height="100%",o.width=310*r.e+"px",o.background=l.e.menuColor;const s=new i.k;let c;s.fontFamily="Lato",s.fontSize=13*r.e,s.textVerticalAlignment=0,s.color="white",s.text="Singleplayer",s.top=r.e,o.addControl(s);let f=[],h=!1;const v=Object(u.a)(56);v.button.top=18*r.e+"px",v.button.left=5*r.e+"px",v.buttonText.text=[{text:"Create World",color:"white",font:"Lato"}],v.button.onPointerClickObservable.add(()=>{!function(e,t,n,r){const i=new m.a("worldCreation",[{text:"Create a new world"}]);i.scroll.height="70%",i.createInput("name","World name","New world","World","Name your world!");const o=i.createInput("seed","Seed","","Random seed","");o.input.onBeforeKeyAddObservable.add(e=>{let t=e.currentKey;o.input.addKey=!(t<"0"||t>"9")}),i.createSlider("worldSize",e=>{const t=64*e*16;return`World size: ${t}x${t}`},2,1,8,1),i.createSelectable("worldType",e=>{return"World type: "+((t=l.u[e]).charAt(0).toUpperCase()+t.slice(1));var t},0,l.u),i.createSettingButton("Create",()=>{i.main.dispose();const n=i.settings.name||"World";let r=n,s=0;for(;t.includes(r);)s++,r=n+" ("+s+")";let u=0,c=parseInt(o.input.text);"NaN"!=c.toString()&&(u=c);const f=Object(p.a)(r,{gamemode:"creative",gameVersion:l.i,serverVersion:"",worldsize:16*i.settings.worldSize,version:0,seed:u,generator:l.u[i.settings.worldType],icon:"VoxelCraft2",displayName:n},!0);Object(a.d)(e,f,{...l.t,motd:n})}),i.createSettingButton("Back",()=>{i.main.dispose(),n("singleplayer")}),r.addControl(i.main)}(e,f,t,n),o.dispose()}),o.addControl(v.button);const _=Object(u.a)(56);_.button.top=18*r.e+"px",_.button.left=66*r.e+"px",_.buttonText.text=[{text:"Select",color:"white",font:"Lato"}],_.button.onPointerClickObservable.add(()=>{null==c||h||(h=!0,Object(a.d)(e,Object(p.a)(c.name,c.settings,!0),{...l.t,motd:c.settings.displayName||c.name}),c=void 0)}),o.addControl(_.button);const x=Object(u.a)(56);x.button.top=18*r.e+"px",x.button.left=127*r.e+"px",x.buttonText.text=[{text:"Edit world",color:"white",font:"Lato"}],x.button.onPointerClickObservable.add(async()=>{null==c||h||(h=!0,o.dispose(),function(e,t,n,i){const o=new m.a("worldEditor",[{text:"Edit world..."}]);o.scroll.height="70%",o.createInput("name","World name",t.settings.displayName||t.name,t.name,"Name your world!"),o.createSlider("worldSize",e=>{const t=64*e*16;return`World size: ${t}x${t}`},t.settings.worldsize/16,t.settings.worldsize/16,8,1),o.createSettingButton("Save changes...",async()=>{if(!o.lock){o.main.dispose();const e={gamemode:t.settings.gamemode,gameVersion:t.settings.gameVersion,serverVersion:t.settings.serverVersion,worldsize:16*o.settings.worldSize,version:t.settings.version,seed:t.settings.seed,generator:t.settings.generator,displayName:o.settings.name,icon:t.settings.icon};await Object(d.k)(t.name,e,t.lastplay),n("singleplayer")}}),o.createSettingButton("Generate entire world",async()=>{if(!o.lock){o.lock=!0,o.main.isVisible=!1;const e=new y.a([{text:"Pregenerating entire world..."}]);e.setCenterText([{text:"Loading world..."}]);const n=Object(p.a)(t.name,t.settings,!1);n.on("ServerPregenerateStatus",t=>{e.setCenterText([{text:`Generating world... ${(t.done/t.size*100).toFixed(0)}%\n[${t.done}/${t.size} chunks]`}])}),n.on("ServerPregenerateDone",()=>{e.setCenterText([{text:"Saving world..."}]),n.send("SingleplayerLeave",{})}),n.on("ServerStarted",()=>{console.log("Started!"),n.send("SingleplayerPregenerateWorld",{})}),n.on("ServerStopped",()=>{e.setCenterText([{text:"Saving world..."}])}),n.on("ServerStoppingDone",()=>{e.dispose(),o.lock=!1,o.main.isVisible=!0}),e.createItem("Cancel",async()=>{e.dispose(),o.lock=!1,o.main.isVisible=!0,n.attachedData.terminate()}),Object(r.c)(2).addControl(e.main)}}),o.createSettingButton("Delete world...",()=>{if(!o.lock){o.lock=!0,o.main.isVisible=!1;const e=new y.a([{text:"Confirm deletion..."}]);e.setCenterText([{text:"Are you sure?\nYou won't be able to restore it!"}]),e.createItem("Delete",async()=>{o.main.dispose(),e.dispose(),await Object(d.b)(t.name),n("singleplayer")}),e.createItem("Cancel",async()=>{e.dispose(),o.lock=!1,o.main.isVisible=!0}),Object(r.c)(2).addControl(e.main)}}),i.addControl(o.main),o.createSettingButton("Back",()=>{o.main.dispose(),n("singleplayer")})}(0,c,t,n))}),o.addControl(x.button);const O=Object(u.a)(56);O.button.top=18*r.e+"px",O.button.left=188*r.e+"px",O.buttonText.text=[{text:"Export",color:"white",font:"Lato"}],O.button.onPointerClickObservable.add(async()=>{if(null!=c&&!h){h=!0,o.isVisible=!1;const e=new y.a([{text:"Exporting world..."}]);e.setSubtitle([{text:c.settings.displayName||c.name}]),e.setCenterText([{text:"Starting..."}]),n.addControl(e.main);!function(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),document.body.removeChild(r)}(await async function(e,t){t("Loading world...");const n=await Object(d.e)(e),r=await Object(d.f)(e),i=new g.a,o=Object.keys(r.data).length;let a=0;for(const e in r.data)if(a++,t(`Converting world... ${(a/o*100).toFixed(0)}%`),e.endsWith(".chk")){const t=r.data[e];i.file(e,Uint8Array.from(atob(t),e=>e.charCodeAt(0)))}else i.file(e,r.data[e]);i.file("spWorldSettings.json",JSON.stringify(n.settings));const s=await i.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}},e=>{t(`Compressing... ${e.percent.toFixed(0)}%`)});return t("Done"),s}(c.name,t=>{e.setCenterText([{text:t}])}),c.name+".zip"),e.dispose(),c=void 0,D(),o.isVisible=!0,h=!1}}),o.addControl(O.button);const P=Object(u.a)(56);P.button.top=18*r.e+"px",P.button.left=249*r.e+"px",P.buttonText.text=[{text:"Import",color:"white",font:"Lato"}],P.button.onPointerClickObservable.add(async()=>{if(!h){h=!0,c=void 0;const e=document.createElement("input");e.type="file",e.accept="application/zip",e.click();const t=async()=>{if(document.body.removeEventListener("focusin",t),0!=e.files.length){o.isVisible=!1;const t=new y.a([{text:"Exporting world..."}]);t.setCenterText([{text:"Starting..."}]),n.addControl(t.main);try{await async function(e,t){t("Preparing...");const n=await Object(d.g)(),r=[];n.forEach(e=>{r.push(e.name)});const i={},o=await(new g.a).loadAsync(e),a=Object.keys(o.files).length;let s=0,u=null;null!=o.files["spWorldSettings.json"]&&(t("Preparing settings..."),u=JSON.parse(await o.files["spWorldSettings.json"].async("string")),t("Preparing settings...",u.displayName));for(const e in o.files){if(s++,e.endsWith(".json")){const t=await o.files[e].async("string");i[e]=t}else e.endsWith(".chk")&&(i[e]=await o.files[e].async("base64"));t(`Decompressing... ${(s/a*100).toFixed(0)}%`)}if(null!=i["spWorldSettings.json"])delete i["spWorldSettings.json"];else{t("Recreating settings...","Imported world");const e=JSON.parse(i["configs/config.json"]);u={gamemode:"creative",worldsize:e.world.border,generator:e.world.generator,version:0,gameVersion:l.i,serverVersion:b.serverVersion,seed:e.world.seed}}const c=null!=u.displayName?u.displayName:"Imported world";let f=c,h=0;for(;r.includes(f);)h++,f=c+"("+h+")";return t("Saving..."),await Object(d.j)(f,i,u),t("Done"),f}(e.files[0],(e,n=null)=>{t.setCenterText([{text:e}]),null!=n&&t.setSubtitle([{text:n}])})}catch(e){console.error(e),Object(w.a)([{text:"Invalid world!"}],[{text:"You tried to import invalid world file!"}],w.c.error,5)}t.dispose(),o.isVisible=!0}D(),h=!1};document.body.addEventListener("focusin",t)}}),o.addControl(P.button);const S=new i.g;S.width=290*r.e+"px",S.height="70%",S.verticalAlignment=0,S.top=40*r.e+"px",S.background="#ffffffbb",S.thickness=0;const E=k();E.main.verticalAlignment=0,E.main.fontFamily="Lato",E.main.background="#88888855",E.main.fontSize=7*r.e;const j=new i.k;j.text="Name",j.color="#222222",E.name.addControl(j);const C=new i.k;C.text="Last played",C.color="#222222",E.date.addControl(C);const T=new i.k;T.text="Type",T.color="#222222",E.type.addControl(T),S.addControl(E.main),o.addControl(S);const A=new i.h;A.height=150*r.e+"px",A.top=16*r.e+"px",A.thickness=0,A.verticalAlignment=0,A.barSize=0,S.addControl(A);const z=new i.j;z.fontFamily="Lato",z.width="100%",z.fontSize=6*r.e,z.verticalAlignment=0,A.addControl(z);let I=[];function D(){z.children.forEach(e=>e.dispose()),z.clearControls(),f=[],Object(d.g)().then(t=>{t.forEach(t=>{const n=k();n.icon.source="./servericons/"+t.settings.icon+".png";const r=new i.k;r.text=t.settings.displayName||t.name,r.color="#222222",n.name.addControl(r);const o=new i.k;o.text=new Date(t.lastplay).toLocaleString(),o.color="#222222",n.date.addControl(o);const s=new i.k;s.text=t.settings.gamemode.charAt(0).toUpperCase()+t.settings.gamemode.slice(1),s.color="#222222",n.type.addControl(s);let u=0;n.main.onPointerClickObservable.add(r=>{I.forEach(e=>{e.row.main.background="#ffffff00"}),n.main.background="#ffffffaa",c=t,u+=1,u>1&&!h&&Object(a.d)(e,Object(p.a)(t.name,t.settings,!0),l.t),setTimeout(()=>{u-=1},500)}),n.main.onPointerEnterObservable.add(e=>{"#ffffffaa"!=n.main.background&&(n.main.background="#ffffff67")}),n.main.onPointerOutObservable.add(e=>{"#ffffffaa"!=n.main.background&&(n.main.background="#ffffff00")}),z.addControl(n.main),I.push({data:t,row:n}),f.push(t.name)})})}D();const R=Object(u.c)();R.item.verticalAlignment=1,R.text.text=[{text:"Go back to menu",color:"white",font:"Lato"}],R.item.onPointerClickObservable.add(()=>{o.dispose(),t("main")}),o.addControl(R.item);const B=e=>{window.innerHeight>230*r.e?o.height=230*r.e+"px":o.height="100%",o.width=310*r.e+"px",s.fontSize=13*r.e,S.width=290*r.e+"px",S.top=40*r.e+"px",A.top=16*r.e+"px",E.main.fontSize=7*r.e,z.fontSize=6*r.e,A.height=150*r.e+"px",v.button.top=18*r.e+"px",v.button.left=5*r.e+"px",_.button.top=18*r.e+"px",_.button.left=66*r.e+"px",x.button.top=18*r.e+"px",x.button.left=127*r.e+"px",O.button.top=18*r.e+"px",O.button.left=188*r.e+"px",P.button.top=18*r.e+"px",P.button.left=249*r.e+"px",R.item.width=100*r.e+"px",R.item.height=18*r.e+"px",R.text.fontSize=10*r.e};return r.b.on("scale-change",B),o.onDisposeObservable.add(()=>{r.b.off("scale-change",B)}),o}function k(){const e=new i.g;e.height=16*r.e+"px",e.thickness=0;const t=new i.d;t.width=16*r.e+"px",t.horizontalAlignment=0,e.addControl(t);const n=new i.g;n.width="45%",n.left="5%",n.horizontalAlignment=0,n.thickness=0,e.addControl(n);const o=new i.g;o.width="20%",o.horizontalAlignment=0,o.left="50%",o.thickness=0,e.addControl(o);const a=new i.g;a.width="20%",a.horizontalAlignment=0,a.left="80%",a.thickness=0,e.addControl(a);const s=()=>{e.height=16*r.e+"px",t.width=16*r.e+"px"};return r.b.on("scale-change",s),e.onDisposeObservable.add(()=>{r.b.off("scale-change",s)}),{icon:t,main:e,name:n,date:o,type:a}}var x=n(346),O=n(67);function P(){const e=[];return O.isFirefox&&e.push({text:"Warning! Performence of JS on Firefox is decreased compared to Chromium-based browsers!\n"}),"https:"==location.protocol&&e.push({text:"Using HTTPS connection! Some multiplayer servers might not work!\n"}),e}var S=n(292);let E;function j(e){const t=Object(r.c)(2);let n,d;E=new i.g,E.thickness=0,E.isPointerBlocker=!0,E.zIndex=5,t.addControl(E);const p=new i.k;p.text=l.n?`VoxelCraft2 ${l.i}/${l.n}`:"VoxelCraft2 "+l.i,p.fontFamily="Lato",p.fontSize="26px",p.color="white",p.textHorizontalAlignment=0,p.textVerticalAlignment=1,p.left="5px",p.top="-5px",p.shadowColor="#111111",p.shadowOffsetX=1,p.shadowOffsetY=1;const m=Object(S.b)(y,E);function y(t){switch(m.main.isVisible=!1,n&&n.dispose(),t){case"singleplayer":n=_(e,y,E),d="singleplayer",document.title="VoxelCraft2 - Singleplayer Menu";break;case"multiplayer":n=function(e,t){const n=new i.g;n.thickness=0,n.horizontalAlignment=2,n.zIndex=10,window.innerHeight>230*r.e?n.height=230*r.e+"px":n.height="100%",n.width=310*r.e+"px",n.background=l.e.menuColor;const h=new i.k;h.fontFamily="Lato",h.fontSize=13*r.e,h.textVerticalAlignment=0,h.color="white",h.text="Multiplayer",h.top=r.e,n.addControl(h);const d=new i.f;d.height=17*r.e+"px",d.width=266*r.e+"px",d.top=18*r.e+"px",d.left=5*r.e+"px",d.fontSize=6*r.e,d.verticalAlignment=0,d.horizontalAlignment=0,d.thickness=0,d.background="#ffffffaa",d.focusedBackground="#ffffffff",d.color="#666666",d.placeholderText="Server address",n.addControl(d);const p=new i.g;p.height=17*r.e+"px",p.width=34*r.e+"px",p.top=18*r.e+"px",p.left=-5*r.e+"px",p.verticalAlignment=0,p.horizontalAlignment=1,p.thickness=0,p.background="#4d4d4daa",p.color="#666666",p.onPointerClickObservable.add(()=>{""!=d.text&&Object(a.a)(e,d.text)});const m=new o.a;m.text=[{text:"Connect",color:"white",font:"Lato"}],m.textHorizontalAlignment=2,m.fontSize=6*r.e,p.onPointerEnterObservable.add(e=>{m.text.forEach(e=>e.underline=!0),m._markAsDirty(),p.background="#5d5d5daa"}),p.onPointerOutObservable.add(e=>{m.text.forEach(e=>e.underline=!1),m._markAsDirty(),p.background="#4d4d4daa"}),p.addControl(m),n.addControl(p);const y=new i.g;y.width=290*r.e+"px",y.height="70%",y.verticalAlignment=0,y.top=40*r.e+"px",y.background="#ffffffbb",y.thickness=0;const v=c();v.main.verticalAlignment=0,v.main.fontFamily="Lato",v.main.background="#88888855",v.main.fontSize=7*r.e;const g=new i.k;g.text="Name",g.color="#222222",v.name.addControl(g);const b=new i.k;b.text="Motd",b.color="#222222",v.motd.addControl(b);const w=new i.k;w.text="Players",w.color="#222222",v.players.addControl(w);const _=new i.k;_.text="Software",_.color="#222222",v.software.addControl(_),y.addControl(v.main),n.addControl(y);const k=new i.h;k.height=150*r.e+"px",k.top=16*r.e+"px",k.thickness=0,k.verticalAlignment=0,k.barSize=0,y.addControl(k);const x=new i.j;function O(){x.children.forEach(e=>{e.dispose()}),x.clearControls(),Object(l.f)().then(e=>{const t=Object.values(e);t.sort(f),t.forEach(e=>{if("https:"==location.protocol&&!e.useProxy&&!e.ip.startsWith("wss://"))return;const t=c();t.icon.source="./servericons/"+e.icon+".png";const n=new i.k;n.text=e.name,n.color="#222222",t.name.addControl(n);const r=new i.k;r.text=e.motd,r.color="#222222",t.motd.addControl(r);const o=new i.k;o.text=`${e.players.online}/${e.players.max}`,o.color="#222222",t.players.addControl(o);const a=new i.k;a.text=e.software,a.color="#222222",t.software.addControl(a),t.main.background=e.featured?"#DAA52022":"#ffffff00",t.main.onPointerEnterObservable.add(n=>{t.main.background=e.featured?"#DAA52067":"#ffffff67"}),t.main.onPointerOutObservable.add(n=>{t.main.background=e.featured?"#DAA52022":"#ffffff00"});let u=0;t.main.onPointerClickObservable.add(t=>{d.text=(e.useProxy?"*":"")+e.ip,u+=1,u>1&&p.onPointerClickObservable.notifyObservers(new i.l(new s.Vector2(0,0),0)),setTimeout(()=>{u=0},1e3)}),x.addControl(t.main)})})}x.fontFamily="Lato",x.width="100%",x.fontSize=6*r.e,x.verticalAlignment=0,k.addControl(x);const P=new i.g;P.height=17*r.e+"px",P.width=17*r.e+"px",P.top=-5*r.e+"px",P.left=-5*r.e+"px",P.verticalAlignment=1,P.horizontalAlignment=1,P.thickness=0,P.background="#4d4d4daa",P.color="#666666",P.onPointerClickObservable.add(()=>{O()});const S=new o.a;S.text=[{text:"↻",color:"white",font:"Lato"}],S.textHorizontalAlignment=2,S.fontSize=11*r.e,P.onPointerEnterObservable.add(e=>{P.background="#5d5d5daa"}),P.onPointerOutObservable.add(e=>{P.background="#4d4d4daa"}),P.addControl(S),y.addControl(P);const E=Object(u.c)();E.item.verticalAlignment=1,E.text.text=[{text:"Go back to menu",color:"white",font:"Lato"}],E.item.onPointerClickObservable.add(()=>{n.dispose(),t("main")}),n.addControl(E.item),O();const j=e=>{window.innerHeight>230*r.e?n.height=230*r.e+"px":n.height="100%",n.width=310*r.e+"px",h.fontSize=13*r.e,d.height=17*r.e+"px",d.width=266*r.e+"px",d.top=18*r.e+"px",d.left=5*r.e+"px",d.fontSize=6*r.e,p.height=17*r.e+"px",p.width=34*r.e+"px",p.top=18*r.e+"px",p.left=-5*r.e+"px",m.fontSize=6*r.e,y.width=290*r.e+"px",y.top=40*r.e+"px",k.top=16*r.e+"px",v.main.fontSize=7*r.e,x.fontSize=6*r.e,k.height=150*r.e+"px",S.fontSize=11*r.e,E.item.width=100*r.e+"px",E.item.height=18*r.e+"px",E.text.fontSize=10*r.e};return r.b.on("scale-change",j),n.onDisposeObservable.add(()=>{r.b.off("scale-change",j)}),n}(e,y),d="multiplayer",document.title="VoxelCraft2 - Multiplayer Menu",m.main.isVisible=!0;break;case"settings":n=Object(h.a)(e,y,E),d="settings",document.title="VoxelCraft2 - Settings";break;case"about":n=Object(x.a)(y),d="about",document.title="VoxelCraft2 - About";break;case"login":n=Object(S.a)(y,E),d="login",document.title="VoxelCraft2 - Login";break;default:n=function(){const e=new i.g;e.thickness=0,e.horizontalAlignment=2,e.zIndex=10,window.innerHeight>230*r.e?e.height=230*r.e+"px":e.height="100%";e.width=220*r.e+"px",e.background=l.e.menuColor;const t=new i.d("hotbar","./textures/mainlogo.png");t.width=210*r.e+"px",t.height=64*r.e+"px",t.verticalAlignment=0,t.horizontalAlignment=2,t.top="5px",E.zIndex=15,e.addControl(t);const n=new o.a;n.isPointerBlocker=!1,n.isHitTestVisible=!1,n.text=Object(l.l)(),n.fontFamily="Lato",n.fontSize=9*r.e+"px",n.color="yellow",n.zIndex=20,n.width=150*r.e+"px",n.height=10*r.e+"px",n.textHorizontalAlignment=2,n.textVerticalAlignment=2,n.left=65*r.e+"px",window.innerHeight>230*r.e?n.top=`-${65*r.e}px`:n.isVisible=!1;n.rotation=-.22;let a=0;n.shadowColor="#111111",n.shadowOffsetX=1,n.shadowOffsetY=1,window.changeSplash=()=>{n.text=Object(l.l)()};const s=setInterval(()=>{a+=1;const e=Math.cos(a/10);e>.98&&a>10&&(a=0),n.scaleX=n.scaleY=Math.abs(e/10)+1},20);E.addControl(n);let c=null;P().length>0&&(c=new o.a,c.isPointerBlocker=!1,c.text=P(),c.fontFamily="Lato",c.fontSize=7*r.e+"px",c.shadowColor="#111111",c.shadowOffsetX=1,c.shadowOffsetY=1,c.textHorizontalAlignment=2,c.textVerticalAlignment=0,c.color="red",E.addControl(c));const f=new i.h;f.verticalAlignment=0,f.top=68*r.e+"px",f.width="100%",f.height="100%",f.thickness=0,f.barColor="#ffffff44",f.barBackground="#00000000";const h=new i.j;h.top=10*r.e+"px",h.zIndex=20,e.addControl(h);const d=Object(u.c)();d.text.text=[{text:"Singleplayer",color:"white",font:"Lato"}],d.item.onPointerClickObservable.add(e=>{y("singleplayer")}),h.addControl(d.item);const p=Object(u.c)();p.text.text=[{text:"Multiplayer",color:"white",font:"Lato"}],p.item.onPointerClickObservable.add(e=>{y("multiplayer")}),h.addControl(p.item);const m=Object(u.c)();m.text.text=[{text:"Settings",color:"white",font:"Lato"}],m.item.onPointerClickObservable.add(e=>{y("settings")}),h.addControl(m.item);const v=Object(u.c)();v.text.text=[{text:"About",color:"white",font:"Lato"}],v.item.onPointerClickObservable.add(e=>{y("about")}),h.addControl(v.item);const g=Object(u.c)();g.text.text=[{text:"Discord",color:"white",font:"Lato"}],g.item.onPointerClickObservable.add(e=>{window.open("https://discord.com/","_blank")}),h.addControl(g.item);const b=Object(u.c)();b.text.text=[{text:"Github",color:"white",font:"Lato"}],b.item.onPointerClickObservable.add(e=>{window.open("https://github.com/NFT2626/VoxelCraft-2.0","_blank")}),h.addControl(b.item);const w=i=>{window.innerHeight>230*r.e?e.height=230*r.e+"px":e.height="100%",e.width=220*r.e+"px",t.width=210*r.e+"px",t.height=64*r.e+"px",f.top=68*r.e+"px",n.fontSize=9*r.e+"px",n.width=150*r.e+"px",n.height=10*r.e+"px",n.left=65*r.e+"px",window.innerHeight>230*r.e?(n.top=`-${65*r.e}px`,n.isVisible=!0):n.isVisible=!1,null!=c&&(c.fontSize=7*r.e+"px"),h._children.forEach(e=>{e.width=100*r.e+"px",e.height=18*r.e+"px",e._children[0].fontSize=10*r.e})};return r.b.on("scale-change",w),e.onDisposeObservable.add(()=>{clearInterval(s),n.dispose(),null!=c&&c.dispose(),r.b.off("scale-change",w)}),e}(),d="main",document.title="VoxelCraft2 - Main Menu",m.main.isVisible=!0}E.addControl(n)}E.addControl(p),E.addControl(m.main),y("main")}},,,,,,function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),u=r[n];n<o;u=r[++n])m(u)||!w(u)?a+=" "+u:a+=" "+s(u);return a},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var o,a={};function s(e,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&t._extend(r,n),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),c(r,e,r.depth)}function u(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function l(e,t){return e}function c(e,n,r){if(e.customInspect&&n&&x(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return v(i)||(i=c(e,i,r)),i}var o=function(e,t){if(g(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(y(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,n);if(o)return o;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),k(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(n);if(0===a.length){if(x(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return e.stylize(Date.prototype.toString.call(n),"date");if(k(n))return f(n)}var l,w="",O=!1,P=["{","}"];(d(n)&&(O=!0,P=["[","]"]),x(n))&&(w=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(w=" "+RegExp.prototype.toString.call(n)),_(n)&&(w=" "+Date.prototype.toUTCString.call(n)),k(n)&&(w=" "+f(n)),0!==a.length||O&&0!=n.length?r<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=O?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)j(t,String(a))?o.push(h(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))})),o}(e,n,r,s,a):a.map((function(t){return h(e,n,r,s,t,O)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(l,w,P)):P[0]+w+P[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),j(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=m(n)?c(e,u.value,null):c(e,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),g(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function d(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function m(e){return null===e}function y(e){return"number"==typeof e}function v(e){return"string"==typeof e}function g(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===O(e)}function w(e){return"object"==typeof e&&null!==e}function _(e){return w(e)&&"[object Date]"===O(e)}function k(e){return w(e)&&("[object Error]"===O(e)||e instanceof Error)}function x(e){return"function"==typeof e}function O(e){return Object.prototype.toString.call(e)}function P(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(g(o)&&(o=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!a[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var r=e.pid;a[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else a[n]=function(){};return a[n]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=p,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=g,t.isRegExp=b,t.isObject=w,t.isDate=_,t.isError=k,t.isFunction=x,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(401);var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(){var e=new Date,t=[P(e.getHours()),P(e.getMinutes()),P(e.getSeconds())].join(":");return[e.getDate(),S[e.getMonth()],t].join(" ")}function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",E(),t.format.apply(t,arguments))},t.inherits=n(402),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var C="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function T(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(C&&e[C]){var t;if("function"!=typeof(t=e[C]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,C,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),C&&Object.defineProperty(t,C,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=C,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};t.apply(this,n).then((function(t){e.nextTick(a,null,t)}),(function(t){e.nextTick(T,t,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(56))},,,,,function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return v}));var r=n(102),i=n.n(r),o=n(138),a=n(63),s=n(289),u=n(70),l=n(140),c=n(203),f=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const h=i()("threads:master:messages"),d=i()("threads:master:spawn"),p=i()("threads:master:thread-utils"),m=void 0!==e&&e.env.THREADS_WORKER_INIT_TIMEOUT?Number.parseInt(e.env.THREADS_WORKER_INIT_TIMEOUT,10):1e4;function y(e,t,n,r){const i=n.filter(e=>e.type===l.a.internalError).map(e=>e.error);return Object.assign(e,{[u.a]:i,[u.b]:n,[u.c]:r,[u.e]:t})}function v(e,t){return f(this,void 0,void 0,(function*(){d("Initializing new thread");const n=(yield function(e,t,n){return f(this,void 0,void 0,(function*(){let r;const i=new Promise((e,i)=>{r=setTimeout(()=>i(Error(n)),t)}),o=yield Promise.race([e,i]);return clearTimeout(r),o}))}(function(e){return new Promise((t,n)=>{const r=i=>{var o;h("Message from worker before finishing initialization:",i.data),(o=i.data)&&"init"===o.type?(e.removeEventListener("message",r),t(i.data)):(e=>e&&"uncaughtError"===e.type)(i.data)&&(e.removeEventListener("message",r),n(Object(a.a)(i.data.error)))};e.addEventListener("message",r)})}(e),t&&t.timeout?t.timeout:m,`Timeout: Did not receive an init message from worker after ${m}ms. Make sure the worker calls expose().`)).exposed,{termination:r,terminate:i}=function(e){const[t,n]=Object(s.a)();return{terminate:()=>f(this,void 0,void 0,(function*(){p("Terminating worker"),yield e.terminate(),n()})),termination:t}}(e),u=function(e,t){return new o.a(n=>{const r=e=>{const t={type:l.a.message,data:e.data};n.next(t)},i=e=>{p("Unhandled promise rejection event in thread:",e);const t={type:l.a.internalError,error:Error(e.reason)};n.next(t)};e.addEventListener("message",r),e.addEventListener("unhandledrejection",i),t.then(()=>{const t={type:l.a.termination};e.removeEventListener("message",r),e.removeEventListener("unhandledrejection",i),n.next(t),n.complete()})})}(e,r);if("function"===n.type){return y(Object(c.a)(e),e,u,i)}if("module"===n.type){return y(Object(c.b)(e,n.methods),e,u,i)}{const e=n.type;throw Error("Worker init message states unexpected type of expose(): "+e)}}))}}).call(this,n(56))},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return b}));var r=n(102),i=n.n(r),o=n(138),a=n(670),s=n(63);const u=()=>{},l=e=>e,c=e=>Promise.resolve().then(e);function f(e){throw e}class h extends o.a{constructor(e){super(t=>{const n=this,r=Object.assign(Object.assign({},t),{complete(){t.complete(),n.onCompletion()},error(e){t.error(e),n.onError(e)},next(e){t.next(e),n.onNext(e)}});try{return this.initHasRun=!0,e(r)}catch(e){r.error(e)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state="pending"}onNext(e){this.firstValueSet||(this.firstValue=e,this.firstValueSet=!0)}onError(e){this.state="rejected",this.rejection=e;for(const t of this.rejectionCallbacks)c(()=>t(e))}onCompletion(){this.state="fulfilled";for(const e of this.fulfillmentCallbacks)c(()=>e(this.firstValue))}then(e,t){const n=e||l,r=t||f;let i=!1;return new Promise((e,t)=>{const o=n=>{if(!i){i=!0;try{e(r(n))}catch(e){t(e)}}};return this.initHasRun||this.subscribe({error:o}),"fulfilled"===this.state?e(n(this.firstValue)):"rejected"===this.state?(i=!0,e(r(this.rejection))):(this.fulfillmentCallbacks.push(t=>{try{e(n(t))}catch(e){o(e)}}),void this.rejectionCallbacks.push(o))})}catch(e){return this.then(void 0,e)}finally(e){const t=e||u;return this.then(e=>(t(),e),()=>t())}static from(e){return function(e){return e&&"function"==typeof e.then}(e)?new h(t=>{e.then(e=>{t.next(e),t.complete()},e=>{t.error(e)})}):super.from(e)}}var d=n(134),p=n(88);const m=i()("threads:master:messages");let y=1;function v(e,t){return new o.a(n=>{let r;const i=o=>{var a;if(m("Message from worker:",o.data),o.data&&o.data.uid===t)if((a=o.data)&&a.type===p.b.running)r=o.data.resultType;else if((e=>e&&e.type===p.b.result)(o.data))"promise"===r?(void 0!==o.data.payload&&n.next(Object(s.a)(o.data.payload)),n.complete(),e.removeEventListener("message",i)):(o.data.payload&&n.next(Object(s.a)(o.data.payload)),o.data.complete&&(n.complete(),e.removeEventListener("message",i)));else if((e=>e&&e.type===p.b.error)(o.data)){const t=Object(s.a)(o.data.error);n.error(t),e.removeEventListener("message",i)}};return e.addEventListener("message",i),()=>{if("observable"===r||!r){const n={type:p.a.cancel,uid:t};e.postMessage(n)}e.removeEventListener("message",i)}})}function g(e,t){return(...n)=>{const r=y++,{args:i,transferables:o}=function(e){if(0===e.length)return{args:[],transferables:[]};const t=[],n=[];for(const r of e)Object(d.b)(r)?(t.push(Object(s.c)(r.send)),n.push(...r.transferables)):t.push(Object(s.c)(r));return{args:t,transferables:0===n.length?n:(r=n,Array.from(new Set(r)))};var r}(n),u={type:p.a.run,uid:r,method:t,args:i};m("Sending command to run function to worker:",u);try{e.postMessage(u,o)}catch(e){return h.from(Promise.reject(e))}return h.from(Object(a.a)(v(e,r)))}}function b(e,t){const n={};for(const r of t)n[r]=g(e,r);return n}},,function(e){e.exports=JSON.parse('{"b":{"stone":{"id":"stone","name":"Stone","texture":"block/stone","type":"ItemBlock","block":1,"flat":true},"dirt":{"id":"dirt","name":"Dirt","texture":"block/dirt","type":"ItemBlock","block":3,"flat":true},"cobblestone":{"id":"cobblestone","name":"Cobblestone","texture":"block/cobblestone","type":"ItemBlock","block":4,"flat":true},"wood_planks":{"id":"wood_planks","name":"Wood Planks","texture":"block/birch_planks","type":"ItemBlock","block":5,"flat":true},"sapling":{"id":"sapling","name":"Sapling","texture":"block/oak_sapling","type":"ItemBlock","block":6,"flat":true},"sand":{"id":"sand","name":"Sand","texture":"block/sand","type":"ItemBlock","block":12,"flat":true},"gravel":{"id":"gravel","name":"Gravel","texture":"block/gravel","type":"ItemBlock","block":13,"flat":true},"gold_ore":{"id":"gold_ore","name":"Gold Ore","texture":"block/gold_ore","type":"ItemBlock","block":14,"flat":true},"iron_ore":{"id":"iron_ore","name":"Iron Ore","texture":"block/iron_ore","type":"ItemBlock","block":15,"flat":true},"coal_ore":{"id":"coal_ore","name":"Coal Ore","texture":"block/coal_ore","type":"ItemBlock","block":16,"flat":true},"wood":{"id":"wood","name":"Wood","texture":"block/log","type":"ItemBlock","block":17,"flat":true},"leaves":{"id":"leaves","name":"Leaves","texture":"block/leaves","type":"ItemBlock","block":18,"flat":true},"sponge":{"id":"sponge","name":"Sponge","texture":"block/sponge","type":"ItemBlock","block":19,"flat":true},"glass":{"id":"glass","name":"Glass","texture":"block/glass","type":"ItemBlock","block":20,"flat":true},"red_cloth":{"id":"red_cloth","name":"Red Cloth","texture":"block/red_wool","type":"ItemBlock","block":21,"flat":true},"orange_cloth":{"id":"orange_cloth","name":"Orange Cloth","texture":"block/orange_wool","type":"ItemBlock","block":22,"flat":true},"yellow_cloth":{"id":"yellow_cloth","name":"Yellow Cloth","texture":"block/yellow_wool","type":"ItemBlock","block":23,"flat":true},"lime_cloth":{"id":"lime_cloth","name":"Lime Cloth","texture":"block/lime_wool","type":"ItemBlock","block":24,"flat":true},"green_cloth":{"id":"green_cloth","name":"Green Cloth","texture":"block/green_wool","type":"ItemBlock","block":25,"flat":true},"aqua_green_cloth":{"id":"aqua_green_cloth","name":"Aqua Green Cloth","texture":"block/light_blue_concrete","type":"ItemBlock","block":26,"flat":true},"cyan_cloth":{"id":"cyan_cloth","name":"Cyan Cloth","texture":"block/cyan_wool","type":"ItemBlock","block":27,"flat":true},"blue_cloth":{"id":"blue_cloth","name":"Blue Cloth","texture":"block/blue_wool","type":"ItemBlock","block":28,"flat":true},"purple_cloth":{"id":"purple_cloth","name":"Purple Cloth","texture":"block/purple_wool","type":"ItemBlock","block":29,"flat":true},"indigo_cloth":{"id":"indigo_cloth","name":"Indigo Cloth","texture":"block/purple_concrete","type":"ItemBlock","block":30,"flat":true},"violet_cloth":{"id":"violet_cloth","name":"Violet Cloth","texture":"block/purple_concrete","type":"ItemBlock","block":31,"flat":true},"magenta_cloth":{"id":"magenta_cloth","name":"Magenta Cloth","texture":"block/magenta_wool","type":"ItemBlock","block":32,"flat":true},"pink_cloth":{"id":"pink_cloth","name":"Pink Cloth","texture":"block/pink_wool","type":"ItemBlock","block":33,"flat":true},"black_cloth":{"id":"black_cloth","name":"Black Cloth","texture":"block/black_wool","type":"ItemBlock","block":34,"flat":true},"gray_cloth":{"id":"gray_cloth","name":"Gray Cloth","texture":"block/gray_wool","type":"ItemBlock","block":35,"flat":true},"white_cloth":{"id":"white_cloth","name":"White Cloth","texture":"block/white_wool","type":"ItemBlock","block":36,"flat":true},"dandelion":{"id":"dandelion","name":"Dandelion","texture":"block/dandelion","type":"ItemBlock","block":37,"flat":true},"rose":{"id":"rose","name":"Rose","texture":"block/red_flower","type":"ItemBlock","block":38,"flat":true},"brown_mushroom":{"id":"brown_mushroom","name":"Brown Mushroom","texture":"block/brown_mushroom","type":"ItemBlock","block":39,"flat":true},"red_mushroom":{"id":"red_mushroom","name":"Red Mushroom","texture":"block/red_mushroom","type":"ItemBlock","block":40,"flat":true},"block_of_gold":{"id":"block_of_gold","name":"Block of Gold","texture":"block/gold_block","type":"ItemBlock","block":41,"flat":true},"block_of_iron":{"id":"block_of_iron","name":"Block of Iron","texture":"block/iron_block","type":"ItemBlock","block":42,"flat":true},"slab":{"id":"slab","name":"Slab","texture":"block/smooth_stone_slab_side","type":"ItemBlock","block":44,"flat":true},"brick":{"id":"brick","name":"Brick","texture":"block/bricks","type":"ItemBlock","block":45,"flat":true},"tnt":{"id":"tnt","name":"TNT","texture":"block/tnt_side","type":"ItemBlock","block":46,"flat":true},"bookshelf":{"id":"bookshelf","name":"Bookshelf","texture":"block/bookshelf","type":"ItemBlock","block":47,"flat":true},"moss_stone":{"id":"moss_stone","name":"Moss Stone","texture":"block/mossy_cobblestone","type":"ItemBlock","block":48,"flat":true},"obsidian":{"id":"obsidian","name":"Obsidian","texture":"block/obsidian","type":"ItemBlock","block":49,"flat":true}},"a":{"stone":{"rawid":1,"id":"stone","texture":["block/stone"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"grass_block":{"rawid":2,"id":"grass_block","texture":["block/grass_top","block/dirt","block/grass_side"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"dirt":{"rawid":3,"id":"dirt","texture":["block/dirt"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"cobblestone":{"rawid":4,"id":"cobblestone","texture":["block/cobblestone"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"wood_planks":{"rawid":5,"id":"wood_planks","texture":["block/birch_planks"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"sapling":{"rawid":6,"id":"sapling","texture":["block/oak_sapling"],"options":{"solid":false,"opaque":false},"hardness":1,"miningtime":0,"tool":"pickaxe","type":1,"unbreakable":false},"bedrock":{"rawid":7,"id":"bedrock","texture":["block/bedrock"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":true},"flowing_water":{"rawid":8,"id":"flowing_water","texture":["block/flowing_water"],"options":{"fluid":true,"material":"water"},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":true},"stationary_water":{"rawid":9,"id":"stationary_water","texture":["block/stationary_water"],"options":{"fluid":true,"material":"water"},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":true},"flowing_lava":{"rawid":10,"id":"flowing_lava","options":{"fluid":true,"color":[0.6,0.1,0.1,0.7]},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":true},"stationary_lava":{"rawid":11,"id":"stationary_lava","options":{"fluid":true,"color":[0.6,0.1,0.1,0.7]},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":true},"sand":{"rawid":12,"id":"sand","texture":["block/sand"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"gravel":{"rawid":13,"id":"gravel","texture":["block/gravel"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"gold_ore":{"rawid":14,"id":"gold_ore","texture":["block/gold_ore"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"iron_ore":{"rawid":15,"id":"iron_ore","texture":["block/iron_ore"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"coal_ore":{"rawid":16,"id":"coal_ore","texture":["block/coal_ore"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"wood":{"rawid":17,"id":"wood","texture":["block/log_top","block/log"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"leaves":{"rawid":18,"id":"leaves","texture":["block/leaves"],"options":{"opaque":false},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"sponge":{"rawid":19,"id":"sponge","texture":["block/sponge"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"glass":{"rawid":20,"id":"glass","texture":["block/glass"],"options":{"opaque":false},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"red_cloth":{"rawid":21,"id":"red_cloth","texture":["block/red_wool"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"orange_cloth":{"rawid":22,"id":"orange_cloth","texture":["block/orange_wool"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"yellow_cloth":{"rawid":23,"id":"yellow_cloth","texture":["block/yellow_wool"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"lime_cloth":{"rawid":24,"id":"lime_cloth","texture":["block/lime_wool"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"green_cloth":{"rawid":25,"id":"green_cloth","texture":["block/green_wool"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"aqua_green_cloth":{"rawid":26,"id":"aqua_green_cloth","texture":["block/light_blue_concrete"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"cyan_cloth":{"rawid":27,"id":"cyan_cloth","texture":["block/cyan_wool"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"blue_cloth":{"rawid":28,"id":"blue_cloth","texture":["block/blue_wool"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"purple_cloth":{"rawid":29,"id":"purple_cloth","texture":["block/purple_wool"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"indigo_cloth":{"rawid":30,"id":"indigo_cloth","texture":["block/purple_concrete"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"violet_cloth":{"rawid":31,"id":"violet_cloth","texture":["block/purple_concrete"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"magenta_cloth":{"rawid":32,"id":"magenta_cloth","texture":["block/magenta_wool"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"pink_cloth":{"rawid":33,"id":"pink_cloth","texture":["block/pink_wool"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"black_cloth":{"rawid":34,"id":"black_cloth","texture":["block/black_wool"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"gray_cloth":{"rawid":35,"id":"gray_cloth","texture":["block/gray_wool"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"white_cloth":{"rawid":36,"id":"white_cloth","texture":["block/white_wool"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"dandelion":{"rawid":37,"id":"dandelion","texture":["block/dandelion"],"options":{"solid":false,"opaque":false},"hardness":1,"miningtime":0,"tool":"pickaxe","type":1,"unbreakable":false},"rose":{"rawid":38,"id":"rose","texture":["block/red_flower"],"options":{"solid":false,"opaque":false},"hardness":1,"miningtime":0,"tool":"pickaxe","type":1,"unbreakable":false},"brown_mushroom":{"rawid":39,"id":"brown_mushroom","texture":["block/brown_mushroom"],"options":{"solid":false,"opaque":false},"hardness":1,"miningtime":0,"tool":"pickaxe","type":1,"unbreakable":false},"red_mushroom":{"rawid":40,"id":"red_mushroom","texture":["block/red_mushroom"],"options":{"solid":false,"opaque":false},"hardness":1,"miningtime":0,"tool":"pickaxe","type":1,"unbreakable":false},"block_of_gold":{"rawid":41,"id":"block_of_gold","texture":["block/gold_block"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"block_of_iron":{"rawid":42,"id":"block_of_iron","texture":["block/iron_block_white"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"double_slab":{"rawid":43,"id":"double_slab","texture":["block/smooth_stone","block/smooth_stone_slab_side"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"slab":{"rawid":44,"id":"slab","texture":["block/smooth_stone","block/smooth_stone_slab_side"],"options":{"customColision":[{"base":[0,0,0],"max":[1,0.5,1]}],"solid":false},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"brick":{"rawid":45,"id":"brick","texture":["block/bricks"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"tnt":{"rawid":46,"id":"tnt","texture":["block/tnt_top","block/tnt_bottom","block/tnt_side"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"bookshelf":{"rawid":47,"id":"bookshelf","texture":["block/oak_planks","block/bookshelf"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"moss_stone":{"rawid":48,"id":"moss_stone","texture":["block/mossy_cobblestone"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"obsidian":{"rawid":49,"id":"obsidian","texture":["block/obsidian"],"options":{},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":false},"barrier":{"rawid":256,"id":"barrier","texture":[],"options":{"material":"barrier"},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":true},"hard_water":{"rawid":257,"id":"hard_water","texture":[],"options":{"material":"water"},"hardness":1,"miningtime":0,"tool":"pickaxe","type":0,"unbreakable":true}}}')},,,,function(e,t,n){"use strict";function r(e,t,n){var r=n?" !== ":" === ",i=n?" || ":" && ",o=n?"!":"",a=n?"":"!";switch(e){case"null":return t+r+"null";case"array":return o+"Array.isArray("+t+")";case"object":return"("+o+t+i+"typeof "+t+r+'"object"'+i+a+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+r+'"number"'+i+a+"("+t+" % 1)"+i+t+r+t+")";default:return"typeof "+t+r+'"'+e+'"'}}e.exports={copy:function(e,t){for(var n in t=t||{},e)t[n]=e[n];return t},checkDataType:r,checkDataTypes:function(e,t){switch(e.length){case 1:return r(e[0],t,!0);default:var n="",i=o(e);for(var a in i.array&&i.object&&(n=i.null?"(":"(!"+t+" || ",n+="typeof "+t+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer,i)n+=(n?" && ":"")+r(a,t,!0);return n}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var n=[],r=0;r<t.length;r++){var o=t[r];(i[o]||"array"===e&&"array"===o)&&(n[n.length]=o)}if(n.length)return n}else{if(i[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:o,getProperty:u,escapeQuotes:l,equal:n(398),ucs2length:n(514),varOccurences:function(e,t){t+="[^0-9]";var n=e.match(new RegExp(t,"g"));return n?n.length:0},varReplace:function(e,t,n){return t+="([^0-9])",n=n.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),n+"$1")},cleanUpCode:function(e){return e.replace(c,"").replace(f,"").replace(h,"if (!($1))")},finalCleanUpCode:function(e,t){var n=e.match(d);n&&2==n.length&&(e=t?e.replace(m,"").replace(y,"return data;"):e.replace(p,"").replace("return errors === 0;","validate.errors = null; return true;"));return(n=e.match(v))&&3===n.length?e.replace(g,""):e},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var n in e)if(t[n])return!0},schemaHasRulesExcept:function(e,t,n){if("boolean"==typeof e)return!e&&"not"!=n;for(var r in e)if(r!=n&&t[r])return!0},schemaUnknownRules:function(e,t){if("boolean"==typeof e)return;for(var n in e)if(!t[n])return n},toQuotedString:b,getPathExpr:function(e,t,n,r){return k(e,n?"'/' + "+t+(r?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):r?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,n){var r=b(n?"/"+x(t):u(t));return k(e,r)},getData:function(e,t,n){var r,i,o,a;if(""===e)return"rootData";if("/"==e[0]){if(!w.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,o="rootData"}else{if(!(a=e.match(_)))throw new Error("Invalid JSON-pointer: "+e);if(r=+a[1],"#"==(i=a[2])){if(r>=t)throw new Error("Cannot access property/index "+r+" levels up, current level is "+t);return n[t-r]}if(r>t)throw new Error("Cannot access data "+r+" levels up, current level is "+t);if(o="data"+(t-r||""),!i)return o}for(var s=o,l=i.split("/"),c=0;c<l.length;c++){var f=l[c];f&&(o+=u(O(f)),s+=" && "+o)}return s},unescapeFragment:function(e){return O(decodeURIComponent(e))},unescapeJsonPointer:O,escapeFragment:function(e){return encodeURIComponent(x(e))},escapeJsonPointer:x};var i=o(["string","number","integer","boolean","null"]);function o(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}var a=/^[a-z$_][a-z$_0-9]*$/i,s=/'|\\/g;function u(e){return"number"==typeof e?"["+e+"]":a.test(e)?"."+e:"['"+l(e)+"']"}function l(e){return e.replace(s,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var c=/else\s*{\s*}/g,f=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,h=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;var d=/[^v.]errors/g,p=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,m=/var errors = 0;|var vErrors = null;/g,y=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,v=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,g=/if \(rootData === undefined\) rootData = data;/;function b(e){return"'"+l(e)+"'"}var w=/^\/(?:[^~]|~0|~1)*$/,_=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function k(e,t){return'""'==e?t:(e+" + "+t).replace(/' \+ '/g,"")}function x(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function O(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},function(e,t,n){"use strict";(function(t){var r=n(400);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function i(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function o(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var a=n(193),s=Object.prototype.hasOwnProperty,u=Array.prototype.slice,l="foo"===function(){}.name;function c(e){return Object.prototype.toString.call(e)}function f(e){return!o(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var h=e.exports=g,d=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(a.isFunction(e)){if(l)return e.name;var t=e.toString().match(d);return t&&t[1]}}function m(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function y(e){if(l||!a.isFunction(e))return a.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function v(e,t,n,r,i){throw new h.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function g(e,t){e||v(e,!0,t,"==",h.ok)}function b(e,t,n,r){if(e===t)return!0;if(o(e)&&o(t))return 0===i(e,t);if(a.isDate(e)&&a.isDate(t))return e.getTime()===t.getTime();if(a.isRegExp(e)&&a.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(f(e)&&f(t)&&c(e)===c(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(o(e)!==o(t))return!1;var s=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==s&&s===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(a.isPrimitive(e)||a.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=w(e),o=w(t);if(i&&!o||!i&&o)return!1;if(i)return e=u.call(e),t=u.call(t),b(e,t,n);var s,l,c=x(e),f=x(t);if(c.length!==f.length)return!1;for(c.sort(),f.sort(),l=c.length-1;l>=0;l--)if(c[l]!==f[l])return!1;for(l=c.length-1;l>=0;l--)if(s=c[l],!b(e[s],t[s],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function w(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function _(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function k(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&v(i,n,"Missing expected exception"+r);var o="string"==typeof r,s=!e&&i&&!n;if((!e&&a.isError(i)&&o&&_(i,n)||s)&&v(i,n,"Got unwanted exception"+r),e&&i&&n&&!_(i,n)||!e&&i)throw i}h.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return m(y(e.actual),128)+" "+e.operator+" "+m(y(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=p(t),o=r.indexOf("\n"+i);if(o>=0){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}},a.inherits(h.AssertionError,Error),h.fail=v,h.ok=g,h.equal=function(e,t,n){e!=t&&v(e,t,n,"==",h.equal)},h.notEqual=function(e,t,n){e==t&&v(e,t,n,"!=",h.notEqual)},h.deepEqual=function(e,t,n){b(e,t,!1)||v(e,t,n,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(e,t,n){b(e,t,!0)||v(e,t,n,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(e,t,n){b(e,t,!1)&&v(e,t,n,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function e(t,n,r){b(t,n,!0)&&v(t,n,r,"notDeepStrictEqual",e)},h.strictEqual=function(e,t,n){e!==t&&v(e,t,n,"===",h.strictEqual)},h.notStrictEqual=function(e,t,n){e===t&&v(e,t,n,"!==",h.notStrictEqual)},h.throws=function(e,t,n){k(!0,e,t,n)},h.doesNotThrow=function(e,t,n){k(!1,e,t,n)},h.ifError=function(e){if(e)throw e},h.strict=r((function e(t,n){t||v(t,!0,n,"==",e)}),h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var x=Object.keys||function(e){var t=[];for(var n in e)s.call(e,n)&&t.push(n);return t}}).call(this,n(53))},function(e,t,n){"use strict";var r={};function i(e,t,n){n||(n=Error);var i=function(e){var n,r;function i(n,r,i){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,i))||this}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);i.prototype.name=n.name,i.prototype.code=e,r[e]=i}function o(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,i,a,s;if("string"==typeof t&&(i="not ",t.substr(!a||a<0?0:+a,i.length)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))s="The ".concat(e," ").concat(r," ").concat(o(t,"type"));else{var u=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(u," ").concat(r," ").concat(o(t,"type"))}return s+=". Received type ".concat(typeof n)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=r},function(e,t,n){"use strict";(function(t){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=l;var i=n(447),o=n(451);n(124)(l,i);for(var a=r(o.prototype),s=0;s<a.length;s++){var u=a[s];l.prototype[u]||(l.prototype[u]=o.prototype[u])}function l(e){if(!(this instanceof l))return new l(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||t.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,n(56))},function(e,t,n){var r=n(85),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=a),o(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){"use strict";var r,i=n(71),o=n(271),a=n(174),s=n(175),u=n(131);function l(e,t){return e.msg=u[t],t}function c(e){return(e<<1)-(e>4?9:0)}function f(e){for(var t=e.length;--t>=0;)e[t]=0}function h(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function d(e,t){o._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,h(e.strm)}function p(e,t){e.pending_buf[e.pending++]=t}function m(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function y(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,l=e.window,c=e.w_mask,f=e.prev,h=e.strstart+258,d=l[o+a-1],p=l[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(l[(n=t)+a]===p&&l[n+a-1]===d&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<h);if(r=258-(h-o),o=h-258,r>a){if(e.match_start=t,a=r,r>=s)break;d=l[o+a-1],p=l[o+a]}}}while((t=f[t&c])>u&&0!=--i);return a<=e.lookahead?a:e.lookahead}function v(e){var t,n,r,o,u,l,c,f,h,d,p=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=p+(p-262)){i.arraySet(e.window,e.window,p,p,0),e.match_start-=p,e.strstart-=p,e.block_start-=p,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=p?r-p:0}while(--n);t=n=p;do{r=e.prev[--t],e.prev[t]=r>=p?r-p:0}while(--n);o+=p}if(0===e.strm.avail_in)break;if(l=e.strm,c=e.window,f=e.strstart+e.lookahead,h=o,d=void 0,(d=l.avail_in)>h&&(d=h),n=0===d?0:(l.avail_in-=d,i.arraySet(c,l.input,l.next_in,d,f),1===l.state.wrap?l.adler=a(l.adler,c,d,f):2===l.state.wrap&&(l.adler=s(l.adler,c,d,f)),l.next_in+=d,l.total_in+=d,d),e.lookahead+=n,e.lookahead+e.insert>=3)for(u=e.strstart-e.insert,e.ins_h=e.window[u],e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+3-1])&e.hash_mask,e.prev[u&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=u,u++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)}function g(e,t){for(var n,r;;){if(e.lookahead<262){if(v(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=y(e,n)),e.match_length>=3)if(r=o._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(d(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(d(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(d(e,!1),0===e.strm.avail_out)?1:2}function b(e,t){for(var n,r,i;;){if(e.lookahead<262){if(v(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=y(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(d(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=o._tr_tally(e,0,e.window[e.strstart-1]))&&d(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(d(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(d(e,!1),0===e.strm.avail_out)?1:2}function w(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),f(this.dyn_ltree),f(this.dyn_dtree),f(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),f(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),f(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function k(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=0,o._tr_init(t),0):l(e,-2)}function x(e){var t,n=k(e);return 0===n&&((t=e.state).window_size=2*t.w_size,f(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function O(e,t,n,r,o,a){if(!e)return-2;var s=1;if(-1===t&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),o<1||o>9||8!==n||r<8||r>15||t<0||t>9||a<0||a>4)return l(e,-2);8===r&&(r=9);var u=new _;return e.state=u,u.strm=e,u.wrap=s,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=a,u.method=n,x(e)}r=[new w(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(v(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,d(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(d(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(d(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(d(e,!1),e.strm.avail_out),1)})),new w(4,4,8,4,g),new w(4,5,16,8,g),new w(4,6,32,32,g),new w(4,4,16,16,b),new w(8,16,32,32,b),new w(8,16,128,128,b),new w(8,32,128,256,b),new w(32,128,258,1024,b),new w(32,258,258,4096,b)],t.deflateInit=function(e,t){return O(e,t,8,15,8,0)},t.deflateInit2=O,t.deflateReset=x,t.deflateResetKeep=k,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?-2:(e.state.gzhead=t,0):-2},t.deflate=function(e,t){var n,i,a,u;if(!e||!e.state||t>5||t<0)return e?l(e,-2):-2;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return l(e,0===e.avail_out?-5:-2);if(i.strm=e,n=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,p(i,31),p(i,139),p(i,8),i.gzhead?(p(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),p(i,255&i.gzhead.time),p(i,i.gzhead.time>>8&255),p(i,i.gzhead.time>>16&255),p(i,i.gzhead.time>>24&255),p(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),p(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(p(i,255&i.gzhead.extra.length),p(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(p(i,0),p(i,0),p(i,0),p(i,0),p(i,0),p(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),p(i,3),i.status=113);else{var y=8+(i.w_bits-8<<4)<<8;y|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(y|=32),y+=31-y%31,i.status=113,m(i,y),0!==i.strstart&&(m(i,e.adler>>>16),m(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),h(e),a=i.pending,i.pending!==i.pending_buf_size));)p(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),h(e),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,p(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),h(e),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,p(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&h(e),i.pending+2<=i.pending_buf_size&&(p(i,255&e.adler),p(i,e.adler>>8&255),e.adler=0,i.status=113)):i.status=113),0!==i.pending){if(h(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&c(t)<=c(n)&&4!==t)return l(e,-5);if(666===i.status&&0!==e.avail_in)return l(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&666!==i.status){var g=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(v(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(d(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(d(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(d(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var n,r,i,a,s=e.window;;){if(e.lookahead<=258){if(v(e),e.lookahead<=258&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){a=e.strstart+258;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);e.match_length=258-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=o._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(d(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(d(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(d(e,!1),0===e.strm.avail_out)?1:2}(i,t):r[i.level].func(i,t);if(3!==g&&4!==g||(i.status=666),1===g||3===g)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===g&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(f(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),h(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(p(i,255&e.adler),p(i,e.adler>>8&255),p(i,e.adler>>16&255),p(i,e.adler>>24&255),p(i,255&e.total_in),p(i,e.total_in>>8&255),p(i,e.total_in>>16&255),p(i,e.total_in>>24&255)):(m(i,e.adler>>>16),m(i,65535&e.adler)),h(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?l(e,-2):(e.state=null,113===t?l(e,-3):0):-2},t.deflateSetDictionary=function(e,t){var n,r,o,s,u,l,c,h,d=t.length;if(!e||!e.state)return-2;if(2===(s=(n=e.state).wrap)||1===s&&42!==n.status||n.lookahead)return-2;for(1===s&&(e.adler=a(e.adler,t,d,0)),n.wrap=0,d>=n.w_size&&(0===s&&(f(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new i.Buf8(n.w_size),i.arraySet(h,t,d-n.w_size,n.w_size,0),t=h,d=n.w_size),u=e.avail_in,l=e.next_in,c=e.input,e.avail_in=d,e.next_in=0,e.input=t,v(n);n.lookahead>=3;){r=n.strstart,o=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--o);n.strstart=r,n.lookahead=2,v(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=l,e.input=c,e.avail_in=u,n.wrap=s,0},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";var r=n(71),i=n(174),o=n(175),a=n(273),s=n(274);function u(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function c(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):-2}function f(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,c(e)):-2}function h(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,f(e))):-2}function d(e,t){var n,r;return e?(r=new l,e.state=r,r.window=null,0!==(n=h(e,t))&&(e.state=null),n):-2}var p,m,y=!0;function v(e){if(y){var t;for(p=new r.Buf32(512),m=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,p,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,m,0,e.work,{bits:5}),y=!1}e.lencode=p,e.lenbits=9,e.distcode=m,e.distbits=5}function g(e,t,n,i){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),r.arraySet(a.window,t,n-i,o,a.wnext),(i-=o)?(r.arraySet(a.window,t,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}t.inflateReset=f,t.inflateReset2=h,t.inflateResetKeep=c,t.inflateInit=function(e){return d(e,15)},t.inflateInit2=d,t.inflate=function(e,t){var n,l,c,f,h,d,p,m,y,b,w,_,k,x,O,P,S,E,j,C,T,A,z,I,D=0,R=new r.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(n=e.state).mode&&(n.mode=13),h=e.next_out,c=e.output,p=e.avail_out,f=e.next_in,l=e.input,d=e.avail_in,m=n.hold,y=n.bits,b=d,w=p,A=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;y<16;){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}if(2&n.wrap&&35615===m){n.check=0,R[0]=255&m,R[1]=m>>>8&255,n.check=o(n.check,R,2,0),m=0,y=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&m)<<8)+(m>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&m)){e.msg="unknown compression method",n.mode=30;break}if(y-=4,T=8+(15&(m>>>=4)),0===n.wbits)n.wbits=T;else if(T>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<T,e.adler=n.check=1,n.mode=512&m?10:12,m=0,y=0;break;case 2:for(;y<16;){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}if(n.flags=m,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=m>>8&1),512&n.flags&&(R[0]=255&m,R[1]=m>>>8&255,n.check=o(n.check,R,2,0)),m=0,y=0,n.mode=3;case 3:for(;y<32;){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}n.head&&(n.head.time=m),512&n.flags&&(R[0]=255&m,R[1]=m>>>8&255,R[2]=m>>>16&255,R[3]=m>>>24&255,n.check=o(n.check,R,4,0)),m=0,y=0,n.mode=4;case 4:for(;y<16;){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}n.head&&(n.head.xflags=255&m,n.head.os=m>>8),512&n.flags&&(R[0]=255&m,R[1]=m>>>8&255,n.check=o(n.check,R,2,0)),m=0,y=0,n.mode=5;case 5:if(1024&n.flags){for(;y<16;){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}n.length=m,n.head&&(n.head.extra_len=m),512&n.flags&&(R[0]=255&m,R[1]=m>>>8&255,n.check=o(n.check,R,2,0)),m=0,y=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((_=n.length)>d&&(_=d),_&&(n.head&&(T=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,l,f,_,T)),512&n.flags&&(n.check=o(n.check,l,_,f)),d-=_,f+=_,n.length-=_),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===d)break e;_=0;do{T=l[f+_++],n.head&&T&&n.length<65536&&(n.head.name+=String.fromCharCode(T))}while(T&&_<d);if(512&n.flags&&(n.check=o(n.check,l,_,f)),d-=_,f+=_,T)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===d)break e;_=0;do{T=l[f+_++],n.head&&T&&n.length<65536&&(n.head.comment+=String.fromCharCode(T))}while(T&&_<d);if(512&n.flags&&(n.check=o(n.check,l,_,f)),d-=_,f+=_,T)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;y<16;){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}if(m!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}m=0,y=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;y<32;){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}e.adler=n.check=u(m),m=0,y=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=h,e.avail_out=p,e.next_in=f,e.avail_in=d,n.hold=m,n.bits=y,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){m>>>=7&y,y-=7&y,n.mode=27;break}for(;y<3;){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}switch(n.last=1&m,y-=1,3&(m>>>=1)){case 0:n.mode=14;break;case 1:if(v(n),n.mode=20,6===t){m>>>=2,y-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}m>>>=2,y-=2;break;case 14:for(m>>>=7&y,y-=7&y;y<32;){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}if((65535&m)!=(m>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&m,m=0,y=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(_=n.length){if(_>d&&(_=d),_>p&&(_=p),0===_)break e;r.arraySet(c,l,f,_,h),d-=_,f+=_,p-=_,h+=_,n.length-=_;break}n.mode=12;break;case 17:for(;y<14;){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}if(n.nlen=257+(31&m),m>>>=5,y-=5,n.ndist=1+(31&m),m>>>=5,y-=5,n.ncode=4+(15&m),m>>>=4,y-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;y<3;){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}n.lens[B[n.have++]]=7&m,m>>>=3,y-=3}for(;n.have<19;)n.lens[B[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,z={bits:n.lenbits},A=s(0,n.lens,0,19,n.lencode,0,n.work,z),n.lenbits=z.bits,A){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;P=(D=n.lencode[m&(1<<n.lenbits)-1])>>>16&255,S=65535&D,!((O=D>>>24)<=y);){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}if(S<16)m>>>=O,y-=O,n.lens[n.have++]=S;else{if(16===S){for(I=O+2;y<I;){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}if(m>>>=O,y-=O,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}T=n.lens[n.have-1],_=3+(3&m),m>>>=2,y-=2}else if(17===S){for(I=O+3;y<I;){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}y-=O,T=0,_=3+(7&(m>>>=O)),m>>>=3,y-=3}else{for(I=O+7;y<I;){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}y-=O,T=0,_=11+(127&(m>>>=O)),m>>>=7,y-=7}if(n.have+_>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;_--;)n.lens[n.have++]=T}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,z={bits:n.lenbits},A=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,z),n.lenbits=z.bits,A){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,z={bits:n.distbits},A=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,z),n.distbits=z.bits,A){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(d>=6&&p>=258){e.next_out=h,e.avail_out=p,e.next_in=f,e.avail_in=d,n.hold=m,n.bits=y,a(e,w),h=e.next_out,c=e.output,p=e.avail_out,f=e.next_in,l=e.input,d=e.avail_in,m=n.hold,y=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;P=(D=n.lencode[m&(1<<n.lenbits)-1])>>>16&255,S=65535&D,!((O=D>>>24)<=y);){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}if(P&&0==(240&P)){for(E=O,j=P,C=S;P=(D=n.lencode[C+((m&(1<<E+j)-1)>>E)])>>>16&255,S=65535&D,!(E+(O=D>>>24)<=y);){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}m>>>=E,y-=E,n.back+=E}if(m>>>=O,y-=O,n.back+=O,n.length=S,0===P){n.mode=26;break}if(32&P){n.back=-1,n.mode=12;break}if(64&P){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&P,n.mode=22;case 22:if(n.extra){for(I=n.extra;y<I;){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}n.length+=m&(1<<n.extra)-1,m>>>=n.extra,y-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;P=(D=n.distcode[m&(1<<n.distbits)-1])>>>16&255,S=65535&D,!((O=D>>>24)<=y);){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}if(0==(240&P)){for(E=O,j=P,C=S;P=(D=n.distcode[C+((m&(1<<E+j)-1)>>E)])>>>16&255,S=65535&D,!(E+(O=D>>>24)<=y);){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}m>>>=E,y-=E,n.back+=E}if(m>>>=O,y-=O,n.back+=O,64&P){e.msg="invalid distance code",n.mode=30;break}n.offset=S,n.extra=15&P,n.mode=24;case 24:if(n.extra){for(I=n.extra;y<I;){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}n.offset+=m&(1<<n.extra)-1,m>>>=n.extra,y-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===p)break e;if(_=w-p,n.offset>_){if((_=n.offset-_)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}_>n.wnext?(_-=n.wnext,k=n.wsize-_):k=n.wnext-_,_>n.length&&(_=n.length),x=n.window}else x=c,k=h-n.offset,_=n.length;_>p&&(_=p),p-=_,n.length-=_;do{c[h++]=x[k++]}while(--_);0===n.length&&(n.mode=21);break;case 26:if(0===p)break e;c[h++]=n.length,p--,n.mode=21;break;case 27:if(n.wrap){for(;y<32;){if(0===d)break e;d--,m|=l[f++]<<y,y+=8}if(w-=p,e.total_out+=w,n.total+=w,w&&(e.adler=n.check=n.flags?o(n.check,c,w,h-w):i(n.check,c,w,h-w)),w=p,(n.flags?m:u(m))!==n.check){e.msg="incorrect data check",n.mode=30;break}m=0,y=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;y<32;){if(0===d)break e;d--,m+=l[f++]<<y,y+=8}if(m!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}m=0,y=0}n.mode=29;case 29:A=1;break e;case 30:A=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=h,e.avail_out=p,e.next_in=f,e.avail_in=d,n.hold=m,n.bits=y,(n.wsize||w!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&g(e,e.output,e.next_out,w-e.avail_out)?(n.mode=31,-4):(b-=e.avail_in,w-=e.avail_out,e.total_in+=b,e.total_out+=w,n.total+=w,n.wrap&&w&&(e.adler=n.check=n.flags?o(n.check,c,w,e.next_out-w):i(n.check,c,w,e.next_out-w)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===b&&0===w||4===t)&&0===A&&(A=-5),A)},t.inflateEnd=function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?-2:(n.head=t,t.done=!1,0):-2},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?-2:11===n.mode&&i(1,t,r,0)!==n.check?-3:g(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):-2},t.inflateInfo="pako inflate (from Nodeca project)"},,,,,,,,,,,,function(e){e.exports=JSON.parse('{"protocolVersion":3,"protocolVersionRevision":1,"proxyVersion":0,"proxyVersionRevision":3}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.heartbeatServer=t.invalidNicknameRegex=t.serverDefaultConfig=t.serverProtocol=t.serverVersion=void 0;const r=n(315);t.serverVersion="0.2.0-beta.21",t.serverProtocol=r.protocolVersion,t.serverDefaultConfig={port:3e3,address:"0.0.0.0",name:"Server",motd:"Another VoxelCraft2 server",public:!1,requireAuth:!0,allowNotLogged:!0,maxplayers:10,viewDistance:5,chunkTransportCompression:!0,world:{seed:0,border:256,spawn:[0,100,0],generator:"normal",save:!0,worldGenWorkers:1,borderBlock:"barrier"},plugins:[],consoleInput:!0,rateLimitChatMessages:!0,useWSS:!1,wssOptions:{key:"",cert:""}},t.invalidNicknameRegex=new RegExp("[^a-zA-Z0-9_]"),t.heartbeatServer="https://voxelsrv.pb4.eu"},,function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),i=n(20),o=n(40),a=n(93);let s=0;function u(e,t){function n(){return e.ents.getState(e.playerEntity,"inventory")}const u=Object(r.c)(2),l=new i.g;l.zIndex=20,l.verticalAlignment=2,l.top=40*r.e+"px",l.height=20*r.e+"px",l.width=164*r.e+"px",l.thickness=0;const c=new i.g;c.thickness=0,c.addControl(l);const f=new Array(9),h=new Array(36),d=[];for(let e=1;e<4;e++){const n=new i.g;n.zIndex=30,n.verticalAlignment=2,n.height=20*r.e+"px",n.width=164*r.e+"px",n.top=18*(e-2)*r.e+"px",n.thickness=0,c.addControl(n),d[e]=n;for(let i=9*e;i<9*e+9;i++){h[i]=Object(a.a)(r.e);const e=h[i].container;e.zIndex=50,e.left=-18*r.e*4+18*r.e*(i%9)+"px",e.onPointerClickObservable.add(e=>{let n=o.ActionInventoryClick.Type.LEFT;switch(e.buttonIndex){case 0:n=o.ActionInventoryClick.Type.LEFT;break;case 1:n=o.ActionInventoryClick.Type.MIDDLE;break;case 2:n=o.ActionInventoryClick.Type.RIGHT}t.send("ActionInventoryClick",{slot:i+27*s,type:n,inventory:o.ActionInventoryClick.TypeInv.MAIN})}),e.onPointerEnterObservable.add(t=>{e.background="#ffffff22"}),e.onPointerOutObservable.add(t=>{e.background="#00000000"}),e.isPointerBlocker=!0,n.addControl(e)}}const p=Object(a.a)(r.e);p.container.zIndex=50,p.container.verticalAlignment=0,p.container.horizontalAlignment=0,p.container.isPointerBlocker=!1,p.count.isPointerBlocker=!1,p.item.isPointerBlocker=!1,p.item.isHitTestVisible=!1,p.container.isHitTestVisible=!1,p.count.isHitTestVisible=!1;const m=e=>{p.container.left=e.x,p.container.top=e.y};u.onPointerMoveObservable.add(m);for(let e=0;e<9;e++){f[e]=Object(a.a)(r.e);const n=f[e].container;n.zIndex=40,n.left=-18*r.e*4+18*r.e*e+"px",n.onPointerClickObservable.add(n=>{let r=o.ActionInventoryClick.Type.LEFT;switch(n.buttonIndex){case 0:r=o.ActionInventoryClick.Type.LEFT;break;case 1:r=o.ActionInventoryClick.Type.MIDDLE;break;case 2:r=o.ActionInventoryClick.Type.RIGHT}t.send("ActionInventoryClick",{slot:e,type:r,inventory:o.ActionInventoryClick.TypeInv.MAIN})}),n.onPointerEnterObservable.add(e=>{n.background="#ffffff22"}),n.onPointerOutObservable.add(e=>{n.background="#00000000"}),n.isPointerBlocker=!0,l.addControl(n)}const y={};if(n().size>36){const e=new i.g;y.box=e,e.height=15*r.e+"px",e.width=22*r.e+"px",e.zIndex=25,e.thickness=0,e.top=`-${33*r.e}px`,e.left=71*r.e+"px",c.addControl(e);const t=n(),o=new i.d("button1","./textures/gui/button-right.png");y.button1=o,o.zIndex=25,o.horizontalAlignment=1,o.height=15*r.e+"px",o.width=11*r.e+"px",o.onPointerClickObservable.add(e=>{s+=1,9+27*s>t.size&&(s=0)}),o.isPointerBlocker=!0,e.addControl(o);const a=new i.d("button2","./textures/gui/button-left.png");y.button2=a,a.zIndex=25,a.horizontalAlignment=0,a.height=15*r.e+"px",a.width=11*r.e+"px",a.onPointerClickObservable.add(e=>{s-=1,s<0&&(s=Math.floor((t.size-9)/27))}),a.isPointerBlocker=!0,e.addControl(a)}const v=async()=>{if(0==c.isVisible)return;const e=n();Object(a.b)(p,e.tempslot);for(let t=0;t<9;t++)Object(a.b)(f[t],e.items[t]);for(let t=9;t<36;t++)Object(a.b)(h[t],e.items[27*s+t])};e.on("tick",v);const g=e=>{l.top=40*r.e+"px",l.height=20*e+"px",l.width=164*e+"px",null!=y.box&&(y.box.height=15*e+"px",y.box.width=22*e+"px",y.box.top=`-${33*r.e}px`,y.box.left=71*e+"px",y.button1.height=15*e+"px",y.button1.width=11*e+"px",y.button2.height=15*e+"px",y.button2.width=11*e+"px"),p.container.height=16*e+"px",p.container.width=16*e+"px",p.item.width=16*e+"px",p.item.height=16*e+"px",p.count.fontSize=8*e+"px",p.count.left=2*e+"px",p.count.top=4*e+"px",p.count.shadowOffsetX=e,p.count.shadowOffsetY=e;for(let t=0;t<f.length;t++)f[t].container.height=16*e+"px",f[t].container.width=16*e+"px",f[t].container.left=-18*e*4+18*e*(t%9)+"px",f[t].item.width=16*e+"px",f[t].item.height=16*e+"px",f[t].count.fontSize=8*e+"px",f[t].count.left=2*e+"px",f[t].count.top=4*e+"px",f[t].count.shadowOffsetX=e,f[t].count.shadowOffsetY=e;for(let t=1;t<4;t++){d[t].height=20*e+"px",d[t].width=164*e+"px",d[t].top=18*(t-2)*r.e+"px";for(let n=9*t;n<9*t+9;n++)h[n].container.left=-18*e*4+18*e*(n%9)+"px",h[n].container.height=16*e+"px",h[n].container.width=16*e+"px",h[n].item.width=16*e+"px",h[n].item.height=16*e+"px",h[n].count.fontSize=8*e+"px",h[n].count.left=2*e+"px",h[n].count.top=4*e+"px",h[n].count.shadowOffsetX=e,h[n].count.shadowOffsetY=e}};return r.b.on("scale-change",g),c.onDisposeObservable.add(()=>{r.b.off("scale-change",g),e.off("tick",v),u.onPointerMoveObservable.removeCallback(m)}),{inventory:c,inventoryRow:d,inventorySlots:h,hotbarSlots:f,tempslot:p,button:y}}},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var r=n(67),i=n(4),o=n(20),a=n(93),s=n(111);let u;function l(e,t){const n=Object(i.c)(2);u=new o.g,u.zIndex=5,u.verticalAlignment=1,u.width=184*i.e+"px",u.height=24*i.e+"px",u.thickness=0,n.addControl(u);const l=new o.d("hotbar","./textures/gui/hotbar.png");l.width=184*i.e+"px",l.height=24*i.e+"px",u.addControl(l);const c=new o.d("hotbar","./textures/gui/selected.png");c.zIndex=8,c.width=24*i.e+"px",c.height=24*i.e+"px",c.left=-19*i.e*4+"px",u.addControl(c);const f=new Array(9);for(let n=0;n<9;n++){f[n]=Object(a.a)(i.e);const r=f[n].container;r.zIndex=9,r.isPointerBlocker=!0,r.left=-20*i.e*4+20*i.e*n+"px",r.onPointerClickObservable.add(r=>{e.ents.getState(e.playerEntity,"inventory").selected=n,t.send("ActionInventoryClick",{slot:n,type:"select"})}),u.addControl(r)}const h=new o.d("hotbar","./textures/gui/inventoryopen.png");r.isMobile&&(h.zIndex=8,h.verticalAlignment=1,h.width=24*i.e+"px",h.height=24*i.e+"px",h.left=19*i.e*6+"px",h.onPointerClickObservable.add(()=>{null==s.b&&Object(s.c)(e,t)}),n.addControl(h));const d=async()=>{const t=e.ents.getState(e.playerEntity,"inventory");c.left=-20*i.e*4+20*i.e*t.selected+"px";for(let e=0;e<9;e++)Object(a.b)(f[e],t.items[e])};e.on("tick",d);const p=e=>{u.width=184*e+"px",u.height=24*e+"px",l.width=184*e+"px",l.height=24*e+"px",c.width=24*e+"px",c.height=24*e+"px";for(let e=0;e<9;e++)f[e].container.height=16*i.e+"px",f[e].container.width=16*i.e+"px",f[e].container.left=-20*i.e*4+20*i.e*e+"px",f[e].item.width=16*i.e+"px",f[e].item.height=16*i.e+"px",f[e].count.fontSize=8*i.e+"px",f[e].count.left=2*i.e+"px",f[e].count.top=4*i.e+"px",f[e].count.shadowOffsetX=i.e,f[e].count.shadowOffsetY=i.e;r.isMobile&&(h.width=24*i.e+"px",h.height=24*i.e+"px",h.left=19*i.e*6+"px")};i.b.on("scale-change",p),u.onDisposeObservable.add(()=>{i.b.off("scale-change",p),e.off("tick",d),h.dispose()})}},function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return f}));var r=n(31),i=n(110);const o={},a={};let s;function u(e){s=e,s.ents.createComponent({name:"model",state:{models:{}}})}async function l(e,t,n,r,a,u,l,f){const h=s.rendering.getScene();null==o[n]?fetch(Object(i.a)(n,"model")).then(e=>e.json()).then(async i=>{o[n]=i,o[n].animations=void i.animations,c(n,i,r,l,u,e,t,f,h,a)}):c(n,o[n],r,l,u,e,t,f,h,a)}async function c(e,t,n,u,l,c,h,d,p,m){const y=await async function(e,t,n){const o=s.rendering.getScene(),u={main:null,models:{}};null==a[e]&&function(e,t){const n=s.rendering.getScene(),i=[t.geometry.texturewidth,t.geometry.textureheight],o=new r.f("main",n),u=t.geometry.bones;for(var l=0;l<u.length;l++){const e=u[l],t=e.cubes,a=new Array(t.length),f=e.pivot;for(let o=0;o<t.length;o++){let u=0;null!=t[o].inflate&&(u=t[o].inflate);const l=new Array(6),f=t[o].size,h=t[o].origin,d=t[o].uv;l[0]=new r.m((d[0]+f[2])/i[0],(i[1]-f[1]-f[2]-d[1])/i[1],(f[2]+f[0]+d[0])/i[0],(i[1]-f[2]-d[1])/i[1]),l[1]=new r.m((d[0]+2*f[2]+f[0])/i[0],(i[1]-f[1]-f[2]-d[1])/i[1],(2*f[2]+2*f[0]+d[0])/i[0],(i[1]-f[2]-d[1])/i[1]),l[2]=new r.m(d[0]/i[0],(i[1]-f[1]-f[2]-d[1])/i[1],(d[0]+f[2])/i[0],(i[1]-f[2]-d[1])/i[1]),l[3]=new r.m((d[0]+f[2]+f[0])/i[0],(i[1]-f[1]-f[2]-d[1])/i[1],(f[2]+2*f[0]+d[0])/i[0],(i[1]-f[2]-d[1])/i[1]),l[4]=new r.m((f[0]+f[2]+d[0])/i[0],(i[1]-f[2]-d[1])/i[1],(d[0]+f[2])/i[0],(i[1]-d[1])/i[1]),l[5]=new r.m((2*f[0]+f[2]+d[0])/i[0],(i[1]-f[2]-d[1])/i[1],(d[0]+f[2]+f[0])/i[0],(i[1]-d[1])/i[1]),a[o]=r.g.CreateBox("part-"+e.name+"-"+o,{height:.06*(f[1]+u),width:.06*(f[0]+u),depth:.06*(f[2]+u),faceUV:l,wrap:!0},n),a[o].position=new r.l(.06*-(h[0]+(f[0]-u/2)/2),.06*(h[1]+(f[1]-u/2)/2),.06*(h[2]+(f[2]-u/2)/2));var c=s.rendering.makeStandardMaterial("modelmaterial-"+e.name+"-"+o);a[o].material=c,a[o].opaque=!1}const h=r.f.MergeMeshes(a,!0,!0,void 0,!0,!0);h.setParent(o),h.setPivotMatrix(r.e.Translation(.06*-f[0],.06*-f[1],.06*-f[2]))}a[e]=o}(e,t);const l=a[e].clone(e,null,!1,!1);return s.rendering.addMeshToScene(l),l.getChildMeshes().forEach(e=>{let t=e.name.substr(12);t=t.substr(0,t.length-9);const a=s.rendering.makeStandardMaterial("modelmaterial-"+t);e.material=a,a.diffuseTexture=new r.k(Object(i.a)(n,"texture"),o,!0,!0,r.k.NEAREST_SAMPLINGMODE),a.diffuseTexture.hasAlpha=!0,s.rendering.addMeshToScene(e),u.models[t]=e}),u.main=l,u}(e,t,n);y.nametag=f(y.main,u,s.ents.getPositionData(c).height,l),s.ents.addComponentAgain(c,"model",y);const v=r.g.CreateBox("hitbox-"+h,{height:d[1],width:d[0],depth:d[2]},p);if(c!=s.playerEntity)v.setParent(y.main),v.setPositionWithLocalVector(new r.l(0,d[1]/2,0)),v.material=s.rendering.makeStandardMaterial(""),v.isVisible=!1,s.rendering.addMeshToScene(v,!1),s.entities.addComponentAgain(c,"mesh",{mesh:y.main,offset:m,animations:o[e].animations});else{const e=s.ents.getPositionData(c);y.main.setParent(s.entities.getState(c,"mesh").mesh),y.main.position=new r.l(0,-e.height/2,0)}s.rendering.addMeshToScene(y.main,!1)}function f(e,t,n,i){const o=s.rendering.getScene(),a="bold 96px 'lato'",u=new r.d("DynamicTexture",64,o,!1).getContext();u.font=a;const l=u.measureText(t).width+8,c=l*(.3/144),f=new r.d("DynamicTexture",{width:l,height:144},o,!1),h=s.rendering.makeStandardMaterial("nametag");h.diffuseTexture=f,h.emissiveTexture=h.diffuseTexture,h.diffuseTexture.hasAlpha=!0,h.opacityTexture=h.diffuseTexture,f.drawText(t,null,null,a,"#eeeeee","#00000066",!0);const d=r.g.CreatePlane("plane",{width:c,height:.3},o);return d.material=h,d.opaque=!1,d.rotation.x=0,d.rotation.y=0,d.isVisible=i,d.setParent(e),d.setPositionWithLocalVector(new r.l(0,n+.2,0)),s.rendering.addMeshToScene(d),d}},function(e,t){e.exports=1e-6},function(e,t){e.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},function(e,t){e.exports=function(e,t,n){var r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r}},function(e,t){e.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o);return e}},function(e,t){e.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},function(e,t){e.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}},function(e,t){e.exports=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}},function(e,t){e.exports=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}},function(e,t){e.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}},function(e,t){e.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}},function(e,t){e.exports=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}},function(e,t){e.exports=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}},function(e,t,n){"use strict";e.exports=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},,,,,function(e,t,n){"use strict";var r=t;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(170),r.BufferWriter=n(262),r.Reader=n(171),r.BufferReader=n(263),r.util=n(81),r.rpc=n(264),r.roots=n(266),r.configure=i,i()},function(e,t,n){"use strict";e.exports=function(e,t){var n=new Array(arguments.length-1),r=0,i=2,o=!0;for(;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,a){n[r]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,a(e))}}))}},function(e,t,n){"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var i=new Array(64),o=new Array(123),a=0;a<64;)o[i[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;r.encode=function(e,t,n){for(var r,o=null,a=[],s=0,u=0;t<n;){var l=e[t++];switch(u){case 0:a[s++]=i[l>>2],r=(3&l)<<4,u=1;break;case 1:a[s++]=i[r|l>>4],r=(15&l)<<2,u=2;break;case 2:a[s++]=i[r|l>>6],a[s++]=i[63&l],u=0}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return u&&(a[s++]=i[r],a[s++]=61,1===u&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))};r.decode=function(e,t,n){for(var r,i=n,a=0,s=0;s<e.length;){var u=e.charCodeAt(s++);if(61===u&&a>1)break;if(void 0===(u=o[u]))throw Error("invalid encoding");switch(a){case 0:r=u,a=1;break;case 1:t[n++]=r<<2|(48&u)>>4,r=u,a=2;break;case 2:t[n++]=(15&r)<<4|(60&u)>>2,r=u,a=3;break;case 3:t[n++]=(3&r)<<6|u,a=0}}if(1===a)throw Error("invalid encoding");return n-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,n){"use strict";function r(){this._listeners={}}e.exports=r,r.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},r.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},function(e,t,n){"use strict";function r(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(e,r,i){t[0]=e,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function a(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function s(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?i:o,e.writeFloatBE=r?o:i,e.readFloatLE=r?a:s,e.readFloatBE=r?s:a}():function(){function t(e,t,n,r){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function n(e,t,n){var r=e(t,n),i=2*(r>>31)+1,o=r>>>23&255,a=8388607&r;return 255===o?a?NaN:i*(1/0):0===o?1401298464324817e-60*i*a:i*Math.pow(2,o-150)*(a+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,o),e.readFloatLE=n.bind(null,a),e.readFloatBE=n.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(e,r,i){t[0]=e,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function a(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function s(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?i:o,e.writeDoubleBE=r?o:i,e.readDoubleLE=r?a:s,e.readDoubleBE=r?s:a}():function(){function t(e,t,n,r,i,o){var a=r<0?1:0;if(a&&(r=-r),0===r)e(0,i,o+t),e(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(r>17976931348623157e292)e(0,i,o+t),e((a<<31|2146435072)>>>0,i,o+n);else{var s;if(r<22250738585072014e-324)e((s=r/5e-324)>>>0,i,o+t),e((a<<31|s/4294967296)>>>0,i,o+n);else{var u=Math.floor(Math.log(r)/Math.LN2);1024===u&&(u=1023),e(4503599627370496*(s=r*Math.pow(2,-u))>>>0,i,o+t),e((a<<31|u+1023<<20|1048576*s&1048575)>>>0,i,o+n)}}}function n(e,t,n,r,i){var o=e(r,i+t),a=e(r,i+n),s=2*(a>>31)+1,u=a>>>20&2047,l=4294967296*(1048575&a)+o;return 2047===u?l?NaN:s*(1/0):0===u?5e-324*s*l:s*Math.pow(2,u-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=n.bind(null,a,0,4),e.readDoubleBE=n.bind(null,s,4,0)}(),e}function i(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function o(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function a(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=r(r)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,n){"use strict";var r=t;r.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},r.read=function(e,t,n){if(n-t<1)return"";for(var r,i=null,o=[],a=0;t<n;)(r=e[t++])<128?o[a++]=r:r>191&&r<224?o[a++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(r>>10),o[a++]=56320+(1023&r)):o[a++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))},r.write=function(e,t,n){for(var r,i,o=n,a=0;a<e.length;++a)(r=e.charCodeAt(a))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(a+1)))?(r=65536+((1023&r)<<10)+(1023&i),++a,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-o}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=n||8192,i=r>>>1,o=null,a=r;return function(n){if(n<1||n>i)return e(n);a+n>r&&(o=e(r),a=0);var s=t.call(o,a,a+=n);return 7&a&&(a=1+(7|a)),s}}},function(e,t,n){"use strict";e.exports=i;var r=n(81);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var a=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(r.isString(e)){if(!r.Long)return i.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):o},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;i.fromHash=function(e){return e===a?o:new i((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},function(e,t,n){"use strict";e.exports=o;var r=n(170);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(81);function o(){r.call(this)}function a(e,t,n){e.length<40?i.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},o.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},o._configure()},function(e,t,n){"use strict";e.exports=o;var r=n(171);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(81);function o(e){r.call(this,e)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},function(e,t,n){"use strict";t.Service=n(265)},function(e,t,n){"use strict";e.exports=i;var r=n(81);function i(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,n,i,o,a){if(!o)throw TypeError("request must be specified");var s=this;if(!a)return r.asPromise(e,s,t,n,i,o);if(s.rpcImpl)try{return s.rpcImpl(t,n[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return s.emit("error",e,t),a(e);if(null!==n){if(!(n instanceof i))try{n=i[s.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return s.emit("error",e,t),a(e)}return s.emit("data",n,t),a(null,n)}s.end(!0)}))}catch(e){return s.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,n){"use strict";e.exports={}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e){e.exports=JSON.parse('{"i8":{"enum":["i8"]},"u8":{"enum":["u8"]},"i16":{"enum":["i16"]},"u16":{"enum":["u16"]},"i32":{"enum":["i32"]},"u32":{"enum":["u32"]},"f32":{"enum":["f32"]},"f64":{"enum":["f64"]},"li8":{"enum":["li8"]},"lu8":{"enum":["lu8"]},"li16":{"enum":["li16"]},"lu16":{"enum":["lu16"]},"li32":{"enum":["li32"]},"lu32":{"enum":["lu32"]},"lf32":{"enum":["lf32"]},"lf64":{"enum":["lf64"]},"i64":{"enum":["i64"]},"li64":{"enum":["li64"]},"u64":{"enum":["u64"]},"lu64":{"enum":["lu64"]}}')},function(e,t,n){"use strict";var r=n(213).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=f,t=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=a(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=a(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";var r=n(214),i=n(71),o=n(176),a=n(131),s=n(153),u=Object.prototype.toString;function l(e){if(!(this instanceof l))return new l(e);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(a[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var c;if(c="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=r.deflateSetDictionary(this.strm,c)))throw new Error(a[n]);this._dict_set=!0}}function c(e,t){var n=new l(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}l.prototype.push=function(e,t){var n,a,s=this.strm,l=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===u.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(l),s.next_out=0,s.avail_out=l),1!==(n=r.deflate(s,a))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==a||(this.onEnd(0),s.avail_out=0,!0)},l.prototype.onData=function(e){this.chunks.push(e)},l.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=l,t.deflate=c,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,c(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,c(e,t)}},function(e,t,n){"use strict";var r=n(71);function i(e){for(var t=e.length;--t>=0;)e[t]=0}var o=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],a=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],l=new Array(576);i(l);var c=new Array(60);i(c);var f=new Array(512);i(f);var h=new Array(256);i(h);var d=new Array(29);i(d);var p,m,y,v=new Array(30);function g(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function b(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function w(e){return e<256?f[e]:f[256+(e>>>7)]}function _(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function k(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,_(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function x(e,t,n){k(e,n[2*t],n[2*t+1])}function O(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function P(e,t,n){var r,i,o=new Array(16),a=0;for(r=1;r<=15;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=O(o[s]++,s))}}function S(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function E(e){e.bi_valid>8?_(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function j(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function C(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&j(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!j(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function T(e,t,n){var r,i,s,u,l=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===r?x(e,i,t):(x(e,(s=h[i])+256+1,t),0!==(u=o[s])&&k(e,i-=d[s],u),x(e,s=w(--r),n),0!==(u=a[s])&&k(e,r-=v[s],u))}while(l<e.last_lit);x(e,256,t)}function A(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<u;n++)0!==o[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=l,n=e.heap_len>>1;n>=1;n--)C(e,o,n);i=u;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],C(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,C(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,a,s,u=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,f=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(o=0;o<=15;o++)e.bl_count[o]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(o=u[2*u[2*(r=e.heap[n])+1]+1]+1)>p&&(o=p,m++),u[2*r+1]=o,r>l||(e.bl_count[o]++,a=0,r>=d&&(a=h[r-d]),s=u[2*r],e.opt_len+=s*(o+a),f&&(e.static_len+=s*(c[2*r+1]+a)));if(0!==m){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(r=e.bl_count[o];0!==r;)(i=e.heap[--n])>l||(u[2*i+1]!==o&&(e.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}(e,t),P(o,l,e.bl_count)}function z(e,t,n){var r,i,o=-1,a=t[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<u&&i===a||(s<l?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4))}function I(e,t,n){var r,i,o=-1,a=t[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<u&&i===a)){if(s<l)do{x(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(x(e,i,e.bl_tree),s--),x(e,16,e.bl_tree),k(e,s-3,2)):s<=10?(x(e,17,e.bl_tree),k(e,s-3,3)):(x(e,18,e.bl_tree),k(e,s-11,7));s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4)}}i(v);var D=!1;function R(e,t,n,i){k(e,0+(i?1:0),3),function(e,t,n,i){E(e),i&&(_(e,n),_(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){D||(!function(){var e,t,n,r,i,u=new Array(16);for(n=0,r=0;r<28;r++)for(d[r]=n,e=0;e<1<<o[r];e++)h[n++]=r;for(h[n-1]=r,i=0,r=0;r<16;r++)for(v[r]=i,e=0;e<1<<a[r];e++)f[i++]=r;for(i>>=7;r<30;r++)for(v[r]=i<<7,e=0;e<1<<a[r]-7;e++)f[256+i++]=r;for(t=0;t<=15;t++)u[t]=0;for(e=0;e<=143;)l[2*e+1]=8,e++,u[8]++;for(;e<=255;)l[2*e+1]=9,e++,u[9]++;for(;e<=279;)l[2*e+1]=7,e++,u[7]++;for(;e<=287;)l[2*e+1]=8,e++,u[8]++;for(P(l,287,u),e=0;e<30;e++)c[2*e+1]=5,c[2*e]=O(e,5);p=new g(l,o,257,286,15),m=new g(c,a,0,30,15),y=new g(new Array(0),s,0,19,7)}(),D=!0),e.l_desc=new b(e.dyn_ltree,p),e.d_desc=new b(e.dyn_dtree,m),e.bl_desc=new b(e.bl_tree,y),e.bi_buf=0,e.bi_valid=0,S(e)},t._tr_stored_block=R,t._tr_flush_block=function(e,t,n,r){var i,o,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),A(e,e.l_desc),A(e,e.d_desc),a=function(e){var t;for(z(e,e.dyn_ltree,e.l_desc.max_code),z(e,e.dyn_dtree,e.d_desc.max_code),A(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*u[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?R(e,t,n,r):4===e.strategy||o===i?(k(e,2+(r?1:0),3),T(e,l,c)):(k(e,4+(r?1:0),3),function(e,t,n,r){var i;for(k(e,t-257,5),k(e,n-1,5),k(e,r-4,4),i=0;i<r;i++)k(e,e.bl_tree[2*u[i]+1],3);I(e,e.dyn_ltree,t-1),I(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),T(e,e.dyn_ltree,e.dyn_dtree)),S(e),r&&E(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(h[n]+256+1)]++,e.dyn_dtree[2*w(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){k(e,2,3),x(e,256,l),function(e){16===e.bi_valid?(_(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,n){"use strict";var r=n(215),i=n(71),o=n(176),a=n(154),s=n(131),u=n(153),l=n(275),c=Object.prototype.toString;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);if(this.header=new l,r.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=o.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=r.inflateSetDictionary(this.strm,t.dictionary))!==a.Z_OK))throw new Error(s[n])}function h(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}f.prototype.push=function(e,t){var n,s,u,l,f,h=this.strm,d=this.options.chunkSize,p=this.options.dictionary,m=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?h.input=o.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(d),h.next_out=0,h.avail_out=d),(n=r.inflate(h,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&p&&(n=r.inflateSetDictionary(this.strm,p)),n===a.Z_BUF_ERROR&&!0===m&&(n=a.Z_OK,m=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&n!==a.Z_STREAM_END&&(0!==h.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(h.output,h.next_out),l=h.next_out-u,f=o.buf2string(h.output,u),h.next_out=l,h.avail_out=d-l,l&&i.arraySet(h.output,h.output,u,l,0),this.onData(f)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(m=!0)}while((h.avail_in>0||0===h.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),h.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=f,t.inflate=h,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},t.ungzip=h},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i,o,a,s,u,l,c,f,h,d,p,m,y,v,g,b,w,_,k,x,O,P,S;n=e.state,r=e.next_in,P=e.input,i=r+(e.avail_in-5),o=e.next_out,S=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),u=n.dmax,l=n.wsize,c=n.whave,f=n.wnext,h=n.window,d=n.hold,p=n.bits,m=n.lencode,y=n.distcode,v=(1<<n.lenbits)-1,g=(1<<n.distbits)-1;e:do{p<15&&(d+=P[r++]<<p,p+=8,d+=P[r++]<<p,p+=8),b=m[d&v];t:for(;;){if(d>>>=w=b>>>24,p-=w,0===(w=b>>>16&255))S[o++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=m[(65535&b)+(d&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}_=65535&b,(w&=15)&&(p<w&&(d+=P[r++]<<p,p+=8),_+=d&(1<<w)-1,d>>>=w,p-=w),p<15&&(d+=P[r++]<<p,p+=8,d+=P[r++]<<p,p+=8),b=y[d&g];n:for(;;){if(d>>>=w=b>>>24,p-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=y[(65535&b)+(d&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(k=65535&b,p<(w&=15)&&(d+=P[r++]<<p,(p+=8)<w&&(d+=P[r++]<<p,p+=8)),(k+=d&(1<<w)-1)>u){e.msg="invalid distance too far back",n.mode=30;break e}if(d>>>=w,p-=w,k>(w=o-a)){if((w=k-w)>c&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(x=0,O=h,0===f){if(x+=l-w,w<_){_-=w;do{S[o++]=h[x++]}while(--w);x=o-k,O=S}}else if(f<w){if(x+=l+f-w,(w-=f)<_){_-=w;do{S[o++]=h[x++]}while(--w);if(x=0,f<_){_-=w=f;do{S[o++]=h[x++]}while(--w);x=o-k,O=S}}}else if(x+=f-w,w<_){_-=w;do{S[o++]=h[x++]}while(--w);x=o-k,O=S}for(;_>2;)S[o++]=O[x++],S[o++]=O[x++],S[o++]=O[x++],_-=3;_&&(S[o++]=O[x++],_>1&&(S[o++]=O[x++]))}else{x=o-k;do{S[o++]=S[x++],S[o++]=S[x++],S[o++]=S[x++],_-=3}while(_>2);_&&(S[o++]=S[x++],_>1&&(S[o++]=S[x++]))}break}}break}}while(r<i&&o<s);r-=_=p>>3,d&=(1<<(p-=_<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=d,n.bits=p}},function(e,t,n){"use strict";var r=n(71),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,u,l,c,f,h){var d,p,m,y,v,g,b,w,_,k=h.bits,x=0,O=0,P=0,S=0,E=0,j=0,C=0,T=0,A=0,z=0,I=null,D=0,R=new r.Buf16(16),B=new r.Buf16(16),M=null,L=0;for(x=0;x<=15;x++)R[x]=0;for(O=0;O<u;O++)R[t[n+O]]++;for(E=k,S=15;S>=1&&0===R[S];S--);if(E>S&&(E=S),0===S)return l[c++]=20971520,l[c++]=20971520,h.bits=1,0;for(P=1;P<S&&0===R[P];P++);for(E<P&&(E=P),T=1,x=1;x<=15;x++)if(T<<=1,(T-=R[x])<0)return-1;if(T>0&&(0===e||1!==S))return-1;for(B[1]=0,x=1;x<15;x++)B[x+1]=B[x]+R[x];for(O=0;O<u;O++)0!==t[n+O]&&(f[B[t[n+O]]++]=O);if(0===e?(I=M=f,g=19):1===e?(I=i,D-=257,M=o,L-=257,g=256):(I=a,M=s,g=-1),z=0,O=0,x=P,v=c,j=E,C=0,m=-1,y=(A=1<<E)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){b=x-C,f[O]<g?(w=0,_=f[O]):f[O]>g?(w=M[L+f[O]],_=I[D+f[O]]):(w=96,_=0),d=1<<x-C,P=p=1<<j;do{l[v+(z>>C)+(p-=d)]=b<<24|w<<16|_|0}while(0!==p);for(d=1<<x-1;z&d;)d>>=1;if(0!==d?(z&=d-1,z+=d):z=0,O++,0==--R[x]){if(x===S)break;x=t[n+f[O]]}if(x>E&&(z&y)!==m){for(0===C&&(C=E),v+=P,T=1<<(j=x-C);j+C<S&&!((T-=R[j+C])<=0);)j++,T<<=1;if(A+=1<<j,1===e&&A>852||2===e&&A>592)return 1;l[m=z&y]=E<<24|j<<16|v-c|0}}return 0!==z&&(l[v+z]=x-C<<24|64<<16|0),h.bits=E,0}},function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const r=()=>{};function i(){let e,t=!1,n=r;return[new Promise(r=>{t?r(e):n=r}),r=>{t=!0,e=r,n()}]}},function(e,t,n){"use strict";var r=n(138);class i extends r.a{constructor(){super(e=>(this._observers.add(e),()=>this._observers.delete(e))),this._observers=new Set}next(e){for(const t of this._observers)t.next(e)}error(e){for(const t of this._observers)t.error(e)}complete(){for(const e of this._observers)e.complete()}}t.a=i},function(e,t,n){"use strict";let r;function i(){return r||(r=function(){try{throw new Error}catch(e){const t=(""+e.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(t)return(""+t[0]).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}return"/"}()),r}n.d(t,"b",(function(){return P})),n.d(t,"f",(function(){return S.a})),n.d(t,"c",(function(){return w})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return E})),n.d(t,"d",(function(){return j}));const o="undefined"!=typeof navigator&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4,a=e=>/^(file|https?:)?\/\//i.test(e);function s(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}let u;function l(){return u||(u=function(){if("undefined"==typeof Worker)return class{constructor(){throw Error("No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.")}};class e extends Worker{constructor(e,t){"string"==typeof e&&t&&t._baseURL?e=new URL(e,t._baseURL):"string"==typeof e&&!a(e)&&i().match(/^file:\/\//i)&&(e=new URL(e,i().replace(/\/[^\/]+$/,"/")),e=s(`importScripts(${JSON.stringify(e)});`)),"string"==typeof e&&a(e)&&(e=s(`importScripts(${JSON.stringify(e)});`)),super(e,t)}}class t extends e{constructor(e,t){super(window.URL.createObjectURL(e),t)}static fromText(e,n){const r=new window.Blob([e],{type:"text/javascript"});return new t(r,n)}}return{blob:t,default:e}}()),u}function c(){const e="undefined"!=typeof self&&"undefined"!=typeof Window&&self instanceof Window;return!("undefined"==typeof self||!self.postMessage||e)}var f,h=n(102),d=n.n(h),p=n(290),m=n(670),y=n(138);function v(e){return Promise.all(e.map(e=>{const t=e=>({status:"fulfilled",value:e}),n=e=>({status:"rejected",reason:e}),r=Promise.resolve(e);try{return r.then(t,n)}catch(e){return Promise.reject(e)}}))}!function(e){e.initialized="initialized",e.taskCanceled="taskCanceled",e.taskCompleted="taskCompleted",e.taskFailed="taskFailed",e.taskQueued="taskQueued",e.taskQueueDrained="taskQueueDrained",e.taskStart="taskStart",e.terminated="terminated"}(f||(f={}));var g=n(70);function b(e){throw Error(e)}const w={errors:e=>e[g.a]||b("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise."),events:e=>e[g.b]||b("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise."),terminate:e=>e[g.c]()};var _=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};let k=1;class x{constructor(e,t){this.eventSubject=new p.a,this.initErrors=[],this.isClosing=!1,this.nextTaskID=1,this.taskQueue=[];const n="number"==typeof t?{size:t}:t||{},{size:r=o}=n;this.debug=d()("threads:pool:"+(n.name||String(k++)).replace(/\W/g," ").trim().replace(/\s+/g,"-")),this.options=n,this.workers=function(e,t){return function(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}(t).map(()=>({init:e(),runningTasks:[]}))}(e,r),this.eventObservable=Object(m.a)(y.a.from(this.eventSubject)),Promise.all(this.workers.map(e=>e.init)).then(()=>this.eventSubject.next({type:f.initialized,size:this.workers.length}),e=>{this.debug("Error while initializing pool worker:",e),this.eventSubject.error(e),this.initErrors.push(e)})}findIdlingWorker(){const{concurrency:e=1}=this.options;return this.workers.find(t=>t.runningTasks.length<e)}runPoolTask(e,t){return _(this,void 0,void 0,(function*(){const n=this.workers.indexOf(e)+1;this.debug(`Running task #${t.id} on worker #${n}...`),this.eventSubject.next({type:f.taskStart,taskID:t.id,workerID:n});try{const r=yield t.run(yield e.init);this.debug(`Task #${t.id} completed successfully`),this.eventSubject.next({type:f.taskCompleted,returnValue:r,taskID:t.id,workerID:n})}catch(e){this.debug(`Task #${t.id} failed`),this.eventSubject.next({type:f.taskFailed,taskID:t.id,error:e,workerID:n})}}))}run(e,t){return _(this,void 0,void 0,(function*(){const n=(()=>_(this,void 0,void 0,(function*(){var r;yield(r=0,new Promise(e=>setTimeout(e,r)));try{yield this.runPoolTask(e,t)}finally{e.runningTasks=e.runningTasks.filter(e=>e!==n),this.isClosing||this.scheduleWork()}})))();e.runningTasks.push(n)}))}scheduleWork(){this.debug("Attempt de-queueing a task in order to run it...");const e=this.findIdlingWorker();if(!e)return;const t=this.taskQueue.shift();if(!t)return this.debug("Task queue is empty"),void this.eventSubject.next({type:f.taskQueueDrained});this.run(e,t)}taskCompletion(e){return new Promise((t,n)=>{const r=this.events().subscribe(i=>{i.type===f.taskCompleted&&i.taskID===e?(r.unsubscribe(),t(i.returnValue)):i.type===f.taskFailed&&i.taskID===e?(r.unsubscribe(),n(i.error)):i.type===f.terminated&&(r.unsubscribe(),n(Error("Pool has been terminated before task was run.")))})})}settled(e=!1){return _(this,void 0,void 0,(function*(){const t=()=>{return e=this.workers,t=e=>e.runningTasks,e.reduce((e,n)=>[...e,...t(n)],[]);var e,t},n=[],r=this.eventObservable.subscribe(e=>{e.type===f.taskFailed&&n.push(e.error)});return this.initErrors.length>0?Promise.reject(this.initErrors[0]):e&&0===this.taskQueue.length?(yield v(t()),n):(yield new Promise((e,t)=>{const n=this.eventObservable.subscribe({next(t){t.type===f.taskQueueDrained&&(n.unsubscribe(),e())},error:t})}),yield v(t()),r.unsubscribe(),n)}))}completed(e=!1){return _(this,void 0,void 0,(function*(){const t=this.settled(e),n=new Promise((e,n)=>{const r=this.eventObservable.subscribe({next(i){i.type===f.taskQueueDrained?(r.unsubscribe(),e(t)):i.type===f.taskFailed&&(r.unsubscribe(),n(i.error))},error:n})}),r=yield Promise.race([t,n]);if(r.length>0)throw r[0]}))}events(){return this.eventObservable}queue(e){const{maxQueuedJobs:t=1/0}=this.options;if(this.isClosing)throw Error("Cannot schedule pool tasks after terminate() has been called.");if(this.initErrors.length>0)throw this.initErrors[0];const n=this.nextTaskID++,r=this.taskCompletion(n);r.catch(e=>{this.debug(`Task #${n} errored:`,e)});const i={id:n,run:e,cancel:()=>{-1!==this.taskQueue.indexOf(i)&&(this.taskQueue=this.taskQueue.filter(e=>e!==i),this.eventSubject.next({type:f.taskCanceled,taskID:i.id}))},then:r.then.bind(r)};if(this.taskQueue.length>=t)throw Error("Maximum number of pool tasks queued. Refusing to queue another one.\nThis usually happens for one of two reasons: We are either at peak workload right now or some tasks just won't finish, thus blocking the pool.");return this.debug(`Queueing task #${i.id}...`),this.taskQueue.push(i),this.eventSubject.next({type:f.taskQueued,taskID:i.id}),this.scheduleWork(),i}terminate(e){return _(this,void 0,void 0,(function*(){this.isClosing=!0,e||(yield this.completed(!0)),this.eventSubject.next({type:f.terminated,remainingQueue:[...this.taskQueue]}),this.eventSubject.complete(),yield Promise.all(this.workers.map(e=>_(this,void 0,void 0,(function*(){return w.terminate(yield e.init)}))))}))}}function O(e,t){return new x(e,t)}x.EventType=f,O.EventType=f;const P=O;var S=n(198);const E=l().blob,j=l().default},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return f}));var r=n(17),i=n(139),o=n(20),a=n(109),s=n(4),u=n(55);let l;function c(e,t){const n=new o.g;return n.thickness=0,n.isPointerBlocker=!0,n.zIndex=5,null!=Object(r.j)()?h(e,n):function(e,t){const n=new i.a("main",[{text:"Login into your account"}]);t.addControl(n.main),n.createInput("username","Username/Email","","","Enter your Username/Email"),n.createInput("password","Password","","","Enter your password",!0),n.createSelectable("remember",e=>"Remember login? "+(0==e?"No":"Yes"),0,[!1,!0]),n.createItem("loginButton","Login...",async()=>{n.main.isVisible=!1;const i=new a.a([{text:"Authentication"}]);i.setCenterText([{text:"Logging in..."}]),t.addControl(i.main);const o=await(await fetch(r.m+"/api/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.settings.username,password:n.settings.password})})).json();o.valid?(Object(r.r)(o,1==n.settings.remember),i.dispose(),n.main.dispose(),l.name.text=o.username,l.login.buttonText.text=[{text:"Account",color:"white"}],h(e,t)):(i.setCenterText([{text:o.reason}]),i.createItem("Back",()=>{i.dispose(),n.main.isVisible=!0}))}),n.createLabel("feagea",""),n.createItem("info","Restore password",()=>{window.open(r.m+"/user/restorepassword","_blank")}),n.createItem("info","Register new account",()=>{window.open(r.m+"/user/login","_blank")}),n.createSettingButton("Back",()=>{n.main.dispose(),e("main")})}(e,n),n}function f(e,t){const n=Object(r.j)(),i=new o.g;i.thickness=0,i.isPointerBlocker=!0,i.zIndex=20,i.left=2*-s.e,i.top=2*s.e,i.verticalAlignment=0,i.horizontalAlignment=1,i.height=20*s.e+"px",i.width=120*s.e+"px",i.background=r.e.backgroundColor;const a=new o.k;a.color="white",a.fontSize=7*s.e,a.textHorizontalAlignment=0,a.text=null==n?"Not Logged!":n.username,a.left=2*s.e+"px",i.addControl(a);const c=Object(u.a)(40,()=>{e("login")});c.buttonText.text=[{text:null==n?"Login":"Account",color:"white"}],c.button.horizontalAlignment=1,c.button.verticalAlignment=2,c.button.left=`-${2*s.e}px`,i.addControl(c.button);const f=()=>{c.button.left=`-${2*s.e}px`,a.left=2*s.e+"px",a.fontSize=7*s.e,i.left=2*-s.e,i.top=2*s.e,i.height=20*s.e+"px",i.width=120*s.e+"px"};return s.b.on("scale-change",f),i.onDisposeObservable.add(()=>{s.b.off("scale-change",f)}),l={main:i,name:a,login:c},l}function h(e,t){const n=new i.a("main",[{text:"Account settings"}]),o=Object(r.j)();t.addControl(n.main),n.createItem("skin","Change skin",()=>{if(!n.lock){n.lock=!0;const e=document.createElement("input");e.type="file",e.accept="image/png",e.click();const i=async()=>{if(document.body.removeEventListener("focusin",i),0!=e.files.length){n.main.isVisible=!1;const i=new a.a([{text:"Uploading skin..."}]);let s,u;i.setCenterText([{text:"Connecting..."}]),t.addControl(i.main);try{s=await(await fetch(r.m+"/api/updateSkin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({loginToken:o.token,skin:btoa(String.fromCharCode.apply(null,new Uint8Array(await e.files[0].arrayBuffer())))})})).json(),s.error&&(u=s.error),s.success&&(u="Your skin has been changed!"),i.setCenterText([{text:u}]),i.createItem("Back",()=>{i.dispose(),n.main.isVisible=!0,n.lock=!1})}catch(e){console.error(e),i.setCenterText([{text:"Error accured while sending this file!"}]),i.createItem("Back",()=>{i.dispose(),n.main.isVisible=!0,n.lock=!1})}}};document.body.addEventListener("focusin",i)}}),n.createSettingButton("Logout",()=>{n.main.dispose(),Object(r.b)(),l.name.text="Not logged!",l.login.buttonText.text=[{text:"Login",color:"white"}],e("main")}),n.createSettingButton("Back",()=>{n.main.dispose(),e("main")})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(4);function i(e){console.log("Using mobile controls");Object(r.c)(2),Object(r.d)(2);let t=0,n=0,i=!1,o=null,a=null;let s=[0,0];e.container.canvas.ontouchstart=function(r){s=[r.clientX,r.clientY],r.target==e.container.canvas&&(r.preventDefault(),null!=o&&(clearInterval(o),clearInterval(a)),i=!0,n=(new Date).getTime()/1e3,o=setInterval((function(){t=(new Date).getTime()/1e3-n}),2),a=setInterval((function(){t>.7&&e.inputs.down.emit("fire")}),400))},e.container.canvas.ontouchmove=function(e){e.preventDefault();let t=Math.abs(s[0]-e.targetTouches[0].clientX),r=Math.abs(s[1]-e.targetTouches[0].clientY);(t>3||r>3)&&(n=(new Date).getTime()/1e3+.5),s=[e.targetTouches[0].clientX,e.targetTouches[0].clientY]},e.container.canvas.ontouchend=function(n){n.target==e.container.canvas&&(n.preventDefault(),0<=t&&t<.7&&e.inputs.down.emit("alt-fire"),null!=o&&(clearInterval(o),clearInterval(a)),i=!1,t=0)},e.container.canvas.ontouchcancel=function(n){n.target==e.container.canvas&&(n.preventDefault(),null!=o&&(clearInterval(o),clearInterval(a)),i=!1,t=0)};const u=document.createElement("div");u.id="game_mobile_controls",u.classList.add("game_mobile"),document.body.appendChild(u);let l=null,c={x:0,y:0};var f=document.createElement("div");function h(t,n){t=Math.round(t/50),0==(n=Math.round(n/50))?(e.inputs.state.forward=!1,e.inputs.state.backward=!1):n>0?(e.inputs.state.forward=!1,e.inputs.state.backward=!0):n<0&&(e.inputs.state.forward=!0,e.inputs.state.backward=!1),0==t?(e.inputs.state.left=!1,e.inputs.state.right=!1):t>0?(e.inputs.state.left=!1,e.inputs.state.right=!0):t<0&&(e.inputs.state.left=!0,e.inputs.state.right=!1)}f.id="game_mobile_joystick",f.ontouchstart=function(e){e.target==f&&(e.preventDefault(),f.style.transition="0s",l=(e.changedTouches,{x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY}))},f.ontouchmove=function(e){if(e.target!=f)return;if(null===l)return;e.preventDefault();const t=e.targetTouches[0].clientX-l.x,n=e.targetTouches[0].clientY-l.y,r=Math.atan2(n,t),i=Math.min(50,Math.hypot(t,n)),o=i*Math.cos(r),a=i*Math.sin(r);f.style.transform="translate("+(o+16)+"px, "+(a+16)+"px)",c={x:o,y:a},h(o,a)},f.ontouchend=function(e){e.target==f&&(e.preventDefault(),null!==l&&(f.style.transition=".1s",f.style.transform="translate(16px, 16px)",l=null,c={x:0,y:0},h(0,0)))},u.appendChild(f);var d=document.createElement("div");d.id="game_mobile_jump",d.classList.add("game_mobile"),d.ontouchstart=function(){e.inputs.state.jump=!0},d.ontouchend=function(){e.inputs.state.jump=!1},d.ontouchcancel=function(){e.inputs.state.jump=!1},document.body.appendChild(d);var p=document.createElement("div");p.id="game_mobile_topbuttons",p.classList.add("game_mobile"),document.body.appendChild(p);var m=document.createElement("div");m.id="game_mobile_chat",m.innerHTML="",m.ontouchstart=function(t){t.preventDefault(),e.inputs.down.emit("chat")},p.appendChild(m);var y=document.createElement("div");y.id="game_mobile_menu",y.ontouchstart=function(t){t.preventDefault(),e.inputs.down.emit("menu")},p.appendChild(y),function(e){const t=document.getElementsByClassName("game_mobile");for(let n=0;n<t.length;n++)e&&"game_mobile_topbuttons"==t.item(n).id||(t.item(n).style.display="none")}(!1)}function o(e){const t=document.getElementsByClassName("game_mobile");for(let n=0;n<t.length;n++)e&&"game_mobile_topbuttons"==t.item(n).id||(t.item(n).style.display="block")}},function(e,t,n){e.exports=n(506)},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return _}));var r=n(31),i=n(17),o=n(103),a=n(111),s=n(233),u=n(46),l=n(39),c=n(4),f=n(122),h=n(166),d=n(149),p=n(40),m=n(141);n(20),n(93),n(230);let y=null;function v(){null!=y&&y.dispose(),y=null}var g=n(67);const b=n(565);function w(e){const t=e.playerEntity,n=e.rendering.getScene(),g=Object(c.d)(1);function w(){let t=n.createPickingRay(window.innerWidth/2,window.innerHeight/2,r.e.Identity(),e.rendering.getScene().activeCameras[0]);const i=n.pickWithRay(t,e=>e.name.startsWith("hitbox-"),!0);return i.pickedMesh?[i.pickedMesh.name.substring(7),i.distance]:null}e.container.canvas.requestPointerLock(),e.container.canvas.addEventListener("click",()=>{i.q.ingame&&(a.b||m.b||u.d.isVisible||f.b.isVisible||(e.container.canvas.requestPointerLock(),u.d.isVisible=!1,u.d.text=""))}),e.blockTargetIdCheck=function(e){return null!=o.a[e]&&0!=e&&null!=o.b[o.a[e]]&&1!=o.b[o.a[e]].options.fluid},e.inputs.down.on("fire",(async function(){if(!i.q.ingame||!k(e))return;const t=w();if(t)return Object(l.f)("ActionClickEntity",{type:"left",uuid:t[0],distance:t[1]}),void Object(l.f)("ActionClick",{type:"left",x:0,y:0,z:0,onBlock:!1});if(e.targetedBlock){const t=e.targetedBlock.position;return Object(l.f)("ActionClick",{type:"left",x:t[0],y:t[1],z:t[2],onBlock:!0}),void Object(l.f)("ActionBlockBreak",{x:t[0],y:t[1],z:t[2],finished:!0})}Object(l.f)("ActionClick",{type:"left",x:0,y:0,z:0,onBlock:!1})})),e.inputs.up.on("fire",(function(){i.q.ingame&&k(e)})),e.inputs.down.on("alt-fire",(function(){if(!i.q.ingame||!k(e))return;const t=w();if(t)return Object(l.f)("ActionClickEntity",{type:"right",uuid:t[0],distance:t[1]}),void Object(l.f)("ActionClick",{type:"right",x:0,y:0,z:0,onBlock:!1});if(null!=e.targetedBlock){const t=e.targetedBlock.adjacent,n=e.targetedBlock.position;return Object(l.f)("ActionClick",{type:"right",x:n[0],y:n[1],z:n[2],onBlock:!0}),void(0==e.ents.isTerrainBlocked(t[0],t[1],t[2])&&Object(l.f)("ActionBlockPlace",{x:t[0],y:t[1],z:t[2],x2:n[0],y2:n[1],z2:n[2]}))}Object(l.f)("ActionClick",{type:"right",x:0,y:0,z:0,onBlock:!1})})),e.inputs.down.on("mid-fire",(function(){if(i.q.ingame&&k(e)&&e.targetedBlock&&0!=e.targetedBlock.blockID){const n=function(n,r){const i=e.ents.getState(t,"inventory"),o=Object.entries(i.items);for(let e=0;e<o.length;e++)if(null!=o[e]&&null!=o[e][1]&&o[e][1].id==n&&o[e][1].count>=r)return parseInt(o[e][0]);return-1}(o.b[o.a[e.targetedBlock.blockID]].id,1),r=e.ents.getState(t,"inventory").selected;-1!=n&&n<9?(Object(l.f)("ActionInventoryClick",{slot:n,inventory:p.ActionInventoryClick.TypeInv.MAIN,type:p.ActionInventoryClick.Type.SELECT}),e.ents.getState(t,"inventory").selected=n):-1!=n&&Object(l.f)("ActionInventoryPick",{slot:n,slot2:r,block:e.targetedBlock.blockID})}})),e.inputs.down.on("thirdprsn",(function(){i.q.ingame&&(document.pointerLockElement,e.container.canvas)})),e.inputs.down.on("inventory",(function(){i.q.ingame&&(u.d.isVisible||f.b.isVisible||(a.b?(Object(a.a)(),e.container.canvas.requestPointerLock(),Object(l.f)("ActionInventoryClose",{inventory:p.ActionInventoryClose.Type.MAIN})):m.b?(Object(m.a)(),e.container.canvas.requestPointerLock(),Object(l.f)("ActionInventoryClose",{inventory:p.ActionInventoryClose.Type.CRAFTING})):y?(v(),e.container.canvas.requestPointerLock(),Object(l.f)("ActionInventoryClose",{inventory:p.ActionInventoryClose.Type.CHEST})):(Object(l.f)("ActionInventoryOpen",{inventory:p.ActionInventoryClose.Type.MAIN}),Object(a.c)(e,l.e),document.exitPointerLock())))})),e.inputs.down.on("chat",(function(){i.q.ingame&&(a.b||u.d.isVisible||f.b.isVisible||(u.d.isVisible=!0,Object(u.b)(!0),document.exitPointerLock(),g.moveFocusToControl(u.d),u.d.text=""))})),e.inputs.down.on("cmd",(function(){i.q.ingame&&(a.b||u.d.isVisible||f.b.isVisible||(u.d.isVisible=!0,Object(u.b)(!0),document.exitPointerLock(),g.moveFocusToControl(u.d),u.d.text="/"))})),e.inputs.down.on("menu",t=>{if(i.q.ingame)return u.d.isVisible?(u.d.isVisible=!1,u.d.text="",void Object(u.b)(!1)):a.b?(Object(a.a)(),void Object(l.f)("ActionInventoryClose",{inventory:p.ActionInventoryClose.Type.MAIN})):m.b?(Object(m.a)(),void Object(l.f)("ActionInventoryClose",{inventory:p.ActionInventoryClose.Type.CRAFTING})):y?(v(),e.container.canvas.requestPointerLock(),void Object(l.f)("ActionInventoryClose",{inventory:p.ActionInventoryClose.Type.CHEST})):f.b.isVisible?void(f.b.isVisible=!1):(document.exitPointerLock(),void(f.b.isVisible=!0))}),e.inputs.down.on("chatenter",(function(){i.q.ingame&&(u.d.isVisible=!1,Object(l.f)("ActionMessage",{message:u.d.text}),u.d.text="",Object(u.b)(!1))})),e.inputs.down.on("tab",(function(){null==u.d||u.d.isVisible||(h.c.isVisible=!0)})),e.inputs.up.on("tab",(function(){null==u.d||u.d.isVisible||(h.c.isVisible=!1)})),e.inputs.down.on("zoom",(function(){null!=u.d&&!u.d.isVisible&&k(e)&&(n.cameras[0].fov=.4)})),e.inputs.up.on("zoom",(function(){null!=u.d&&!u.d.isVisible&&k(e)&&(n.cameras[0].fov=i.h.fov*Math.PI/180)})),e.inputs.up.on("screenshot",(function(){null==u.d||u.d.isVisible||document.pointerLockElement==e.container.canvas&&b(e.container.canvas,{filename:"VoxeCraft2-"+Date.now()+".png"})}));let _=!1;e.inputs.up.on("hide",(function(){null!=u.d&&u.d.isVisible||!k(e)||(_=!_,s.b.isVisible=!_,d.a.isVisible=!_,d.b.isVisible=!_)})),e.on("tick",(async function(){if(!i.q.ingame||!k(e))return;const n=e.inputs.state.scrolly;if(0!==n){let r=e.ents.getState(t,"inventory").selected;r+=n>0?1:-1,r>=i.h.hotbarsize?r=0:r<0&&(r=8),Object(l.f)("ActionInventoryClick",{slot:r,type:p.ActionInventoryClick.Type.SELECT,inventory:p.ActionInventoryClick.TypeInv.MAIN}),e.ents.getState(t,"inventory").selected=r}if(e.inputs.state.jump){const n=e.ents.getPosition(t),r=o.b[o.a[e.getBlock(Math.floor(n[0]),Math.floor(n[1]),Math.floor(n[2]))]];null!=r&&1==r.options.fluid&&e.ents.getPhysicsBody(t).applyImpulse([0,1,0])}})),e.inputs.bind("numberkey","1","2","3","4","5","6","7","8","9"),e.inputs.down.on("numberkey",n=>{if(i.q.ingame&&document.pointerLockElement==e.container.canvas){const r=parseInt(n.key);let i=e.ents.getState(t,"inventory").selected;i=r-1,Object(l.f)("ActionInventoryClick",{slot:i,type:p.ActionInventoryClick.Type.SELECT,inventory:p.ActionInventoryClick.TypeInv.MAIN}),e.ents.getState(t,"inventory").selected=i}})}function _(e,t){for(const n in t)e.inputs.unbind(n);for(const n in t)e.inputs.bind(n,t[n])}function k(e){return e.ignorePointerLock||e.container.hasPointerLock||!e.container.supportsPointerLock||e._dragOutsideLock&&g.isMobile}},,,,,,,,,,,,,,,function(e,t,n){e.exports=i;var r=n(77);function i(e,t){if(!(this instanceof i))return new i(e,t);var n=r.create();r.add(n,e,t),this.base=r.min(r.create(),e,n),this.vec=r.clone(t),this.max=r.max(r.create(),e,n),this.mag=r.length(this.vec)}var o=i.prototype;o.width=function(){return this.vec[0]},o.height=function(){return this.vec[1]},o.depth=function(){return this.vec[2]},o.x0=function(){return this.base[0]},o.y0=function(){return this.base[1]},o.z0=function(){return this.base[2]},o.x1=function(){return this.max[0]},o.y1=function(){return this.max[1]},o.z1=function(){return this.max[2]},o.translate=function(e){return r.add(this.max,this.max,e),r.add(this.base,this.base,e),this},o.setPosition=function(e){return r.add(this.max,e,this.vec),r.copy(this.base,e),this},o.expand=function(e){var t=r.create(),n=r.create();return r.max(t,e.max,this.max),r.min(n,e.base,this.base),r.subtract(t,t,n),new i(n,t)},o.intersects=function(e){return!(e.base[0]>this.max[0])&&(!(e.base[1]>this.max[1])&&(!(e.base[2]>this.max[2])&&(!(e.max[0]<this.base[0])&&(!(e.max[1]<this.base[1])&&!(e.max[2]<this.base[2])))))},o.touches=function(e){var t=this.union(e);return null!==t&&(0==t.width()||0==t.height()||0==t.depth())},o.union=function(e){if(!this.intersects(e))return null;var t=Math.max(e.base[0],this.base[0]),n=Math.max(e.base[1],this.base[1]),r=Math.max(e.base[2],this.base[2]);return new i([t,n,r],[Math.min(e.max[0],this.max[0])-t,Math.min(e.max[1],this.max[1])-n,Math.min(e.max[2],this.max[2])-r])}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(396),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(53))},function(e){e.exports=JSON.parse('{"protocolVersion":3,"protocolVersionRevision":1,"proxyVersion":0,"proxyVersionRevision":3}')},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(17),i=n(39),o=n(139),a=n(297),s=n(67),u=n(105);function l(e,t,n){const l=new o.a("main",[{text:"Settings"}]),h=Object(r.j)(),d=l.createInput("nickname","Nickname",(null==h?void 0:h.username)||r.h.nickname,"Write your nickname","Enter your nickname");if(null!=h&&(d.input.addKey=!1,d.input.onKeyboardEventProcessedObservable.add(e=>{d.input.text=h.username})),l.createSlider("scale",e=>"GUI scale: "+e,r.h.scale,2,5,1),l.createSlider("fov",e=>"FOV: "+e,r.h.fov,20,120,1),l.createSlider("viewDistance",e=>"View Distance: "+e,r.h.viewDistance,2,16,1),l.createSelectable("showFPS",e=>"FPS Counter: "+c(e),r.h.showFPS?1:0,[!1,!0]),l.createSelectable("debugInfo",e=>"Debug information: "+c(e),r.h.debugInfo?1:0,[!1,!0]),l.createSettingButton("Back",()=>{const n=l.settings;Object(r.w)({nickname:n.nickname,scale:n.scale,viewDistance:n.viewDistance,fov:n.fov,debugInfo:1==n.debugInfo,showFPS:1==n.showFPS});const o=e.ents.getPosition(e.playerEntity);e.world.chunkAddDistance=[n.viewDistance,n.viewDistance],e.world.chunkRemoveDistance=[n.viewDistance+.5,n.viewDistance+.5],Object(u.a)(e,Math.floor(o[0]/32),Math.floor(o[1]/32),Math.floor(o[2]/32)),Object(i.c)()&&Object(i.f)("SingleplayerViewDistance",{value:n.viewDistance}),r.q.ingame&&(e.rendering.getScene().cameras[0].fov=n.fov*Math.PI/180),l.main.dispose(),t("main")}),l.createItem("account","Account settings...",()=>{t("login")}),l.createItem("controls","Controls...",()=>{l.main.isVisible=!1;const t=new o.a("main",[{text:"Controls..."}]);if(t.createSlider("mouse",e=>"Mouse sensitivity: "+e,r.h.mouse,1,80,1),t.createSelectable("gamepad",e=>"Gamepad support: "+c(e),r.h.gamepad?1:0,[!1,!0]),!s.isMobile){t.createLabel("keybinds","Keybinds");t.createItem("reset-keys","Restore default keybinds").item.onPointerClickObservable.add(()=>{for(const e in r.d.controls)t.setValue("key-"+e,r.d.controls[e])});for(const e in r.h.controls)["muteMusic","chatenter","thirdprsn","menu"].includes(e)||t.createKeybind("key-"+e,t=>`${f(e)}: [${null==t?"Press Key":t}]`,r.h.controls[e])}n.addControl(t.main),t.createSettingButton("Back",()=>{const n={...r.h.controls};for(const e in t.settings)e.startsWith("key-")&&(n[e.substring(4)]=t.settings[e]);Object(r.w)({mouse:t.settings.mouse,gamepad:1==t.settings.gamepad,controls:n}),Object(a.a)(e,n),e.camera.sensitivityX=t.settings.mouse,e.camera.sensitivityY=t.settings.mouse,t.main.dispose(),l.main.isVisible=!0})}),r.h.debugSettings.makeSettingsVisible){l.createItem("debug","Debug [☣]").item.onPointerClickObservable.add(()=>{l.main.isVisible=!1;const e={},t=new o.a("debug",[{text:"Debug [☣]"}]);for(const n in r.h.debugSettings)switch(e[n]=typeof r.h.debugSettings[n],e[n]){case"boolean":t.createSelectable(n,e=>`${n}: ${c(e)}`,r.h.debugSettings[n]?1:0,[!1,!0]);break;default:console.log(`Can't create field for ${n} (${e[n]})`)}t.createSettingButton("Back",()=>{const n={...r.h.debugSettings};for(const r in t.settings)switch(e[r]){case"boolean":n[r]=1==t.settings[r]}Object(r.w)({debugSettings:n}),t.main.dispose(),l.main.isVisible=!0}),n.addControl(t.main)})}return l.main}function c(e){return 1==e?"Enabled":"Disabled"}function f(e){switch(e){case"forward":return"Move forward";case"left":return"Move left";case"right":return"Move right";case"backward":return"Move backward";case"fire":return"Break block";case"alt-fire":return"Place block";case"mid-fire":return"Pick block";case"jump":return"Jump";case"inventory":return"Inventory";case"chat":return"Open chat";case"cmd":return"Open chat (with typed /)";case"tab":return"Open player list";case"screenshot":return"Make screenshot";case"hide":return"Hide UI";case"zoom":return"Zoom in";default:return e}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),i=n(20),o=n(80),a=n(55),s=n(17);function u(e){const t=new i.g;t.thickness=0,t.horizontalAlignment=2,t.zIndex=10,window.innerHeight>230*r.e?t.height=230*r.e+"px":t.height="100%",t.width=310*r.e+"px",t.background=s.e.menuColor;const n=new i.d("hotbar","./textures/mainlogo.png");n.width=105*r.e+"px",n.height=32*r.e+"px",n.verticalAlignment=0,n.horizontalAlignment=2,n.top="5px",t.addControl(n);const u=new o.a;u.fontFamily="Lato",u.fontSize=8*r.e,u.textVerticalAlignment=0,u.top=36*r.e+"px",u.color="white",u.text=s.a,u.onPointerDownObservable.add(e=>{u.getTextAreas.forEach(t=>{t.x1<=e.x&&t.x2>=e.x&&t.y1>=e.y&&t.y2<=e.y&&null!=t.ref.url&&window.open(t.ref.url,"_blank")})}),t.addControl(u);const l=Object(a.c)();l.item.verticalAlignment=1,l.text.text=[{text:"Back",color:"white",font:"Lato"}],l.item.onPointerClickObservable.add(()=>{t.dispose(),e("main")}),t.addControl(l.item);const c=e=>{window.innerHeight>230*r.e?t.height=230*r.e+"px":t.height="100%",t.width=310*r.e+"px",n.width=105*r.e+"px",n.height=32*r.e+"px",u.top=36*r.e+"px",u.fontSize=8*r.e,l.item.width=100*r.e+"px",l.item.height=18*r.e+"px",l.text.fontSize=10*r.e};return r.b.on("scale-change",c),t.onDisposeObservable.add(()=>{r.b.off("scale-change",c)}),t}},,function(e,t){e.exports=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},function(e,t,n){e.exports=function(e,t){var n=r(e[0],e[1],e[2]),a=r(t[0],t[1],t[2]);i(n,n),i(a,a);var s=o(n,a);return s>1?0:Math.acos(s)};var r=n(237),i=n(238),o=n(239)},function(e,t){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},function(e,t){e.exports=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}},function(e,t,n){e.exports=function(e,t){var n=e[0],i=e[1],o=e[2],a=t[0],s=t[1],u=t[2];return Math.abs(n-a)<=r*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=r*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=r*Math.max(1,Math.abs(o),Math.abs(u))};var r=n(235)},function(e,t){e.exports=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}},function(e,t){e.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}},function(e,t,n){e.exports=n(240)},function(e,t,n){e.exports=n(241)},function(e,t,n){e.exports=n(242)},function(e,t){e.exports=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}},function(e,t){e.exports=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}},function(e,t){e.exports=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}},function(e,t){e.exports=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}},function(e,t){e.exports=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}},function(e,t){e.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}},function(e,t){e.exports=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}},function(e,t,n){e.exports=n(243)},function(e,t,n){e.exports=n(244)},function(e,t,n){e.exports=n(245)},function(e,t,n){e.exports=n(246)},function(e,t){e.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}},function(e,t){e.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}},function(e,t){e.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],u=n[2];return e[0]=i*u-o*s,e[1]=o*a-r*u,e[2]=r*s-i*a,e}},function(e,t){e.exports=function(e,t,n,r){var i=t[0],o=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e}},function(e,t){e.exports=function(e,t){t=t||1;var n=2*Math.random()*Math.PI,r=2*Math.random()-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}},function(e,t){e.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}},function(e,t){e.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}},function(e,t){e.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],u=n[2],l=n[3],c=l*r+s*o-u*i,f=l*i+u*r-a*o,h=l*o+a*i-s*r,d=-a*r-s*i-u*o;return e[0]=c*l+d*-a+f*-u-h*-s,e[1]=f*l+d*-s+h*-a-c*-u,e[2]=h*l+d*-u+c*-s-f*-a,e}},function(e,t){e.exports=function(e,t,n,r){var i=n[1],o=n[2],a=t[1]-i,s=t[2]-o,u=Math.sin(r),l=Math.cos(r);return e[0]=t[0],e[1]=i+a*l-s*u,e[2]=o+a*u+s*l,e}},function(e,t){e.exports=function(e,t,n,r){var i=n[0],o=n[2],a=t[0]-i,s=t[2]-o,u=Math.sin(r),l=Math.cos(r);return e[0]=i+s*u+a*l,e[1]=t[1],e[2]=o+s*l-a*u,e}},function(e,t){e.exports=function(e,t,n,r){var i=n[0],o=n[1],a=t[0]-i,s=t[1]-o,u=Math.sin(r),l=Math.cos(r);return e[0]=i+a*l-s*u,e[1]=o+a*u+s*l,e[2]=t[2],e}},function(e,t,n){e.exports=function(e,t,n,i,o,a){var s,u;t||(t=3);n||(n=0);u=i?Math.min(i*t+n,e.length):e.length;for(s=n;s<u;s+=t)r[0]=e[s],r[1]=e[s+1],r[2]=e[s+2],o(r,r,a),e[s]=r[0],e[s+1]=r[1],e[s+2]=r[2];return e};var r=n(236)()},,,,,,,,,,function(e,t,n){"use strict";(function(e){var r=n(391),i=n(492),o=n(85).Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var a="undefined"!=typeof Uint8ClampedArray,s="undefined"!=typeof BigUint64Array,u="undefined"!=typeof BigInt64Array,l=e.__TYPEDARRAY_POOL;l.UINT8C||(l.UINT8C=i([32,0])),l.BIGUINT64||(l.BIGUINT64=i([32,0])),l.BIGINT64||(l.BIGINT64=i([32,0])),l.BUFFER||(l.BUFFER=i([32,0]));var c=l.DATA,f=l.BUFFER;function h(e){if(e){var t=e.length||e.byteLength,n=r.log2(t);c[n].push(e)}}function d(e){e=r.nextPow2(e);var t=r.log2(e),n=c[t];return n.length>0?n.pop():new ArrayBuffer(e)}function p(e){return new Uint8Array(d(e),0,e)}function m(e){return new Uint16Array(d(2*e),0,e)}function y(e){return new Uint32Array(d(4*e),0,e)}function v(e){return new Int8Array(d(e),0,e)}function g(e){return new Int16Array(d(2*e),0,e)}function b(e){return new Int32Array(d(4*e),0,e)}function w(e){return new Float32Array(d(4*e),0,e)}function _(e){return new Float64Array(d(8*e),0,e)}function k(e){return a?new Uint8ClampedArray(d(e),0,e):p(e)}function x(e){return s?new BigUint64Array(d(8*e),0,e):null}function O(e){return u?new BigInt64Array(d(8*e),0,e):null}function P(e){return new DataView(d(e),0,e)}function S(e){e=r.nextPow2(e);var t=r.log2(e),n=f[t];return n.length>0?n.pop():new o(e)}t.free=function(e){if(o.isBuffer(e))f[r.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|r.log2(t);c[n].push(e)}},t.freeUint8=t.freeUint16=t.freeUint32=t.freeBigUint64=t.freeInt8=t.freeInt16=t.freeInt32=t.freeBigInt64=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=function(e){h(e.buffer)},t.freeArrayBuffer=h,t.freeBuffer=function(e){f[r.log2(e.length)].push(e)},t.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return d(e);switch(t){case"uint8":return p(e);case"uint16":return m(e);case"uint32":return y(e);case"int8":return v(e);case"int16":return g(e);case"int32":return b(e);case"float":case"float32":return w(e);case"double":case"float64":return _(e);case"uint8_clamped":return k(e);case"bigint64":return O(e);case"biguint64":return x(e);case"buffer":return S(e);case"data":case"dataview":return P(e);default:return null}return null},t.mallocArrayBuffer=d,t.mallocUint8=p,t.mallocUint16=m,t.mallocUint32=y,t.mallocInt8=v,t.mallocInt16=g,t.mallocInt32=b,t.mallocFloat32=t.mallocFloat=w,t.mallocFloat64=t.mallocDouble=_,t.mallocUint8Clamped=k,t.mallocBigUint64=x,t.mallocBigInt64=O,t.mallocDataView=P,t.mallocBuffer=S,t.clearCache=function(){for(var e=0;e<32;++e)l.UINT8[e].length=0,l.UINT16[e].length=0,l.UINT32[e].length=0,l.INT8[e].length=0,l.INT16[e].length=0,l.INT32[e].length=0,l.FLOAT[e].length=0,l.DOUBLE[e].length=0,l.BIGUINT64[e].length=0,l.BIGINT64[e].length=0,l.UINT8C[e].length=0,c[e].length=0,f[e].length=0}}).call(this,n(53))},function(e,t,n){"use strict";function r(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=r,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var i=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(i),t.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=l(e),a=r[0],s=r[1],u=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),c=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[c++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(c(e,a,a+16383>s?s:a+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=l}return(d?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+d]=255&a,d+=p,a/=256,l-=8);e[n+d-p]|=128*m}},function(e,t,n){e.exports=function(e){function t(e){let n;function o(...e){if(!o.enabled)return;const r=o,i=Number(new Date),a=i-(n||i);r.diff=a,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];n=o.call(r,t),e.splice(s,1),s--}return n}),t.formatArgs.call(r,e);(r.log||t.log).apply(r,e)}return o.namespace=e,o.enabled=t.enabled(e),o.useColors=t.useColors(),o.color=t.selectColor(e),o.destroy=r,o.extend=i,"function"==typeof t.init&&t.init(o),t.instances.push(o),o}function r(){const e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}function i(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){const e=t.instances[n];e.enabled=t.enabled(e.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(395),Object.keys(e).forEach(n=>{t[n]=e[n]}),t.instances=[],t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},function(e,t){var n=1e3,r=6e4,i=60*r,o=24*i;function a(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var s=typeof e;if("string"===s&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===s&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=o)return a(e,t,o,"day");if(t>=i)return a(e,t,i,"hour");if(t>=r)return a(e,t,r,"minute");if(t>=n)return a(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=r)return Math.round(e/r)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,u=1,l={},c=!1,f=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){o.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return l[u]=i,r(u),u++},h.clearImmediate=d}function d(e){delete l[e]}function p(e){if(c)setTimeout(p,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{d(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(53),n(56))},function(e,t,n){"use strict";var r=n(513),i=n(398),o=n(209),a=n(436),s=n(515);function u(e,t,n){var r=this._refs[n];if("string"==typeof r){if(!this._refs[r])return u.call(this,e,t,r);r=this._refs[r]}if((r=r||this._schemas[n])instanceof a)return p(r.schema,this._opts.inlineRefs)?r.schema:r.validate||this._compile(r);var i,o,s,c=l.call(this,t,n);return c&&(i=c.schema,t=c.root,s=c.baseId),i instanceof a?o=i.validate||e.call(this,i.schema,t,void 0,s):void 0!==i&&(o=p(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,s)),o}function l(e,t){var n=r.parse(t),i=y(n),o=m(this._getId(e.schema));if(0===Object.keys(e.schema).length||i!==o){var s=g(i),u=this._refs[s];if("string"==typeof u)return c.call(this,e,u,n);if(u instanceof a)u.validate||this._compile(u),e=u;else{if(!((u=this._schemas[s])instanceof a))return;if(u.validate||this._compile(u),s==g(t))return{schema:u,root:e,baseId:o};e=u}if(!e.schema)return;o=m(this._getId(e.schema))}return h.call(this,n,o,e.schema,e)}function c(e,t,n){var r=l.call(this,e,t);if(r){var i=r.schema,o=r.baseId;e=r.root;var a=this._getId(i);return a&&(o=b(o,a)),h.call(this,n,o,i,e)}}e.exports=u,u.normalizeId=g,u.fullPath=m,u.url=b,u.ids=function(e){var t=g(this._getId(e)),n={"":t},a={"":m(t,!1)},u={},l=this;return s(e,{allKeys:!0},(function(e,t,s,c,f,h,d){if(""!==t){var p=l._getId(e),m=n[c],y=a[c]+"/"+f;if(void 0!==d&&(y+="/"+("number"==typeof d?d:o.escapeFragment(d))),"string"==typeof p){p=m=g(m?r.resolve(m,p):p);var v=l._refs[p];if("string"==typeof v&&(v=l._refs[v]),v&&v.schema){if(!i(e,v.schema))throw new Error('id "'+p+'" resolves to more than one schema')}else if(p!=g(y))if("#"==p[0]){if(u[p]&&!i(e,u[p]))throw new Error('id "'+p+'" resolves to more than one schema');u[p]=e}else l._refs[p]=y}n[t]=m,a[t]=y}})),u},u.inlineRef=p,u.schema=l;var f=o.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function h(e,t,n,r){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var i=e.fragment.split("/"),a=1;a<i.length;a++){var s=i[a];if(s){if(void 0===(n=n[s=o.unescapeFragment(s)]))break;var u;if(!f[s]&&((u=this._getId(n))&&(t=b(t,u)),n.$ref)){var c=b(t,n.$ref),h=l.call(this,r,c);h&&(n=h.schema,r=h.root,t=h.baseId)}}}return void 0!==n&&n!==r.schema?{schema:n,root:r,baseId:t}:void 0}}var d=o.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function p(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var n;if(Array.isArray(t)){for(var r=0;r<t.length;r++)if("object"==typeof(n=t[r])&&!e(n))return!1}else for(var i in t){if("$ref"==i)return!1;if("object"==typeof(n=t[i])&&!e(n))return!1}return!0}(e):t?function e(t){var n,r=0;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if("object"==typeof(n=t[i])&&(r+=e(n)),r==1/0)return 1/0}else for(var o in t){if("$ref"==o)return 1/0;if(d[o])r++;else if("object"==typeof(n=t[o])&&(r+=e(n)+1),r==1/0)return 1/0}return r}(e)<=t:void 0)}function m(e,t){return!1!==t&&(e=g(e)),y(r.parse(e))}function y(e){return r.serialize(e).split("#")[0]+"#"}var v=/#\/?$/;function g(e){return e?e.replace(v,""):""}function b(e,t){return t=g(t),r.resolve(e,t)}},function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n}},function(e,t,n){"use strict";var r=n(397);function i(e,t,n){this.message=n||i.message(e,t),this.missingRef=r.url(e,t),this.missingSchema=r.normalizeId(r.fullPath(this.missingRef))}function o(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:o((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:o(i)},i.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=a(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))i.call(n,c)&&(u[c]=n[c]);if(r){s=r(n);for(var f=0;f<s.length;f++)o.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e){e.exports=JSON.parse('{"array":{"title":"array","type":"array","items":[{"enum":["array"]},{"oneOf":[{"type":"object","properties":{"type":{"$ref":"dataType"},"countType":{"$ref":"dataType"}},"additionalProperties":false,"required":["type","countType"]},{"type":"object","properties":{"type":{"$ref":"dataType"},"count":{"$ref":"definitions#/definitions/dataTypeArgsCount"}},"additionalProperties":false,"required":["type","count"]}]}],"additionalItems":false},"count":{"title":"count","type":"array","items":[{"enum":["count"]},{"type":"object","properties":{"countFor":{"$ref":"definitions#/definitions/contextualizedFieldName"},"type":{"$ref":"dataType"}},"required":["countFor","type"],"additionalProperties":false}],"additionalItems":false},"container":{"title":"container","type":"array","items":[{"enum":["container"]},{"type":"array","items":{"type":"object","properties":{"anon":{"type":"boolean"},"name":{"$ref":"definitions#/definitions/fieldName"},"type":{"$ref":"dataType"}},"oneOf":[{"required":["anon"]},{"required":["name"]}],"required":["type"],"additionalProperties":false},"additionalItems":false}],"additionalItems":false}}')},function(e,t,n){(function(t){const r=n(553).Transform;e.exports={Serializer:class extends r{constructor(e,n){super({writableObjectMode:!0}),this.proto=e,this.mainType=n,this.queue=t.alloc(0)}createPacketBuffer(e){return this.proto.createPacketBuffer(this.mainType,e)}_transform(e,t,n){let r;try{r=this.createPacketBuffer(e)}catch(e){return n(e)}return this.push(r),n()}},Parser:class extends r{constructor(e,n){super({readableObjectMode:!0}),this.proto=e,this.mainType=n,this.queue=t.alloc(0)}parsePacketBuffer(e){return this.proto.parsePacketBuffer(this.mainType,e)}_transform(e,n,r){for(this.queue=t.concat([this.queue,e]);;){let e;try{e=this.parsePacketBuffer(this.queue)}catch(e){return e.partialReadError?r():(e.buffer=this.queue,this.queue=t.alloc(0),r(e))}this.push(e),this.queue=this.queue.slice(e.metadata.size)}}},FullPacketParser:class extends r{constructor(e,t,n=!1){super({readableObjectMode:!0}),this.proto=e,this.mainType=t,this.noErrorLogging=n}parsePacketBuffer(e){return this.proto.parsePacketBuffer(this.mainType,e)}_transform(e,t,n){let r;try{r=this.parsePacketBuffer(e),r.metadata.size===e.length||this.noErrorLogging||console.log("Chunk size is "+e.length+" but only "+r.metadata.size+" was read ; partial packet : "+JSON.stringify(r.data)+"; buffer :"+e.toString("hex"))}catch(e){return e.partialReadError?(this.noErrorLogging||console.log(e.stack),n()):n(e)}this.push(r),n()}}}}).call(this,n(85).Buffer)},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(53))},function(e,t,n){"use strict";var r=n(211).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var a=n.readable||!1!==n.readable&&t.readable,s=n.writable||!1!==n.writable&&t.writable,u=function(){t.writable||c()},l=t._writableState&&t._writableState.finished,c=function(){s=!1,l=!0,a||o.call(t)},f=t._readableState&&t._readableState.endEmitted,h=function(){a=!1,f=!0,s||o.call(t)},d=function(e){o.call(t,e)},p=function(){var e;return a&&!f?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):s&&!l?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},m=function(){t.req.on("finish",c)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?s&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",c),t.on("abort",p),t.req?m():t.on("request",m)),t.on("end",h),t.on("finish",c),!1!==n.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",c),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",c),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",c),t.removeListener("end",h),t.removeListener("error",d),t.removeListener("close",p)}}},,,,,,,,,,,,,,,function(e,t,n){"use strict";var r,i="undefined"!=typeof window?window.navigator.userAgent:"",o=/OS X/.test(i),a=/Opera/.test(i),s=!/like Gecko/.test(i)&&!a,u=e.exports={0:o?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:o?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num--\x3e",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:o&&s?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:a?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(r=58;r<65;++r)u[r]=String.fromCharCode(r);for(r=48;r<58;++r)u[r]=r-48+"";for(r=65;r<91;++r)u[r]=String.fromCharCode(r);for(r=96;r<106;++r)u[r]="<num-"+(r-96)+">";for(r=112;r<136;++r)u[r]="F"+(r-111)},function(e,t,n){"use strict";n.r(t),n.d(t,"updatePositionExtents",(function(){return i}));var r=n(77);function i(e){var t=e.width/2,n=e._localPosition,r=e._extents;r[0]=n[0]-t,r[1]=n[1],r[2]=n[2]-t,r[3]=n[0]+t,r[4]=n[1]+e.height,r[5]=n[2]+t}t.default=function(e){return{name:"position",order:60,state:{position:null,width:.8,height:.8,_localPosition:null,_renderPosition:null,_extents:null},onAdd:function(t,n){var o=[0,0,0];n.position&&r.copy(o,n.position),n.position=o,n._localPosition=r.create(),n._renderPosition=r.create(),n._extents=new Float32Array(6),e.globalToLocal(n.position,null,n._localPosition),r.copy(n._renderPosition,n._localPosition),i(n)},onRemove:null,system:function(t,n){for(var o=e.worldOriginOffset,a=0;a<n.length;a++){var s=n[a];r.add(s.position,s._localPosition,o),i(s)}}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"setPhysicsFromPosition",(function(){return o}));var r=n(77);t.default=function(e){return{name:"physics",order:40,state:{body:null},onAdd:function(t,n){n.body=e.physics.addBody(),o(n,e.ents.getPositionData(n.__id))},onRemove:function(t,n){if(e.ents.hasPosition(n.__id)){var r=e.ents.getPositionData(n.__id);a(n,r),s(n,r,0,!1)}e.physics.removeBody(n.body)},system:function(t,n){for(var r=0;r<n.length;r++){var i=n[r];a(i,e.ents.getPositionData(i.__id))}},renderSystem:function(t,n){for(var r=e.positionInCurrentTick,i=1e3/e.container._shell.tickRate,o=(r*i-i)/1e3,a=0;a<n.length;a++){var u=n[a],l=u.__id;s(u,e.ents.getPositionData(l),o,e.ents.cameraSmoothed(l))}}}};var i=r.create();function o(e,t){var n=e.body.aabb,i=t._extents;r.copy(n.base,i),r.set(n.vec,t.width,t.height,t.width),r.add(n.max,n.base,n.vec)}function a(e,t){var n=e.body.aabb.base,i=t.width/2;r.set(t._localPosition,n[0]+i,n[1],n[2]+i)}function s(e,t,n,o){var a=e.body.velocity;r.scaleAndAdd(i,t._localPosition,a,n),o&&r.lerp(i,t._renderPosition,i,.3),r.copy(t._renderPosition,i)}},function(e,t,n){(function(t,n,r){e.exports=function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){return i(t[a][1][e]||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var o=!1,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,i,o){(function(t){!function(e){"object"==typeof o&&void 0!==i?i.exports=e():("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).JSZip=e()}((function(){return function t(n,r,i){function o(s,u){if(!r[s]){if(!n[s]){var l="function"==typeof e&&e;if(!u&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[s]={exports:{}};n[s][0].call(f.exports,(function(e){return o(n[s][1][e]||e)}),f,f.exports,t,n,r,i)}return r[s].exports}for(var a="function"==typeof e&&e,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,i,o){(function(t){!function(e){"object"==typeof o&&void 0!==i?i.exports=e():("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).JSZip=e()}((function(){return function t(n,r,i){function o(s,u){if(!r[s]){if(!n[s]){var l="function"==typeof e&&e;if(!u&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[s]={exports:{}};n[s][0].call(f.exports,(function(e){return o(n[s][1][e]||e)}),f,f.exports,t,n,r,i)}return r[s].exports}for(var a="function"==typeof e&&e,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,i,o){(function(t){!function(e){"object"==typeof o&&void 0!==i?i.exports=e():("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).JSZip=e()}((function(){return function t(n,r,i){function o(s,u){if(!r[s]){if(!n[s]){var l="function"==typeof e&&e;if(!u&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[s]={exports:{}};n[s][0].call(f.exports,(function(e){return o(n[s][1][e]||e)}),f,f.exports,t,n,r,i)}return r[s].exports}for(var a="function"==typeof e&&e,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,i,o){(function(t){!function(e){"object"==typeof o&&void 0!==i?i.exports=e():("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).JSZip=e()}((function(){return function t(n,r,i){function o(s,u){if(!r[s]){if(!n[s]){var l="function"==typeof e&&e;if(!u&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[s]={exports:{}};n[s][0].call(f.exports,(function(e){return o(n[s][1][e]||e)}),f,f.exports,t,n,r,i)}return r[s].exports}for(var a="function"==typeof e&&e,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,i,o){(function(t){!function(e){"object"==typeof o&&void 0!==i?i.exports=e():("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).JSZip=e()}((function(){return function t(n,r,i){function o(s,u){if(!r[s]){if(!n[s]){var l="function"==typeof e&&e;if(!u&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[s]={exports:{}};n[s][0].call(f.exports,(function(e){return o(n[s][1][e]||e)}),f,f.exports,t,n,r,i)}return r[s].exports}for(var a="function"==typeof e&&e,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,a,s,u,l,c=[],f=0,h=e.length,d=h,p="string"!==r.getTypeOf(e);f<e.length;)d=h-f,i=p?(t=e[f++],n=f<h?e[f++]:0,f<h?e[f++]:0):(t=e.charCodeAt(f++),n=f<h?e.charCodeAt(f++):0,f<h?e.charCodeAt(f++):0),a=t>>2,s=(3&t)<<4|n>>4,u=1<d?(15&n)<<2|i>>6:64,l=2<d?63&i:64,c.push(o.charAt(a)+o.charAt(s)+o.charAt(u)+o.charAt(l));return c.join("")},n.decode=function(e){var t,n,r,a,s,u,l=0,c=0;if("data:"===e.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var f,h=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&h--,e.charAt(e.length-2)===o.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=i.uint8array?new Uint8Array(0|h):new Array(0|h);l<e.length;)t=o.indexOf(e.charAt(l++))<<2|(a=o.indexOf(e.charAt(l++)))>>4,n=(15&a)<<4|(s=o.indexOf(e.charAt(l++)))>>2,r=(3&s)<<6|(u=o.indexOf(e.charAt(l++))),f[c++]=t,64!==s&&(f[c++]=n),64!==u&&(f[c++]=r);return f}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),i=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");function s(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}s.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,n){return e.pipe(new o).pipe(new a("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(e){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n){var r=i,o=0+n;e^=-1;for(var a=0;a<o;a++)e=e>>>8^r[255&(e^t[a])];return-1^e}(0|t,e,e.length):function(e,t,n){var r=i,o=0+n;e^=-1;for(var a=0;a<o;a++)e=e>>>8^r[255&(e^t.charCodeAt(a))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),o=e("./utils"),a=e("./stream/GenericWorker"),s=r?"uint8array":"array";function u(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",o.inherits(u,a),u.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,e.data),!1)},u.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new u("Deflate",e)},n.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function i(e,t,n,i,a,c){var f,h,d=e.file,p=e.compression,m=c!==s.utf8encode,y=o.transformTo("string",c(d.name)),v=o.transformTo("string",s.utf8encode(d.name)),g=d.comment,b=o.transformTo("string",c(g)),w=o.transformTo("string",s.utf8encode(g)),_=v.length!==d.name.length,k=w.length!==g.length,x="",O="",P="",S=d.dir,E=d.date,j={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(j.crc32=e.crc32,j.compressedSize=e.compressedSize,j.uncompressedSize=e.uncompressedSize);var C=0;t&&(C|=8),m||!_&&!k||(C|=2048);var T,A=0,z=0;S&&(A|=16),"UNIX"===a?(z=798,A|=((T=d.unixPermissions)||(T=S?16893:33204),(65535&T)<<16)):(z=20,A|=63&(d.dosPermissions||0)),f=E.getUTCHours(),f<<=6,f|=E.getUTCMinutes(),f<<=5,f|=E.getUTCSeconds()/2,h=E.getUTCFullYear()-1980,h<<=4,h|=E.getUTCMonth()+1,h<<=5,h|=E.getUTCDate(),_&&(x+="up"+r((O=r(1,1)+r(u(y),4)+v).length,2)+O),k&&(x+="uc"+r((P=r(1,1)+r(u(b),4)+w).length,2)+P);var I="";return I+="\n\0",I+=r(C,2),I+=p.magic,I+=r(f,2),I+=r(h,2),I+=r(j.crc32,4),I+=r(j.compressedSize,4),I+=r(j.uncompressedSize,4),I+=r(y.length,2),I+=r(x.length,2),{fileRecord:l.LOCAL_FILE_HEADER+I+y+x,dirRecord:l.CENTRAL_FILE_HEADER+r(z,2)+I+r(b.length,2)+"\0\0\0\0"+r(A,4)+r(i,4)+y+x+b}}var o=e("../utils"),a=e("../stream/GenericWorker"),s=e("../utf8"),u=e("../crc32"),l=e("../signature");function c(e,t,n,r){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(c,a),c.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,a.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},c.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(e){this.accumulate=!1;var t,n=this.streamFiles&&!e.file.dir,o=i(e,n,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(o.dirRecord),n)this.push({data:(t=e,l.DATA_DESCRIPTOR+r(t.crc32,4)+r(t.compressedSize,4)+r(t.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:o.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n,i,a,s,u,c,f=this.bytesWritten-e,h=(n=this.dirRecords.length,i=f,a=e,s=this.zipComment,u=this.encodeFileName,c=o.transformTo("string",u(s)),l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(n,2)+r(n,2)+r(i,4)+r(a,4)+r(c.length,2)+c);this.push({data:h,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},c.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(e){var t=this._sources;if(!a.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},c.prototype.lock=function(){a.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var o=new i(t.streamFiles,n,t.platform,t.encodeFileName),a=0;try{e.forEach((function(e,n){a++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},u=n.dir,l=n.date;n._compressWorker(i,s).withStreamInfo("file",{name:e,dir:u,date:l,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=a}catch(e){o.error(e)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.5.0",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./external"),o=e("./utf8"),a=e("./zipEntries"),s=e("./stream/Crc32Probe"),u=e("./nodejsUtils");function l(e){return new i.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new s);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new a(t);return n.load(e),n})).then((function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var o=0;o<r.length;o++)n.push(l(r[o]));return i.Promise.all(n)})).then((function(e){for(var r=e.shift(),i=r.files,o=0;o<i.length;o++){var a=i[o];n.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders})}return r.zipComment.length&&(n.comment=r.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../stream/GenericWorker");function o(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(o,i),o.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),n&&n(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,r){"use strict";t.exports={isNode:void 0!==n,newBufferFrom:function(e,t){if(n.from&&n.from!==Uint8Array.from)return n.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new n(e,t)},allocBuffer:function(e){if(n.alloc)return n.alloc(e);var t=new n(e);return t.fill(0),t},isBuffer:function(e){return n.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function r(e,t,n){var r,o=a.getTypeOf(t),u=a.extend(n||{},l);u.date=u.date||new Date,null!==u.compression&&(u.compression=u.compression.toUpperCase()),"string"==typeof u.unixPermissions&&(u.unixPermissions=parseInt(u.unixPermissions,8)),u.unixPermissions&&16384&u.unixPermissions&&(u.dir=!0),u.dosPermissions&&16&u.dosPermissions&&(u.dir=!0),u.dir&&(e=i(e)),u.createFolders&&(r=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""}(e))&&m.call(this,r,!0);var h,y="string"===o&&!1===u.binary&&!1===u.base64;n&&void 0!==n.binary||(u.binary=!y),(t instanceof c&&0===t.uncompressedSize||u.dir||!t||0===t.length)&&(u.base64=!1,u.binary=!0,t="",u.compression="STORE",o="string"),h=t instanceof c||t instanceof s?t:d.isNode&&d.isStream(t)?new p(e,t):a.prepareContent(e,t,u.binary,u.optimizedBinaryString,u.base64);var v=new f(e,h,u);this.files[e]=v}function i(e){return"/"!==e.slice(-1)&&(e+="/"),e}var o=e("./utf8"),a=e("./utils"),s=e("./stream/GenericWorker"),u=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),f=e("./zipObject"),h=e("./generate"),d=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),m=function(e,t){return t=void 0!==t?t:l.createFolders,e=i(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function y(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)this.files.hasOwnProperty(t)&&(r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r))},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(y(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var o=this.files[this.root+e];return o&&!o.dir?o:null},folder:function(e){if(!e)return this;if(y(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=m.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=a.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");a.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=h.generateWorker(this,n,r)}catch(e){(t=new s("error")).error(e)}return new u(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===t&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../support"),o=e("./ArrayReader"),a=e("./StringReader"),s=e("./NodeBufferReader"),u=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new s(e):i.uint8array?new u(r.transformTo("uint8array",e)):new o(r.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../utils");function o(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(o,r),o.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,r),o.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(o,i),o.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,r){"use strict";var i=e("../utils"),o=e("./ConvertWorker"),a=e("./GenericWorker"),s=e("../base64"),u=e("../support"),l=e("../external"),c=null;if(u.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function f(e,t,n){var r=t;switch(t){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=t,this._mimeType=n,i.checkSupport(r),this._worker=e.pipe(new o(r)),e.lock()}catch(e){this._worker=new a("error"),this._worker.error(e)}}f.prototype={accumulate:function(e){return t=this,r=e,new l.Promise((function(e,o){var a=[],u=t._internalType,l=t._outputType,c=t._mimeType;t.on("data",(function(e,t){a.push(e),r&&r(t)})).on("error",(function(e){a=[],o(e)})).on("end",(function(){try{var t=function(e,t,n){switch(e){case"blob":return i.newBlob(i.transformTo("arraybuffer",t),n);case"base64":return s.encode(t);default:return i.transformTo(e,t)}}(l,function(e,t){var r,i=0,o=null,a=0;for(r=0;r<t.length;r++)a+=t[r].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(o=new Uint8Array(a),r=0;r<t.length;r++)o.set(t[r],i),i+=t[r].length;return o;case"nodebuffer":return n.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(u,a),c);e(t)}catch(t){o(t)}a=[]})).resume()}));var t,r},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){i.delay(t,arguments,n)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer=void 0!==n,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var i=new ArrayBuffer(0);try{r.blob=0===new Blob([i],{type:"application/zip"}).size}catch(e){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),r.blob=0===o.getBlob("application/zip").size}catch(e){r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch(e){r.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),i=e("./support"),o=e("./nodejsUtils"),a=e("./stream/GenericWorker"),s=new Array(256),u=0;u<256;u++)s[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function l(){a.call(this,"utf-8 decode"),this.leftOver=null}function c(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,n.utf8encode=function(e){return i.nodebuffer?o.newBufferFrom(e,"utf-8"):function(e){var t,n,r,o,a,s=e.length,u=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(u):new Array(u),o=a=0;a<u;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t}(e)},n.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,o,a=e.length,u=new Array(2*a);for(t=n=0;t<a;)if((i=e[t++])<128)u[n++]=i;else if(4<(o=s[i]))u[n++]=65533,t+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&t<a;)i=i<<6|63&e[t++],o--;1<o?u[n++]=65533:i<65536?u[n++]=i:(i-=65536,u[n++]=55296|i>>10&1023,u[n++]=56320|1023&i)}return u.length!==n&&(u.subarray?u=u.subarray(0,n):u.length=n),r.applyFromCharCode(u)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(l,a),l.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=t;(t=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),t.set(o,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var a=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}(t),u=t;a!==t.length&&(i.uint8array?(u=t.subarray(0,a),this.leftOver=t.subarray(a,t.length)):(u=t.slice(0,a),this.leftOver=t.slice(a,t.length))),this.push({data:n.utf8decode(u),meta:e.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=l,r.inherits(c,a),c.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),i=e("./base64"),o=e("./nodejsUtils"),a=e("set-immediate-shim"),s=e("./external");function u(e){return e}function l(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(n){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,n){var r=[],i=0,o=e.length;if(o<=n)return String.fromCharCode.apply(null,e);for(;i<o;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(e){return!1}}()}};function f(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=c.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=c.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return c.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return c.stringifyByChar(e)}function h(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=f;var d={};d.string={string:u,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return d.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,o.allocBuffer(e.length))}},d.array={string:f,array:u,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(e)}},d.arraybuffer={string:function(e){return f(new Uint8Array(e))},array:function(e){return h(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:u,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(new Uint8Array(e))}},d.uint8array={string:f,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:u,nodebuffer:function(e){return o.newBufferFrom(e)}},d.nodebuffer={string:f,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return d.nodebuffer.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:u},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return d[r][e](t)},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&o.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){a((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,o,a,u){return s.Promise.resolve(t).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var c,f=n.getTypeOf(t);return f?("arraybuffer"===f?t=n.transformTo("uint8array",t):"string"===f&&(u?t=i.decode(t):o&&!0!==a&&(t=l(c=t,r.uint8array?new Uint8Array(c.length):new Array(c.length)))),t):s.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),o=e("./signature"),a=e("./zipEntry"),s=(e("./utf8"),e("./support"));function u(e){this.files=[],this.loadOptions=e}u.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),o=e("./compressedObject"),a=e("./crc32"),s=e("./utf8"),u=e("./compressions"),l=e("./support");function c(e,t){this.options=e,this.loadOptions=t}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in u)if(u.hasOwnProperty(t)&&u[t].magic===e)return u[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var o=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),a=e("./utf8"),s=e("./compressedObject"),u=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var o=!this._dataBinary;o&&!r&&(t=t.pipe(new a.Utf8EncodeWorker)),!o&&r&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new u("error")).error(e)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof u?this._data:new o(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<l.length;f++)r.prototype[l[f]]=c;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,n,r){(function(e){"use strict";var t,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(c),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),t=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var u=new e.MessageChannel;u.port1.onmessage=c,t=function(){u.port2.postMessage(0)}}var l=[];function c(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}n.exports=function(e){1!==l.push(e)||r||t()}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],u=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==i&&d(this,e)}function c(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(e,t,n){r((function(){var r;try{r=t(n)}catch(r){return o.reject(e,r)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var a=p((function(){t(i,r)}));"error"===a.status&&r(a.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=l).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(i);return this.state!==u?f(n,this.state===s?e:t,this.outcome):this.queue.push(new c(n,e,t)),n},c.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){o.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=p(h,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)d(e,r);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},l.reject=function(e){var t=new this(i);return o.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,u=-1,l=new this(i);++u<n;)c(e[u],u);return l;function c(e,i){t.resolve(e).then((function(e){a[i]=e,++s!==n||r||(r=!0,o.resolve(l,a))}),(function(e){r||(r=!0,o.reject(l,e))}))}},l.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var r,a=-1,s=new this(i);++a<t;)r=e[a],this.resolve(r).then((function(e){n||(n=!0,o.resolve(s,e))}),(function(e){n||(n=!0,o.reject(s,e))}));return s}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),i=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/messages"),s=e("./zlib/zstream"),u=Object.prototype.toString;function l(e){if(!(this instanceof l))return new l(e);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(a[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var c;if(c="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=r.deflateSetDictionary(this.strm,c)))throw new Error(a[n]);this._dict_set=!0}}function c(e,t){var n=new l(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}l.prototype.push=function(e,t){var n,a,s=this.strm,l=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===u.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(l),s.next_out=0,s.avail_out=l),1!==(n=r.deflate(s,a))&&0!==n)return this.onEnd(n),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==a||(this.onEnd(0),!(s.avail_out=0))},l.prototype.onData=function(e){this.chunks.push(e)},l.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=l,n.deflate=c,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,c(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,c(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),i=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/constants"),s=e("./zlib/messages"),u=e("./zlib/zstream"),l=e("./zlib/gzheader"),c=Object.prototype.toString;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new l,r.inflateGetHeader(this.strm,this.header)}function h(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}f.prototype.push=function(e,t){var n,s,u,l,f,h,d=this.strm,p=this.options.chunkSize,m=this.options.dictionary,y=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?d.input=o.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(p),d.next_out=0,d.avail_out=p),(n=r.inflate(d,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(h="string"==typeof m?o.string2buf(m):"[object ArrayBuffer]"===c.call(m)?new Uint8Array(m):m,n=r.inflateSetDictionary(this.strm,h)),n===a.Z_BUF_ERROR&&!0===y&&(n=a.Z_OK,y=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),!(this.ended=!0);d.next_out&&(0!==d.avail_out&&n!==a.Z_STREAM_END&&(0!==d.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(d.output,d.next_out),l=d.next_out-u,f=o.buf2string(d.output,u),d.next_out=l,d.avail_out=p-l,l&&i.arraySet(d.output,d.output,u,l,0),this.onData(f)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(y=!0)}while((0<d.avail_in||0===d.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(d.avail_out=0))},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=f,n.inflate=h,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},n.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function u(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}a[254]=a[254]=1,n.string2buf=function(e){var t,n,i,o,a,s=e.length,u=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(u),o=a=0;a<u;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t},n.buf2binstring=function(e){return u(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,o,s=t||e.length,l=new Array(2*s);for(n=r=0;n<s;)if((i=e[n++])<128)l[r++]=i;else if(4<(o=a[i]))l[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&n<s;)i=i<<6|63&e[n++],o--;1<o?l[r++]=65533:i<65536?l[r++]=i:(i-=65536,l[r++]=55296|i>>10&1023,l[r++]=56320|1023&i)}return u(l,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;o=o+(i=i+t[r++]|0)|0,--a;);i%=65521,o%=65521}return i|o<<16|0}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var o=r,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},{}],46:[function(e,t,n){"use strict";var r,i=e("../utils/common"),o=e("./trees"),a=e("./adler32"),s=e("./crc32"),u=e("./messages"),l=-2,c=258,f=262,h=113;function d(e,t){return e.msg=u[t],t}function p(e){return(e<<1)-(4<e?9:0)}function m(e){for(var t=e.length;0<=--t;)e[t]=0}function y(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function v(e,t){o._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,y(e.strm)}function g(e,t){e.pending_buf[e.pending++]=t}function b(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function w(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-f?e.strstart-(e.w_size-f):0,l=e.window,h=e.w_mask,d=e.prev,p=e.strstart+c,m=l[o+a-1],y=l[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(l[(n=t)+a]===y&&l[n+a-1]===m&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<p);if(r=c-(p-o),o=p-c,a<r){if(e.match_start=t,s<=(a=r))break;m=l[o+a-1],y=l[o+a]}}}while((t=d[t&h])>u&&0!=--i);return a<=e.lookahead?a:e.lookahead}function _(e){var t,n,r,o,u,l,c,h,d,p,m=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-f)){for(i.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=n=e.hash_size;r=e.head[--t],e.head[t]=m<=r?r-m:0,--n;);for(t=n=m;r=e.prev[--t],e.prev[t]=m<=r?r-m:0,--n;);o+=m}if(0===e.strm.avail_in)break;if(l=e.strm,c=e.window,h=e.strstart+e.lookahead,p=void 0,(d=o)<(p=l.avail_in)&&(p=d),n=0===p?0:(l.avail_in-=p,i.arraySet(c,l.input,l.next_in,p,h),1===l.state.wrap?l.adler=a(l.adler,c,p,h):2===l.state.wrap&&(l.adler=s(l.adler,c,p,h)),l.next_in+=p,l.total_in+=p,p),e.lookahead+=n,e.lookahead+e.insert>=3)for(u=e.strstart-e.insert,e.ins_h=e.window[u],e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+3-1])&e.hash_mask,e.prev[u&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=u,u++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<f&&0!==e.strm.avail_in)}function k(e,t){for(var n,r;;){if(e.lookahead<f){if(_(e),e.lookahead<f&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-f&&(e.match_length=w(e,n)),e.match_length>=3)if(r=o._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}function x(e,t){for(var n,r,i;;){if(e.lookahead<f){if(_(e),e.lookahead<f&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-f&&(e.match_length=w(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-3,r=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(v(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=o._tr_tally(e,0,e.window[e.strstart-1]))&&v(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}function O(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function P(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function S(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:h,e.adler=2===t.wrap?0:1,t.last_flush=0,o._tr_init(t),0):d(e,l)}function E(e){var t,n=S(e);return 0===n&&((t=e.state).window_size=2*t.w_size,m(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function j(e,t,n,r,o,a){if(!e)return l;var s=1;if(-1===t&&(t=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),o<1||9<o||8!==n||r<8||15<r||t<0||9<t||a<0||4<a)return d(e,l);8===r&&(r=9);var u=new P;return(e.state=u).strm=e,u.wrap=s,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=a,u.method=n,E(e)}r=[new O(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(_(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,v(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-f&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(v(e,!1),e.strm.avail_out),1)})),new O(4,4,8,4,k),new O(4,5,16,8,k),new O(4,6,32,32,k),new O(4,4,16,16,x),new O(8,16,32,32,x),new O(8,16,128,128,x),new O(8,32,128,256,x),new O(32,128,258,1024,x),new O(32,258,258,4096,x)],n.deflateInit=function(e,t){return j(e,t,8,15,8,0)},n.deflateInit2=j,n.deflateReset=E,n.deflateResetKeep=S,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?l:(e.state.gzhead=t,0):l},n.deflate=function(e,t){var n,i,a,u;if(!e||!e.state||5<t||t<0)return e?d(e,l):l;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return d(e,0===e.avail_out?-5:l);if(i.strm=e,n=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,g(i,31),g(i,139),g(i,8),i.gzhead?(g(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),g(i,255&i.gzhead.time),g(i,i.gzhead.time>>8&255),g(i,i.gzhead.time>>16&255),g(i,i.gzhead.time>>24&255),g(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),g(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(g(i,255&i.gzhead.extra.length),g(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(g(i,0),g(i,0),g(i,0),g(i,0),g(i,0),g(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),g(i,3),i.status=h);else{var f=8+(i.w_bits-8<<4)<<8;f|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(f|=32),f+=31-f%31,i.status=h,b(i,f),0!==i.strstart&&(b(i,e.adler>>>16),b(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),y(e),a=i.pending,i.pending!==i.pending_buf_size));)g(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),y(e),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,g(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),y(e),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,g(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&y(e),i.pending+2<=i.pending_buf_size&&(g(i,255&e.adler),g(i,e.adler>>8&255),e.adler=0,i.status=h)):i.status=h),0!==i.pending){if(y(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&p(t)<=p(n)&&4!==t)return d(e,-5);if(666===i.status&&0!==e.avail_in)return d(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&666!==i.status){var w=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(_(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var n,r,i,a,s=e.window;;){if(e.lookahead<=c){if(_(e),e.lookahead<=c&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){a=e.strstart+c;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);e.match_length=c-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=o._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}(i,t):r[i.level].func(i,t);if(3!==w&&4!==w||(i.status=666),1===w||3===w)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===w&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(m(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),y(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(g(i,255&e.adler),g(i,e.adler>>8&255),g(i,e.adler>>16&255),g(i,e.adler>>24&255),g(i,255&e.total_in),g(i,e.total_in>>8&255),g(i,e.total_in>>16&255),g(i,e.total_in>>24&255)):(b(i,e.adler>>>16),b(i,65535&e.adler)),y(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?0:1)},n.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==h&&666!==t?d(e,l):(e.state=null,t===h?d(e,-3):0):l},n.deflateSetDictionary=function(e,t){var n,r,o,s,u,c,f,h,d=t.length;if(!e||!e.state)return l;if(2===(s=(n=e.state).wrap)||1===s&&42!==n.status||n.lookahead)return l;for(1===s&&(e.adler=a(e.adler,t,d,0)),n.wrap=0,d>=n.w_size&&(0===s&&(m(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new i.Buf8(n.w_size),i.arraySet(h,t,d-n.w_size,n.w_size,0),t=h,d=n.w_size),u=e.avail_in,c=e.next_in,f=e.input,e.avail_in=d,e.next_in=0,e.input=t,_(n);n.lookahead>=3;){for(r=n.strstart,o=n.lookahead-2;n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--o;);n.strstart=r,n.lookahead=2,_(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=c,e.input=f,e.avail_in=u,n.wrap=s,0},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,o,a,s,u,l,c,f,h,d,p,m,y,v,g,b,w,_,k,x,O,P,S;n=e.state,r=e.next_in,P=e.input,i=r+(e.avail_in-5),o=e.next_out,S=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),u=n.dmax,l=n.wsize,c=n.whave,f=n.wnext,h=n.window,d=n.hold,p=n.bits,m=n.lencode,y=n.distcode,v=(1<<n.lenbits)-1,g=(1<<n.distbits)-1;e:do{p<15&&(d+=P[r++]<<p,p+=8,d+=P[r++]<<p,p+=8),b=m[d&v];t:for(;;){if(d>>>=w=b>>>24,p-=w,0==(w=b>>>16&255))S[o++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=m[(65535&b)+(d&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}_=65535&b,(w&=15)&&(p<w&&(d+=P[r++]<<p,p+=8),_+=d&(1<<w)-1,d>>>=w,p-=w),p<15&&(d+=P[r++]<<p,p+=8,d+=P[r++]<<p,p+=8),b=y[d&g];n:for(;;){if(d>>>=w=b>>>24,p-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=y[(65535&b)+(d&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(k=65535&b,p<(w&=15)&&(d+=P[r++]<<p,(p+=8)<w&&(d+=P[r++]<<p,p+=8)),u<(k+=d&(1<<w)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(d>>>=w,p-=w,(w=o-a)<k){if(c<(w=k-w)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(O=h,(x=0)===f){if(x+=l-w,w<_){for(_-=w;S[o++]=h[x++],--w;);x=o-k,O=S}}else if(f<w){if(x+=l+f-w,(w-=f)<_){for(_-=w;S[o++]=h[x++],--w;);if(x=0,f<_){for(_-=w=f;S[o++]=h[x++],--w;);x=o-k,O=S}}}else if(x+=f-w,w<_){for(_-=w;S[o++]=h[x++],--w;);x=o-k,O=S}for(;2<_;)S[o++]=O[x++],S[o++]=O[x++],S[o++]=O[x++],_-=3;_&&(S[o++]=O[x++],1<_&&(S[o++]=O[x++]))}else{for(x=o-k;S[o++]=S[x++],S[o++]=S[x++],S[o++]=S[x++],2<(_-=3););_&&(S[o++]=S[x++],1<_&&(S[o++]=S[x++]))}break}}break}}while(r<i&&o<s);r-=_=p>>3,d&=(1<<(p-=_<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=d,n.bits=p}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),i=e("./adler32"),o=e("./crc32"),a=e("./inffast"),s=e("./inftrees"),u=-2;function l(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):u}function h(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,f(e)):u}function d(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?u:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,h(e))):u}function p(e,t){var n,r;return e?(r=new c,(e.state=r).window=null,0!==(n=d(e,t))&&(e.state=null),n):u}var m,y,v=!0;function g(e){if(v){var t;for(m=new r.Buf32(512),y=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,y,0,e.work,{bits:5}),v=!1}e.lencode=m,e.lenbits=9,e.distcode=y,e.distbits=5}function b(e,t,n,i){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i<(o=a.wsize-a.wnext)&&(o=i),r.arraySet(a.window,t,n-i,o,a.wnext),(i-=o)?(r.arraySet(a.window,t,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}n.inflateReset=h,n.inflateReset2=d,n.inflateResetKeep=f,n.inflateInit=function(e){return p(e,15)},n.inflateInit2=p,n.inflate=function(e,t){var n,c,f,h,d,p,m,y,v,w,_,k,x,O,P,S,E,j,C,T,A,z,I,D,R=0,B=new r.Buf8(4),M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return u;12===(n=e.state).mode&&(n.mode=13),d=e.next_out,f=e.output,m=e.avail_out,h=e.next_in,c=e.input,p=e.avail_in,y=n.hold,v=n.bits,w=p,_=m,z=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;v<16;){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}if(2&n.wrap&&35615===y){B[n.check=0]=255&y,B[1]=y>>>8&255,n.check=o(n.check,B,2,0),v=y=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&y)<<8)+(y>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&y)){e.msg="unknown compression method",n.mode=30;break}if(v-=4,A=8+(15&(y>>>=4)),0===n.wbits)n.wbits=A;else if(A>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<A,e.adler=n.check=1,n.mode=512&y?10:12,v=y=0;break;case 2:for(;v<16;){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}if(n.flags=y,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=y>>8&1),512&n.flags&&(B[0]=255&y,B[1]=y>>>8&255,n.check=o(n.check,B,2,0)),v=y=0,n.mode=3;case 3:for(;v<32;){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}n.head&&(n.head.time=y),512&n.flags&&(B[0]=255&y,B[1]=y>>>8&255,B[2]=y>>>16&255,B[3]=y>>>24&255,n.check=o(n.check,B,4,0)),v=y=0,n.mode=4;case 4:for(;v<16;){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}n.head&&(n.head.xflags=255&y,n.head.os=y>>8),512&n.flags&&(B[0]=255&y,B[1]=y>>>8&255,n.check=o(n.check,B,2,0)),v=y=0,n.mode=5;case 5:if(1024&n.flags){for(;v<16;){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}n.length=y,n.head&&(n.head.extra_len=y),512&n.flags&&(B[0]=255&y,B[1]=y>>>8&255,n.check=o(n.check,B,2,0)),v=y=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(p<(k=n.length)&&(k=p),k&&(n.head&&(A=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,c,h,k,A)),512&n.flags&&(n.check=o(n.check,c,k,h)),p-=k,h+=k,n.length-=k),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===p)break e;for(k=0;A=c[h+k++],n.head&&A&&n.length<65536&&(n.head.name+=String.fromCharCode(A)),A&&k<p;);if(512&n.flags&&(n.check=o(n.check,c,k,h)),p-=k,h+=k,A)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===p)break e;for(k=0;A=c[h+k++],n.head&&A&&n.length<65536&&(n.head.comment+=String.fromCharCode(A)),A&&k<p;);if(512&n.flags&&(n.check=o(n.check,c,k,h)),p-=k,h+=k,A)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;v<16;){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}if(y!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}v=y=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;v<32;){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}e.adler=n.check=l(y),v=y=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=d,e.avail_out=m,e.next_in=h,e.avail_in=p,n.hold=y,n.bits=v,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){y>>>=7&v,v-=7&v,n.mode=27;break}for(;v<3;){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}switch(n.last=1&y,v-=1,3&(y>>>=1)){case 0:n.mode=14;break;case 1:if(g(n),n.mode=20,6!==t)break;y>>>=2,v-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}y>>>=2,v-=2;break;case 14:for(y>>>=7&v,v-=7&v;v<32;){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}if((65535&y)!=(y>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&y,v=y=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(k=n.length){if(p<k&&(k=p),m<k&&(k=m),0===k)break e;r.arraySet(f,c,h,k,d),p-=k,h+=k,m-=k,d+=k,n.length-=k;break}n.mode=12;break;case 17:for(;v<14;){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}if(n.nlen=257+(31&y),y>>>=5,v-=5,n.ndist=1+(31&y),y>>>=5,v-=5,n.ncode=4+(15&y),y>>>=4,v-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;v<3;){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}n.lens[M[n.have++]]=7&y,y>>>=3,v-=3}for(;n.have<19;)n.lens[M[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,I={bits:n.lenbits},z=s(0,n.lens,0,19,n.lencode,0,n.work,I),n.lenbits=I.bits,z){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;S=(R=n.lencode[y&(1<<n.lenbits)-1])>>>16&255,E=65535&R,!((P=R>>>24)<=v);){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}if(E<16)y>>>=P,v-=P,n.lens[n.have++]=E;else{if(16===E){for(D=P+2;v<D;){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}if(y>>>=P,v-=P,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}A=n.lens[n.have-1],k=3+(3&y),y>>>=2,v-=2}else if(17===E){for(D=P+3;v<D;){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}v-=P,A=0,k=3+(7&(y>>>=P)),y>>>=3,v-=3}else{for(D=P+7;v<D;){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}v-=P,A=0,k=11+(127&(y>>>=P)),y>>>=7,v-=7}if(n.have+k>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;k--;)n.lens[n.have++]=A}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,I={bits:n.lenbits},z=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,I),n.lenbits=I.bits,z){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,I={bits:n.distbits},z=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,I),n.distbits=I.bits,z){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=p&&258<=m){e.next_out=d,e.avail_out=m,e.next_in=h,e.avail_in=p,n.hold=y,n.bits=v,a(e,_),d=e.next_out,f=e.output,m=e.avail_out,h=e.next_in,c=e.input,p=e.avail_in,y=n.hold,v=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;S=(R=n.lencode[y&(1<<n.lenbits)-1])>>>16&255,E=65535&R,!((P=R>>>24)<=v);){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}if(S&&0==(240&S)){for(j=P,C=S,T=E;S=(R=n.lencode[T+((y&(1<<j+C)-1)>>j)])>>>16&255,E=65535&R,!(j+(P=R>>>24)<=v);){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}y>>>=j,v-=j,n.back+=j}if(y>>>=P,v-=P,n.back+=P,n.length=E,0===S){n.mode=26;break}if(32&S){n.back=-1,n.mode=12;break}if(64&S){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&S,n.mode=22;case 22:if(n.extra){for(D=n.extra;v<D;){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}n.length+=y&(1<<n.extra)-1,y>>>=n.extra,v-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;S=(R=n.distcode[y&(1<<n.distbits)-1])>>>16&255,E=65535&R,!((P=R>>>24)<=v);){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}if(0==(240&S)){for(j=P,C=S,T=E;S=(R=n.distcode[T+((y&(1<<j+C)-1)>>j)])>>>16&255,E=65535&R,!(j+(P=R>>>24)<=v);){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}y>>>=j,v-=j,n.back+=j}if(y>>>=P,v-=P,n.back+=P,64&S){e.msg="invalid distance code",n.mode=30;break}n.offset=E,n.extra=15&S,n.mode=24;case 24:if(n.extra){for(D=n.extra;v<D;){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}n.offset+=y&(1<<n.extra)-1,y>>>=n.extra,v-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===m)break e;if(k=_-m,n.offset>k){if((k=n.offset-k)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}x=k>n.wnext?(k-=n.wnext,n.wsize-k):n.wnext-k,k>n.length&&(k=n.length),O=n.window}else O=f,x=d-n.offset,k=n.length;for(m<k&&(k=m),m-=k,n.length-=k;f[d++]=O[x++],--k;);0===n.length&&(n.mode=21);break;case 26:if(0===m)break e;f[d++]=n.length,m--,n.mode=21;break;case 27:if(n.wrap){for(;v<32;){if(0===p)break e;p--,y|=c[h++]<<v,v+=8}if(_-=m,e.total_out+=_,n.total+=_,_&&(e.adler=n.check=n.flags?o(n.check,f,_,d-_):i(n.check,f,_,d-_)),_=m,(n.flags?y:l(y))!==n.check){e.msg="incorrect data check",n.mode=30;break}v=y=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;v<32;){if(0===p)break e;p--,y+=c[h++]<<v,v+=8}if(y!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}v=y=0}n.mode=29;case 29:z=1;break e;case 30:z=-3;break e;case 31:return-4;case 32:default:return u}return e.next_out=d,e.avail_out=m,e.next_in=h,e.avail_in=p,n.hold=y,n.bits=v,(n.wsize||_!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&b(e,e.output,e.next_out,_-e.avail_out)?(n.mode=31,-4):(w-=e.avail_in,_-=e.avail_out,e.total_in+=w,e.total_out+=_,n.total+=_,n.wrap&&_&&(e.adler=n.check=n.flags?o(n.check,f,_,e.next_out-_):i(n.check,f,_,e.next_out-_)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==w&&0===_||4===t)&&0===z&&(z=-5),z)},n.inflateEnd=function(e){if(!e||!e.state)return u;var t=e.state;return t.window&&(t.window=null),e.state=null,0},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?u:((n.head=t).done=!1,0):u},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?u:11===n.mode&&i(1,t,r,0)!==n.check?-3:b(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):u},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,u,l,c,f,h){var d,p,m,y,v,g,b,w,_,k=h.bits,x=0,O=0,P=0,S=0,E=0,j=0,C=0,T=0,A=0,z=0,I=null,D=0,R=new r.Buf16(16),B=new r.Buf16(16),M=null,L=0;for(x=0;x<=15;x++)R[x]=0;for(O=0;O<u;O++)R[t[n+O]]++;for(E=k,S=15;1<=S&&0===R[S];S--);if(S<E&&(E=S),0===S)return l[c++]=20971520,l[c++]=20971520,h.bits=1,0;for(P=1;P<S&&0===R[P];P++);for(E<P&&(E=P),x=T=1;x<=15;x++)if(T<<=1,(T-=R[x])<0)return-1;if(0<T&&(0===e||1!==S))return-1;for(B[1]=0,x=1;x<15;x++)B[x+1]=B[x]+R[x];for(O=0;O<u;O++)0!==t[n+O]&&(f[B[t[n+O]]++]=O);if(g=0===e?(I=M=f,19):1===e?(I=i,D-=257,M=o,L-=257,256):(I=a,M=s,-1),x=P,v=c,C=O=z=0,m=-1,y=(A=1<<(j=E))-1,1===e&&852<A||2===e&&592<A)return 1;for(;;){for(b=x-C,_=f[O]<g?(w=0,f[O]):f[O]>g?(w=M[L+f[O]],I[D+f[O]]):(w=96,0),d=1<<x-C,P=p=1<<j;l[v+(z>>C)+(p-=d)]=b<<24|w<<16|_|0,0!==p;);for(d=1<<x-1;z&d;)d>>=1;if(0!==d?(z&=d-1,z+=d):z=0,O++,0==--R[x]){if(x===S)break;x=t[n+f[O]]}if(E<x&&(z&y)!==m){for(0===C&&(C=E),v+=P,T=1<<(j=x-C);j+C<S&&!((T-=R[j+C])<=0);)j++,T<<=1;if(A+=1<<j,1===e&&852<A||2===e&&592<A)return 1;l[m=z&y]=E<<24|j<<16|v-c|0}}return 0!==z&&(l[v+z]=x-C<<24|64<<16|0),h.bits=E,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common");function i(e){for(var t=e.length;0<=--t;)e[t]=0}var o=15,a=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c=new Array(576);i(c);var f=new Array(60);i(f);var h=new Array(512);i(h);var d=new Array(256);i(d);var p=new Array(29);i(p);var m,y,v,g=new Array(30);function b(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function w(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function _(e){return e<256?h[e]:h[256+(e>>>7)]}function k(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function x(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,k(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function O(e,t,n){x(e,n[2*t],n[2*t+1])}function P(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function S(e,t,n){var r,i,a=new Array(16),s=0;for(r=1;r<=o;r++)a[r]=s=s+n[r-1]<<1;for(i=0;i<=t;i++){var u=e[2*i+1];0!==u&&(e[2*i]=P(a[u]++,u))}}function E(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function j(e){8<e.bi_valid?k(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function C(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function T(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&C(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!C(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function A(e,t,n){var r,i,o,u,l=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===r?O(e,i,t):(O(e,(o=d[i])+256+1,t),0!==(u=a[o])&&x(e,i-=p[o],u),O(e,o=_(--r),n),0!==(u=s[o])&&x(e,r-=g[o],u)),l<e.last_lit;);O(e,256,t)}function z(e,t){var n,r,i,a=t.dyn_tree,s=t.stat_desc.static_tree,u=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<l;n++)0!==a[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,u&&(e.static_len-=s[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;1<=n;n--)T(e,a,n);for(i=l;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],T(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*i]=a[2*n]+a[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=i,e.heap[1]=i++,T(e,a,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,a,s,u,l=t.dyn_tree,c=t.max_code,f=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,m=t.stat_desc.max_length,y=0;for(a=0;a<=o;a++)e.bl_count[a]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)m<(a=l[2*l[2*(r=e.heap[n])+1]+1]+1)&&(a=m,y++),l[2*r+1]=a,c<r||(e.bl_count[a]++,s=0,p<=r&&(s=d[r-p]),u=l[2*r],e.opt_len+=u*(a+s),h&&(e.static_len+=u*(f[2*r+1]+s)));if(0!==y){do{for(a=m-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[m]--,y-=2}while(0<y);for(a=m;0!==a;a--)for(r=e.bl_count[a];0!==r;)c<(i=e.heap[--n])||(l[2*i+1]!==a&&(e.opt_len+=(a-l[2*i+1])*l[2*i],l[2*i+1]=a),r--)}}(e,t),S(a,c,e.bl_count)}function I(e,t,n){var r,i,o=-1,a=t[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<u&&i===a||(s<l?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=i,l=(s=0)===a?(u=138,3):i===a?(u=6,3):(u=7,4))}function D(e,t,n){var r,i,o=-1,a=t[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<u&&i===a)){if(s<l)for(;O(e,i,e.bl_tree),0!=--s;);else 0!==i?(i!==o&&(O(e,i,e.bl_tree),s--),O(e,16,e.bl_tree),x(e,s-3,2)):s<=10?(O(e,17,e.bl_tree),x(e,s-3,3)):(O(e,18,e.bl_tree),x(e,s-11,7));o=i,l=(s=0)===a?(u=138,3):i===a?(u=6,3):(u=7,4)}}i(g);var R=!1;function B(e,t,n,i){var o,a,s;x(e,0+(i?1:0),3),a=t,s=n,j(o=e),k(o,s),k(o,~s),r.arraySet(o.pending_buf,o.window,a,s,o.pending),o.pending+=s}n._tr_init=function(e){R||(function(){var e,t,n,r,i,l=new Array(16);for(r=n=0;r<28;r++)for(p[r]=n,e=0;e<1<<a[r];e++)d[n++]=r;for(d[n-1]=r,r=i=0;r<16;r++)for(g[r]=i,e=0;e<1<<s[r];e++)h[i++]=r;for(i>>=7;r<30;r++)for(g[r]=i<<7,e=0;e<1<<s[r]-7;e++)h[256+i++]=r;for(t=0;t<=o;t++)l[t]=0;for(e=0;e<=143;)c[2*e+1]=8,e++,l[8]++;for(;e<=255;)c[2*e+1]=9,e++,l[9]++;for(;e<=279;)c[2*e+1]=7,e++,l[7]++;for(;e<=287;)c[2*e+1]=8,e++,l[8]++;for(S(c,287,l),e=0;e<30;e++)f[2*e+1]=5,f[2*e]=P(e,5);m=new b(c,a,257,286,o),y=new b(f,s,0,30,o),v=new b(new Array(0),u,0,19,7)}(),R=!0),e.l_desc=new w(e.dyn_ltree,m),e.d_desc=new w(e.dyn_dtree,y),e.bl_desc=new w(e.bl_tree,v),e.bi_buf=0,e.bi_valid=0,E(e)},n._tr_stored_block=B,n._tr_flush_block=function(e,t,n,r){var i,o,a=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),z(e,e.l_desc),z(e,e.d_desc),a=function(e){var t;for(I(e,e.dyn_ltree,e.l_desc.max_code),I(e,e.dyn_dtree,e.d_desc.max_code),z(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*l[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?B(e,t,n,r):4===e.strategy||o===i?(x(e,2+(r?1:0),3),A(e,c,f)):(x(e,4+(r?1:0),3),function(e,t,n,r){var i;for(x(e,t-257,5),x(e,n-1,5),x(e,r-4,4),i=0;i<r;i++)x(e,e.bl_tree[2*l[i]+1],3);D(e,e.dyn_ltree,t-1),D(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),A(e,e.dyn_ltree,e.dyn_dtree)),E(e),r&&j(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(d[n]+256+1)]++,e.dyn_dtree[2*_(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){var t;x(e,2,3),O(e,256,c),16===(t=e).bi_valid?(k(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){"use strict";t.exports="function"==typeof r?r:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}},{}]},{},[10])(10)}))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}).call(this,n(53),n(85).Buffer,n(314).setImmediate)},function(e,t,n){(function(e,r){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o="Expected a function",a="__lodash_placeholder__",s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],u="[object Arguments]",l="[object Array]",c="[object Boolean]",f="[object Date]",h="[object Error]",d="[object Function]",p="[object GeneratorFunction]",m="[object Map]",y="[object Number]",v="[object Object]",g="[object RegExp]",b="[object Set]",w="[object String]",_="[object Symbol]",k="[object WeakMap]",x="[object ArrayBuffer]",O="[object DataView]",P="[object Float32Array]",S="[object Float64Array]",E="[object Int8Array]",j="[object Int16Array]",C="[object Int32Array]",T="[object Uint8Array]",A="[object Uint16Array]",z="[object Uint32Array]",I=/\b__p \+= '';/g,D=/\b(__p \+=) '' \+/g,R=/(__e\(.*?\)|\b__t\)) \+\n'';/g,B=/&(?:amp|lt|gt|quot|#39);/g,M=/[&<>"']/g,L=RegExp(B.source),F=RegExp(M.source),N=/<%-([\s\S]+?)%>/g,U=/<%([\s\S]+?)%>/g,$=/<%=([\s\S]+?)%>/g,V=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,q=/^\w*$/,W=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,H=/[\\^$.*+?()[\]{}|]/g,K=RegExp(H.source),G=/^\s+/,J=/\s/,Z=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Y=/\{\n\/\* \[wrapped with (.+)\] \*/,Q=/,? & /,X=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ee=/[()=,{}\[\]\/\s]/,te=/\\(\\)?/g,ne=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,re=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,oe=/^0b[01]+$/i,ae=/^\[object .+?Constructor\]$/,se=/^0o[0-7]+$/i,ue=/^(?:0|[1-9]\d*)$/,le=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ce=/($^)/,fe=/['\n\r\u2028\u2029\\]/g,he="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",de="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="[\\ud800-\\udfff]",me="["+de+"]",ye="["+he+"]",ve="\\d+",ge="[\\u2700-\\u27bf]",be="[a-z\\xdf-\\xf6\\xf8-\\xff]",we="[^\\ud800-\\udfff"+de+ve+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",_e="\\ud83c[\\udffb-\\udfff]",ke="[^\\ud800-\\udfff]",xe="(?:\\ud83c[\\udde6-\\uddff]){2}",Oe="[\\ud800-\\udbff][\\udc00-\\udfff]",Pe="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Se="(?:"+be+"|"+we+")",Ee="(?:"+Pe+"|"+we+")",je="(?:"+ye+"|"+_e+")"+"?",Ce="[\\ufe0e\\ufe0f]?"+je+("(?:\\u200d(?:"+[ke,xe,Oe].join("|")+")[\\ufe0e\\ufe0f]?"+je+")*"),Te="(?:"+[ge,xe,Oe].join("|")+")"+Ce,Ae="(?:"+[ke+ye+"?",ye,xe,Oe,pe].join("|")+")",ze=RegExp("['’]","g"),Ie=RegExp(ye,"g"),De=RegExp(_e+"(?="+_e+")|"+Ae+Ce,"g"),Re=RegExp([Pe+"?"+be+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[me,Pe,"$"].join("|")+")",Ee+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[me,Pe+Se,"$"].join("|")+")",Pe+"?"+Se+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Pe+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ve,Te].join("|"),"g"),Be=RegExp("[\\u200d\\ud800-\\udfff"+he+"\\ufe0e\\ufe0f]"),Me=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Le=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Fe=-1,Ne={};Ne[P]=Ne[S]=Ne[E]=Ne[j]=Ne[C]=Ne[T]=Ne["[object Uint8ClampedArray]"]=Ne[A]=Ne[z]=!0,Ne[u]=Ne[l]=Ne[x]=Ne[c]=Ne[O]=Ne[f]=Ne[h]=Ne[d]=Ne[m]=Ne[y]=Ne[v]=Ne[g]=Ne[b]=Ne[w]=Ne[k]=!1;var Ue={};Ue[u]=Ue[l]=Ue[x]=Ue[O]=Ue[c]=Ue[f]=Ue[P]=Ue[S]=Ue[E]=Ue[j]=Ue[C]=Ue[m]=Ue[y]=Ue[v]=Ue[g]=Ue[b]=Ue[w]=Ue[_]=Ue[T]=Ue["[object Uint8ClampedArray]"]=Ue[A]=Ue[z]=!0,Ue[h]=Ue[d]=Ue[k]=!1;var $e={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ve=parseFloat,qe=parseInt,We="object"==typeof e&&e&&e.Object===Object&&e,He="object"==typeof self&&self&&self.Object===Object&&self,Ke=We||He||Function("return this")(),Ge=t&&!t.nodeType&&t,Je=Ge&&"object"==typeof r&&r&&!r.nodeType&&r,Ze=Je&&Je.exports===Ge,Ye=Ze&&We.process,Qe=function(){try{var e=Je&&Je.require&&Je.require("util").types;return e||Ye&&Ye.binding&&Ye.binding("util")}catch(e){}}(),Xe=Qe&&Qe.isArrayBuffer,et=Qe&&Qe.isDate,tt=Qe&&Qe.isMap,nt=Qe&&Qe.isRegExp,rt=Qe&&Qe.isSet,it=Qe&&Qe.isTypedArray;function ot(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function at(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function st(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function ut(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function lt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function ct(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function ft(e,t){return!!(null==e?0:e.length)&&_t(e,t,0)>-1}function ht(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function dt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function pt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function mt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function yt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function vt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var gt=Pt("length");function bt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function wt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function _t(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):wt(e,xt,n)}function kt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function xt(e){return e!=e}function Ot(e,t){var n=null==e?0:e.length;return n?jt(e,t)/n:NaN}function Pt(e){return function(t){return null==t?void 0:t[e]}}function St(e){return function(t){return null==e?void 0:e[t]}}function Et(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function jt(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Ct(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Tt(e){return e?e.slice(0,Gt(e)+1).replace(G,""):e}function At(e){return function(t){return e(t)}}function zt(e,t){return dt(t,(function(t){return e[t]}))}function It(e,t){return e.has(t)}function Dt(e,t){for(var n=-1,r=e.length;++n<r&&_t(t,e[n],0)>-1;);return n}function Rt(e,t){for(var n=e.length;n--&&_t(t,e[n],0)>-1;);return n}function Bt(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var Mt=St({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Lt=St({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ft(e){return"\\"+$e[e]}function Nt(e){return Be.test(e)}function Ut(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function $t(e,t){return function(n){return e(t(n))}}function Vt(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];s!==t&&s!==a||(e[n]=a,o[i++]=n)}return o}function qt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Wt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function Ht(e){return Nt(e)?function(e){var t=De.lastIndex=0;for(;De.test(e);)++t;return t}(e):gt(e)}function Kt(e){return Nt(e)?function(e){return e.match(De)||[]}(e):function(e){return e.split("")}(e)}function Gt(e){for(var t=e.length;t--&&J.test(e.charAt(t)););return t}var Jt=St({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Zt=function e(t){var n,r=(t=null==t?Ke:Zt.defaults(Ke.Object(),t,Zt.pick(Ke,Le))).Array,i=t.Date,J=t.Error,he=t.Function,de=t.Math,pe=t.Object,me=t.RegExp,ye=t.String,ve=t.TypeError,ge=r.prototype,be=he.prototype,we=pe.prototype,_e=t["__core-js_shared__"],ke=be.toString,xe=we.hasOwnProperty,Oe=0,Pe=(n=/[^.]+$/.exec(_e&&_e.keys&&_e.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Se=we.toString,Ee=ke.call(pe),je=Ke._,Ce=me("^"+ke.call(xe).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Te=Ze?t.Buffer:void 0,Ae=t.Symbol,De=t.Uint8Array,Be=Te?Te.allocUnsafe:void 0,$e=$t(pe.getPrototypeOf,pe),We=pe.create,He=we.propertyIsEnumerable,Ge=ge.splice,Je=Ae?Ae.isConcatSpreadable:void 0,Ye=Ae?Ae.iterator:void 0,Qe=Ae?Ae.toStringTag:void 0,gt=function(){try{var e=eo(pe,"defineProperty");return e({},"",{}),e}catch(e){}}(),St=t.clearTimeout!==Ke.clearTimeout&&t.clearTimeout,Yt=i&&i.now!==Ke.Date.now&&i.now,Qt=t.setTimeout!==Ke.setTimeout&&t.setTimeout,Xt=de.ceil,en=de.floor,tn=pe.getOwnPropertySymbols,nn=Te?Te.isBuffer:void 0,rn=t.isFinite,on=ge.join,an=$t(pe.keys,pe),sn=de.max,un=de.min,ln=i.now,cn=t.parseInt,fn=de.random,hn=ge.reverse,dn=eo(t,"DataView"),pn=eo(t,"Map"),mn=eo(t,"Promise"),yn=eo(t,"Set"),vn=eo(t,"WeakMap"),gn=eo(pe,"create"),bn=vn&&new vn,wn={},_n=jo(dn),kn=jo(pn),xn=jo(mn),On=jo(yn),Pn=jo(vn),Sn=Ae?Ae.prototype:void 0,En=Sn?Sn.valueOf:void 0,jn=Sn?Sn.toString:void 0;function Cn(e){if(Wa(e)&&!Da(e)&&!(e instanceof In)){if(e instanceof zn)return e;if(xe.call(e,"__wrapped__"))return Co(e)}return new zn(e)}var Tn=function(){function e(){}return function(t){if(!qa(t))return{};if(We)return We(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function An(){}function zn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function In(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Dn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Rn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Bn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Mn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Bn;++t<n;)this.add(e[t])}function Ln(e){var t=this.__data__=new Rn(e);this.size=t.size}function Fn(e,t){var n=Da(e),r=!n&&Ia(e),i=!n&&!r&&La(e),o=!n&&!r&&!i&&Xa(e),a=n||r||i||o,s=a?Ct(e.length,ye):[],u=s.length;for(var l in e)!t&&!xe.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||so(l,u))||s.push(l);return s}function Nn(e){var t=e.length;return t?e[Mr(0,t-1)]:void 0}function Un(e,t){return Po(gi(e),Zn(t,0,e.length))}function $n(e){return Po(gi(e))}function Vn(e,t,n){(void 0!==n&&!Ta(e[t],n)||void 0===n&&!(t in e))&&Gn(e,t,n)}function qn(e,t,n){var r=e[t];xe.call(e,t)&&Ta(r,n)&&(void 0!==n||t in e)||Gn(e,t,n)}function Wn(e,t){for(var n=e.length;n--;)if(Ta(e[n][0],t))return n;return-1}function Hn(e,t,n,r){return tr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function Kn(e,t){return e&&bi(t,_s(t),e)}function Gn(e,t,n){"__proto__"==t&&gt?gt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Jn(e,t){for(var n=-1,i=t.length,o=r(i),a=null==e;++n<i;)o[n]=a?void 0:ys(e,t[n]);return o}function Zn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Yn(e,t,n,r,i,o){var a,s=1&t,l=2&t,h=4&t;if(n&&(a=i?n(e,r,i,o):n(e)),void 0!==a)return a;if(!qa(e))return e;var k=Da(e);if(k){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&xe.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!s)return gi(e,a)}else{var I=ro(e),D=I==d||I==p;if(La(e))return hi(e,s);if(I==v||I==u||D&&!i){if(a=l||D?{}:oo(e),!s)return l?function(e,t){return bi(e,no(e),t)}(e,function(e,t){return e&&bi(t,ks(t),e)}(a,e)):function(e,t){return bi(e,to(e),t)}(e,Kn(a,e))}else{if(!Ue[I])return i?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case x:return di(e);case c:case f:return new r(+e);case O:return function(e,t){var n=t?di(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case P:case S:case E:case j:case C:case T:case"[object Uint8ClampedArray]":case A:case z:return pi(e,n);case m:return new r;case y:case w:return new r(e);case g:return function(e){var t=new e.constructor(e.source,re.exec(e));return t.lastIndex=e.lastIndex,t}(e);case b:return new r;case _:return i=e,En?pe(En.call(i)):{}}var i}(e,I,s)}}o||(o=new Ln);var R=o.get(e);if(R)return R;o.set(e,a),Za(e)?e.forEach((function(r){a.add(Yn(r,t,n,r,e,o))})):Ha(e)&&e.forEach((function(r,i){a.set(i,Yn(r,t,n,i,e,o))}));var B=k?void 0:(h?l?Ki:Hi:l?ks:_s)(e);return st(B||e,(function(r,i){B&&(r=e[i=r]),qn(a,i,Yn(r,t,n,i,e,o))})),a}function Qn(e,t,n){var r=n.length;if(null==e)return!r;for(e=pe(e);r--;){var i=n[r],o=t[i],a=e[i];if(void 0===a&&!(i in e)||!o(a))return!1}return!0}function Xn(e,t,n){if("function"!=typeof e)throw new ve(o);return _o((function(){e.apply(void 0,n)}),t)}function er(e,t,n,r){var i=-1,o=ft,a=!0,s=e.length,u=[],l=t.length;if(!s)return u;n&&(t=dt(t,At(n))),r?(o=ht,a=!1):t.length>=200&&(o=It,a=!1,t=new Mn(t));e:for(;++i<s;){var c=e[i],f=null==n?c:n(c);if(c=r||0!==c?c:0,a&&f==f){for(var h=l;h--;)if(t[h]===f)continue e;u.push(c)}else o(t,f,r)||u.push(c)}return u}Cn.templateSettings={escape:N,evaluate:U,interpolate:$,variable:"",imports:{_:Cn}},Cn.prototype=An.prototype,Cn.prototype.constructor=Cn,zn.prototype=Tn(An.prototype),zn.prototype.constructor=zn,In.prototype=Tn(An.prototype),In.prototype.constructor=In,Dn.prototype.clear=function(){this.__data__=gn?gn(null):{},this.size=0},Dn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Dn.prototype.get=function(e){var t=this.__data__;if(gn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return xe.call(t,e)?t[e]:void 0},Dn.prototype.has=function(e){var t=this.__data__;return gn?void 0!==t[e]:xe.call(t,e)},Dn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=gn&&void 0===t?"__lodash_hash_undefined__":t,this},Rn.prototype.clear=function(){this.__data__=[],this.size=0},Rn.prototype.delete=function(e){var t=this.__data__,n=Wn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ge.call(t,n,1),--this.size,!0)},Rn.prototype.get=function(e){var t=this.__data__,n=Wn(t,e);return n<0?void 0:t[n][1]},Rn.prototype.has=function(e){return Wn(this.__data__,e)>-1},Rn.prototype.set=function(e,t){var n=this.__data__,r=Wn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Bn.prototype.clear=function(){this.size=0,this.__data__={hash:new Dn,map:new(pn||Rn),string:new Dn}},Bn.prototype.delete=function(e){var t=Qi(this,e).delete(e);return this.size-=t?1:0,t},Bn.prototype.get=function(e){return Qi(this,e).get(e)},Bn.prototype.has=function(e){return Qi(this,e).has(e)},Bn.prototype.set=function(e,t){var n=Qi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Mn.prototype.add=Mn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Mn.prototype.has=function(e){return this.__data__.has(e)},Ln.prototype.clear=function(){this.__data__=new Rn,this.size=0},Ln.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ln.prototype.get=function(e){return this.__data__.get(e)},Ln.prototype.has=function(e){return this.__data__.has(e)},Ln.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Rn){var r=n.__data__;if(!pn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Bn(r)}return n.set(e,t),this.size=n.size,this};var tr=ki(lr),nr=ki(cr,!0);function rr(e,t){var n=!0;return tr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function ir(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(void 0===s?a==a&&!Qa(a):n(a,s)))var s=a,u=o}return u}function or(e,t){var n=[];return tr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function ar(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=ao),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?ar(s,t-1,n,r,i):pt(i,s):r||(i[i.length]=s)}return i}var sr=xi(),ur=xi(!0);function lr(e,t){return e&&sr(e,t,_s)}function cr(e,t){return e&&ur(e,t,_s)}function fr(e,t){return ct(t,(function(t){return Ua(e[t])}))}function hr(e,t){for(var n=0,r=(t=ui(t,e)).length;null!=e&&n<r;)e=e[Eo(t[n++])];return n&&n==r?e:void 0}function dr(e,t,n){var r=t(e);return Da(e)?r:pt(r,n(e))}function pr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Qe&&Qe in pe(e)?function(e){var t=xe.call(e,Qe),n=e[Qe];try{e[Qe]=void 0;var r=!0}catch(e){}var i=Se.call(e);r&&(t?e[Qe]=n:delete e[Qe]);return i}(e):function(e){return Se.call(e)}(e)}function mr(e,t){return e>t}function yr(e,t){return null!=e&&xe.call(e,t)}function vr(e,t){return null!=e&&t in pe(e)}function gr(e,t,n){for(var i=n?ht:ft,o=e[0].length,a=e.length,s=a,u=r(a),l=1/0,c=[];s--;){var f=e[s];s&&t&&(f=dt(f,At(t))),l=un(f.length,l),u[s]=!n&&(t||o>=120&&f.length>=120)?new Mn(s&&f):void 0}f=e[0];var h=-1,d=u[0];e:for(;++h<o&&c.length<l;){var p=f[h],m=t?t(p):p;if(p=n||0!==p?p:0,!(d?It(d,m):i(c,m,n))){for(s=a;--s;){var y=u[s];if(!(y?It(y,m):i(e[s],m,n)))continue e}d&&d.push(m),c.push(p)}}return c}function br(e,t,n){var r=null==(e=vo(e,t=ui(t,e)))?e:e[Eo(No(t))];return null==r?void 0:ot(r,e,n)}function wr(e){return Wa(e)&&pr(e)==u}function _r(e,t,n,r,i){return e===t||(null==e||null==t||!Wa(e)&&!Wa(t)?e!=e&&t!=t:function(e,t,n,r,i,o){var a=Da(e),s=Da(t),d=a?l:ro(e),p=s?l:ro(t),k=(d=d==u?v:d)==v,P=(p=p==u?v:p)==v,S=d==p;if(S&&La(e)){if(!La(t))return!1;a=!0,k=!1}if(S&&!k)return o||(o=new Ln),a||Xa(e)?qi(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case O:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case x:return!(e.byteLength!=t.byteLength||!o(new De(e),new De(t)));case c:case f:case y:return Ta(+e,+t);case h:return e.name==t.name&&e.message==t.message;case g:case w:return e==t+"";case m:var s=Ut;case b:var u=1&r;if(s||(s=qt),e.size!=t.size&&!u)return!1;var l=a.get(e);if(l)return l==t;r|=2,a.set(e,t);var d=qi(s(e),s(t),r,i,o,a);return a.delete(e),d;case _:if(En)return En.call(e)==En.call(t)}return!1}(e,t,d,n,r,i,o);if(!(1&n)){var E=k&&xe.call(e,"__wrapped__"),j=P&&xe.call(t,"__wrapped__");if(E||j){var C=E?e.value():e,T=j?t.value():t;return o||(o=new Ln),i(C,T,n,r,o)}}if(!S)return!1;return o||(o=new Ln),function(e,t,n,r,i,o){var a=1&n,s=Hi(e),u=s.length,l=Hi(t).length;if(u!=l&&!a)return!1;var c=u;for(;c--;){var f=s[c];if(!(a?f in t:xe.call(t,f)))return!1}var h=o.get(e),d=o.get(t);if(h&&d)return h==t&&d==e;var p=!0;o.set(e,t),o.set(t,e);var m=a;for(;++c<u;){f=s[c];var y=e[f],v=t[f];if(r)var g=a?r(v,y,f,t,e,o):r(y,v,f,e,t,o);if(!(void 0===g?y===v||i(y,v,n,r,o):g)){p=!1;break}m||(m="constructor"==f)}if(p&&!m){var b=e.constructor,w=t.constructor;b==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,r,i,o)}(e,t,n,r,_r,i))}function kr(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=pe(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=n[i])[0],l=e[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in e))return!1}else{var f=new Ln;if(r)var h=r(l,c,u,e,t,f);if(!(void 0===h?_r(c,l,3,r,f):h))return!1}}return!0}function xr(e){return!(!qa(e)||(t=e,Pe&&Pe in t))&&(Ua(e)?Ce:ae).test(jo(e));var t}function Or(e){return"function"==typeof e?e:null==e?Ks:"object"==typeof e?Da(e)?Tr(e[0],e[1]):Cr(e):nu(e)}function Pr(e){if(!ho(e))return an(e);var t=[];for(var n in pe(e))xe.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Sr(e){if(!qa(e))return function(e){var t=[];if(null!=e)for(var n in pe(e))t.push(n);return t}(e);var t=ho(e),n=[];for(var r in e)("constructor"!=r||!t&&xe.call(e,r))&&n.push(r);return n}function Er(e,t){return e<t}function jr(e,t){var n=-1,i=Ba(e)?r(e.length):[];return tr(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}function Cr(e){var t=Xi(e);return 1==t.length&&t[0][2]?mo(t[0][0],t[0][1]):function(n){return n===e||kr(n,e,t)}}function Tr(e,t){return lo(e)&&po(t)?mo(Eo(e),t):function(n){var r=ys(n,e);return void 0===r&&r===t?vs(n,e):_r(t,r,3)}}function Ar(e,t,n,r,i){e!==t&&sr(t,(function(o,a){if(i||(i=new Ln),qa(o))!function(e,t,n,r,i,o,a){var s=bo(e,n),u=bo(t,n),l=a.get(u);if(l)return void Vn(e,n,l);var c=o?o(s,u,n+"",e,t,a):void 0,f=void 0===c;if(f){var h=Da(u),d=!h&&La(u),p=!h&&!d&&Xa(u);c=u,h||d||p?Da(s)?c=s:Ma(s)?c=gi(s):d?(f=!1,c=hi(u,!0)):p?(f=!1,c=pi(u,!0)):c=[]:Ga(u)||Ia(u)?(c=s,Ia(s)?c=ss(s):qa(s)&&!Ua(s)||(c=oo(u))):f=!1}f&&(a.set(u,c),i(c,u,r,o,a),a.delete(u));Vn(e,n,c)}(e,t,a,n,Ar,r,i);else{var s=r?r(bo(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),Vn(e,a,s)}}),ks)}function zr(e,t){var n=e.length;if(n)return so(t+=t<0?n:0,n)?e[t]:void 0}function Ir(e,t,n){t=t.length?dt(t,(function(e){return Da(e)?function(t){return hr(t,1===e.length?e[0]:e)}:e})):[Ks];var r=-1;return t=dt(t,At(Yi())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(jr(e,(function(e,n,i){return{criteria:dt(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var u=mi(i[r],o[r]);if(u){if(r>=s)return u;var l=n[r];return u*("desc"==l?-1:1)}}return e.index-t.index}(e,t,n)}))}function Dr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=hr(e,a);n(s,a)&&$r(o,ui(a,e),s)}return o}function Rr(e,t,n,r){var i=r?kt:_t,o=-1,a=t.length,s=e;for(e===t&&(t=gi(t)),n&&(s=dt(e,At(n)));++o<a;)for(var u=0,l=t[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==e&&Ge.call(s,u,1),Ge.call(e,u,1);return e}function Br(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;so(i)?Ge.call(e,i,1):ei(e,i)}}return e}function Mr(e,t){return e+en(fn()*(t-e+1))}function Lr(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=en(t/2))&&(e+=e)}while(t);return n}function Fr(e,t){return ko(yo(e,t,Ks),e+"")}function Nr(e){return Nn(Ts(e))}function Ur(e,t){var n=Ts(e);return Po(n,Zn(t,0,n.length))}function $r(e,t,n,r){if(!qa(e))return e;for(var i=-1,o=(t=ui(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var u=Eo(t[i]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=a){var c=s[u];void 0===(l=r?r(c,u,s):void 0)&&(l=qa(c)?c:so(t[i+1])?[]:{})}qn(s,u,l),s=s[u]}return e}var Vr=bn?function(e,t){return bn.set(e,t),e}:Ks,qr=gt?function(e,t){return gt(e,"toString",{configurable:!0,enumerable:!1,value:qs(t),writable:!0})}:Ks;function Wr(e){return Po(Ts(e))}function Hr(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=r(o);++i<o;)a[i]=e[i+t];return a}function Kr(e,t){var n;return tr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function Gr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!Qa(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return Jr(e,t,Ks,n)}function Jr(e,t,n,r){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=n(t))!=t,s=null===t,u=Qa(t),l=void 0===t;i<o;){var c=en((i+o)/2),f=n(e[c]),h=void 0!==f,d=null===f,p=f==f,m=Qa(f);if(a)var y=r||p;else y=l?p&&(r||h):s?p&&h&&(r||!d):u?p&&h&&!d&&(r||!m):!d&&!m&&(r?f<=t:f<t);y?i=c+1:o=c}return un(o,4294967294)}function Zr(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Ta(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Yr(e){return"number"==typeof e?e:Qa(e)?NaN:+e}function Qr(e){if("string"==typeof e)return e;if(Da(e))return dt(e,Qr)+"";if(Qa(e))return jn?jn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Xr(e,t,n){var r=-1,i=ft,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=ht;else if(o>=200){var l=t?null:Li(e);if(l)return qt(l);a=!1,i=It,u=new Mn}else u=t?[]:s;e:for(;++r<o;){var c=e[r],f=t?t(c):c;if(c=n||0!==c?c:0,a&&f==f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),s.push(c)}else i(u,f,n)||(u!==s&&u.push(f),s.push(c))}return s}function ei(e,t){return null==(e=vo(e,t=ui(t,e)))||delete e[Eo(No(t))]}function ti(e,t,n,r){return $r(e,t,n(hr(e,t)),r)}function ni(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Hr(e,r?0:o,r?o+1:i):Hr(e,r?o+1:0,r?i:o)}function ri(e,t){var n=e;return n instanceof In&&(n=n.value()),mt(t,(function(e,t){return t.func.apply(t.thisArg,pt([e],t.args))}),n)}function ii(e,t,n){var i=e.length;if(i<2)return i?Xr(e[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=e[o],u=-1;++u<i;)u!=o&&(a[o]=er(a[o]||s,e[u],t,n));return Xr(ar(a,1),t,n)}function oi(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:void 0;n(a,e[r],s)}return a}function ai(e){return Ma(e)?e:[]}function si(e){return"function"==typeof e?e:Ks}function ui(e,t){return Da(e)?e:lo(e,t)?[e]:So(us(e))}var li=Fr;function ci(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Hr(e,t,n)}var fi=St||function(e){return Ke.clearTimeout(e)};function hi(e,t){if(t)return e.slice();var n=e.length,r=Be?Be(n):new e.constructor(n);return e.copy(r),r}function di(e){var t=new e.constructor(e.byteLength);return new De(t).set(new De(e)),t}function pi(e,t){var n=t?di(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function mi(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=Qa(e),a=void 0!==t,s=null===t,u=t==t,l=Qa(t);if(!s&&!l&&!o&&e>t||o&&a&&u&&!s&&!l||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&e<t||l&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function yi(e,t,n,i){for(var o=-1,a=e.length,s=n.length,u=-1,l=t.length,c=sn(a-s,0),f=r(l+c),h=!i;++u<l;)f[u]=t[u];for(;++o<s;)(h||o<a)&&(f[n[o]]=e[o]);for(;c--;)f[u++]=e[o++];return f}function vi(e,t,n,i){for(var o=-1,a=e.length,s=-1,u=n.length,l=-1,c=t.length,f=sn(a-u,0),h=r(f+c),d=!i;++o<f;)h[o]=e[o];for(var p=o;++l<c;)h[p+l]=t[l];for(;++s<u;)(d||o<a)&&(h[p+n[s]]=e[o++]);return h}function gi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function bi(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),i?Gn(n,s,u):qn(n,s,u)}return n}function wi(e,t){return function(n,r){var i=Da(n)?at:Hn,o=t?t():{};return i(n,e,Yi(r,2),o)}}function _i(e){return Fr((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&uo(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=pe(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}function ki(e,t){return function(n,r){if(null==n)return n;if(!Ba(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=pe(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function xi(e){return function(t,n,r){for(var i=-1,o=pe(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function Oi(e){return function(t){var n=Nt(t=us(t))?Kt(t):void 0,r=n?n[0]:t.charAt(0),i=n?ci(n,1).join(""):t.slice(1);return r[e]()+i}}function Pi(e){return function(t){return mt(Us(Is(t).replace(ze,"")),e,"")}}function Si(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Tn(e.prototype),r=e.apply(n,t);return qa(r)?r:n}}function Ei(e){return function(t,n,r){var i=pe(t);if(!Ba(t)){var o=Yi(n,3);t=_s(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:void 0}}function ji(e){return Wi((function(t){var n=t.length,r=n,i=zn.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new ve(o);if(i&&!s&&"wrapper"==Ji(a))var s=new zn([],!0)}for(r=s?r:n;++r<n;){var u=Ji(a=t[r]),l="wrapper"==u?Gi(a):void 0;s=l&&co(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?s[Ji(l[0])].apply(s,l[3]):1==a.length&&co(a)?s[u]():s.thru(a)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&Da(r))return s.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Ci(e,t,n,i,o,a,s,u,l,c){var f=128&t,h=1&t,d=2&t,p=24&t,m=512&t,y=d?void 0:Si(e);return function v(){for(var g=arguments.length,b=r(g),w=g;w--;)b[w]=arguments[w];if(p)var _=Zi(v),k=Bt(b,_);if(i&&(b=yi(b,i,o,p)),a&&(b=vi(b,a,s,p)),g-=k,p&&g<c){var x=Vt(b,_);return Bi(e,t,Ci,v.placeholder,n,b,x,u,l,c-g)}var O=h?n:this,P=d?O[e]:e;return g=b.length,u?b=go(b,u):m&&g>1&&b.reverse(),f&&l<g&&(b.length=l),this&&this!==Ke&&this instanceof v&&(P=y||Si(P)),P.apply(O,b)}}function Ti(e,t){return function(n,r){return function(e,t,n,r){return lr(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Ai(e,t){return function(n,r){var i;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Qr(n),r=Qr(r)):(n=Yr(n),r=Yr(r)),i=e(n,r)}return i}}function zi(e){return Wi((function(t){return t=dt(t,At(Yi())),Fr((function(n){var r=this;return e(t,(function(e){return ot(e,r,n)}))}))}))}function Ii(e,t){var n=(t=void 0===t?" ":Qr(t)).length;if(n<2)return n?Lr(t,e):t;var r=Lr(t,Xt(e/Ht(t)));return Nt(t)?ci(Kt(r),0,e).join(""):r.slice(0,e)}function Di(e){return function(t,n,i){return i&&"number"!=typeof i&&uo(t,n,i)&&(n=i=void 0),t=rs(t),void 0===n?(n=t,t=0):n=rs(n),function(e,t,n,i){for(var o=-1,a=sn(Xt((t-e)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=e,e+=n;return s}(t,n,i=void 0===i?t<n?1:-1:rs(i),e)}}function Ri(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=as(t),n=as(n)),e(t,n)}}function Bi(e,t,n,r,i,o,a,s,u,l){var c=8&t;t|=c?32:64,4&(t&=~(c?64:32))||(t&=-4);var f=[e,t,i,c?o:void 0,c?a:void 0,c?void 0:o,c?void 0:a,s,u,l],h=n.apply(void 0,f);return co(e)&&wo(h,f),h.placeholder=r,xo(h,e,t)}function Mi(e){var t=de[e];return function(e,n){if(e=as(e),(n=null==n?0:un(is(n),292))&&rn(e)){var r=(us(e)+"e").split("e");return+((r=(us(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Li=yn&&1/qt(new yn([,-0]))[1]==1/0?function(e){return new yn(e)}:Qs;function Fi(e){return function(t){var n=ro(t);return n==m?Ut(t):n==b?Wt(t):function(e,t){return dt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ni(e,t,n,i,s,u,l,c){var f=2&t;if(!f&&"function"!=typeof e)throw new ve(o);var h=i?i.length:0;if(h||(t&=-97,i=s=void 0),l=void 0===l?l:sn(is(l),0),c=void 0===c?c:is(c),h-=s?s.length:0,64&t){var d=i,p=s;i=s=void 0}var m=f?void 0:Gi(e),y=[e,t,n,i,s,d,p,u,l,c];if(m&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,s=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!s)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var l=e[3];e[3]=l?yi(l,u,t[4]):u,e[4]=l?Vt(e[3],a):t[4]}(u=t[5])&&(l=e[5],e[5]=l?vi(l,u,t[6]):u,e[6]=l?Vt(e[5],a):t[6]);(u=t[7])&&(e[7]=u);128&r&&(e[8]=null==e[8]?t[8]:un(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(y,m),e=y[0],t=y[1],n=y[2],i=y[3],s=y[4],!(c=y[9]=void 0===y[9]?f?0:e.length:sn(y[9]-h,0))&&24&t&&(t&=-25),t&&1!=t)v=8==t||16==t?function(e,t,n){var i=Si(e);return function o(){for(var a=arguments.length,s=r(a),u=a,l=Zi(o);u--;)s[u]=arguments[u];var c=a<3&&s[0]!==l&&s[a-1]!==l?[]:Vt(s,l);if((a-=c.length)<n)return Bi(e,t,Ci,o.placeholder,void 0,s,c,void 0,void 0,n-a);var f=this&&this!==Ke&&this instanceof o?i:e;return ot(f,this,s)}}(e,t,c):32!=t&&33!=t||s.length?Ci.apply(void 0,y):function(e,t,n,i){var o=1&t,a=Si(e);return function t(){for(var s=-1,u=arguments.length,l=-1,c=i.length,f=r(c+u),h=this&&this!==Ke&&this instanceof t?a:e;++l<c;)f[l]=i[l];for(;u--;)f[l++]=arguments[++s];return ot(h,o?n:this,f)}}(e,t,n,i);else var v=function(e,t,n){var r=1&t,i=Si(e);return function t(){var o=this&&this!==Ke&&this instanceof t?i:e;return o.apply(r?n:this,arguments)}}(e,t,n);return xo((m?Vr:wo)(v,y),e,t)}function Ui(e,t,n,r){return void 0===e||Ta(e,we[n])&&!xe.call(r,n)?t:e}function $i(e,t,n,r,i,o){return qa(e)&&qa(t)&&(o.set(t,e),Ar(e,t,void 0,$i,o),o.delete(t)),e}function Vi(e){return Ga(e)?void 0:e}function qi(e,t,n,r,i,o){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(e),c=o.get(t);if(l&&c)return l==t&&c==e;var f=-1,h=!0,d=2&n?new Mn:void 0;for(o.set(e,t),o.set(t,e);++f<s;){var p=e[f],m=t[f];if(r)var y=a?r(m,p,f,t,e,o):r(p,m,f,e,t,o);if(void 0!==y){if(y)continue;h=!1;break}if(d){if(!vt(t,(function(e,t){if(!It(d,t)&&(p===e||i(p,e,n,r,o)))return d.push(t)}))){h=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Wi(e){return ko(yo(e,void 0,Ro),e+"")}function Hi(e){return dr(e,_s,to)}function Ki(e){return dr(e,ks,no)}var Gi=bn?function(e){return bn.get(e)}:Qs;function Ji(e){for(var t=e.name+"",n=wn[t],r=xe.call(wn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Zi(e){return(xe.call(Cn,"placeholder")?Cn:e).placeholder}function Yi(){var e=Cn.iteratee||Gs;return e=e===Gs?Or:e,arguments.length?e(arguments[0],arguments[1]):e}function Qi(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Xi(e){for(var t=_s(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,po(i)]}return t}function eo(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return xr(n)?n:void 0}var to=tn?function(e){return null==e?[]:(e=pe(e),ct(tn(e),(function(t){return He.call(e,t)})))}:ou,no=tn?function(e){for(var t=[];e;)pt(t,to(e)),e=$e(e);return t}:ou,ro=pr;function io(e,t,n){for(var r=-1,i=(t=ui(t,e)).length,o=!1;++r<i;){var a=Eo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Va(i)&&so(a,i)&&(Da(e)||Ia(e))}function oo(e){return"function"!=typeof e.constructor||ho(e)?{}:Tn($e(e))}function ao(e){return Da(e)||Ia(e)||!!(Je&&e&&e[Je])}function so(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ue.test(e))&&e>-1&&e%1==0&&e<t}function uo(e,t,n){if(!qa(n))return!1;var r=typeof t;return!!("number"==r?Ba(n)&&so(t,n.length):"string"==r&&t in n)&&Ta(n[t],e)}function lo(e,t){if(Da(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Qa(e))||(q.test(e)||!V.test(e)||null!=t&&e in pe(t))}function co(e){var t=Ji(e),n=Cn[t];if("function"!=typeof n||!(t in In.prototype))return!1;if(e===n)return!0;var r=Gi(n);return!!r&&e===r[0]}(dn&&ro(new dn(new ArrayBuffer(1)))!=O||pn&&ro(new pn)!=m||mn&&"[object Promise]"!=ro(mn.resolve())||yn&&ro(new yn)!=b||vn&&ro(new vn)!=k)&&(ro=function(e){var t=pr(e),n=t==v?e.constructor:void 0,r=n?jo(n):"";if(r)switch(r){case _n:return O;case kn:return m;case xn:return"[object Promise]";case On:return b;case Pn:return k}return t});var fo=_e?Ua:au;function ho(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||we)}function po(e){return e==e&&!qa(e)}function mo(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in pe(n)))}}function yo(e,t,n){return t=sn(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=sn(i.length-t,0),s=r(a);++o<a;)s[o]=i[t+o];o=-1;for(var u=r(t+1);++o<t;)u[o]=i[o];return u[t]=n(s),ot(e,this,u)}}function vo(e,t){return t.length<2?e:hr(e,Hr(t,0,-1))}function go(e,t){for(var n=e.length,r=un(t.length,n),i=gi(e);r--;){var o=t[r];e[r]=so(o,n)?i[o]:void 0}return e}function bo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var wo=Oo(Vr),_o=Qt||function(e,t){return Ke.setTimeout(e,t)},ko=Oo(qr);function xo(e,t,n){var r=t+"";return ko(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Z,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return st(s,(function(n){var r="_."+n[0];t&n[1]&&!ft(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(Y);return t?t[1].split(Q):[]}(r),n)))}function Oo(e){var t=0,n=0;return function(){var r=ln(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Po(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var o=Mr(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}var So=function(e){var t=Oa(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(W,(function(e,n,r,i){t.push(r?i.replace(te,"$1"):n||e)})),t}));function Eo(e){if("string"==typeof e||Qa(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function jo(e){if(null!=e){try{return ke.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Co(e){if(e instanceof In)return e.clone();var t=new zn(e.__wrapped__,e.__chain__);return t.__actions__=gi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var To=Fr((function(e,t){return Ma(e)?er(e,ar(t,1,Ma,!0)):[]})),Ao=Fr((function(e,t){var n=No(t);return Ma(n)&&(n=void 0),Ma(e)?er(e,ar(t,1,Ma,!0),Yi(n,2)):[]})),zo=Fr((function(e,t){var n=No(t);return Ma(n)&&(n=void 0),Ma(e)?er(e,ar(t,1,Ma,!0),void 0,n):[]}));function Io(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:is(n);return i<0&&(i=sn(r+i,0)),wt(e,Yi(t,3),i)}function Do(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=is(n),i=n<0?sn(r+i,0):un(i,r-1)),wt(e,Yi(t,3),i,!0)}function Ro(e){return(null==e?0:e.length)?ar(e,1):[]}function Bo(e){return e&&e.length?e[0]:void 0}var Mo=Fr((function(e){var t=dt(e,ai);return t.length&&t[0]===e[0]?gr(t):[]})),Lo=Fr((function(e){var t=No(e),n=dt(e,ai);return t===No(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?gr(n,Yi(t,2)):[]})),Fo=Fr((function(e){var t=No(e),n=dt(e,ai);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?gr(n,void 0,t):[]}));function No(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Uo=Fr($o);function $o(e,t){return e&&e.length&&t&&t.length?Rr(e,t):e}var Vo=Wi((function(e,t){var n=null==e?0:e.length,r=Jn(e,t);return Br(e,dt(t,(function(e){return so(e,n)?+e:e})).sort(mi)),r}));function qo(e){return null==e?e:hn.call(e)}var Wo=Fr((function(e){return Xr(ar(e,1,Ma,!0))})),Ho=Fr((function(e){var t=No(e);return Ma(t)&&(t=void 0),Xr(ar(e,1,Ma,!0),Yi(t,2))})),Ko=Fr((function(e){var t=No(e);return t="function"==typeof t?t:void 0,Xr(ar(e,1,Ma,!0),void 0,t)}));function Go(e){if(!e||!e.length)return[];var t=0;return e=ct(e,(function(e){if(Ma(e))return t=sn(e.length,t),!0})),Ct(t,(function(t){return dt(e,Pt(t))}))}function Jo(e,t){if(!e||!e.length)return[];var n=Go(e);return null==t?n:dt(n,(function(e){return ot(t,void 0,e)}))}var Zo=Fr((function(e,t){return Ma(e)?er(e,t):[]})),Yo=Fr((function(e){return ii(ct(e,Ma))})),Qo=Fr((function(e){var t=No(e);return Ma(t)&&(t=void 0),ii(ct(e,Ma),Yi(t,2))})),Xo=Fr((function(e){var t=No(e);return t="function"==typeof t?t:void 0,ii(ct(e,Ma),void 0,t)})),ea=Fr(Go);var ta=Fr((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Jo(e,n)}));function na(e){var t=Cn(e);return t.__chain__=!0,t}function ra(e,t){return t(e)}var ia=Wi((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return Jn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof In&&so(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:ra,args:[i],thisArg:void 0}),new zn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)}));var oa=wi((function(e,t,n){xe.call(e,n)?++e[n]:Gn(e,n,1)}));var aa=Ei(Io),sa=Ei(Do);function ua(e,t){return(Da(e)?st:tr)(e,Yi(t,3))}function la(e,t){return(Da(e)?ut:nr)(e,Yi(t,3))}var ca=wi((function(e,t,n){xe.call(e,n)?e[n].push(t):Gn(e,n,[t])}));var fa=Fr((function(e,t,n){var i=-1,o="function"==typeof t,a=Ba(e)?r(e.length):[];return tr(e,(function(e){a[++i]=o?ot(t,e,n):br(e,t,n)})),a})),ha=wi((function(e,t,n){Gn(e,n,t)}));function da(e,t){return(Da(e)?dt:jr)(e,Yi(t,3))}var pa=wi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var ma=Fr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&uo(e,t[0],t[1])?t=[]:n>2&&uo(t[0],t[1],t[2])&&(t=[t[0]]),Ir(e,ar(t,1),[])})),ya=Yt||function(){return Ke.Date.now()};function va(e,t,n){return t=n?void 0:t,Ni(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function ga(e,t){var n;if("function"!=typeof t)throw new ve(o);return e=is(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var ba=Fr((function(e,t,n){var r=1;if(n.length){var i=Vt(n,Zi(ba));r|=32}return Ni(e,r,t,n,i)})),wa=Fr((function(e,t,n){var r=3;if(n.length){var i=Vt(n,Zi(wa));r|=32}return Ni(t,r,e,n,i)}));function _a(e,t,n){var r,i,a,s,u,l,c=0,f=!1,h=!1,d=!0;if("function"!=typeof e)throw new ve(o);function p(t){var n=r,o=i;return r=i=void 0,c=t,s=e.apply(o,n)}function m(e){return c=e,u=_o(v,t),f?p(e):s}function y(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=a}function v(){var e=ya();if(y(e))return g(e);u=_o(v,function(e){var n=t-(e-l);return h?un(n,a-(e-c)):n}(e))}function g(e){return u=void 0,d&&r?p(e):(r=i=void 0,s)}function b(){var e=ya(),n=y(e);if(r=arguments,i=this,l=e,n){if(void 0===u)return m(l);if(h)return fi(u),u=_o(v,t),p(l)}return void 0===u&&(u=_o(v,t)),s}return t=as(t)||0,qa(n)&&(f=!!n.leading,a=(h="maxWait"in n)?sn(as(n.maxWait)||0,t):a,d="trailing"in n?!!n.trailing:d),b.cancel=function(){void 0!==u&&fi(u),c=0,r=l=i=u=void 0},b.flush=function(){return void 0===u?s:g(ya())},b}var ka=Fr((function(e,t){return Xn(e,1,t)})),xa=Fr((function(e,t,n){return Xn(e,as(t)||0,n)}));function Oa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ve(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Oa.Cache||Bn),n}function Pa(e){if("function"!=typeof e)throw new ve(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Oa.Cache=Bn;var Sa=li((function(e,t){var n=(t=1==t.length&&Da(t[0])?dt(t[0],At(Yi())):dt(ar(t,1),At(Yi()))).length;return Fr((function(r){for(var i=-1,o=un(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return ot(e,this,r)}))})),Ea=Fr((function(e,t){return Ni(e,32,void 0,t,Vt(t,Zi(Ea)))})),ja=Fr((function(e,t){return Ni(e,64,void 0,t,Vt(t,Zi(ja)))})),Ca=Wi((function(e,t){return Ni(e,256,void 0,void 0,void 0,t)}));function Ta(e,t){return e===t||e!=e&&t!=t}var Aa=Ri(mr),za=Ri((function(e,t){return e>=t})),Ia=wr(function(){return arguments}())?wr:function(e){return Wa(e)&&xe.call(e,"callee")&&!He.call(e,"callee")},Da=r.isArray,Ra=Xe?At(Xe):function(e){return Wa(e)&&pr(e)==x};function Ba(e){return null!=e&&Va(e.length)&&!Ua(e)}function Ma(e){return Wa(e)&&Ba(e)}var La=nn||au,Fa=et?At(et):function(e){return Wa(e)&&pr(e)==f};function Na(e){if(!Wa(e))return!1;var t=pr(e);return t==h||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Ga(e)}function Ua(e){if(!qa(e))return!1;var t=pr(e);return t==d||t==p||"[object AsyncFunction]"==t||"[object Proxy]"==t}function $a(e){return"number"==typeof e&&e==is(e)}function Va(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function qa(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Wa(e){return null!=e&&"object"==typeof e}var Ha=tt?At(tt):function(e){return Wa(e)&&ro(e)==m};function Ka(e){return"number"==typeof e||Wa(e)&&pr(e)==y}function Ga(e){if(!Wa(e)||pr(e)!=v)return!1;var t=$e(e);if(null===t)return!0;var n=xe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ke.call(n)==Ee}var Ja=nt?At(nt):function(e){return Wa(e)&&pr(e)==g};var Za=rt?At(rt):function(e){return Wa(e)&&ro(e)==b};function Ya(e){return"string"==typeof e||!Da(e)&&Wa(e)&&pr(e)==w}function Qa(e){return"symbol"==typeof e||Wa(e)&&pr(e)==_}var Xa=it?At(it):function(e){return Wa(e)&&Va(e.length)&&!!Ne[pr(e)]};var es=Ri(Er),ts=Ri((function(e,t){return e<=t}));function ns(e){if(!e)return[];if(Ba(e))return Ya(e)?Kt(e):gi(e);if(Ye&&e[Ye])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ye]());var t=ro(e);return(t==m?Ut:t==b?qt:Ts)(e)}function rs(e){return e?(e=as(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function is(e){var t=rs(e),n=t%1;return t==t?n?t-n:t:0}function os(e){return e?Zn(is(e),0,4294967295):0}function as(e){if("number"==typeof e)return e;if(Qa(e))return NaN;if(qa(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=qa(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Tt(e);var n=oe.test(e);return n||se.test(e)?qe(e.slice(2),n?2:8):ie.test(e)?NaN:+e}function ss(e){return bi(e,ks(e))}function us(e){return null==e?"":Qr(e)}var ls=_i((function(e,t){if(ho(t)||Ba(t))bi(t,_s(t),e);else for(var n in t)xe.call(t,n)&&qn(e,n,t[n])})),cs=_i((function(e,t){bi(t,ks(t),e)})),fs=_i((function(e,t,n,r){bi(t,ks(t),e,r)})),hs=_i((function(e,t,n,r){bi(t,_s(t),e,r)})),ds=Wi(Jn);var ps=Fr((function(e,t){e=pe(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&uo(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=ks(o),s=-1,u=a.length;++s<u;){var l=a[s],c=e[l];(void 0===c||Ta(c,we[l])&&!xe.call(e,l))&&(e[l]=o[l])}return e})),ms=Fr((function(e){return e.push(void 0,$i),ot(Os,void 0,e)}));function ys(e,t,n){var r=null==e?void 0:hr(e,t);return void 0===r?n:r}function vs(e,t){return null!=e&&io(e,t,vr)}var gs=Ti((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Se.call(t)),e[t]=n}),qs(Ks)),bs=Ti((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Se.call(t)),xe.call(e,t)?e[t].push(n):e[t]=[n]}),Yi),ws=Fr(br);function _s(e){return Ba(e)?Fn(e):Pr(e)}function ks(e){return Ba(e)?Fn(e,!0):Sr(e)}var xs=_i((function(e,t,n){Ar(e,t,n)})),Os=_i((function(e,t,n,r){Ar(e,t,n,r)})),Ps=Wi((function(e,t){var n={};if(null==e)return n;var r=!1;t=dt(t,(function(t){return t=ui(t,e),r||(r=t.length>1),t})),bi(e,Ki(e),n),r&&(n=Yn(n,7,Vi));for(var i=t.length;i--;)ei(n,t[i]);return n}));var Ss=Wi((function(e,t){return null==e?{}:function(e,t){return Dr(e,t,(function(t,n){return vs(e,n)}))}(e,t)}));function Es(e,t){if(null==e)return{};var n=dt(Ki(e),(function(e){return[e]}));return t=Yi(t),Dr(e,n,(function(e,n){return t(e,n[0])}))}var js=Fi(_s),Cs=Fi(ks);function Ts(e){return null==e?[]:zt(e,_s(e))}var As=Pi((function(e,t,n){return t=t.toLowerCase(),e+(n?zs(t):t)}));function zs(e){return Ns(us(e).toLowerCase())}function Is(e){return(e=us(e))&&e.replace(le,Mt).replace(Ie,"")}var Ds=Pi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Rs=Pi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Bs=Oi("toLowerCase");var Ms=Pi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ls=Pi((function(e,t,n){return e+(n?" ":"")+Ns(t)}));var Fs=Pi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ns=Oi("toUpperCase");function Us(e,t,n){return e=us(e),void 0===(t=n?void 0:t)?function(e){return Me.test(e)}(e)?function(e){return e.match(Re)||[]}(e):function(e){return e.match(X)||[]}(e):e.match(t)||[]}var $s=Fr((function(e,t){try{return ot(e,void 0,t)}catch(e){return Na(e)?e:new J(e)}})),Vs=Wi((function(e,t){return st(t,(function(t){t=Eo(t),Gn(e,t,ba(e[t],e))})),e}));function qs(e){return function(){return e}}var Ws=ji(),Hs=ji(!0);function Ks(e){return e}function Gs(e){return Or("function"==typeof e?e:Yn(e,1))}var Js=Fr((function(e,t){return function(n){return br(n,e,t)}})),Zs=Fr((function(e,t){return function(n){return br(e,n,t)}}));function Ys(e,t,n){var r=_s(t),i=fr(t,r);null!=n||qa(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=fr(t,_s(t)));var o=!(qa(n)&&"chain"in n&&!n.chain),a=Ua(e);return st(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=gi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,pt([this.value()],arguments))})})),e}function Qs(){}var Xs=zi(dt),eu=zi(lt),tu=zi(vt);function nu(e){return lo(e)?Pt(Eo(e)):function(e){return function(t){return hr(t,e)}}(e)}var ru=Di(),iu=Di(!0);function ou(){return[]}function au(){return!1}var su=Ai((function(e,t){return e+t}),0),uu=Mi("ceil"),lu=Ai((function(e,t){return e/t}),1),cu=Mi("floor");var fu,hu=Ai((function(e,t){return e*t}),1),du=Mi("round"),pu=Ai((function(e,t){return e-t}),0);return Cn.after=function(e,t){if("function"!=typeof t)throw new ve(o);return e=is(e),function(){if(--e<1)return t.apply(this,arguments)}},Cn.ary=va,Cn.assign=ls,Cn.assignIn=cs,Cn.assignInWith=fs,Cn.assignWith=hs,Cn.at=ds,Cn.before=ga,Cn.bind=ba,Cn.bindAll=Vs,Cn.bindKey=wa,Cn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Da(e)?e:[e]},Cn.chain=na,Cn.chunk=function(e,t,n){t=(n?uo(e,t,n):void 0===t)?1:sn(is(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,a=0,s=r(Xt(i/t));o<i;)s[a++]=Hr(e,o,o+=t);return s},Cn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Cn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return pt(Da(n)?gi(n):[n],ar(t,1))},Cn.cond=function(e){var t=null==e?0:e.length,n=Yi();return e=t?dt(e,(function(e){if("function"!=typeof e[1])throw new ve(o);return[n(e[0]),e[1]]})):[],Fr((function(n){for(var r=-1;++r<t;){var i=e[r];if(ot(i[0],this,n))return ot(i[1],this,n)}}))},Cn.conforms=function(e){return function(e){var t=_s(e);return function(n){return Qn(n,e,t)}}(Yn(e,1))},Cn.constant=qs,Cn.countBy=oa,Cn.create=function(e,t){var n=Tn(e);return null==t?n:Kn(n,t)},Cn.curry=function e(t,n,r){var i=Ni(t,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Cn.curryRight=function e(t,n,r){var i=Ni(t,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Cn.debounce=_a,Cn.defaults=ps,Cn.defaultsDeep=ms,Cn.defer=ka,Cn.delay=xa,Cn.difference=To,Cn.differenceBy=Ao,Cn.differenceWith=zo,Cn.drop=function(e,t,n){var r=null==e?0:e.length;return r?Hr(e,(t=n||void 0===t?1:is(t))<0?0:t,r):[]},Cn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Hr(e,0,(t=r-(t=n||void 0===t?1:is(t)))<0?0:t):[]},Cn.dropRightWhile=function(e,t){return e&&e.length?ni(e,Yi(t,3),!0,!0):[]},Cn.dropWhile=function(e,t){return e&&e.length?ni(e,Yi(t,3),!0):[]},Cn.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&uo(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=is(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:is(r))<0&&(r+=i),r=n>r?0:os(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Cn.filter=function(e,t){return(Da(e)?ct:or)(e,Yi(t,3))},Cn.flatMap=function(e,t){return ar(da(e,t),1)},Cn.flatMapDeep=function(e,t){return ar(da(e,t),1/0)},Cn.flatMapDepth=function(e,t,n){return n=void 0===n?1:is(n),ar(da(e,t),n)},Cn.flatten=Ro,Cn.flattenDeep=function(e){return(null==e?0:e.length)?ar(e,1/0):[]},Cn.flattenDepth=function(e,t){return(null==e?0:e.length)?ar(e,t=void 0===t?1:is(t)):[]},Cn.flip=function(e){return Ni(e,512)},Cn.flow=Ws,Cn.flowRight=Hs,Cn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Cn.functions=function(e){return null==e?[]:fr(e,_s(e))},Cn.functionsIn=function(e){return null==e?[]:fr(e,ks(e))},Cn.groupBy=ca,Cn.initial=function(e){return(null==e?0:e.length)?Hr(e,0,-1):[]},Cn.intersection=Mo,Cn.intersectionBy=Lo,Cn.intersectionWith=Fo,Cn.invert=gs,Cn.invertBy=bs,Cn.invokeMap=fa,Cn.iteratee=Gs,Cn.keyBy=ha,Cn.keys=_s,Cn.keysIn=ks,Cn.map=da,Cn.mapKeys=function(e,t){var n={};return t=Yi(t,3),lr(e,(function(e,r,i){Gn(n,t(e,r,i),e)})),n},Cn.mapValues=function(e,t){var n={};return t=Yi(t,3),lr(e,(function(e,r,i){Gn(n,r,t(e,r,i))})),n},Cn.matches=function(e){return Cr(Yn(e,1))},Cn.matchesProperty=function(e,t){return Tr(e,Yn(t,1))},Cn.memoize=Oa,Cn.merge=xs,Cn.mergeWith=Os,Cn.method=Js,Cn.methodOf=Zs,Cn.mixin=Ys,Cn.negate=Pa,Cn.nthArg=function(e){return e=is(e),Fr((function(t){return zr(t,e)}))},Cn.omit=Ps,Cn.omitBy=function(e,t){return Es(e,Pa(Yi(t)))},Cn.once=function(e){return ga(2,e)},Cn.orderBy=function(e,t,n,r){return null==e?[]:(Da(t)||(t=null==t?[]:[t]),Da(n=r?void 0:n)||(n=null==n?[]:[n]),Ir(e,t,n))},Cn.over=Xs,Cn.overArgs=Sa,Cn.overEvery=eu,Cn.overSome=tu,Cn.partial=Ea,Cn.partialRight=ja,Cn.partition=pa,Cn.pick=Ss,Cn.pickBy=Es,Cn.property=nu,Cn.propertyOf=function(e){return function(t){return null==e?void 0:hr(e,t)}},Cn.pull=Uo,Cn.pullAll=$o,Cn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Rr(e,t,Yi(n,2)):e},Cn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Rr(e,t,void 0,n):e},Cn.pullAt=Vo,Cn.range=ru,Cn.rangeRight=iu,Cn.rearg=Ca,Cn.reject=function(e,t){return(Da(e)?ct:or)(e,Pa(Yi(t,3)))},Cn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=Yi(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Br(e,i),n},Cn.rest=function(e,t){if("function"!=typeof e)throw new ve(o);return Fr(e,t=void 0===t?t:is(t))},Cn.reverse=qo,Cn.sampleSize=function(e,t,n){return t=(n?uo(e,t,n):void 0===t)?1:is(t),(Da(e)?Un:Ur)(e,t)},Cn.set=function(e,t,n){return null==e?e:$r(e,t,n)},Cn.setWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:$r(e,t,n,r)},Cn.shuffle=function(e){return(Da(e)?$n:Wr)(e)},Cn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&uo(e,t,n)?(t=0,n=r):(t=null==t?0:is(t),n=void 0===n?r:is(n)),Hr(e,t,n)):[]},Cn.sortBy=ma,Cn.sortedUniq=function(e){return e&&e.length?Zr(e):[]},Cn.sortedUniqBy=function(e,t){return e&&e.length?Zr(e,Yi(t,2)):[]},Cn.split=function(e,t,n){return n&&"number"!=typeof n&&uo(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=us(e))&&("string"==typeof t||null!=t&&!Ja(t))&&!(t=Qr(t))&&Nt(e)?ci(Kt(e),0,n):e.split(t,n):[]},Cn.spread=function(e,t){if("function"!=typeof e)throw new ve(o);return t=null==t?0:sn(is(t),0),Fr((function(n){var r=n[t],i=ci(n,0,t);return r&&pt(i,r),ot(e,this,i)}))},Cn.tail=function(e){var t=null==e?0:e.length;return t?Hr(e,1,t):[]},Cn.take=function(e,t,n){return e&&e.length?Hr(e,0,(t=n||void 0===t?1:is(t))<0?0:t):[]},Cn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Hr(e,(t=r-(t=n||void 0===t?1:is(t)))<0?0:t,r):[]},Cn.takeRightWhile=function(e,t){return e&&e.length?ni(e,Yi(t,3),!1,!0):[]},Cn.takeWhile=function(e,t){return e&&e.length?ni(e,Yi(t,3)):[]},Cn.tap=function(e,t){return t(e),e},Cn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new ve(o);return qa(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),_a(e,t,{leading:r,maxWait:t,trailing:i})},Cn.thru=ra,Cn.toArray=ns,Cn.toPairs=js,Cn.toPairsIn=Cs,Cn.toPath=function(e){return Da(e)?dt(e,Eo):Qa(e)?[e]:gi(So(us(e)))},Cn.toPlainObject=ss,Cn.transform=function(e,t,n){var r=Da(e),i=r||La(e)||Xa(e);if(t=Yi(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:qa(e)&&Ua(o)?Tn($e(e)):{}}return(i?st:lr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Cn.unary=function(e){return va(e,1)},Cn.union=Wo,Cn.unionBy=Ho,Cn.unionWith=Ko,Cn.uniq=function(e){return e&&e.length?Xr(e):[]},Cn.uniqBy=function(e,t){return e&&e.length?Xr(e,Yi(t,2)):[]},Cn.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Xr(e,void 0,t):[]},Cn.unset=function(e,t){return null==e||ei(e,t)},Cn.unzip=Go,Cn.unzipWith=Jo,Cn.update=function(e,t,n){return null==e?e:ti(e,t,si(n))},Cn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:ti(e,t,si(n),r)},Cn.values=Ts,Cn.valuesIn=function(e){return null==e?[]:zt(e,ks(e))},Cn.without=Zo,Cn.words=Us,Cn.wrap=function(e,t){return Ea(si(t),e)},Cn.xor=Yo,Cn.xorBy=Qo,Cn.xorWith=Xo,Cn.zip=ea,Cn.zipObject=function(e,t){return oi(e||[],t||[],qn)},Cn.zipObjectDeep=function(e,t){return oi(e||[],t||[],$r)},Cn.zipWith=ta,Cn.entries=js,Cn.entriesIn=Cs,Cn.extend=cs,Cn.extendWith=fs,Ys(Cn,Cn),Cn.add=su,Cn.attempt=$s,Cn.camelCase=As,Cn.capitalize=zs,Cn.ceil=uu,Cn.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=as(n))==n?n:0),void 0!==t&&(t=(t=as(t))==t?t:0),Zn(as(e),t,n)},Cn.clone=function(e){return Yn(e,4)},Cn.cloneDeep=function(e){return Yn(e,5)},Cn.cloneDeepWith=function(e,t){return Yn(e,5,t="function"==typeof t?t:void 0)},Cn.cloneWith=function(e,t){return Yn(e,4,t="function"==typeof t?t:void 0)},Cn.conformsTo=function(e,t){return null==t||Qn(e,t,_s(t))},Cn.deburr=Is,Cn.defaultTo=function(e,t){return null==e||e!=e?t:e},Cn.divide=lu,Cn.endsWith=function(e,t,n){e=us(e),t=Qr(t);var r=e.length,i=n=void 0===n?r:Zn(is(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},Cn.eq=Ta,Cn.escape=function(e){return(e=us(e))&&F.test(e)?e.replace(M,Lt):e},Cn.escapeRegExp=function(e){return(e=us(e))&&K.test(e)?e.replace(H,"\\$&"):e},Cn.every=function(e,t,n){var r=Da(e)?lt:rr;return n&&uo(e,t,n)&&(t=void 0),r(e,Yi(t,3))},Cn.find=aa,Cn.findIndex=Io,Cn.findKey=function(e,t){return bt(e,Yi(t,3),lr)},Cn.findLast=sa,Cn.findLastIndex=Do,Cn.findLastKey=function(e,t){return bt(e,Yi(t,3),cr)},Cn.floor=cu,Cn.forEach=ua,Cn.forEachRight=la,Cn.forIn=function(e,t){return null==e?e:sr(e,Yi(t,3),ks)},Cn.forInRight=function(e,t){return null==e?e:ur(e,Yi(t,3),ks)},Cn.forOwn=function(e,t){return e&&lr(e,Yi(t,3))},Cn.forOwnRight=function(e,t){return e&&cr(e,Yi(t,3))},Cn.get=ys,Cn.gt=Aa,Cn.gte=za,Cn.has=function(e,t){return null!=e&&io(e,t,yr)},Cn.hasIn=vs,Cn.head=Bo,Cn.identity=Ks,Cn.includes=function(e,t,n,r){e=Ba(e)?e:Ts(e),n=n&&!r?is(n):0;var i=e.length;return n<0&&(n=sn(i+n,0)),Ya(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&_t(e,t,n)>-1},Cn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:is(n);return i<0&&(i=sn(r+i,0)),_t(e,t,i)},Cn.inRange=function(e,t,n){return t=rs(t),void 0===n?(n=t,t=0):n=rs(n),function(e,t,n){return e>=un(t,n)&&e<sn(t,n)}(e=as(e),t,n)},Cn.invoke=ws,Cn.isArguments=Ia,Cn.isArray=Da,Cn.isArrayBuffer=Ra,Cn.isArrayLike=Ba,Cn.isArrayLikeObject=Ma,Cn.isBoolean=function(e){return!0===e||!1===e||Wa(e)&&pr(e)==c},Cn.isBuffer=La,Cn.isDate=Fa,Cn.isElement=function(e){return Wa(e)&&1===e.nodeType&&!Ga(e)},Cn.isEmpty=function(e){if(null==e)return!0;if(Ba(e)&&(Da(e)||"string"==typeof e||"function"==typeof e.splice||La(e)||Xa(e)||Ia(e)))return!e.length;var t=ro(e);if(t==m||t==b)return!e.size;if(ho(e))return!Pr(e).length;for(var n in e)if(xe.call(e,n))return!1;return!0},Cn.isEqual=function(e,t){return _r(e,t)},Cn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?_r(e,t,void 0,n):!!r},Cn.isError=Na,Cn.isFinite=function(e){return"number"==typeof e&&rn(e)},Cn.isFunction=Ua,Cn.isInteger=$a,Cn.isLength=Va,Cn.isMap=Ha,Cn.isMatch=function(e,t){return e===t||kr(e,t,Xi(t))},Cn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,kr(e,t,Xi(t),n)},Cn.isNaN=function(e){return Ka(e)&&e!=+e},Cn.isNative=function(e){if(fo(e))throw new J("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return xr(e)},Cn.isNil=function(e){return null==e},Cn.isNull=function(e){return null===e},Cn.isNumber=Ka,Cn.isObject=qa,Cn.isObjectLike=Wa,Cn.isPlainObject=Ga,Cn.isRegExp=Ja,Cn.isSafeInteger=function(e){return $a(e)&&e>=-9007199254740991&&e<=9007199254740991},Cn.isSet=Za,Cn.isString=Ya,Cn.isSymbol=Qa,Cn.isTypedArray=Xa,Cn.isUndefined=function(e){return void 0===e},Cn.isWeakMap=function(e){return Wa(e)&&ro(e)==k},Cn.isWeakSet=function(e){return Wa(e)&&"[object WeakSet]"==pr(e)},Cn.join=function(e,t){return null==e?"":on.call(e,t)},Cn.kebabCase=Ds,Cn.last=No,Cn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=is(n))<0?sn(r+i,0):un(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):wt(e,xt,i,!0)},Cn.lowerCase=Rs,Cn.lowerFirst=Bs,Cn.lt=es,Cn.lte=ts,Cn.max=function(e){return e&&e.length?ir(e,Ks,mr):void 0},Cn.maxBy=function(e,t){return e&&e.length?ir(e,Yi(t,2),mr):void 0},Cn.mean=function(e){return Ot(e,Ks)},Cn.meanBy=function(e,t){return Ot(e,Yi(t,2))},Cn.min=function(e){return e&&e.length?ir(e,Ks,Er):void 0},Cn.minBy=function(e,t){return e&&e.length?ir(e,Yi(t,2),Er):void 0},Cn.stubArray=ou,Cn.stubFalse=au,Cn.stubObject=function(){return{}},Cn.stubString=function(){return""},Cn.stubTrue=function(){return!0},Cn.multiply=hu,Cn.nth=function(e,t){return e&&e.length?zr(e,is(t)):void 0},Cn.noConflict=function(){return Ke._===this&&(Ke._=je),this},Cn.noop=Qs,Cn.now=ya,Cn.pad=function(e,t,n){e=us(e);var r=(t=is(t))?Ht(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Ii(en(i),n)+e+Ii(Xt(i),n)},Cn.padEnd=function(e,t,n){e=us(e);var r=(t=is(t))?Ht(e):0;return t&&r<t?e+Ii(t-r,n):e},Cn.padStart=function(e,t,n){e=us(e);var r=(t=is(t))?Ht(e):0;return t&&r<t?Ii(t-r,n)+e:e},Cn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),cn(us(e).replace(G,""),t||0)},Cn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&uo(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=rs(e),void 0===t?(t=e,e=0):t=rs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=fn();return un(e+i*(t-e+Ve("1e-"+((i+"").length-1))),t)}return Mr(e,t)},Cn.reduce=function(e,t,n){var r=Da(e)?mt:Et,i=arguments.length<3;return r(e,Yi(t,4),n,i,tr)},Cn.reduceRight=function(e,t,n){var r=Da(e)?yt:Et,i=arguments.length<3;return r(e,Yi(t,4),n,i,nr)},Cn.repeat=function(e,t,n){return t=(n?uo(e,t,n):void 0===t)?1:is(t),Lr(us(e),t)},Cn.replace=function(){var e=arguments,t=us(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Cn.result=function(e,t,n){var r=-1,i=(t=ui(t,e)).length;for(i||(i=1,e=void 0);++r<i;){var o=null==e?void 0:e[Eo(t[r])];void 0===o&&(r=i,o=n),e=Ua(o)?o.call(e):o}return e},Cn.round=du,Cn.runInContext=e,Cn.sample=function(e){return(Da(e)?Nn:Nr)(e)},Cn.size=function(e){if(null==e)return 0;if(Ba(e))return Ya(e)?Ht(e):e.length;var t=ro(e);return t==m||t==b?e.size:Pr(e).length},Cn.snakeCase=Ms,Cn.some=function(e,t,n){var r=Da(e)?vt:Kr;return n&&uo(e,t,n)&&(t=void 0),r(e,Yi(t,3))},Cn.sortedIndex=function(e,t){return Gr(e,t)},Cn.sortedIndexBy=function(e,t,n){return Jr(e,t,Yi(n,2))},Cn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Gr(e,t);if(r<n&&Ta(e[r],t))return r}return-1},Cn.sortedLastIndex=function(e,t){return Gr(e,t,!0)},Cn.sortedLastIndexBy=function(e,t,n){return Jr(e,t,Yi(n,2),!0)},Cn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Gr(e,t,!0)-1;if(Ta(e[n],t))return n}return-1},Cn.startCase=Ls,Cn.startsWith=function(e,t,n){return e=us(e),n=null==n?0:Zn(is(n),0,e.length),t=Qr(t),e.slice(n,n+t.length)==t},Cn.subtract=pu,Cn.sum=function(e){return e&&e.length?jt(e,Ks):0},Cn.sumBy=function(e,t){return e&&e.length?jt(e,Yi(t,2)):0},Cn.template=function(e,t,n){var r=Cn.templateSettings;n&&uo(e,t,n)&&(t=void 0),e=us(e),t=fs({},t,r,Ui);var i,o,a=fs({},t.imports,r.imports,Ui),s=_s(a),u=zt(a,s),l=0,c=t.interpolate||ce,f="__p += '",h=me((t.escape||ce).source+"|"+c.source+"|"+(c===$?ne:ce).source+"|"+(t.evaluate||ce).source+"|$","g"),d="//# sourceURL="+(xe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Fe+"]")+"\n";e.replace(h,(function(t,n,r,a,s,u){return r||(r=a),f+=e.slice(l,u).replace(fe,Ft),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),f+="';\n";var p=xe.call(t,"variable")&&t.variable;if(p){if(ee.test(p))throw new J("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(o?f.replace(I,""):f).replace(D,"$1").replace(R,"$1;"),f="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=$s((function(){return he(s,d+"return "+f).apply(void 0,u)}));if(m.source=f,Na(m))throw m;return m},Cn.times=function(e,t){if((e=is(e))<1||e>9007199254740991)return[];var n=4294967295,r=un(e,4294967295);e-=4294967295;for(var i=Ct(r,t=Yi(t));++n<e;)t(n);return i},Cn.toFinite=rs,Cn.toInteger=is,Cn.toLength=os,Cn.toLower=function(e){return us(e).toLowerCase()},Cn.toNumber=as,Cn.toSafeInteger=function(e){return e?Zn(is(e),-9007199254740991,9007199254740991):0===e?e:0},Cn.toString=us,Cn.toUpper=function(e){return us(e).toUpperCase()},Cn.trim=function(e,t,n){if((e=us(e))&&(n||void 0===t))return Tt(e);if(!e||!(t=Qr(t)))return e;var r=Kt(e),i=Kt(t);return ci(r,Dt(r,i),Rt(r,i)+1).join("")},Cn.trimEnd=function(e,t,n){if((e=us(e))&&(n||void 0===t))return e.slice(0,Gt(e)+1);if(!e||!(t=Qr(t)))return e;var r=Kt(e);return ci(r,0,Rt(r,Kt(t))+1).join("")},Cn.trimStart=function(e,t,n){if((e=us(e))&&(n||void 0===t))return e.replace(G,"");if(!e||!(t=Qr(t)))return e;var r=Kt(e);return ci(r,Dt(r,Kt(t))).join("")},Cn.truncate=function(e,t){var n=30,r="...";if(qa(t)){var i="separator"in t?t.separator:i;n="length"in t?is(t.length):n,r="omission"in t?Qr(t.omission):r}var o=(e=us(e)).length;if(Nt(e)){var a=Kt(e);o=a.length}if(n>=o)return e;var s=n-Ht(r);if(s<1)return r;var u=a?ci(a,0,s).join(""):e.slice(0,s);if(void 0===i)return u+r;if(a&&(s+=u.length-s),Ja(i)){if(e.slice(s).search(i)){var l,c=u;for(i.global||(i=me(i.source,us(re.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var f=l.index;u=u.slice(0,void 0===f?s:f)}}else if(e.indexOf(Qr(i),s)!=s){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+r},Cn.unescape=function(e){return(e=us(e))&&L.test(e)?e.replace(B,Jt):e},Cn.uniqueId=function(e){var t=++Oe;return us(e)+t},Cn.upperCase=Fs,Cn.upperFirst=Ns,Cn.each=ua,Cn.eachRight=la,Cn.first=Bo,Ys(Cn,(fu={},lr(Cn,(function(e,t){xe.call(Cn.prototype,t)||(fu[t]=e)})),fu),{chain:!1}),Cn.VERSION="4.17.21",st(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Cn[e].placeholder=Cn})),st(["drop","take"],(function(e,t){In.prototype[e]=function(n){n=void 0===n?1:sn(is(n),0);var r=this.__filtered__&&!t?new In(this):this.clone();return r.__filtered__?r.__takeCount__=un(n,r.__takeCount__):r.__views__.push({size:un(n,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},In.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),st(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;In.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Yi(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),st(["head","last"],(function(e,t){var n="take"+(t?"Right":"");In.prototype[e]=function(){return this[n](1).value()[0]}})),st(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");In.prototype[e]=function(){return this.__filtered__?new In(this):this[n](1)}})),In.prototype.compact=function(){return this.filter(Ks)},In.prototype.find=function(e){return this.filter(e).head()},In.prototype.findLast=function(e){return this.reverse().find(e)},In.prototype.invokeMap=Fr((function(e,t){return"function"==typeof e?new In(this):this.map((function(n){return br(n,e,t)}))})),In.prototype.reject=function(e){return this.filter(Pa(Yi(e)))},In.prototype.slice=function(e,t){e=is(e);var n=this;return n.__filtered__&&(e>0||t<0)?new In(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=is(t))<0?n.dropRight(-t):n.take(t-e)),n)},In.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},In.prototype.toArray=function(){return this.take(4294967295)},lr(In.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Cn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(Cn.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,s=t instanceof In,u=a[0],l=s||Da(t),c=function(e){var t=i.apply(Cn,pt([e],a));return r&&f?t[0]:t};l&&n&&"function"==typeof u&&1!=u.length&&(s=l=!1);var f=this.__chain__,h=!!this.__actions__.length,d=o&&!f,p=s&&!h;if(!o&&l){t=p?t:new In(this);var m=e.apply(t,a);return m.__actions__.push({func:ra,args:[c],thisArg:void 0}),new zn(m,f)}return d&&p?e.apply(this,a):(m=this.thru(c),d?r?m.value()[0]:m.value():m)})})),st(["pop","push","shift","sort","splice","unshift"],(function(e){var t=ge[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Cn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Da(i)?i:[],e)}return this[n]((function(n){return t.apply(Da(n)?n:[],e)}))}})),lr(In.prototype,(function(e,t){var n=Cn[t];if(n){var r=n.name+"";xe.call(wn,r)||(wn[r]=[]),wn[r].push({name:t,func:n})}})),wn[Ci(void 0,2).name]=[{name:"wrapper",func:void 0}],In.prototype.clone=function(){var e=new In(this.__wrapped__);return e.__actions__=gi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=gi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=gi(this.__views__),e},In.prototype.reverse=function(){if(this.__filtered__){var e=new In(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},In.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Da(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=un(t,e+a);break;case"takeRight":e=sn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,f=c.length,h=0,d=un(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return ri(e,this.__actions__);var p=[];e:for(;u--&&h<d;){for(var m=-1,y=e[l+=t];++m<f;){var v=c[m],g=v.iteratee,b=v.type,w=g(y);if(2==b)y=w;else if(!w){if(1==b)continue e;break e}}p[h++]=y}return p},Cn.prototype.at=ia,Cn.prototype.chain=function(){return na(this)},Cn.prototype.commit=function(){return new zn(this.value(),this.__chain__)},Cn.prototype.next=function(){void 0===this.__values__&&(this.__values__=ns(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Cn.prototype.plant=function(e){for(var t,n=this;n instanceof An;){var r=Co(n);r.__index__=0,r.__values__=void 0,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},Cn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof In){var t=e;return this.__actions__.length&&(t=new In(this)),(t=t.reverse()).__actions__.push({func:ra,args:[qo],thisArg:void 0}),new zn(t,this.__chain__)}return this.thru(qo)},Cn.prototype.toJSON=Cn.prototype.valueOf=Cn.prototype.value=function(){return ri(this.__wrapped__,this.__actions__)},Cn.prototype.first=Cn.prototype.head,Ye&&(Cn.prototype[Ye]=function(){return this}),Cn}();Ke._=Zt,void 0===(i=function(){return Zt}.call(t,n,t,r))||(r.exports=i)}).call(this)}).call(this,n(53),n(267)(e))},,,,,,,,,function(e,t,n){"use strict";e.exports={init:function(e){var t=i.nextPow2(e);a.length<t&&(r.free(a),a=r.mallocInt32(t));s.length<t&&(r.free(s),s=r.mallocInt32(t));u.length<t&&(r.free(u),u=r.mallocInt32(t));l.length<t&&(r.free(l),l=r.mallocInt32(t));c.length<t&&(r.free(c),c=r.mallocInt32(t));f.length<t&&(r.free(f),f=r.mallocInt32(t));var n=8*t;h.length<n&&(r.free(h),h=r.mallocDouble(n))},sweepBipartite:function(e,t,n,r,i,c,f,m,y,v){for(var g=0,b=2*e,w=e-1,_=b-1,k=n;k<r;++k){var x=c[k],O=b*k;h[g++]=i[O+w],h[g++]=-(x+1),h[g++]=i[O+_],h[g++]=x}for(k=f;k<m;++k){x=v[k]+(1<<28);var P=b*k;h[g++]=y[P+w],h[g++]=-x,h[g++]=y[P+_],h[g++]=x}var S=g>>>1;o(h,S);var E=0,j=0;for(k=0;k<S;++k){var C=0|h[2*k+1];if(C>=1<<28)d(u,l,j--,C=C-(1<<28)|0);else if(C>=0)d(a,s,E--,C);else if(C<=-(1<<28)){C=-C-(1<<28)|0;for(var T=0;T<E;++T){if(void 0!==(A=t(a[T],C)))return A}p(u,l,j++,C)}else{C=-C-1|0;for(T=0;T<j;++T){var A;if(void 0!==(A=t(C,u[T])))return A}p(a,s,E++,C)}}},sweepComplete:function(e,t,n,r,i,m,y,v,g,b){for(var w=0,_=2*e,k=e-1,x=_-1,O=n;O<r;++O){var P=m[O]+1<<1,S=_*O;h[w++]=i[S+k],h[w++]=-P,h[w++]=i[S+x],h[w++]=P}for(O=y;O<v;++O){P=b[O]+1<<1;var E=_*O;h[w++]=g[E+k],h[w++]=1|-P,h[w++]=g[E+x],h[w++]=1|P}var j=w>>>1;o(h,j);var C=0,T=0,A=0;for(O=0;O<j;++O){var z=0|h[2*O+1],I=1&z;if(O<j-1&&z>>1==h[2*O+3]>>1&&(I=2,O+=1),z<0){for(var D=-(z>>1)-1,R=0;R<A;++R){if(void 0!==(B=t(c[R],D)))return B}if(0!==I)for(R=0;R<C;++R){if(void 0!==(B=t(a[R],D)))return B}if(1!==I)for(R=0;R<T;++R){var B;if(void 0!==(B=t(u[R],D)))return B}0===I?p(a,s,C++,D):1===I?p(u,l,T++,D):2===I&&p(c,f,A++,D)}else{D=(z>>1)-1;0===I?d(a,s,C--,D):1===I?d(u,l,T--,D):2===I&&d(c,f,A--,D)}}},scanBipartite:function(e,t,n,r,i,u,l,c,f,m,y,v){var g=0,b=2*e,w=t,_=t+e,k=1,x=1;r?x=1<<28:k=1<<28;for(var O=i;O<u;++O){var P=O+k,S=b*O;h[g++]=l[S+w],h[g++]=-P,h[g++]=l[S+_],h[g++]=P}for(O=f;O<m;++O){P=O+x;var E=b*O;h[g++]=y[E+w],h[g++]=-P}var j=g>>>1;o(h,j);var C=0;for(O=0;O<j;++O){var T=0|h[2*O+1];if(T<0){var A=!1;if((P=-T)>=1<<28?(A=!r,P-=1<<28):(A=!!r,P-=1),A)p(a,s,C++,P);else{var z=v[P],I=b*P,D=y[I+t+1],R=y[I+t+1+e];e:for(var B=0;B<C;++B){var M=a[B],L=b*M;if(!(R<l[L+t+1]||l[L+t+1+e]<D)){for(var F=t+2;F<e;++F)if(y[I+F+e]<l[L+F]||l[L+F+e]<y[I+F])continue e;var N,U=c[M];if(void 0!==(N=r?n(z,U):n(U,z)))return N}}}}else d(a,s,C--,T-k)}},scanComplete:function(e,t,n,r,i,s,u,l,c,f,d){for(var p=0,m=2*e,y=t,v=t+e,g=r;g<i;++g){var b=g+(1<<28),w=m*g;h[p++]=s[w+y],h[p++]=-b,h[p++]=s[w+v],h[p++]=b}for(g=l;g<c;++g){b=g+1;var _=m*g;h[p++]=f[_+y],h[p++]=-b}var k=p>>>1;o(h,k);var x=0;for(g=0;g<k;++g){var O=0|h[2*g+1];if(O<0){if((b=-O)>=1<<28)a[x++]=b-(1<<28);else{var P=d[b-=1],S=m*b,E=f[S+t+1],j=f[S+t+1+e];e:for(var C=0;C<x;++C){var T=a[C],A=u[T];if(A===P)break;var z=m*T;if(!(j<s[z+t+1]||s[z+t+1+e]<E)){for(var I=t+2;I<e;++I)if(f[S+I+e]<s[z+I]||s[z+I+e]<f[S+I])continue e;var D=n(A,P);if(void 0!==D)return D}}}}else{for(b=O-(1<<28),C=x-1;C>=0;--C)if(a[C]===b){for(I=C+1;I<x;++I)a[I-1]=a[I];break}--x}}}};var r=n(390),i=n(391),o=n(493),a=r.mallocInt32(1024),s=r.mallocInt32(1024),u=r.mallocInt32(1024),l=r.mallocInt32(1024),c=r.mallocInt32(1024),f=r.mallocInt32(1024),h=r.mallocDouble(8192);function d(e,t,n,r){var i=t[r],o=e[n-1];e[i]=o,t[o]=i}function p(e,t,n,r){e[n]=r,t[r]=n}},function(e,t,n){"use strict";e.exports=function(e,t){var n="abcdef".split("").concat(t),r=[];e.indexOf("lo")>=0&&r.push("lo=e[k+n]");e.indexOf("hi")>=0&&r.push("hi=e[k+o]");return n.push("for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m".replace("_",r.join()).replace("$",e)),Function.apply(void 0,n)}},function(e,t,n){"use strict";var r=n(209);e.exports=function(e){r.copy(e,this)}},function(e,t,n){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n,r="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(n=t.cmp,function(e){return function(t,r){var i={key:t,value:e[t]},o={key:r,value:e[r]};return n(i,o)}}),o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var n,a;if(Array.isArray(t)){for(a="[",n=0;n<t.length;n++)n&&(a+=","),a+=e(t[n])||"null";return a+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(t)-1,u=Object.keys(t).sort(i&&i(t));for(a="",n=0;n<u.length;n++){var l=u[n],c=e(t[l]);c&&(a&&(a+=","),a+=JSON.stringify(l)+":"+c)}return o.splice(s,1),"{"+a+"}"}}(e)}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r="",i=!0===e.schema.$async,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),a=e.self._getId(e.schema);if(e.opts.strictKeywords){var s=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(s){var u="unknown keyword: "+s;if("log"!==e.opts.strictKeywords)throw new Error(u);e.logger.warn(u)}}if(e.isTop&&(r+=" var validate = ",i&&(e.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",a&&(e.opts.sourceCode||e.opts.processCode)&&(r+=" /*# sourceURL="+a+" */ ")),"boolean"==typeof e.schema||!o&&!e.schema.$ref){var l=e.level,c=e.dataLevel,f=e.schema["false schema"],h=e.schemaPath+e.util.getProperty("false schema"),d=e.errSchemaPath+"/false schema",p=!e.opts.allErrors,m="data"+(c||""),y="valid"+l;if(!1===e.schema){e.isTop?p=!0:r+=" var "+y+" = false; ",(Y=Y||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'boolean schema is false' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var v=r;r=Y.pop(),!e.compositeRule&&p?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?r+=i?" return data; ":" validate.errors = null; return true; ":r+=" var "+y+" = true; ";return e.isTop&&(r+=" }; return validate; "),r}if(e.isTop){var g=e.isTop;l=e.level=0,c=e.dataLevel=0,m="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{l=e.level,m="data"+((c=e.dataLevel)||"");if(a&&(e.baseId=e.resolve.url(e.baseId,a)),i&&!e.async)throw new Error("async schema in sync schema");r+=" var errs_"+l+" = errors;"}y="valid"+l,p=!e.opts.allErrors;var w="",_="",k=e.schema.type,x=Array.isArray(k);if(k&&e.opts.nullable&&!0===e.schema.nullable&&(x?-1==k.indexOf("null")&&(k=k.concat("null")):"null"!=k&&(k=[k,"null"],x=!0)),x&&1==k.length&&(k=k[0],x=!1),e.schema.$ref&&o){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(r+=" "+e.RULES.all.$comment.code(e,"$comment")),k){if(e.opts.coerceTypes)var O=e.util.coerceToTypes(e.opts.coerceTypes,k);var P=e.RULES.types[k];if(O||x||!0===P||P&&!Q(P)){h=e.schemaPath+".type",d=e.errSchemaPath+"/type",h=e.schemaPath+".type",d=e.errSchemaPath+"/type";var S=x?"checkDataTypes":"checkDataType";if(r+=" if ("+e.util[S](k,m,!0)+") { ",O){var E="dataType"+l,j="coerced"+l;r+=" var "+E+" = typeof "+m+"; ","array"==e.opts.coerceTypes&&(r+=" if ("+E+" == 'object' && Array.isArray("+m+")) "+E+" = 'array'; "),r+=" var "+j+" = undefined; ";var C="",T=O;if(T)for(var A,z=-1,I=T.length-1;z<I;)A=T[z+=1],z&&(r+=" if ("+j+" === undefined) { ",C+="}"),"array"==e.opts.coerceTypes&&"array"!=A&&(r+=" if ("+E+" == 'array' && "+m+".length == 1) { "+j+" = "+m+" = "+m+"[0]; "+E+" = typeof "+m+";  } "),"string"==A?r+=" if ("+E+" == 'number' || "+E+" == 'boolean') "+j+" = '' + "+m+"; else if ("+m+" === null) "+j+" = ''; ":"number"==A||"integer"==A?(r+=" if ("+E+" == 'boolean' || "+m+" === null || ("+E+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==A&&(r+=" && !("+m+" % 1)"),r+=")) "+j+" = +"+m+"; "):"boolean"==A?r+=" if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+j+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+j+" = true; ":"null"==A?r+=" if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+j+" = null; ":"array"==e.opts.coerceTypes&&"array"==A&&(r+=" if ("+E+" == 'string' || "+E+" == 'number' || "+E+" == 'boolean' || "+m+" == null) "+j+" = ["+m+"]; ");r+=" "+C+" if ("+j+" === undefined) {   ",(Y=Y||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",r+=x?""+k.join(","):""+k,r+="' } ",!1!==e.opts.messages&&(r+=" , message: 'should be ",r+=x?""+k.join(","):""+k,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";v=r;r=Y.pop(),!e.compositeRule&&p?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  ";var D=c?"data"+(c-1||""):"parentData";r+=" "+m+" = "+j+"; ",c||(r+="if ("+D+" !== undefined)"),r+=" "+D+"["+(c?e.dataPathArr[c]:"parentDataProperty")+"] = "+j+"; } "}else{(Y=Y||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",r+=x?""+k.join(","):""+k,r+="' } ",!1!==e.opts.messages&&(r+=" , message: 'should be ",r+=x?""+k.join(","):""+k,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";v=r;r=Y.pop(),!e.compositeRule&&p?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(e.schema.$ref&&!o)r+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",p&&(r+=" } if (errors === ",r+=g?"0":"errs_"+l,r+=") { ",_+="}");else{var R=e.RULES;if(R)for(var B=-1,M=R.length-1;B<M;)if(Q(P=R[B+=1])){if(P.type&&(r+=" if ("+e.util.checkDataType(P.type,m)+") { "),e.opts.useDefaults)if("object"==P.type&&e.schema.properties){f=e.schema.properties;var L=Object.keys(f);if(L)for(var F,N=-1,U=L.length-1;N<U;){if(void 0!==(q=f[F=L[N+=1]]).default){var $=m+e.util.getProperty(F);if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+$;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else r+=" if ("+$+" === undefined ","empty"==e.opts.useDefaults&&(r+=" || "+$+" === null || "+$+" === '' "),r+=" ) "+$+" = ","shared"==e.opts.useDefaults?r+=" "+e.useDefault(q.default)+" ":r+=" "+JSON.stringify(q.default)+" ",r+="; "}}}else if("array"==P.type&&Array.isArray(e.schema.items)){var V=e.schema.items;if(V){z=-1;for(var q,W=V.length-1;z<W;)if(void 0!==(q=V[z+=1]).default){$=m+"["+z+"]";if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+$;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else r+=" if ("+$+" === undefined ","empty"==e.opts.useDefaults&&(r+=" || "+$+" === null || "+$+" === '' "),r+=" ) "+$+" = ","shared"==e.opts.useDefaults?r+=" "+e.useDefault(q.default)+" ":r+=" "+JSON.stringify(q.default)+" ",r+="; "}}}var H=P.rules;if(H)for(var K,G=-1,J=H.length-1;G<J;)if(X(K=H[G+=1])){var Z=K.code(e,K.keyword,P.type);Z&&(r+=" "+Z+" ",p&&(w+="}"))}if(p&&(r+=" "+w+" ",w=""),P.type&&(r+=" } ",k&&k===P.type&&!O)){r+=" else { ";var Y;h=e.schemaPath+".type",d=e.errSchemaPath+"/type";(Y=Y||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",r+=x?""+k.join(","):""+k,r+="' } ",!1!==e.opts.messages&&(r+=" , message: 'should be ",r+=x?""+k.join(","):""+k,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";v=r;r=Y.pop(),!e.compositeRule&&p?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}p&&(r+=" if (errors === ",r+=g?"0":"errs_"+l,r+=") { ",_+="}")}}function Q(e){for(var t=e.rules,n=0;n<t.length;n++)if(X(t[n]))return!0}function X(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var n=t.implements,r=0;r<n.length;r++)if(void 0!==e.schema[n[r]])return!0}(t)}return p&&(r+=" "+_+" "),g?(i?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+y+" = errors === errs_"+l+";",r=e.util.cleanUpCode(r),g&&(r=e.util.finalCleanUpCode(r,i)),r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(a||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s;var d="maximum"==t,p=d?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[p],y=e.opts.$data&&m&&m.$data,v=d?"<":">",g=d?">":"<",b=void 0;if(y){var w=e.util.getData(m.$data,a,e.dataPathArr),_="exclusive"+o,k="exclType"+o,x="exclIsNumber"+o,O="' + "+(E="op"+o)+" + '";i+=" var schemaExcl"+o+" = "+w+"; ",i+=" var "+_+"; var "+k+" = typeof "+(w="schemaExcl"+o)+"; if ("+k+" != 'boolean' && "+k+" != 'undefined' && "+k+" != 'number') { ";var P;b=p;(P=P||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: '"+p+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var S=i;i=P.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+S+"]); ":i+=" validate.errors = ["+S+"]; return false; ":i+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",h&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" "+k+" == 'number' ? ( ("+_+" = "+r+" === undefined || "+w+" "+v+"= "+r+") ? "+f+" "+g+"= "+w+" : "+f+" "+g+" "+r+" ) : ( ("+_+" = "+w+" === true) ? "+f+" "+g+"= "+r+" : "+f+" "+g+" "+r+" ) || "+f+" !== "+f+") { var op"+o+" = "+_+" ? '"+v+"' : '"+v+"='; ",void 0===s&&(b=p,l=e.errSchemaPath+"/"+p,r=w,h=y)}else{O=v;if((x="number"==typeof m)&&h){var E="'"+O+"'";i+=" if ( ",h&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" ( "+r+" === undefined || "+m+" "+v+"= "+r+" ? "+f+" "+g+"= "+m+" : "+f+" "+g+" "+r+" ) || "+f+" !== "+f+") { "}else{x&&void 0===s?(_=!0,b=p,l=e.errSchemaPath+"/"+p,r=m,g+="="):(x&&(r=Math[d?"min":"max"](m,s)),m===(!x||r)?(_=!0,b=p,l=e.errSchemaPath+"/"+p,g+="="):(_=!1,O+="="));E="'"+O+"'";i+=" if ( ",h&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" "+f+" "+g+" "+r+" || "+f+" !== "+f+") { "}}b=b||t,(P=P||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { comparison: "+E+", limit: "+r+", exclusive: "+_+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be "+O+" ",i+=h?"' + "+r:r+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";S=i;return i=P.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+S+"]); ":i+=" validate.errors = ["+S+"]; return false; ":i+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",c&&(i+=" else { "),i}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(a||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,i+="if ( ",h&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" "+f+".length "+("maxItems"==t?">":"<")+" "+r+") { ";var d=t,p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(d||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+r+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==t?"more":"fewer",i+=" than ",i+=h?"' + "+r+" + '":""+s,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var m=i;return i=p.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",c&&(i+=" else { "),i}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(a||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s;var d="maxLength"==t?">":"<";i+="if ( ",h&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),!1===e.opts.unicode?i+=" "+f+".length ":i+=" ucs2length("+f+") ",i+=" "+d+" "+r+") { ";var p=t,m=m||[];m.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+r+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==t?"longer":"shorter",i+=" than ",i+=h?"' + "+r+" + '":""+s,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var y=i;return i=m.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",c&&(i+=" else { "),i}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(a||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,i+="if ( ",h&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" Object.keys("+f+").length "+("maxProperties"==t?">":"<")+" "+r+") { ";var d=t,p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(d||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+r+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==t?"more":"fewer",i+=" than ",i+=h?"' + "+r+" + '":""+s,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var m=i;return i=p.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",c&&(i+=" else { "),i}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},function(e,t,n){const{PartialReadError:r}=n(172);class i extends Array{valueOf(){return BigInt.asIntN(64,BigInt(this[0])<<32n)|BigInt.asUintN(32,BigInt(this[1]))}}const o={i8:["readInt8","writeInt8",1],u8:["readUInt8","writeUInt8",1],i16:["readInt16BE","writeInt16BE",2],u16:["readUInt16BE","writeUInt16BE",2],i32:["readInt32BE","writeInt32BE",4],u32:["readUInt32BE","writeUInt32BE",4],f32:["readFloatBE","writeFloatBE",4],f64:["readDoubleBE","writeDoubleBE",8],li8:["readInt8","writeInt8",1],lu8:["readUInt8","writeUInt8",1],li16:["readInt16LE","writeInt16LE",2],lu16:["readUInt16LE","writeUInt16LE",2],li32:["readInt32LE","writeInt32LE",4],lu32:["readUInt32LE","writeUInt32LE",4],lf32:["readFloatLE","writeFloatLE",4],lf64:["readDoubleLE","writeDoubleLE",8]},a=Object.keys(o).reduce((e,t)=>{var i,a,s,u;return e[t]=(i=o[t][0],a=o[t][1],s=o[t][2],u=n(268)[t],[(e,t)=>{if(t+s>e.length)throw new r;return{value:e[i](t),size:s}},(e,t,n)=>(t[a](e,n),n+s),s,u]),e},{});a.i64=[function(e,t){if(t+8>e.length)throw new r;return{value:new i(e.readInt32BE(t),e.readInt32BE(t+4)),size:8}},function(e,t,n){return"bigint"==typeof e?t.writeBigInt64BE(e,n):(t.writeInt32BE(e[0],n),t.writeInt32BE(e[1],n+4)),n+8},8,n(268).i64],a.li64=[function(e,t){if(t+8>e.length)throw new r;return{value:new i(e.readInt32LE(t+4),e.readInt32LE(t)),size:8}},function(e,t,n){return"bigint"==typeof e?t.writeBigInt64LE(e,n):(t.writeInt32LE(e[0],n+4),t.writeInt32LE(e[1],n)),n+8},8,n(268).li64],a.u64=[function(e,t){if(t+8>e.length)throw new r;return{value:new i(e.readUInt32BE(t),e.readUInt32BE(t+4)),size:8}},function(e,t,n){return"bigint"==typeof e?t.writeBigUInt64BE(e,n):(t.writeUInt32BE(e[0],n),t.writeUInt32BE(e[1],n+4)),n+8},8,n(268).u64],a.lu64=[function(e,t){if(t+8>e.length)throw new r;return{value:new i(e.readUInt32LE(t+4),e.readUInt32LE(t)),size:8}},function(e,t,n){return"bigint"==typeof e?t.writeBigUInt64LE(e,n):(t.writeUInt32LE(e[0],n+4),t.writeUInt32LE(e[1],n)),n+8},8,n(268).lu64],e.exports=a},function(e,t,n){(function(t){const r=n(210),{getCount:i,sendCount:o,calcCount:a,PartialReadError:s}=n(172);function u(e,t){return e===t||parseInt(e)===parseInt(t)}function l(e){return(1<<e)-1}e.exports={varint:[function(e,t){let n=0,i=0,o=t;for(;;){if(o+1>e.length)throw new s;const a=e.readUInt8(o);if(n|=(127&a)<<i,o++,!(128&a))return{value:n,size:o-t};i+=7,r.ok(i<64,"varint is too big")}},function(e,t,n){let r=0;for(;-128&e;)t.writeUInt8(255&e|128,n+r),r++,e>>>=7;return t.writeUInt8(e,n+r),n+r+1},function(e){let t=0;for(;-128&e;)e>>>=7,t++;return t+1},n(173).varint],bool:[function(e,t){if(t+1>e.length)throw new s;return{value:!!e.readInt8(t),size:1}},function(e,t,n){return t.writeInt8(+e,n),n+1},1,n(173).bool],pstring:[function(e,t,n,r){const{size:o,count:a}=i.call(this,e,t,n,r),u=t+o,l=u+a;if(l>e.length)throw new s("Missing characters in string, found size is "+e.length+" expected size was "+l);return{value:e.toString("utf8",u,l),size:l-t}},function(e,n,r,i,a){const s=t.byteLength(e,"utf8");return r=o.call(this,s,n,r,i,a),n.write(e,r,s,"utf8"),r+s},function(e,n,r){const i=t.byteLength(e,"utf8");return a.call(this,i,n,r)+i},n(173).pstring],buffer:[function(e,t,n,r){const{size:o,count:a}=i.call(this,e,t,n,r);if((t+=o)+a>e.length)throw new s;return{value:e.slice(t,t+a),size:o+a}},function(e,t,n,r,i){return n=o.call(this,e.length,t,n,r,i),e.copy(t,n),n+e.length},function(e,t,n){return a.call(this,e.length,t,n)+e.length},n(173).buffer],void:[function(){return{value:void 0,size:0}},function(e,t,n){return n},0,n(173).void],bitfield:[function(e,t,n){const r=t;let i=null,o=0;const a={};return a.value=n.reduce((n,{size:r,signed:a,name:u})=>{let c=r,f=0;for(;c>0;){if(0===o){if(e.length<t+1)throw new s;i=e[t++],o=8}const n=Math.min(c,o);f=f<<n|(i&l(o))>>o-n,o-=n,c-=n}return a&&f>=1<<r-1&&(f-=1<<r),n[u]=f,n},{}),a.size=t-r,a},function(e,t,n,r){let i=0,o=0;r.forEach(({size:r,signed:a,name:s})=>{const u=e[s];if(!a&&u<0||a&&u<-(1<<r-1))throw new Error(e+" < "+a?-(1<<r-1):0);if(!a&&u>=1<<r||a&&u>=(1<<r-1)-1)throw new Error(e+" >= "+a?1<<r:(1<<r-1)-1);for(;r>0;){const e=Math.min(8-o,r);i=i<<e|u>>r-e&l(e),r-=e,o+=e,8===o&&(t[n++]=i,o=0,i=0)}}),0!==o&&(t[n++]=i<<8-o);return n},function(e,t){return Math.ceil(t.reduce((e,{size:t})=>e+t,0)/8)},n(173).bitfield],cstring:[function(e,t){let n=0;for(;t+n<e.length&&0!==e[t+n];)n++;if(e.length<t+n+1)throw new s;return{value:e.toString("utf8",t,t+n),size:n+1}},function(e,n,r){const i=t.byteLength(e,"utf8");return n.write(e,r,i,"utf8"),r+=i,n.writeInt8(0,r),r+1},function(e){return t.byteLength(e,"utf8")+1},n(173).cstring],mapper:[function(e,t,{type:n,mappings:r},i){const{size:o,value:a}=this.read(e,t,n,i);let s=null;const l=Object.keys(r);for(let e=0;e<l.length;e++)if(u(l[e],a)){s=r[l[e]];break}if(null==s)throw new Error(a+" is not in the mappings value");return{size:o,value:s}},function(e,t,n,{type:r,mappings:i},o){const a=Object.keys(i);let s=null;for(let t=0;t<a.length;t++)if(u(i[a[t]],e)){s=a[t];break}if(null==s)throw new Error(e+" is not in the mappings value");return this.write(s,t,n,r,o)},function(e,{type:t,mappings:n},r){const i=Object.keys(n);let o=null;for(let t=0;t<i.length;t++)if(u(n[i[t]],e)){o=i[t];break}if(null==o)throw new Error(e+" is not in the mappings value");return this.sizeOf(o,t,r)},n(173).mapper]}}).call(this,n(85).Buffer)},function(e){e.exports=JSON.parse('{"switch":{"title":"switch","type":"array","items":[{"enum":["switch"]},{"type":"object","properties":{"compareTo":{"$ref":"definitions#/definitions/contextualizedFieldName"},"compareToValue":{"type":"string"},"fields":{"type":"object","patternProperties":{"^[-a-zA-Z0-9 _:]+$":{"$ref":"dataType"}},"additionalProperties":false},"default":{"$ref":"dataType"}},"oneOf":[{"required":["compareTo","fields"]},{"required":["compareToValue","fields"]}],"additionalProperties":false}],"additionalItems":false},"option":{"title":"option","type":"array","items":[{"enum":["option"]},{"$ref":"dataType"}],"additionalItems":false}}')},function(e,t,n){"use strict";(function(t,r){var i;e.exports=P,P.ReadableState=O;n(65).EventEmitter;var o=function(e,t){return e.listeners(t).length},a=n(448),s=n(85).Buffer,u=t.Uint8Array||function(){};var l,c=n(554);l=c&&c.debuglog?c.debuglog("stream"):function(){};var f,h,d,p=n(555),m=n(449),y=n(450).getHighWaterMark,v=n(211).codes,g=v.ERR_INVALID_ARG_TYPE,b=v.ERR_STREAM_PUSH_AFTER_EOF,w=v.ERR_METHOD_NOT_IMPLEMENTED,_=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(124)(P,a);var k=m.errorOrDestroy,x=["error","close","destroy","pause","resume"];function O(e,t,r){i=i||n(212),e=e||{},"boolean"!=typeof r&&(r=t instanceof i),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=y(this,e,"readableHighWaterMark",r),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=n(269).StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function P(e){if(i=i||n(212),!(this instanceof P))return new P(e);var t=this instanceof i;this._readableState=new O(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function S(e,t,n,r,i){l("readableAddChunk",t);var o,a=e._readableState;if(null===t)a.reading=!1,function(e,t){if(l("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?C(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,T(e)))}(e,a);else if(i||(o=function(e,t){var n;r=t,s.isBuffer(r)||r instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new g("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(a,t)),o)k(e,o);else if(a.objectMode||t&&t.length>0)if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),r)a.endEmitted?k(e,new _):E(e,a,t,!0);else if(a.ended)k(e,new b);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?E(e,a,t,!1):A(e,a)):E(e,a,t,!1)}else r||(a.reading=!1,A(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function E(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&C(e)),A(e,t)}Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),P.prototype.destroy=m.destroy,P.prototype._undestroy=m.undestroy,P.prototype._destroy=function(e,t){t(e)},P.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),S(this,e,t,!1,n)},P.prototype.unshift=function(e){return S(this,e,null,!0,!1)},P.prototype.isPaused=function(){return!1===this._readableState.flowing},P.prototype.setEncoding=function(e){f||(f=n(269).StringDecoder);var t=new f(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};function j(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function C(e){var t=e._readableState;l("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(T,e))}function T(e){var t=e._readableState;l("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,B(e)}function A(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(z,e,t))}function z(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(l("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function I(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function D(e){l("readable nexttick read 0"),e.read(0)}function R(e,t){l("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function L(e){var t=e._readableState;l("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(F,t,e))}function F(e,t){if(l("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function N(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}P.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?L(this):C(this),null;if(0===(e=j(e,t))&&t.ended)return 0===t.length&&L(this),null;var r,i=t.needReadable;return l("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",i=!0),t.ended||t.reading?l("reading or ended",i=!1):i&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=j(n,t))),null===(r=e>0?M(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&L(this)),null!==r&&this.emit("data",r),r},P.prototype._read=function(e){k(this,new w("_read()"))},P.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,l("pipe count=%d opts=%j",i.pipesCount,t);var a=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:y;function s(t,r){l("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,l("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("drain",c),e.removeListener("error",d),e.removeListener("unpipe",s),n.removeListener("end",u),n.removeListener("end",y),n.removeListener("data",h),f=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}function u(){l("onend"),e.end()}i.endEmitted?r.nextTick(a):n.once("end",a),e.on("unpipe",s);var c=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,B(e))}}(n);e.on("drain",c);var f=!1;function h(t){l("ondata");var r=e.write(t);l("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==N(i.pipes,e))&&!f&&(l("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function d(t){l("onerror",t),y(),e.removeListener("error",d),0===o(e,"error")&&k(e,t)}function p(){e.removeListener("finish",m),y()}function m(){l("onfinish"),e.removeListener("close",p),y()}function y(){l("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",d),e.once("close",p),e.once("finish",m),e.emit("pipe",n),i.flowing||(l("pipe resume"),n.resume()),e},P.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=N(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},P.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,l("on readable",i.length,i.reading),i.length?C(this):i.reading||r.nextTick(D,this))),n},P.prototype.addListener=P.prototype.on,P.prototype.removeListener=function(e,t){var n=a.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(I,this),n},P.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(I,this),t},P.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(R,e,t))}(this,e)),e.paused=!1,this},P.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},P.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(l("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(l("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<x.length;o++)e.on(x[o],this.emit.bind(this,x[o]));return this._read=function(t){l("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(P.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=n(557)),h(this)}),Object.defineProperty(P.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(P.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(P.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),P._fromList=M,Object.defineProperty(P.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(P.from=function(e,t){return void 0===d&&(d=n(558)),d(P,e,t)})}).call(this,n(53),n(56))},function(e,t,n){e.exports=n(65).EventEmitter},function(e,t,n){"use strict";(function(t){function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,o){var a=this,s=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return s||u?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(i,this,e)):t.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?a._writableState?a._writableState.errorEmitted?t.nextTick(r,a):(a._writableState.errorEmitted=!0,t.nextTick(n,a,e)):t.nextTick(n,a,e):o?(t.nextTick(r,a),o(e)):t.nextTick(r,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this,n(56))},function(e,t,n){"use strict";var r=n(211).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},function(e,t,n){"use strict";(function(t,r){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var o;e.exports=P,P.WritableState=O;var a={deprecate:n(405)},s=n(448),u=n(85).Buffer,l=t.Uint8Array||function(){};var c,f=n(449),h=n(450).getHighWaterMark,d=n(211).codes,p=d.ERR_INVALID_ARG_TYPE,m=d.ERR_METHOD_NOT_IMPLEMENTED,y=d.ERR_MULTIPLE_CALLBACK,v=d.ERR_STREAM_CANNOT_PIPE,g=d.ERR_STREAM_DESTROYED,b=d.ERR_STREAM_NULL_VALUES,w=d.ERR_STREAM_WRITE_AFTER_END,_=d.ERR_UNKNOWN_ENCODING,k=f.errorOrDestroy;function x(){}function O(e,t,a){o=o||n(212),e=e||{},"boolean"!=typeof a&&(a=t instanceof o),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new y;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){--t.pendingcb,n?(r.nextTick(o,i),r.nextTick(A,e,t),e._writableState.errorEmitted=!0,k(e,i)):(o(i),e._writableState.errorEmitted=!0,k(e,i),A(e,t))}(e,n,i,t,o);else{var a=C(n)||e.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||j(e,n),i?r.nextTick(E,e,n,a,o):E(e,n,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function P(e){var t=this instanceof(o=o||n(212));if(!t&&!c.call(P,this))return new P(e);this._writableState=new O(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),s.call(this)}function S(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new g("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function E(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),A(e,t)}function j(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)o[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;o.allBuffers=u,S(e,t,!0,t.length,o,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,f=n.callback;if(S(e,t,!1,t.objectMode?1:l.length,l,c,f),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final((function(n){t.pendingcb--,n&&k(e,n),t.prefinished=!0,e.emit("prefinish"),A(e,t)}))}function A(e,t){var n=C(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(T,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}n(124)(P,s),O.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(O.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===P&&(e&&e._writableState instanceof O)}})):c=function(e){return e instanceof this},P.prototype.pipe=function(){k(this,new v)},P.prototype.write=function(e,t,n){var i,o=this._writableState,a=!1,s=!o.objectMode&&(i=e,u.isBuffer(i)||i instanceof l);return s&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=x),o.ending?function(e,t){var n=new w;k(e,n),r.nextTick(t,n)}(this,n):(s||function(e,t,n,i){var o;return null===n?o=new b:"string"==typeof n||t.objectMode||(o=new p("chunk",["string","Buffer"],n)),!o||(k(e,o),r.nextTick(i,o),!1)}(this,o,e,n))&&(o.pendingcb++,a=function(e,t,n,r,i,o){if(!n){var a=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,n));return t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else S(e,t,!1,s,r,i,o);return l}(this,o,s,e,t,n)),a},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||j(this,e))},P.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),P.prototype._write=function(e,t,n){n(new m("_write()"))},P.prototype._writev=null,P.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,A(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),P.prototype.destroy=f.destroy,P.prototype._undestroy=f.undestroy,P.prototype._destroy=function(e,t){t(e)}}).call(this,n(53),n(56))},function(e,t,n){"use strict";e.exports=c;var r=n(211).codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,u=n(212);function l(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);u.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}n(124)(c,u),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,n){n(new i("_transform()"))},c.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(478),i=n(78),o=n(159),a=n(205),s=n(40),u=n(183),l=n(39);const c={1:"blue",2:"green",3:"cyan",4:"red",5:"purple",6:"orange",7:"lightgray",8:"gray",9:"indigo",a:"lime",b:"lightblue",c:"lightred",d:"magenta",e:"yellow",f:"white"},f={};function h(){const e={};let t=0;return Object.values(a.b).forEach(n=>{e[t]={id:n.id,count:1,data:{}},t+=1}),e}function d(e){let t=Math.floor(e/6.29*255)+0;return t<0&&(t+=255),(t>255||t<0)&&(t=0),t}function p(e){let t=Math.floor(e/6.29*255)+64;return t>255&&(t-=255),(t>255||t<0)&&(t=0),t}function m(e){const t=e.split(/(&[0-9a-fA-F])/),n=[{text:"",color:"white"}];let r=0;for(r=0;r<t.length;r++)null!=t[r]&&("&"==t[r][0]&&/([kmobnr])/.test(t[r][1])||("&"==t[r][0]&&/([0-9a-fA-F])/.test(t[r][1])?n.push({text:"",color:c[t[r][1]]}):n[n.length-1].text=n[n.length-1].text+t[r]));return n}Object.values(a.a).forEach(e=>{f[e.rawid]=e});const y={airJumps:0,airMoveMult:.5,crouch:!1,crouchMoveMult:.8,jumpForce:6,jumpImpulse:8.5,jumpTime:500,jumping:!1,maxSpeed:6,moveForce:30,responsiveness:15,running:!1,runningFriction:0,sprint:!1,sprintMoveMult:1.2,standingFriction:2},v=new i(new Uint16Array(524288).fill(256),[32,512,32]),g=new i(new Uint16Array(32768).fill(256),[32,32,32]);function b(t){const n=new r.a;let c=!1,b=!0;console.log("Using classic protocol"),t.serverListener=async e=>{n.deserializer.write(e)},n.on("error",e=>{t.socket.receive("PlayerKick",{reason:""+e})}),n.on("send",e=>{t.socket.sendData(n.serializer.createPacketBuffer(e))}),t.ready=()=>{n.send("player_identification",{protocol_version:7,username:t.loginData.username,verification_key:"",unused:0})};let w=null,_=null;const k={x:0,y:0,z:0};let x=!1,O=[];const P={};let S={x:0,y:0,z:0,rotation:0,pitch:0},E={items:h(),size:49,tempslot:{},selected:0};function j(){let e="";Object.values(P).forEach(t=>{e=t.name+"\n"});const n=m(e);n.push({text:t.loginData.username,color:"white"}),t.socket.receive("UpdateTextBoard",{message:n,time:Date.now(),type:u.UpdateTextBoard.Type.TAB})}t.onClient("ActionMessage",e=>{n.send("message",{message:e.message})}),t.onClient("ActionBlockBreak",e=>{var r;let i=1;null!=E.items[E.selected]&&(i=a.a[E.items[E.selected].id].rawid);const o=4+Math.floor(e.z)+k.z*(Math.floor(e.x)+k.x*Math.floor(e.y));(null===(r=f[w[o]])||void 0===r?void 0:r.unbreakable)||(t.socket.receive("WorldBlockUpdate",{x:e.x,y:e.y,z:e.z,id:0}),n.send("set_block",{x:e.z,y:e.y,z:e.x,mode:0,block_type:i}),w[o]=0)}),t.onClient("ActionBlockPlace",e=>{if(null==E.items[E.selected])return;const r=a.a[E.items[E.selected].id];if(null!=r){const i=4+Math.floor(e.z)+k.z*(Math.floor(e.x)+k.x*Math.floor(e.y));t.socket.receive("WorldBlockUpdate",{x:e.x,y:e.y,z:e.z,id:r.rawid}),n.send("set_block",{x:e.z,y:e.y,z:e.x,block_type:r.rawid,mode:1}),w[i]=r.rawid}}),t.onClient("ActionInventoryClick",e=>{if(e.type==s.ActionInventoryClick.Type.SELECT)E.selected=e.slot;else{let n=E.tempslot,r=E.items[e.slot];E.items[e.slot]=n,E.tempslot=r,t.socket.receive("PlayerSlotUpdate",{slot:-1,data:JSON.stringify(E.tempslot),type:"temp"}),t.socket.receive("PlayerSlotUpdate",{slot:e.slot,data:JSON.stringify(E.items[e.slot]),type:"main"})}}),t.onClient("ActionInventoryPick",e=>{let n=E.items[e.slot2],r=E.items[e.slot];E.items[e.slot]=n,E.items[e.slot2]=r,t.socket.receive("PlayerSlotUpdate",{slot:e.slot2,data:JSON.stringify(E.items[e.slot2]),type:"main"}),t.socket.receive("PlayerSlotUpdate",{slot:e.slot,data:JSON.stringify(E.items[e.slot]),type:"main"})}),t.onClient("ActionMove",async e=>{if(x)if(null!=w&&e.x>=0&&e.y>=0&&e.z>=0&&e.x<=k.z&&e.z<=k.x){const r=4+Math.floor(e.z)+k.z*(Math.floor(e.x)+k.x*Math.floor(e.y)),i=w[r],o=f[i];0==i||0==o.options.solid||o.options.fluid?(S={...S,...e},n.send("position",{x:32*e.z,y:32*e.y+51,z:32*e.x,yaw:p(S.rotation),pitch:d(S.pitch)})):t.socket.receive("PlayerTeleport",S)}else t.socket.receive("PlayerTeleport",S)}),t.onClient("ActionMoveLook",async e=>{if(x)if(null!=w&&e.x>=0&&e.y>=0&&e.z>=0&&e.x<=k.z&&e.z<=k.x){const r=4+Math.floor(e.z)+k.z*(Math.floor(e.x)+k.x*Math.floor(e.y)),i=w[r],o=f[i];0==i||0==o.options.solid||o.options.fluid?(S={...S,...e},n.send("position",{x:32*e.z,y:32*e.y+51,z:32*e.x,yaw:p(e.rotation),pitch:d(e.pitch)})):t.socket.receive("PlayerTeleport",S)}else t.socket.receive("PlayerTeleport",S)}),t.onClient("ActionLook",async e=>{x&&(S={...S,...e},n.send("position",{x:32*S.z,y:32*S.y+51,z:32*S.x,yaw:p(e.rotation),pitch:d(e.pitch)}))}),t.onClient("ActionClick",e=>{}),t.onClient("ActionClickEntity",e=>{}),n.on("message",e=>{t.socket.receive("ChatMessage",{message:m(e.message)})}),n.on("spawn_player",e=>{if(255==e.player_id||-1==e.player_id){t.socket.receive("LoginSuccess",{xPos:e.z/32,yPos:e.y/32,zPos:e.x/32,inventory:JSON.stringify(E),blocksDef:JSON.stringify(a.a),itemsDef:JSON.stringify(a.b),armor:JSON.stringify({items:{},selected:0,size:0}),movement:JSON.stringify(y)}),S={x:e.z/32,y:e.y/32,z:e.x/32,rotation:0,pitch:0};const n=Math.floor(e.z/1024),r=Math.floor(e.x/1024);let i,o,s;for(i of O)o=i.x-n,s=i.z-r,i.tmp=10*(o*o+s*s);O.sort((e,t)=>t.tmp-e.tmp),l.e.noa.ents.getPhysics(l.e.noa.playerEntity).body.airDrag=999,O.forEach(e=>t.socket.receive("WorldChunkLoad",e)),t.socket.receive("PlayerEntity",{uuid:"player"+e.player_id.toString(),model:"player",skin:"skins:"+t.loginData.uuid}),c=!0,x=!0}else setTimeout(()=>{t.socket.receive("EntityCreate",{uuid:"player"+e.player_id.toString(),data:JSON.stringify({position:[0,0,0],model:"player",texture:"entity/steve",type:"player",name:e.player_name,nametag:!0,maxHealth:20,health:20,rotation:1,pitch:1,hitbox:[.55,1.9,.55],armor:{items:{0:{},1:{},2:{},3:{}},size:4,selected:0}})})},50),P[e.player_id]={id:"player"+e.player_id.toString(),x:e.x,y:e.y,z:e.z,name:e.player_name};j()}),n.on("despawn_player",e=>{null!=P[e.player_id]&&delete P[e.player_id],t.socket.receive("EntityRemove",{uuid:"player"+e.player_id.toString()}),j()}),n.on("position_update",e=>{P[e.player_id].x=P[e.player_id].x+e.change_in_x,P[e.player_id].y=P[e.player_id].y+e.change_in_y,P[e.player_id].z=P[e.player_id].z+e.change_in_z,t.socket.receive("EntityMove",{uuid:P[e.player_id].id,x:P[e.player_id].z/32,y:(P[e.player_id].y-51)/32,z:P[e.player_id].x/32,rotation:(P[e.player_id].rotation-64)/255*6.28,yaw:P[e.player_id].yaw/255*6.28})}),n.on("position_and_orientation_update",e=>{P[e.player_id].x=P[e.player_id].x+e.change_in_x,P[e.player_id].y=P[e.player_id].y+e.change_in_y,P[e.player_id].z=P[e.player_id].z+e.change_in_z,P[e.player_id].rotation=e.yaw,P[e.player_id].yaw=e.pitch,t.socket.receive("EntityMove",{uuid:P[e.player_id].id,x:P[e.player_id].z/32,y:(P[e.player_id].y-51)/32,z:P[e.player_id].x/32,rotation:(P[e.player_id].rotation-64)/255*6.28,yaw:P[e.player_id].yaw/255*6.28})}),n.on("orientation_update",e=>{P[e.player_id].rotation=e.yaw,P[e.player_id].yaw=e.pitch,t.socket.receive("EntityMove",{uuid:P[e.player_id].id,x:P[e.player_id].z/32,y:(P[e.player_id].y-51)/32,z:P[e.player_id].x/32,rotation:(P[e.player_id].rotation-64)/255*6.28,yaw:P[e.player_id].yaw/255*6.28})}),n.on("player_teleport",e=>{255==e.player_id||-1==e.player_id?t.socket.receive("PlayerTeleport",{x:e.z/32,y:e.y/32,z:e.x/32}):(P[e.player_id].x=e.x,P[e.player_id].y=e.y,P[e.player_id].z=e.z,t.socket.receive("EntityMove",{uuid:P[e.player_id].id,x:P[e.player_id].z/32,y:(P[e.player_id].y-51)/32,z:P[e.player_id].x/32,rotation:(P[e.player_id].rotation-64)/255*6.28,yaw:P[e.player_id].yaw/3.14}))}),n.on("disconnect",()=>{l.e.close()}),n.on("set_block",e=>{t.socket.receive("WorldBlockUpdate",{x:e.z,y:e.y,z:e.x,id:e.block_type});const n=4+e.x+k.z*(e.z+k.x*e.y);w[n]=e.block_type}),n.on("disconnect_player",e=>{t.socket.receive("PlayerKick",{reason:e.disconnect_reason}),l.e.close()}),n.on("level_initialize",n=>{t.socket.receive("WorldChunksRemoveAll",{confirm:!0}),l.e.noa.world.invalidateVoxelsInAABB({base:[-1024,-32,-1024],max:[1024,512,1024]}),l.e.noa.ents.getPhysics(l.e.noa.playerEntity).body.airDrag=999,_=e.alloc(0),c=!1,w=null,O=[],t.socket.receive("LoginStatus",{message:"Loading world... 0%",time:Date.now()})}),n.on("level_data_chunk",n=>{l.e.noa.ents.getPhysics(l.e.noa.playerEntity).body.airDrag=999,_=e.concat([_,n.chunk_data]),t.socket.receive("LoginStatus",{message:"Loading world... "+n.percent_complete+"%",time:Date.now()})}),n.on("level_finalize",async r=>{let a,s,u;t.socket.receive("LoginStatus",{message:"Loading world... 100%",time:Date.now()}),l.e.noa.ents.getPhysics(l.e.noa.playerEntity).body.airDrag=999,w=o.ungzip(_),k.x=r.x_size,k.y=r.y_size,k.z=r.z_size;let f=Math.ceil(r.x_size/32),h=Math.ceil(r.y_size/32),d=Math.ceil(r.z_size/32);for(a=0;a<f;a++)for(s=0;s<h;s++)for(u=0;u<d;u++){const t=new i(new Uint16Array(32768),[32,32,32]);let n,o,c;for(l.e.noa.ents.getPhysics(l.e.noa.playerEntity).body.airDrag=999,n=0;n<32;n++)for(o=0;o<32;o++)for(c=0;c<32;c++){const e=4+n+32*a+r.z_size*(c+32*u+r.x_size*(o+32*s));e<w.length?t.set(c,o,n,w[e]):t.set(c,o,n,o+32*h==66?257:o<66?6:256)}const f={x:u,y:s,z:a,data:e.from(t.data.buffer,t.data.byteOffset),compressed:!1,height:1};O.push(f)}b&&(n.send("message",{message:"This user connected to this server with VoxelCraft2"}),b=!1);const p=e.from(v.data.buffer,v.data.byteOffset),m=e.from(g.data.buffer,g.data.byteOffset);for(let e=-2;e<=d+2;e++)for(let n=-2;n<=f+2;n++){if(e<0||e>=d||n<0||n>=f){const r={x:e,y:0,z:n,data:p,compressed:!1,height:16};c?t.socket.receive("WorldChunkLoad",r):O.push(r)}const r={x:e,y:-1,z:n,data:m,compressed:!1,height:1};c?t.socket.receive("WorldChunkLoad",r):O.push(r)}})}}).call(this,n(85).Buffer)},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"string",(function(){return i})),n.d(t,"byte_array",(function(){return o}));const r=n(294).utils.PartialReadError;const i=[function(e,t){if(t+64>e.length)throw new r;var n=e.toString("ascii",t,t+64);return{value:n=n.trim(),size:64}},function(e,t,n){for(var r=e.length-1;r<64;r++)e+=" ";return t.write(e,n,64,"ascii"),n+64},64],o=[function(e,t){var n=this.read(e,t,"i16");if((t+=2)+1024>e.length)throw new r;return{value:e.slice(t,t+n.value),size:1026}},function(t,n,r){r=this.write(t.length,n,r,"i16"),r+=t.copy(n,r);var i=e.alloc(1024-t.length);return i.fill(0),r+=i.copy(n,r)},function(){return 1026}]}.call(this,n(85).Buffer)},function(e){e.exports=JSON.parse('{"types":{"u8":"native","string":"native","i8":"native","i16":"native","byte_array":"native"},"toServer":{"types":{"packet_player_identification":["container",[{"name":"protocol_version","type":"u8"},{"name":"username","type":"string"},{"name":"verification_key","type":"string"},{"name":"unused","type":"i8"}]],"packet_set_block":["container",[{"name":"x","type":"i16"},{"name":"y","type":"i16"},{"name":"z","type":"i16"},{"name":"mode","type":"u8"},{"name":"block_type","type":"u8"}]],"packet_position":["container",[{"name":"player_id","type":"u8"},{"name":"x","type":"i16"},{"name":"y","type":"i16"},{"name":"z","type":"i16"},{"name":"yaw","type":"u8"},{"name":"pitch","type":"u8"}]],"packet_message":["container",[{"name":"unused","type":"u8"},{"name":"message","type":"string"}]],"packet":["container",[{"name":"name","type":["mapper",{"type":"u8","mappings":{"0x00":"player_identification","0x05":"set_block","0x08":"position","0x0d":"message"}}]},{"name":"params","type":["switch",{"compareTo":"name","fields":{"player_identification":"packet_player_identification","set_block":"packet_set_block","position":"packet_position","message":"packet_message"}}]}]]}},"toClient":{"types":{"packet_server_identification":["container",[{"name":"protocol_version","type":"u8"},{"name":"server_name","type":"string"},{"name":"server_motd","type":"string"},{"name":"user_type","type":"i8"}]],"packet_ping":["container",[]],"packet_level_initialize":["container",[]],"packet_level_data_chunk":["container",[{"name":"chunk_data","type":"byte_array"},{"name":"percent_complete","type":"u8"}]],"packet_level_finalize":["container",[{"name":"x_size","type":"i16"},{"name":"y_size","type":"i16"},{"name":"z_size","type":"i16"}]],"packet_set_block":["container",[{"name":"x","type":"i16"},{"name":"y","type":"i16"},{"name":"z","type":"i16"},{"name":"block_type","type":"u8"}]],"packet_spawn_player":["container",[{"name":"player_id","type":"i8"},{"name":"player_name","type":"string"},{"name":"x","type":"i16"},{"name":"y","type":"i16"},{"name":"z","type":"i16"},{"name":"yaw","type":"u8"},{"name":"pitch","type":"u8"}]],"packet_player_teleport":["container",[{"name":"player_id","type":"i8"},{"name":"x","type":"i16"},{"name":"y","type":"i16"},{"name":"z","type":"i16"},{"name":"yaw","type":"u8"},{"name":"pitch","type":"u8"}]],"packet_position_and_orientation_update":["container",[{"name":"player_id","type":"i8"},{"name":"change_in_x","type":"i8"},{"name":"change_in_y","type":"i8"},{"name":"change_in_z","type":"i8"},{"name":"yaw","type":"i8"},{"name":"pitch","type":"i8"}]],"packet_position_update":["container",[{"name":"player_id","type":"i8"},{"name":"change_in_x","type":"i8"},{"name":"change_in_y","type":"i8"},{"name":"change_in_z","type":"i8"}]],"packet_orientation_update":["container",[{"name":"player_id","type":"i8"},{"name":"yaw","type":"u8"},{"name":"pitch","type":"u8"}]],"packet_despawn_player":["container",[{"name":"player_id","type":"i8"}]],"packet_message":["container",[{"name":"player_id","type":"i8"},{"name":"message","type":"string"}]],"packet_disconnect_player":["container",[{"name":"disconnect_reason","type":"string"}]],"packet_update_user_type":["container",[{"name":"user_type","type":"u8"}]],"packet":["container",[{"name":"name","type":["mapper",{"type":"u8","mappings":{"0x00":"server_identification","0x01":"ping","0x02":"level_initialize","0x03":"level_data_chunk","0x04":"level_finalize","0x06":"set_block","0x07":"spawn_player","0x08":"player_teleport","0x09":"position_and_orientation_update","0x0a":"position_update","0x0b":"orientation_update","0x0c":"despawn_player","0x0d":"message","0x0e":"disconnect_player","0x0f":"update_user_type"}}]},{"name":"params","type":["switch",{"compareTo":"name","fields":{"server_identification":"packet_server_identification","ping":"packet_ping","level_initialize":"packet_level_initialize","level_data_chunk":"packet_level_data_chunk","level_finalize":"packet_level_finalize","set_block":"packet_set_block","spawn_player":"packet_spawn_player","player_teleport":"packet_player_teleport","position_and_orientation_update":"packet_position_and_orientation_update","position_update":"packet_position_update","orientation_update":"packet_orientation_update","despawn_player":"packet_despawn_player","message":"packet_message","disconnect_player":"packet_disconnect_player","update_user_type":"packet_update_user_type"}}]}]]}}}')},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(65),i=n(294),o=n(425),a=n(474),s=n(475);function u(e,t){var n=new i.ProtoDef;return n.addTypes(a),function e(t,n,r){void 0!==n&&(n.types&&t.addTypes(n.types),e(t,Object(o.get)(n,r.shift()),r))}(n,Object(o.merge)(s,e),[t]),n}class l extends r.EventEmitter{constructor(){super(),this.isServer=!1,this.customPackets={},this.serializer=function(e=!1,t){return new i.Serializer(u(t,e?"toClient":"toServer"),"packet")}(!1,this.customPackets),this.deserializer=function(e=!1,t){return new i.Parser(u(t,e?"toServer":"toClient"),"packet")}(!1,this.customPackets),this.serializer.on("error",e=>{var t=e.field?e.field.split("."):[];t.shift();var n=this.isServer?"toClient":"toServer";e.field=[n].concat(t).join("."),e.message=`Serialization error for ${e.field} : ${e.message}`,this.emit("error",e)}),this.deserializer.on("error",e=>{var t=e.field?e.field.split("."):[];t.shift();var n=this.isServer?"toServer":"toClient";e.field=[n].concat(t).join("."),e.message=`Deserialization error for ${e.field} : ${e.message}`,this.emit("error",e)}),this.deserializer.on("data",e=>{e.metadata.name=e.data.name,e.data=e.data.params,this.emit("packet",e.data,e.metadata),this.emit(e.metadata.name,e.data,e.metadata),this.emit("raw."+e.metadata.name,e.buffer,e.metadata),this.emit("raw",e.buffer,e.metadata)})}send(e,t){this.emit("send",{name:e,params:t})}}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o){var a=+t[0],s=+t[1],u=+t[2],l=+n[0],c=+n[1],f=+n[2],h=Math.sqrt(l*l+c*c+f*f);if(0===h)throw new Error("Can't raycast along a zero vector");return function(e,t,n,r,i,o,a,s,u,l){for(var c=0,f=Math.floor,h=0|f(t),d=0|f(n),p=0|f(r),m=i>0?1:-1,y=o>0?1:-1,v=a>0?1:-1,g=Math.abs(1/i),b=Math.abs(1/o),w=Math.abs(1/a),_=g<1/0?g*(m>0?h+1-t:t-h):1/0,k=b<1/0?b*(y>0?d+1-n:n-d):1/0,x=w<1/0?w*(v>0?p+1-r:r-p):1/0,O=-1;c<=s;){var P=e(h,d,p);if(P)return u&&(u[0]=t+c*i,u[1]=n+c*o,u[2]=r+c*a),l&&(l[0]=l[1]=l[2]=0,0===O&&(l[0]=-m),1===O&&(l[1]=-y),2===O&&(l[2]=-v)),P;_<k?_<x?(h+=m,c=_,_+=g,O=0):(p+=v,c=x,x+=w,O=2):k<x?(d+=y,c=k,k+=b,O=1):(p+=v,c=x,x+=w,O=2)}return u&&(u[0]=t+c*i,u[1]=n+c*o,u[2]=r+c*a),l&&(l[0]=l[1]=l[2]=0),0}(e,a,s,u,l/=h,c/=h,f/=h,r=void 0===r?64:+r,i,o)}},function(e,t,n){"use strict";n.r(t),n.d(t,"MicroGameShell",(function(){return r}));class r{constructor(e,t=10){this.stickyPointerLock=!1,this.stickyFullscreen=!1,this.tickRate=30,this.maxRenderRate=0,this.pointerLock=!1,this.fullscreen=!1,this.onTick=function(e){},this.onRender=function(){},this.onInit=function(){},this.onResize=function(){},this.onPointerLockChanged=function(e){},this.onFullscreenChanged=function(e){},a(()=>{!function(e,t){e._nowObject=performance||Date,e._lastTick=0,e._renderAccum=0,e._rt=0,e._frameCB=o.bind(null,e),requestAnimationFrame(e._frameCB),t>0&&(e._intervalCB=i.bind(null,e),e._interval=setInterval(e._intervalCB,t))}(this,t),function(e,t){if(!t)return;var n=!1,r=!1;document.addEventListener("pointerlockchange",r=>{n=document.pointerLockElement===t,e.onPointerLockChanged(n)}),document.addEventListener("fullscreenchange",n=>{r=document.fullscreenElement===t,e.onFullscreenChanged(r)}),Object.defineProperty(e,"pointerLock",{get:()=>n,set:e=>{e&&!n?t.requestPointerLock():n&&!e&&document.exitPointerLock()}}),Object.defineProperty(e,"fullscreen",{get:()=>r,set:e=>{e&&!r?t.requestFullscreen():r&&!e&&document.exitFullscreen()}}),t.addEventListener("click",i=>{e.stickyPointerLock&&!n&&t.requestPointerLock(),e.stickyFullscreen&&!r&&t.requestFullscreen()});var i=()=>e.onResize();if(window.ResizeObserver){new ResizeObserver(i).observe(t)}else window.addEventListener("resize",i)}(this,e),this.onInit()})}}function i(e){var t=e._nowObject.now(),n=1e3/e.tickRate,r=e._lastTick+n;t<r||(e._lastTick=Math.max(t-n,r),e.onTick(n))}function o(e){requestAnimationFrame(e._frameCB),i(e);var t=e._nowObject.now(),n=t-e._rt;if(e._rt=t,e.maxRenderRate>0){e._renderAccum+=n;var r=1e3/e.maxRenderRate;if(e._renderAccum<r)return;e._renderAccum=Math.min(e._renderAccum-r,r)}var o=1e3/e.tickRate,a=(t-e._lastTick)/o;e.onRender(n,a,o)}var a=e=>{if("loading"===document.readyState){var t=()=>{document.removeEventListener("readystatechange",t),e()};document.addEventListener("readystatechange",t)}else setTimeout(e,1)}},function(e,t,n){var r=n(421),i=n(65).EventEmitter,o=n(482);function a(e,t){this.element=e||document,t=t||{},this.preventDefaults=!!t.preventDefaults,this.stopPropagation=!!t.stopPropagation,this.allowContextMenu=!!t.allowContextMenu,this.disabled=!!t.disabled,this.down=new i,this.up=new i,this.state={dx:0,dy:0,scrollx:0,scrolly:0,scrollz:0},this._keybindmap={},this._keyStates={},this._bindPressCounts={},this._ignoreMousemoveOnce=!1,this.initEvents()}function s(e,t,n){v(n.keyCode,r[n.keyCode],t,e,n)}function u(e,t,n){return v(-1-n.button,"<mouse "+(n.button+1)+">",t,e,n),!1}function l(e){if(!e.allowContextMenu)return!1}function c(e,t){if(e._ignoreMousemoveOnce)e._ignoreMousemoveOnce=!1;else{var n=t.movementX||t.mozMovementX||0,r=t.movementY||t.mozMovementY||0;if(t.touches&&0==(n|r)){var i=function(e){for(var t,n=e.changedTouches,r=0;r<n.length;++r)n[r].identifier==d&&(t=n[r]);if(!t)return[0,0];var i=[t.clientX-f,t.clientY-h];return f=t.clientX,h=t.clientY,i}(t);n=i[0],r=i[1]}e.state.dx+=n,e.state.dy+=r}}e.exports=function(e,t){return new a(e,t)},a.prototype.initEvents=function(){window.addEventListener("keydown",s.bind(void 0,this,!0),!1),window.addEventListener("keyup",s.bind(void 0,this,!1),!1),this.element.addEventListener("mousedown",u.bind(void 0,this,!0),!1),this.element.addEventListener("mouseup",u.bind(void 0,this,!1),!1),this.element.oncontextmenu=l.bind(void 0,this),this.element.addEventListener("dragstart",u.bind(void 0,this,!1),!1),this.element.addEventListener("mousemove",c.bind(void 0,this),!1),this.element.addEventListener("touchmove",c.bind(void 0,this),!1),this.element.addEventListener("touchstart",p.bind(void 0,this),!1),o(this.element,m.bind(void 0,this),!1),document.addEventListener("pointerlockchange",y.bind(void 0,this),!1),document.addEventListener("mozpointerlockchange",y.bind(void 0,this),!1)},a.prototype.bind=function(e){for(var t=1;t<arguments.length;++t){var n=arguments[t],r=this._keybindmap[n]||[];-1==r.indexOf(e)&&r.push(e),this._keybindmap[n]=r}this.state[e]=!!this.state[e]},a.prototype.unbind=function(e){for(var t in this._keybindmap){var n=this._keybindmap[t],r=n.indexOf(e);r>-1&&n.splice(r,1)}},a.prototype.tick=function(){this.state.dx=this.state.dy=0,this.state.scrollx=this.state.scrolly=this.state.scrollz=0},a.prototype.getBoundKeys=function(){var e=[];for(var t in this._keybindmap)e.push(t);return e};var f=0,h=0,d=null;function p(e,t){var n=t.changedTouches[0];f=n.clientX,h=n.clientY,d=n.identifier}function m(e,t){var n=1;switch(t.deltaMode){case 0:n=1;break;case 1:n=12;break;case 2:n=e.element.clientHeight||window.innerHeight}return e.state.scrollx+=t.deltaX*n,e.state.scrolly+=t.deltaY*n,e.state.scrollz+=t.deltaZ*n||0,!1}function y(e,t){(document.pointerLockElement||document.mozPointerLockElement||null)&&(e._ignoreMousemoveOnce=!0)}function v(e,t,n,r,i){var o=r._keybindmap[t];if(o){if(r.preventDefaults&&i.preventDefault(),r.stopPropagation&&i.stopPropagation(),b(r._keyStates[e],n))for(var a=0;a<o.length;++a)g(o[a],n,r,i);r._keyStates[e]=n}}function g(e,t,n,r){var i=n._bindPressCounts[e]||0;if((i+=t?1:-1)<0&&(i=0),n._bindPressCounts[e]=i,b(n.state[e],i)){var o=t?n.down:n.up;n.disabled||o.emit(e,r)}n.state[e]=!!i}function b(e,t){return e?!t:t}},function(e,t){var n,r,i="";function o(e,t,o,a){e[n](i+t,"wheel"==r?o:function(e){!e&&(e=window.event);var t={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==e.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1}};return"mousewheel"==r?(t.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(t.deltaX=-1/40*e.wheelDeltaX)):t.deltaY=e.detail,o(t)},a||!1)}window.addEventListener?n="addEventListener":(n="attachEvent",i="on"),r="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",e.exports=function(e,t,n){o(e,r,t,n),"DOMMouseScroll"==r&&o(e,"MozMousePixelScroll",t,n)}},function(e,t,n){"use strict";var r=n(312),i=n(77),o=n(484),a=n(485);e.exports=function(e,t,n,r){return new u(e,t,n,r)};var s={gravity:[0,-10,0],minBounceImpulse:.5,airDrag:.1,fluidDrag:.4,fluidDensity:2,lockToBlock:!1};function u(e,t,n,r){e=Object.assign({},s,e),this.gravity=e.gravity,this.airDrag=e.airDrag,this.fluidDensity=e.fluidDensity,this.fluidDrag=e.fluidDrag,this.minBounceImpulse=e.minBounceImpulse,this.bodies=[],this.testSolid=t,this.testFluid=n,this.getColision=r}u.prototype.addBody=function(e,t,n,i,o,s){e=e||new r([0,0,0],[1,1,1]),void 0===t&&(t=1),void 0===n&&(n=1),void 0===i&&(i=0),void 0===o&&(o=1);var u=new a(e,t,n,i,o,s);return this.bodies.push(u),u},u.prototype.removeBody=function(e){var t=this.bodies.indexOf(e);t<0||(this.bodies.splice(t,1),e.aabb=e.onCollide=null)};var l=i.create(),c=i.create(),f=i.create(),h=i.create(),d=i.create();u.prototype.tick=function(e){e/=1e3;var t=O(0,i.squaredLength(this.gravity));this.bodies.forEach(n=>function(e,t,n,r){if(i.copy(d,t.resting),t.mass<=0)return i.set(t.velocity,0,0,0),i.set(t._forces,0,0,0),void i.set(t._impulses,0,0,0);var a=r||0===t.gravityMultiplier;if(function(e,t,n,r){if(t._sleepFrameCount>0)return!1;if(r)return!0;var a=!1,s=.5*n*n*t.gravityMultiplier;return i.scale(x,e.gravity,s),o(e.testSolid,e.getColision,t.aabb,x,(function(){return a=!0,!0}),!0),a}(e,t,n,a))return;t._sleepFrameCount--,function(e,t){var n=t.aabb,r=Math.floor(n.base[0]),o=Math.floor(n.base[2]),a=Math.floor(n.base[1]),s=Math.floor(n.max[1]);if(!e.testFluid(r,a,o))return t.inFluid=!1,void(t.ratioInFluid=0);var u=1,l=a+1;for(;l<=s&&e.testFluid(r,l,o);)u++,l++;var c=(a+u-n.base[1])/n.vec[1];c>1&&(c=1);var f=n.vec[0]*n.vec[1]*n.vec[2]*c,h=p;i.scale(h,e.gravity,-e.fluidDensity*f),t.applyForce(h),t.inFluid=!0,t.ratioInFluid=c}(e,t),S(t._forces),S(t._impulses),S(t.velocity),S(t.resting),i.scale(l,t._forces,1/t.mass),i.scaleAndAdd(l,l,e.gravity,t.gravityMultiplier),i.scale(c,t._impulses,1/t.mass),i.scaleAndAdd(c,c,l,n),i.add(t.velocity,t.velocity,c),t.friction&&(m(0,t,c),m(1,t,c),m(2,t,c));var s=t.airDrag>=0?t.airDrag:e.airDrag;t.inFluid&&(s=t.fluidDrag>=0?t.fluidDrag:e.fluidDrag,s*=1-(1-t.ratioInFluid)**2);var u=Math.max(1-s*n/t.mass,0);i.scale(t.velocity,t.velocity,u),i.scale(f,t.velocity,n),i.set(t._forces,0,0,0),i.set(t._impulses,0,0,0),t.autoStep&&P(g,t.aabb);v(e,t.aabb,f,t.resting),t.autoStep&&function(e,t,n,r){if(t.resting[1]>=0&&!t.inFluid)return;var a=0!==t.resting[0],s=0!==t.resting[2];if(!a&&!s)return;var u=Math.abs(r[0]/r[2]);if(!a&&u>4)return;if(!s&&u<1/4)return;i.add(w,n.base,r);var l=e.testSolid;o(l,e.getColision,n,r,(function(e,t,n,r){if(1!==t)return!0;r[t]=0}));var c=t.aabb.base[1],f=Math.floor(c+1.001)-c;i.set(_,0,f,0);var h=!1;if(o(l,e.getColision,n,_,(function(e,t,n,r){return h=!0,!0})),h)return;if(i.subtract(k,w,n.base),k[1]=0,v(e,n,k,b),a&&!O(n.base[0],w[0]))return;if(s&&!O(n.base[2],w[2]))return;P(t.aabb,n),t.resting[0]=b[0],t.resting[2]=b[2],t.onStep&&t.onStep()}(e,t,g,f);for(var y=0;y<3;++y)h[y]=0,t.resting[y]&&(d[y]||(h[y]=-t.velocity[y]),t.velocity[y]=0);var E=i.length(h);E>.001&&(i.scale(h,h,t.mass),t.onCollide&&t.onCollide(h),t.restitution>0&&E>e.minBounceImpulse&&(i.scale(h,h,t.restitution),t.applyImpulse(h)));i.squaredLength(t.velocity)>1e-5&&t._markActive()}(this,n,e,t))};var p=i.create();function m(e,t,n){var r=t.resting[e],o=n[e];if(0!==r&&!(r*o<=0)){i.copy(y,t.velocity),y[e]=0;var a=i.length(y);if(!O(a,0)){var s=Math.abs(t.friction*o),u=a>s?(a-s)/a:0;t.velocity[(e+1)%3]*=u,t.velocity[(e+2)%3]*=u}}}var y=i.create();function v(e,t,n,r){return i.set(r,0,0,0),o(e.testSolid,e.getColision,t,n,(function(e,t,n,i){r[t]=n,i[t]=0}))}var g=new r([],[]),b=i.create(),w=i.create(),_=i.create(),k=i.create();var x=i.create();function O(e,t){return Math.abs(e-t)<1e-5}function P(e,t){for(var n=0;n<3;n++)e.base[n]=t.base[n],e.max[n]=t.max[n],e.vec[n]=t.vec[n]}var S=function(){}},function(e,t,n){"use strict";n(312);var r=[],i=[],o=[],a=[],s=[],u=[],l=[],c=[],f=[],h=[],d=[],p=[];e.exports=function(e,t,n,m,y,v,g){for(var b=l,w=f,_=h,k=p,x=0;x<3;x++)b[x]=+m[x],_[x]=+n.max[x],w[x]=+n.base[x];g||(g=1e-10);var O=function(e,t,n,l,f,h,p,m){var y=r,v=i,g=o,b=a,w=s,_=u,k=c,x=Math.floor,O=0,P=0,S=0,E=0,j=0;if(C(),0===S)return 0;for(E=z();P<=S;){if(T(E))if(A())return O;E=z()}for(O+=S,j=0;j<3;j++)f[j]+=l[j],h[j]+=l[j];return O;function C(){if(P=0,0!==(S=Math.sqrt(l[0]*l[0]+l[1]*l[1]+l[2]*l[2])))for(var e=0;e<3;e++){var t=l[e]>=0;b[e]=t?1:-1;var n=t?h[e]:f[e];y[e]=t?f[e]:h[e],v[e]=I(n,b[e]),g[e]=D(y[e],b[e]),k[e]=l[e]/S,w[e]=Math.abs(1/k[e]);var r=t?v[e]+1-n:n-v[e];_[e]=w[e]<1/0?w[e]*r:1/0}}function T(t){for(var n=b[0],r=0===t?v[0]:g[0],i=v[0]+n,o=b[1],a=1===t?v[1]:g[1],s=v[1]+o,u=b[2],l=2===t?v[2]:g[2],c=v[2]+u,f=r;f!=i;f+=n)for(var h=a;h!=s;h+=o)for(var d=l;d!=c;d+=u)if(e(f,h,d))return!0;return!1}function A(){O+=P;var e=b[E],t=P/S,r=d;for(j=0;j<3;j++){var i=l[j]*t;f[j]+=i,h[j]+=i,r[j]=l[j]-i}if(e>0?h[E]=Math.round(h[E]):f[E]=Math.round(f[E]),n(O,E,e,r))return!0;for(j=0;j<3;j++)l[j]=r[j];return C(),0===S}function z(){var e=_[0]<_[1]?_[0]<_[2]?0:2:_[1]<_[2]?1:2,t=_[e]-P;for(P=_[e],v[e]+=b[e],_[e]+=w[e],j=0;j<3;j++)y[j]+=t*k[j],g[j]=D(y[j],b[j]);return e}function I(e,t){return x(e-t*p)}function D(e,t){return x(e+t*p)}}(e,0,y,b,w,_,g);if(!v){for(x=0;x<3;x++)k[x]=m[x]>0?_[x]-n.max[x]:w[x]-n.base[x];n.translate(k)}return O}},function(e,t,n){"use strict";var r=n(312),i=n(77);function o(e,t,n,o,a,s,u){this.aabb=new r(e.base,e.vec),this.mass=t,this.friction=n,this.restitution=o,this.gravityMultiplier=a,this.onCollide=s,this.autoStep=!!u,this.airDrag=-1,this.fluidDrag=-1,this.onStep=null,this.velocity=i.create(),this.resting=[0,0,0],this.inFluid=!1,this._ratioInFluid=0,this._forces=i.create(),this._impulses=i.create(),this._sleepFrameCount=10}e.exports=o,o.prototype.setPosition=function(e){a(e),i.subtract(e,e,this.aabb.base),this.aabb.translate(e),this._markActive()},o.prototype.getPosition=function(){return i.clone(this.aabb.base)},o.prototype.applyForce=function(e){a(e),i.add(this._forces,this._forces,e),this._markActive()},o.prototype.applyImpulse=function(e){a(e),i.add(this._impulses,this._impulses,e),this._markActive()},o.prototype._markActive=function(){this._sleepFrameCount=10},o.prototype.atRestX=function(){return this.resting[0]},o.prototype.atRestY=function(){return this.resting[1]},o.prototype.atRestZ=function(){return this.resting[2]};var a=function(){}},function(e,t,n){"use strict";var r=[],i=[],o=[],a=[],s=[],u=[],l=[],c=[],f=[],h=[],d=[],p=[];e.exports=function(e,t,n,m,y,v){for(var g=l,b=f,w=h,_=p,k=0;k<3;k++)g[k]=+n[k],w[k]=+t.max[k],b[k]=+t.base[k];v||(v=1e-10);var x=function(e,t,n,l,f,h){var p=r,m=i,y=o,v=a,g=s,b=u,w=c,_=Math.floor,k=0,x=0,O=0,P=0,S=0;if(E(),0===O)return 0;for(P=T();x<=O;){if(j(P))if(C())return k;P=T()}for(k+=O,S=0;S<3;S++)l[S]+=n[S],f[S]+=n[S];return k;function E(){if(x=0,0!==(O=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2])))for(var e=0;e<3;e++){var t=n[e]>=0;v[e]=t?1:-1;var r=t?f[e]:l[e];p[e]=t?l[e]:f[e],m[e]=A(r,v[e]),y[e]=z(p[e],v[e]),w[e]=n[e]/O,g[e]=Math.abs(1/w[e]);var i=t?m[e]+1-r:r-m[e];b[e]=g[e]<1/0?g[e]*i:1/0}}function j(t){for(var n=v[0],r=0===t?m[0]:y[0],i=m[0]+n,o=v[1],a=1===t?m[1]:y[1],s=m[1]+o,u=v[2],l=2===t?m[2]:y[2],c=m[2]+u,f=r;f!=i;f+=n)for(var h=a;h!=s;h+=o)for(var d=l;d!=c;d+=u)if(e(f,h,d))return!0;return!1}function C(){k+=x;var e=v[P],r=x/O,i=d;for(S=0;S<3;S++){var o=n[S]*r;l[S]+=o,f[S]+=o,i[S]=n[S]-o}if(e>0?f[P]=Math.round(f[P]):l[P]=Math.round(l[P]),t(k,P,e,i))return!0;for(S=0;S<3;S++)n[S]=i[S];return E(),0===O}function T(){var e=b[0]<b[1]?b[0]<b[2]?0:2:b[1]<b[2]?1:2,t=b[e]-x;for(x=b[e],m[e]+=v[e],b[e]+=g[e],S=0;S<3;S++)p[S]+=t*w[S],y[S]=z(p[S],v[S]);return e}function A(e,t){return _(e-t*h)}function z(e,t){return _(e+t*h)}}(e,m,g,b,w,v);if(!y){for(k=0;k<3;k++)_[k]=n[k]>0?w[k]-t.max[k]:b[k]-t.base[k];t.translate(_)}return x}},function(e,t,n){"use strict";e.exports=
/*!
 * ent-comp: a light, *fast* Entity Component System in JS
 * @url      github.com/andyhall/ent-comp
 * @author   Andy Hall <andy@fenomas.com>
 * @license  MIT
*/
function e(){var t=this;this.components={},this.comps=this.components;var n=this.components,i=1,o={},a=[],s=[],u=[],l=[],c=[];function f(e){Object.keys(o).forEach(t=>{o[t].hash[e]&&h(e,t)})}function h(e,t){var i=n[t],a=o[t];a&&a.hash[e]&&(i.onRemove&&(i.multi?a.hash[e].forEach(t=>{i.onRemove(e,t)}):i.onRemove(e,a.hash[e])),i.multi&&(a.hash[e].length=0),r.remove(a,e))}function d(e,t,r){var i=n[t],a=o[t].hash[e];if(a){var s=a.indexOf(r);s<0||(i.onRemove&&i.onRemove(e,r),a.splice(s,1),0===a.length&&h(e,t))}}function p(){m||(m=!0,setTimeout((function(){m=!1,y()}),1))}this._storage=o,this._systems=a,this._renderSystems=s,this.createEntity=function(e){var n=i++;return e&&e.length&&e.forEach(e=>t.addComponent(n,e)),n},this.deleteEntity=function(e,n){return n?f(e):(u.push(e),p()),t},this.createComponent=function(e){if(!e)throw"Missing component definition";var t=e.name;if(!t)throw"Component definition must have a name property.";if("string"!=typeof t)throw"Component name must be a string.";if(""===t)throw"Component name must be a non-empty string.";if(o[t])throw`Component ${t} already exists.`;var i={};return i.name=t,i.order=isNaN(e.order)?99:e.order,i.state=e.state||{},i.onAdd=e.onAdd||null,i.onRemove=e.onRemove||null,i.system=e.system||null,i.renderSystem=e.renderSystem||null,i.multi=!!e.multi,n[t]=i,o[t]=r.create(),i.system&&(a.push(t),a.sort((e,t)=>n[e].order-n[t].order)),i.renderSystem&&(s.push(t),s.sort((e,t)=>n[e].order-n[t].order)),t},this.deleteComponent=function(e){var r=o[e];if(!r)throw"Unknown component: "+e;r.list.forEach(n=>{var r=n.__id||n[0].__id;t.removeComponent(r,e,!0)});var i=a.indexOf(e),u=s.indexOf(e);return i>-1&&a.splice(i,1),u>-1&&s.splice(u,1),delete n[e],delete o[e],t},this.addComponent=function(e,t,i){var a=n[t],s=o[t];if(!s)throw`Unknown component: ${t}.`;var u=!1;if(l.forEach(n=>{n.id===e&&n.compName===t&&(u=!0)}),u&&v(),s.hash[e]&&!a.multi)throw`Entity ${e} already has component: ${t}.`;var c=Object.assign({},{__id:e},a.state,i);if(c.__id=e,a.multi){var f=s.hash[e];f||(f=[],r.add(s,e,f)),f.push(c)}else r.add(s,e,c);return a.onAdd&&a.onAdd(e,c),this},this.hasComponent=function(e,t){var n=o[t];if(!n)throw`Unknown component: ${t}.`;return void 0!==n.hash[e]},this.removeComponent=function(e,r,i){var a=n[r],s=o[r];if(!s)throw`Unknown component: ${r}.`;if(!s.hash[e]){if(a.multi)return t;throw`Entity ${e} does not have component: ${r} to remove.`}return i?h(e,r):(l.push({id:e,compName:r}),p()),t},this.getState=function(e,t){var n=o[t];if(!n)throw`Unknown component: ${t}.`;return n.hash[e]},e.prototype.getStatesList=function(e){var t=o[e];if(!t)throw`Unknown component: ${e}.`;return t.list},this.getStateAccessor=function(e){if(!o[e])throw`Unknown component: ${e}.`;var t=o[e].hash;return function(e){return t[e]}},this.getComponentAccessor=function(e){if(!o[e])throw`Unknown component: ${e}.`;var t=o[e].hash;return function(e){return void 0!==t[e]}},this.tick=function(e){return y(),a.forEach(t=>{var r=o[t].list;n[t].system(e,r)}),y(),t},this.render=function(e){return y(),s.forEach(t=>{var r=o[t].list;n[t].renderSystem(e,r)}),y(),t},this.removeMultiComponent=function(e,r,i,a){var s=n[r],u=o[r];if(!u)throw`Unknown component: ${r}.`;if(!s.multi)throw"removeMultiComponent called on non-multi component";var l=u.hash[e];if(!l||!l[i])throw`Multicomponent ${r} instance not found at index ${i}`;var f=l[i];return a?d(e,r,f):c.push({id:e,compName:r,state:f}),t};var m=!1;function y(){v(),function(e){for(;c.length;){var t=c.pop();d(t.id,t.compName,t.state),t.state=null}}(),function(){for(;u.length;){f(u.pop())}}()}function v(){for(;l.length;){var e=l.pop();h(e.id,e.compName)}}};var r=n(488)},function(e,t,n){"use strict";e.exports={create:function(){return{list:[],hash:{},_map:{}}},add:function(e,t,n){e.list.push(n),e.hash[t]=n,e._map[t]=e.list.length-1},remove:function(e,t){var n=e._map[t];if(n===e.list.length-1)e.list.pop();else{var r=e.list.pop();e.list[n]=r;var i=r.__id||r[0].__id;e._map[i]=n}delete e.hash[t],delete e._map[t]}}},function(e,t,n){var r={"./collideEntities.js":490,"./collideTerrain.js":497,"./fadeOnZoom.js":498,"./followsEntity.js":499,"./mesh.js":500,"./movement.js":501,"./physics.js":423,"./position.js":422,"./receivesInputs.js":502,"./shadow.js":503,"./smoothCamera.js":504};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=489},function(e,t,n){"use strict";n.r(t),window.Buffer=window.Buffer||{isBuffer:()=>!1};var r=n(491);t.default=function(e){var t=[];return{name:"collideEntities",order:70,state:{cylinder:!1,collideBits:1,collideMask:1,callback:null},onAdd:null,onRemove:null,system:function(i,o){for(var a=e.ents,s=0;s<o.length;s++){var u=o[s].__id,l=a.getPositionData(u);t[s]=l._extents}t.length=o.length,r(t,(function(r,i){var a=o[r],s=o[i];(function(e,t,r,i){if(e.cylinder)return t.cylinder?function(e,t){var n=(e[3]-e[0])/2,r=(t[3]-t[0])/2,i=e[0]+n-(t[0]+r),o=e[2]+n-(t[2]+r),a=n+r;return i*i+o*o<=a*a}(r,i):n(r,i);if(t.cylinder)return n(i,r);return!0})(a,s,t[r],t[i])&&function(e,t,n){var r=t.__id,i=n.__id;t.collideMask&n.collideBits&&t.callback&&t.callback(i);n.collideMask&t.collideBits&&n.callback&&n.callback(r);e.ents.onPairwiseEntityCollision(r,i)}(e,a,s)}))}};function n(e,t){var n=(e[3]-e[0])/2,r=e[0]+n,o=e[2]+n,a=i(r,t[0],t[3])-r,s=i(o,t[2],t[5])-o;return a*a+s*s<=n*n}function i(e,t,n){return e<t?t:e>n?n:e}}},function(e,t,n){"use strict";e.exports=function(e,t,n){switch(arguments.length){case 1:return f(e);case 2:return"function"==typeof t?l(e,e,t,!0):h(e,t);case 3:return l(e,t,n,!1);default:throw new Error("box-intersect: Invalid arguments")}};var r,i=n(390),o=n(434),a=n(494);function s(e,t){for(var n=0;n<e;++n)if(!(t[n]<=t[n+e]))return!0;return!1}function u(e,t,n,r){for(var i=0,o=0,a=0,u=e.length;a<u;++a){var l=e[a];if(!s(t,l)){for(var c=0;c<2*t;++c)n[i++]=l[c];r[o++]=a}}return o}function l(e,t,n,r){var s=e.length,l=t.length;if(!(s<=0||l<=0)){var c=e[0].length>>>1;if(!(c<=0)){var f,h=i.mallocDouble(2*c*s),d=i.mallocInt32(s);if((s=u(e,c,h,d))>0){if(1===c&&r)o.init(s),f=o.sweepComplete(c,n,0,s,h,d,0,s,h,d);else{var p=i.mallocDouble(2*c*l),m=i.mallocInt32(l);(l=u(t,c,p,m))>0&&(o.init(s+l),f=1===c?o.sweepBipartite(c,n,0,s,h,d,0,l,p,m):a(c,n,r,s,h,d,l,p,m),i.free(p),i.free(m))}i.free(h),i.free(d)}return f}}}function c(e,t){r.push([e,t])}function f(e){return r=[],l(e,e,c,!0),r}function h(e,t){return r=[],l(e,t,c,!1),r}},function(e,t,n){"use strict";e.exports=function(e,t){switch(void 0===t&&(t=0),typeof e){case"number":if(e>0)return function(e,t){var n,r;for(n=new Array(e),r=0;r<e;++r)n[r]=t;return n}(0|e,t);break;case"object":if("number"==typeof e.length)return function e(t,n,r){var i=0|t[r];if(i<=0)return[];var o,a=new Array(i);if(r===t.length-1)for(o=0;o<i;++o)a[o]=n;else for(o=0;o<i;++o)a[o]=e(t,n,r+1);return a}(e,t,0)}return[]}},function(e,t,n){"use strict";e.exports=function(e,t){t<=128?r(0,t-1,e):function e(t,n,c){var f=(n-t+1)/6|0,h=t+f,d=n-f,p=t+n>>1,m=p-f,y=p+f,v=h,g=m,b=p,w=y,_=d,k=t+1,x=n-1,O=0;u(v,g,c)&&(O=v,v=g,g=O);u(w,_,c)&&(O=w,w=_,_=O);u(v,b,c)&&(O=v,v=b,b=O);u(g,b,c)&&(O=g,g=b,b=O);u(v,w,c)&&(O=v,v=w,w=O);u(b,w,c)&&(O=b,b=w,w=O);u(g,_,c)&&(O=g,g=_,_=O);u(g,b,c)&&(O=g,g=b,b=O);u(w,_,c)&&(O=w,w=_,_=O);for(var P=c[2*g],S=c[2*g+1],E=c[2*w],j=c[2*w+1],C=2*v,T=2*b,A=2*_,z=2*h,I=2*p,D=2*d,R=0;R<2;++R){var B=c[C+R],M=c[T+R],L=c[A+R];c[z+R]=B,c[I+R]=M,c[D+R]=L}o(m,t,c),o(y,n,c);for(var F=k;F<=x;++F)if(l(F,P,S,c))F!==k&&i(F,k,c),++k;else if(!l(F,E,j,c))for(;;){if(l(x,E,j,c)){l(x,P,S,c)?(a(F,k,x,c),++k,--x):(i(F,x,c),--x);break}if(--x<F)break}s(t,k-1,P,S,c),s(n,x+1,E,j,c),k-2-t<=32?r(t,k-2,c):e(t,k-2,c);n-(x+2)<=32?r(x+2,n,c):e(x+2,n,c);x-k<=32?r(k,x,c):e(k,x,c)}(0,t-1,e)};function r(e,t,n){for(var r=2*(e+1),i=e+1;i<=t;++i){for(var o=n[r++],a=n[r++],s=i,u=r-2;s-- >e;){var l=n[u-2],c=n[u-1];if(l<o)break;if(l===o&&c<a)break;n[u]=l,n[u+1]=c,u-=2}n[u]=o,n[u+1]=a}}function i(e,t,n){t*=2;var r=n[e*=2],i=n[e+1];n[e]=n[t],n[e+1]=n[t+1],n[t]=r,n[t+1]=i}function o(e,t,n){t*=2,n[e*=2]=n[t],n[e+1]=n[t+1]}function a(e,t,n,r){t*=2,n*=2;var i=r[e*=2],o=r[e+1];r[e]=r[t],r[e+1]=r[t+1],r[t]=r[n],r[t+1]=r[n+1],r[n]=i,r[n+1]=o}function s(e,t,n,r,i){t*=2,i[e*=2]=i[t],i[t]=n,i[e+1]=i[t+1],i[t+1]=r}function u(e,t,n){t*=2;var r=n[e*=2],i=n[t];return!(r<i)&&(r!==i||n[e+1]>n[t+1])}function l(e,t,n,r){var i=r[e*=2];return i<t||i===t&&r[e+1]<n}},function(e,t,n){"use strict";e.exports=function(e,t,n,o,c,k,x,O,P){!function(e,t){var n=8*i.log2(t+1)*(e+1)|0,o=i.nextPow2(6*n);v.length<o&&(r.free(v),v=r.mallocInt32(o));var a=i.nextPow2(2*n);g.length<a&&(r.free(g),g=r.mallocDouble(a))}(e,o+x);var S,E=0,j=2*e;b(E++,0,0,o,0,x,n?16:0,-1/0,1/0),n||b(E++,0,0,x,0,o,1,-1/0,1/0);for(;E>0;){var C=6*(E-=1),T=v[C],A=v[C+1],z=v[C+2],I=v[C+3],D=v[C+4],R=v[C+5],B=2*E,M=g[B],L=g[B+1],F=1&R,N=!!(16&R),U=c,$=k,V=O,q=P;if(F&&(U=O,$=P,V=c,q=k),!(2&R&&(z=d(e,T,A,z,U,$,L),A>=z)||4&R&&(A=p(e,T,A,z,U,$,M))>=z)){var W=z-A,H=D-I;if(N){if(e*W*(W+H)<1<<22){if(void 0!==(S=u.scanComplete(e,T,t,A,z,U,$,I,D,V,q)))return S;continue}}else{if(e*Math.min(W,H)<128){if(void 0!==(S=a(e,T,t,F,A,z,U,$,I,D,V,q)))return S;continue}if(e*W*H<1<<22){if(void 0!==(S=u.scanBipartite(e,T,t,F,A,z,U,$,I,D,V,q)))return S;continue}}var K=f(e,T,A,z,U,$,M,L);if(A<K)if(e*(K-A)<128){if(void 0!==(S=s(e,T+1,t,A,K,U,$,I,D,V,q)))return S}else if(T===e-2){if(void 0!==(S=F?u.sweepBipartite(e,t,I,D,V,q,A,K,U,$):u.sweepBipartite(e,t,A,K,U,$,I,D,V,q)))return S}else b(E++,T+1,A,K,I,D,F,-1/0,1/0),b(E++,T+1,I,D,A,K,1^F,-1/0,1/0);if(K<z){var G=l(e,T,I,D,V,q),J=V[j*G+T],Z=h(e,T,G,D,V,q,J);if(Z<D&&b(E++,T,K,z,Z,D,(4|F)+(N?16:0),J,L),I<G&&b(E++,T,K,z,I,G,(2|F)+(N?16:0),M,J),G+1===Z){if(void 0!==(S=N?_(e,T,t,K,z,U,$,G,V,q[G]):w(e,T,t,F,K,z,U,$,G,V,q[G])))return S}else if(G<Z){var Y;if(N){if(Y=m(e,T,K,z,U,$,J),K<Y){var Q=h(e,T,K,Y,U,$,J);if(T===e-2){if(K<Q&&void 0!==(S=u.sweepComplete(e,t,K,Q,U,$,G,Z,V,q)))return S;if(Q<Y&&void 0!==(S=u.sweepBipartite(e,t,Q,Y,U,$,G,Z,V,q)))return S}else K<Q&&b(E++,T+1,K,Q,G,Z,16,-1/0,1/0),Q<Y&&(b(E++,T+1,Q,Y,G,Z,0,-1/0,1/0),b(E++,T+1,G,Z,Q,Y,1,-1/0,1/0))}}else Y=F?y(e,T,K,z,U,$,J):m(e,T,K,z,U,$,J),K<Y&&(T===e-2?S=F?u.sweepBipartite(e,t,G,Z,V,q,K,Y,U,$):u.sweepBipartite(e,t,K,Y,U,$,G,Z,V,q):(b(E++,T+1,K,Y,G,Z,F,-1/0,1/0),b(E++,T+1,G,Z,K,Y,1^F,-1/0,1/0)))}}}}};var r=n(390),i=n(391),o=n(495),a=o.partial,s=o.full,u=n(434),l=n(496),c=n(435),f=c("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),h=c("lo===p0",["p0"]),d=c("lo<p0",["p0"]),p=c("hi<=p0",["p0"]),m=c("lo<=p0&&p0<=hi",["p0"]),y=c("lo<p0&&p0<=hi",["p0"]),v=r.mallocInt32(1024),g=r.mallocDouble(1024);function b(e,t,n,r,i,o,a,s,u){var l=6*e;v[l]=t,v[l+1]=n,v[l+2]=r,v[l+3]=i,v[l+4]=o,v[l+5]=a;var c=2*e;g[c]=s,g[c+1]=u}function w(e,t,n,r,i,o,a,s,u,l,c){var f=2*e,h=u*f,d=l[h+t];e:for(var p=i,m=i*f;p<o;++p,m+=f){var y=a[m+t],v=a[m+t+e];if(!(d<y||v<d)&&(!r||d!==y)){for(var g,b=s[p],w=t+1;w<e;++w){y=a[m+w],v=a[m+w+e];var _=l[h+w],k=l[h+w+e];if(v<_||k<y)continue e}if(void 0!==(g=r?n(c,b):n(b,c)))return g}}}function _(e,t,n,r,i,o,a,s,u,l){var c=2*e,f=s*c,h=u[f+t];e:for(var d=r,p=r*c;d<i;++d,p+=c){var m=a[d];if(m!==l){var y=o[p+t],v=o[p+t+e];if(!(h<y||v<h)){for(var g=t+1;g<e;++g){y=o[p+g],v=o[p+g+e];var b=u[f+g],w=u[f+g+e];if(v<b||w<y)continue e}var _=n(m,l);if(void 0!==_)return _}}}}},function(e,t,n){"use strict";var r=["d","ax","vv","rs","re","rb","ri","bs","be","bb","bi"];function i(e){var t="bruteForce"+(e?"Full":"Partial"),n=[],i=r.slice();e||i.splice(3,0,"fp");var o=["function "+t+"("+i.join()+"){"];function a(t,i){var a=function(e,t,n){var i="bruteForce"+(e?"Red":"Blue")+(t?"Flip":"")+(n?"Full":""),o=["function ",i,"(",r.join(),"){","var ","es","=2*","d",";"],a="for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];",s="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(n?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";return e?o.push(a,"Q",":",s):o.push(s,"Q",":",a),n?o.push("if(y1<x0||x1<y0)continue;"):t?o.push("if(y0<=x0||x1<y0)continue;"):o.push("if(y0<x0||x1<y0)continue;"),o.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv("),t?o.push("yi,xi"):o.push("xi,yi"),o.push(");if(rv!==void 0)return rv;}}}"),{name:i,code:o.join("")}}(t,i,e);n.push(a.code),o.push("return "+a.name+"("+r.join()+");")}o.push("if(re-rs>be-bs){"),e?(a(!0,!1),o.push("}else{"),a(!1,!1)):(o.push("if(fp){"),a(!0,!0),o.push("}else{"),a(!0,!1),o.push("}}else{if(fp){"),a(!1,!0),o.push("}else{"),a(!1,!1),o.push("}")),o.push("}}return "+t);var s=n.join("")+o.join("");return new Function(s)()}t.partial=i(!1),t.full=i(!0)},function(e,t,n){"use strict";e.exports=function(e,t,n,o,a,s){if(o<=n+1)return n;var u=n,l=o,c=o+n>>>1,f=2*e,h=c,d=a[f*c+t];for(;u<l;){if(l-u<8){i(e,t,u,l,a,s),d=a[f*c+t];break}var p=l-u,m=Math.random()*p+u|0,y=a[f*m+t],v=Math.random()*p+u|0,g=a[f*v+t],b=Math.random()*p+u|0,w=a[f*b+t];y<=g?w>=g?(h=v,d=g):y>=w?(h=m,d=y):(h=b,d=w):g>=w?(h=v,d=g):w>=y?(h=m,d=y):(h=b,d=w);for(var _=f*(l-1),k=f*h,x=0;x<f;++x,++_,++k){var O=a[_];a[_]=a[k],a[k]=O}var P=s[l-1];s[l-1]=s[h],s[h]=P,h=r(e,t,u,l-1,a,s,d);for(_=f*(l-1),k=f*h,x=0;x<f;++x,++_,++k){O=a[_];a[_]=a[k],a[k]=O}P=s[l-1];if(s[l-1]=s[h],s[h]=P,c<h){for(l=h-1;u<l&&a[f*(l-1)+t]===d;)l-=1;l+=1}else{if(!(h<c))break;for(u=h+1;u<l&&a[f*u+t]===d;)u+=1}}return r(e,t,n,c,a,s,a[f*c+t])};var r=n(435)("lo<p0",["p0"]);function i(e,t,n,r,i,o){for(var a=2*e,s=a*(n+1)+t,u=n+1;u<r;++u,s+=a)for(var l=i[s],c=u,f=a*(u-1);c>n&&i[f+t]>l;--c,f-=a){for(var h=f,d=f+a,p=0;p<a;++p,++h,++d){var m=i[h];i[h]=i[d],i[d]=m}var y=o[c];o[c]=o[c-1],o[c-1]=y}}},function(e,t,n){"use strict";n.r(t),t.default=function(e){return{name:"collideTerrain",order:0,state:{callback:null},onAdd:function(t,n){var r=e.entities;r.hasPhysics(t)&&(r.getPhysicsBody(t).onCollide=function(n){var r=e.ents.getCollideTerrain(t).callback;r&&r(n,t)})},onRemove:function(t,n){var r=e.entities;r.hasPhysics(t)&&(r.getPhysicsBody(t).onCollide=null)}}}},function(e,t,n){"use strict";function r(e,t,n){if(n.hasMesh(e.__id)){var r=t>e.cutoff;e._showing!==r&&(n.getMeshData(e.__id).mesh.visibility=r,e._showing=r)}}n.r(t),t.default=function(e){return{name:"fadeOnZoom",order:99,state:{cutoff:1.5,_showing:null},onAdd:null,onRemove:null,system:function(t,n){for(var i=e.camera.currentZoom,o=e.entities,a=0;a<n.length;a++){r(n[a],i,o)}}}}},function(e,t,n){"use strict";n.r(t);var r=n(77);t.default=function(e){return{name:"followsEntity",order:50,state:{entity:0,offset:null,onTargetMissing:null},onAdd:function(e,i){var o=r.create();i.offset=i.offset?r.copy(o,i.offset):o,t(i),n(i)},onRemove:null,system:function(e,n){for(var r=0;r<n.length;r++)t(n[r])},renderSystem:function(e,t){for(var r=0;r<t.length;r++)n(t[r])}};function t(t){var n=t.__id,i=e.ents.getPositionData(n),o=e.ents.getPositionData(t.entity);o?r.add(i._localPosition,o._localPosition,t.offset):(t.onTargetMissing&&t.onTargetMissing(n),e.ents.removeComponent(n,e.ents.names.followsEntity))}function n(t){var n=t.__id,i=e.ents.getPositionData(n),o=e.ents.getPositionData(t.entity);o&&r.add(i._renderPosition,o._renderPosition,t.offset)}}},function(e,t,n){"use strict";n.r(t);var r=n(77);t.default=function(e){return{name:"mesh",order:100,state:{mesh:null,offset:null},onAdd:function(t,n){var i=e.ents.getPositionData(t);if(!n.mesh)throw new Error("Mesh component added without a mesh - probably a bug!");e.rendering.addMeshToScene(n.mesh,!1,i.position),n.offset||(n.offset=new r.create);var o=i._renderPosition;n.mesh.position.copyFromFloats(o[0]+n.offset[0],o[1]+n.offset[1],o[2]+n.offset[2])},onRemove:function(e,t){t.mesh.dispose()},renderSystem:function(t,n){for(var r=0;r<n.length;r++){var i=n[r],o=i.__id,a=e.ents.getPositionData(o)._renderPosition;i.mesh.position.copyFromFloats(a[0]+i.offset[0],a[1]+i.offset[1],a[2]+i.offset[2])}}}}},function(e,t,n){"use strict";n.r(t);var r=n(77);t.default=function(e){return{name:"movement",order:30,state:{heading:0,running:!1,jumping:!1,maxSpeed:10,moveForce:30,sprintMoveMult:1.2,crouchMoveMult:.5,responsiveness:15,runningFriction:0,standingFriction:2,airMoveMult:.5,jumpImpulse:10,jumpForce:12,jumpTime:500,airJumps:1,_jumpCount:0,_isJumping:0,_currjumptime:0},onAdd:null,onRemove:null,system:function(t,n){for(var r=e.entities,i=0;i<n.length;i++){var o=n[i];s(t,o,r.getPhysicsBody(o.__id))}}}};var i=r.create(),o=r.create(),a=r.create();function s(e,t,n){var s=n.atRestY()<0,u=s||t._jumpCount<t.airJumps;if(s&&(t._isJumping=!1,t._jumpCount=0),t.jumping)if(t._isJumping){if(t._currjumptime>0){var l=t.jumpForce;t._currjumptime<e&&(l*=t._currjumptime/e),n.applyForce([0,l,0]),t._currjumptime-=e}}else u&&(t._isJumping=!0,s||t._jumpCount++,t._currjumptime=t.jumpTime,n.applyImpulse([0,t.jumpImpulse,0]),!s&&n.velocity[1]<0&&(n.velocity[1]=0));else t._isJumping=!1;var c=i,f=o;if(t.running){var h=t.maxSpeed;t.crouch?h*=t.crouchMoveMult:t.sprint&&(h*=t.sprintMoveMult),r.set(c,0,0,h),r.rotateY(c,c,a,t.heading),r.subtract(f,c,n.velocity),f[1]=0;var d=r.length(f);if(r.normalize(f,f),d>0){var p=t.moveForce;s||(p*=t.airMoveMult);var m=t.responsiveness*d;p>m&&(p=m),r.scale(f,f,p),n.applyForce(f)}n.friction=t.runningFriction}else n.friction=t.standingFriction}},function(e,t,n){"use strict";function r(e,t,n,r,i,o){e.jumping=!r&&!!t.jump,e.xMulp=i,e.yMulp=o;var a=t.forward?t.backward?0:1:t.backward?-1:0,s=t.right?t.left?0:1:t.left?-1:0;0==(a|s)||r?e.running=!1:(e.running=!0,a?(-1==a&&(n+=Math.PI),s&&(n+=Math.PI/4*a*s)):n+=s*Math.PI/2,e.heading=n)}n.r(t),t.default=function(e){return{name:"receivesInputs",order:20,state:{ignore:!1,x:1,y:1},onAdd:null,onRemove:null,system:function(t,n){for(var i=e.entities,o=e.inputs.state,a=e.camera.heading,s=0;s<n.length;s++){var u=n[s];r(i.getMovement(u.__id),o,a,u.ignore,u.x,u.y)}}}}},function(e,t,n){"use strict";n.r(t);var r=n(7),i=n(8),o=(n(197),n(287),n(77));t.default=function(e,t){var n=t,o=e.rendering.getScene(),a=i.a.CreateDisc("shadow",.75,30,o);return a.rotation.x=Math.PI/2,a.material=e.rendering.makeStandardMaterial("shadowMat"),a.material.diffuseColor=r.a.Black(),a.material.ambientColor=r.a.Black(),a.material.alpha=.5,a.setEnabled(!1),o.removeMesh(a),{name:"shadow",order:80,state:{size:.5,_mesh:null},onAdd:function(t,n){var r=a.createInstance("shadow_instance");e.rendering.addMeshToScene(r),r.setEnabled(!1),n._mesh=r},onRemove:function(e,t){t._mesh.dispose()},system:function(t,r){for(var i=e.camera._localGetPosition(),o=n,a=0;a<r.length;a++){var s=r[a],l=e.ents.getPositionData(s.__id),c=e.ents.getPhysics(s.__id);u(e,l,c,s._mesh,s.size,o,i)}},renderSystem:function(t,n){for(var r=0;r<n.length;r++){var i=n[r],o=e.ents.getPositionData(i.__id)._renderPosition,a=i._mesh.position;a.x=o[0],a.z=o[2]}}}};var a=o.fromValues(0,0,0),s=o.fromValues(0,-1,0);function u(e,t,n,r,i,u,l){var c;if(n&&n.body.resting[1]<0)c=t._localPosition[1];else{var f=e._localPick(t._localPosition,s,u);if(!f)return void r.setEnabled(!1);c=f.position[1]-e.worldOriginOffset[1]}c=Math.round(c),o.copy(a,t._localPosition),a[1]=c;var h=.01+o.squaredDistance(l,a)/1600*.1;h>.1&&(h=.1),r.position.y=c+h;var d=.7*i*(1-(t._localPosition[1]-c)/u);r.scaling.copyFromFloats(d,d,d),r.setEnabled(!0)}},function(e,t,n){"use strict";n.r(t),t.default=function(e){return{name:"smooth-camera",order:99,state:{time:100.1},onAdd:null,onRemove:null,system:function(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.time-=t,i.time<0&&e.ents.removeComponent(i.__id,"smooth-camera")}}}}},function(e){e.exports=JSON.parse('{"_from":"github:VoxelSrv/noa-engine","_id":"noa-engine@0.30.0","_inBundle":false,"_integrity":"","_location":"/noa-engine","_phantomChildren":{},"_requested":{"type":"git","raw":"github:VoxelSrv/noa-engine","rawSpec":"github:VoxelSrv/noa-engine","saveSpec":"github:VoxelSrv/noa-engine","fetchSpec":null,"gitCommittish":null},"_requiredBy":["#USER","/"],"_resolved":"github:VoxelSrv/noa-engine#e764fd0d10126c06b57c579dc138fcd6ad701c91","_spec":"github:VoxelSrv/noa-engine","_where":"/home/patbox/Pulpit/voxelsrv/client","author":{"name":"Andy Hall","url":"https://fenomas.com"},"bugs":{"url":"https://github.com/andyhall/noa/issues"},"bundleDependencies":false,"dependencies":{"aabb-3d":"github:andyhall/aabb-3d","box-intersect":"^1.0.2","ent-comp":"^0.9.1","events":"^3.2.0","fast-voxel-raycast":"^0.1.1","game-inputs":"^0.4.0","gl-vec3":"^1.1.3","micro-game-shell":"0.2.0","mobile-device-detect":"^0.4.3","ndarray":"^1.0.19","voxel-aabb-sweep":"^0.5.0"},"deprecated":false,"description":"Experimental voxel game engine","devDependencies":{"eslint":"^6.8.0","js-beautify":"^1.13.5","jsdoc-to-markdown":"^5.0.3","typescript":"^3.9.9"},"files":["/src","/types"],"homepage":"https://github.com/andyhall/noa#readme","keywords":["voxel","voxels","game","engine","game-engine"],"license":"MIT","main":"src/index.js","name":"noa-engine","peerDependencies":{"@babylonjs/core":"^4.2.0"},"repository":{"type":"git","url":"git+https://github.com/andyhall/noa.git"},"scripts":{"doc":"jsdoc2md -f src/* src/**/* -g table -p list --partial doc-templates/* > doc/API.md"},"typings":"types/index.d.ts","version":"0.30.0"}')},function(e,t,n){const r=n(507),i=new r;e.exports={ProtoDef:r,Serializer:n(404).Serializer,Parser:n(404).Parser,FullPacketParser:n(404).FullPacketParser,Compiler:n(561),types:i.types,utils:n(172)}},function(e,t,n){(function(t){const{getFieldInfo:r,tryCatch:i}=n(172),o=n(508),a=n(509),s=n(510);function u(e){return"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]||e.type}function l(e,t,n){return"string"==typeof t&&"$"===t.charAt(0)?e.push({path:n,val:t.substr(1)}):(Array.isArray(t)||"object"==typeof t)&&(e=e.concat(o(t,l,[]).map(e=>({path:n+"."+e.path,val:e.val})))),e}e.exports=class{constructor(e=!0){this.types={},this.validator=e?new s:null,this.addDefaultTypes()}addDefaultTypes(){this.addTypes(n(444)),this.addTypes(n(445)),this.addTypes(n(551)),this.addTypes(n(552))}addProtocol(e,t){const n=this;this.validator&&this.validator.validateProtocol(e),function e(t,r){void 0!==t&&(t.types&&n.addTypes(t.types),e(a(t,r.shift()),r))}(e,t)}addType(e,t,n=!0){if("native"!==t)if(u(t)){this.validator&&(n&&this.validator.validateType(t),this.validator.addType(e));const{type:i,typeArgs:a}=r(t);this.types[e]=a?function(e,t){const n=JSON.stringify(t),r=o(t,l,[]);function i(e){const t=JSON.parse(n);return r.forEach(n=>{!function(e,t,n){const r=e.split(".").reverse();for(;r.length>1;)n=n[r.pop()];n[r.pop()]=t}(n.path,e[n.val],t)}),t}return[function(t,n,r,o){return e[0].call(this,t,n,i(r),o)},function(t,n,r,o,a){return e[1].call(this,t,n,r,i(o),a)},function(t,n,r){return"function"==typeof e[2]?e[2].call(this,t,i(n),r):e[2]}]}(this.types[i],a):this.types[i]}else this.validator&&(t[3]?this.validator.addType(e,t[3]):this.validator.addType(e)),this.types[e]=t;else this.validator&&this.validator.addType(e)}addTypes(e){Object.keys(e).forEach(t=>this.addType(t,e[t],!1)),this.validator&&Object.keys(e).forEach(t=>{u(e[t])&&this.validator.validateType(e[t])})}read(e,t,n,i){const{type:o,typeArgs:a}=r(n),s=this.types[o];if(!s)throw new Error("missing data type: "+o);return s[0].call(this,e,t,a,i)}write(e,t,n,i,o){const{type:a,typeArgs:s}=r(i),u=this.types[a];if(!u)throw new Error("missing data type: "+a);return u[1].call(this,e,t,n,s,o)}sizeOf(e,t,n){const{type:i,typeArgs:o}=r(t),a=this.types[i];if(!a)throw new Error("missing data type: "+i);return"function"==typeof a[2]?a[2].call(this,e,o,n):a[2]}createPacketBuffer(e,n){const r=i(()=>this.sizeOf(n,e,{}),e=>{throw e.message=`SizeOf error for ${e.field} : ${e.message}`,e}),o=t.allocUnsafe(r);return i(()=>this.write(n,o,0,e,{}),e=>{throw e.message=`Write error for ${e.field} : ${e.message}`,e}),o}parsePacketBuffer(e,t,n=0){const{value:r,size:o}=i(()=>this.read(t,n,e,{}),e=>{throw e.message=`Read error for ${e.field} : ${e.message}`,e});return{data:r,metadata:{size:o},buffer:t.slice(0,o)}}}}).call(this,n(85).Buffer)},function(e,t,n){(function(e,n){var r="[object Arguments]",i="[object Map]",o="[object Object]",a="[object Set]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/,l=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,h=/^\[object .+?Constructor\]$/,d=/^(?:0|[1-9]\d*)$/,p={};p["[object Float32Array]"]=p["[object Float64Array]"]=p["[object Int8Array]"]=p["[object Int16Array]"]=p["[object Int32Array]"]=p["[object Uint8Array]"]=p["[object Uint8ClampedArray]"]=p["[object Uint16Array]"]=p["[object Uint32Array]"]=!0,p[r]=p["[object Array]"]=p["[object ArrayBuffer]"]=p["[object Boolean]"]=p["[object DataView]"]=p["[object Date]"]=p["[object Error]"]=p["[object Function]"]=p[i]=p["[object Number]"]=p[o]=p["[object RegExp]"]=p[a]=p["[object String]"]=p["[object WeakMap]"]=!1;var m="object"==typeof e&&e&&e.Object===Object&&e,y="object"==typeof self&&self&&self.Object===Object&&self,v=m||y||Function("return this")(),g=t&&!t.nodeType&&t,b=g&&"object"==typeof n&&n&&!n.nodeType&&n,w=b&&b.exports===g&&m.process,_=function(){try{return w&&w.binding("util")}catch(e){}}(),k=_&&_.isTypedArray;function x(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function O(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function P(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function S(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function E(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function j(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var C,T,A,z=Array.prototype,I=Function.prototype,D=Object.prototype,R=v["__core-js_shared__"],B=(C=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",M=I.toString,L=D.hasOwnProperty,F=D.toString,N=RegExp("^"+M.call(L).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),U=v.Symbol,$=v.Uint8Array,V=D.propertyIsEnumerable,q=z.splice,W=(T=Object.keys,A=Object,function(e){return T(A(e))}),H=Se(v,"DataView"),K=Se(v,"Map"),G=Se(v,"Promise"),J=Se(v,"Set"),Z=Se(v,"WeakMap"),Y=Se(Object,"create"),Q=De(H),X=De(K),ee=De(G),te=De(J),ne=De(Z),re=U?U.prototype:void 0,ie=re?re.valueOf:void 0,oe=re?re.toString:void 0;function ae(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function se(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ue(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function le(e){var t=-1,n=e?e.length:0;for(this.__data__=new ue;++t<n;)this.add(e[t])}function ce(e){this.__data__=new se(e)}function fe(e,t){var n=Le(e)||Me(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,i=!!r;for(var o in e)!t&&!L.call(e,o)||i&&("length"==o||je(o,r))||n.push(o);return n}function he(e,t){for(var n=e.length;n--;)if(Be(e[n][0],t))return n;return-1}ae.prototype.clear=function(){this.__data__=Y?Y(null):{}},ae.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ae.prototype.get=function(e){var t=this.__data__;if(Y){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return L.call(t,e)?t[e]:void 0},ae.prototype.has=function(e){var t=this.__data__;return Y?void 0!==t[e]:L.call(t,e)},ae.prototype.set=function(e,t){return this.__data__[e]=Y&&void 0===t?"__lodash_hash_undefined__":t,this},se.prototype.clear=function(){this.__data__=[]},se.prototype.delete=function(e){var t=this.__data__,n=he(t,e);return!(n<0)&&(n==t.length-1?t.pop():q.call(t,n,1),!0)},se.prototype.get=function(e){var t=this.__data__,n=he(t,e);return n<0?void 0:t[n][1]},se.prototype.has=function(e){return he(this.__data__,e)>-1},se.prototype.set=function(e,t){var n=this.__data__,r=he(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},ue.prototype.clear=function(){this.__data__={hash:new ae,map:new(K||se),string:new ae}},ue.prototype.delete=function(e){return Pe(this,e).delete(e)},ue.prototype.get=function(e){return Pe(this,e).get(e)},ue.prototype.has=function(e){return Pe(this,e).has(e)},ue.prototype.set=function(e,t){return Pe(this,e).set(e,t),this},le.prototype.add=le.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},le.prototype.has=function(e){return this.__data__.has(e)},ce.prototype.clear=function(){this.__data__=new se},ce.prototype.delete=function(e){return this.__data__.delete(e)},ce.prototype.get=function(e){return this.__data__.get(e)},ce.prototype.has=function(e){return this.__data__.has(e)},ce.prototype.set=function(e,t){var n=this.__data__;if(n instanceof se){var r=n.__data__;if(!K||r.length<199)return r.push([e,t]),this;n=this.__data__=new ue(r)}return n.set(e,t),this};var de,pe,me=(de=function(e,t){return e&&ye(e,t,He)},function(e,t){if(null==e)return e;if(!Fe(e))return de(e,t);for(var n=e.length,r=pe?n:-1,i=Object(e);(pe?r--:++r<n)&&!1!==t(i[r],r,i););return e}),ye=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}();function ve(e,t){for(var n=0,r=(t=Ce(t,e)?[t]:xe(t)).length;null!=e&&n<r;)e=e[Ie(t[n++])];return n&&n==r?e:void 0}function ge(e,t){return null!=e&&t in Object(e)}function be(e,t,n,s,u){return e===t||(null==e||null==t||!$e(e)&&!Ve(t)?e!=e&&t!=t:function(e,t,n,s,u,l){var c=Le(e),f=Le(t),h="[object Array]",d="[object Array]";c||(h=(h=Ee(e))==r?o:h);f||(d=(d=Ee(t))==r?o:d);var p=h==o&&!S(e),m=d==o&&!S(t),y=h==d;if(y&&!p)return l||(l=new ce),c||We(e)?Oe(e,t,n,s,u,l):function(e,t,n,r,o,s,u){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!r(new $(e),new $(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Be(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case i:var l=E;case a:var c=2&s;if(l||(l=j),e.size!=t.size&&!c)return!1;var f=u.get(e);if(f)return f==t;s|=1,u.set(e,t);var h=Oe(l(e),l(t),r,o,s,u);return u.delete(e),h;case"[object Symbol]":if(ie)return ie.call(e)==ie.call(t)}return!1}(e,t,h,n,s,u,l);if(!(2&u)){var v=p&&L.call(e,"__wrapped__"),g=m&&L.call(t,"__wrapped__");if(v||g){var b=v?e.value():e,w=g?t.value():t;return l||(l=new ce),n(b,w,s,u,l)}}if(!y)return!1;return l||(l=new ce),function(e,t,n,r,i,o){var a=2&i,s=He(e),u=s.length,l=He(t).length;if(u!=l&&!a)return!1;var c=u;for(;c--;){var f=s[c];if(!(a?f in t:L.call(t,f)))return!1}var h=o.get(e);if(h&&o.get(t))return h==t;var d=!0;o.set(e,t),o.set(t,e);var p=a;for(;++c<u;){f=s[c];var m=e[f],y=t[f];if(r)var v=a?r(y,m,f,t,e,o):r(m,y,f,e,t,o);if(!(void 0===v?m===y||n(m,y,r,i,o):v)){d=!1;break}p||(p="constructor"==f)}if(d&&!p){var g=e.constructor,b=t.constructor;g==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof b&&b instanceof b||(d=!1)}return o.delete(e),o.delete(t),d}(e,t,n,s,u,l)}(e,t,be,n,s,u))}function we(e){return!(!$e(e)||function(e){return!!B&&B in e}(e))&&(Ne(e)||S(e)?N:h).test(De(e))}function _e(e){return"function"==typeof e?e:null==e?Ke:"object"==typeof e?Le(e)?function(e,t){if(Ce(e)&&Te(t))return Ae(Ie(e),t);return function(n){var r=function(e,t,n){var r=null==e?void 0:ve(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?function(e,t){return null!=e&&function(e,t,n){t=Ce(t,e)?[t]:xe(t);var r,i=-1,o=t.length;for(;++i<o;){var a=Ie(t[i]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}if(r)return r;return!!(o=e?e.length:0)&&Ue(o)&&je(a,o)&&(Le(e)||Me(e))}(e,t,ge)}(n,e):be(t,r,void 0,3)}}(e[0],e[1]):function(e){var t=function(e){var t=He(e),n=t.length;for(;n--;){var r=t[n],i=e[r];t[n]=[r,i,Te(i)]}return t}(e);if(1==t.length&&t[0][2])return Ae(t[0][0],t[0][1]);return function(n){return n===e||function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=n[i])[0],l=e[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in e))return!1}else{var f=new ce;if(r)var h=r(l,c,u,e,t,f);if(!(void 0===h?be(c,l,r,3,f):h))return!1}}return!0}(n,e,t)}}(e):Ce(t=e)?(n=Ie(t),function(e){return null==e?void 0:e[n]}):function(e){return function(t){return ve(t,e)}}(t);var t,n}function ke(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||D,t!==r)return W(e);var t,n,r,i=[];for(var o in Object(e))L.call(e,o)&&"constructor"!=o&&i.push(o);return i}function xe(e){return Le(e)?e:ze(e)}function Oe(e,t,n,r,i,o){var a=2&i,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(e);if(l&&o.get(t))return l==t;var c=-1,f=!0,h=1&i?new le:void 0;for(o.set(e,t),o.set(t,e);++c<s;){var d=e[c],p=t[c];if(r)var m=a?r(p,d,c,t,e,o):r(d,p,c,e,t,o);if(void 0!==m){if(m)continue;f=!1;break}if(h){if(!O(t,(function(e,t){if(!h.has(t)&&(d===e||n(d,e,r,i,o)))return h.add(t)}))){f=!1;break}}else if(d!==p&&!n(d,p,r,i,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function Pe(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Se(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return we(n)?n:void 0}var Ee=function(e){return F.call(e)};function je(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||d.test(e))&&e>-1&&e%1==0&&e<t}function Ce(e,t){if(Le(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!qe(e))||(u.test(e)||!s.test(e)||null!=t&&e in Object(t))}function Te(e){return e==e&&!$e(e)}function Ae(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}(H&&"[object DataView]"!=Ee(new H(new ArrayBuffer(1)))||K&&Ee(new K)!=i||G&&"[object Promise]"!=Ee(G.resolve())||J&&Ee(new J)!=a||Z&&"[object WeakMap]"!=Ee(new Z))&&(Ee=function(e){var t=F.call(e),n=t==o?e.constructor:void 0,r=n?De(n):void 0;if(r)switch(r){case Q:return"[object DataView]";case X:return i;case ee:return"[object Promise]";case te:return a;case ne:return"[object WeakMap]"}return t});var ze=Re((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(qe(e))return oe?oe.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return l.test(e)&&n.push(""),e.replace(c,(function(e,t,r,i){n.push(r?i.replace(f,"$1"):t||e)})),n}));function Ie(e){if("string"==typeof e||qe(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function De(e){if(null!=e){try{return M.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Re(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(Re.Cache||ue),n}function Be(e,t){return e===t||e!=e&&t!=t}function Me(e){return function(e){return Ve(e)&&Fe(e)}(e)&&L.call(e,"callee")&&(!V.call(e,"callee")||F.call(e)==r)}Re.Cache=ue;var Le=Array.isArray;function Fe(e){return null!=e&&Ue(e.length)&&!Ne(e)}function Ne(e){var t=$e(e)?F.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function Ue(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function $e(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ve(e){return!!e&&"object"==typeof e}function qe(e){return"symbol"==typeof e||Ve(e)&&"[object Symbol]"==F.call(e)}var We=k?function(e){return function(t){return e(t)}}(k):function(e){return Ve(e)&&Ue(e.length)&&!!p[F.call(e)]};function He(e){return Fe(e)?fe(e):ke(e)}function Ke(e){return e}n.exports=function(e,t,n){var r=Le(e)?x:P,i=arguments.length<3;return r(e,_e(t),n,i,me)}}).call(this,n(53),n(267)(e))},function(e,t,n){(function(t){var n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/,i=/^\./,o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,s=/^\[object .+?Constructor\]$/,u="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,c=u||l||Function("return this")();var f,h=Array.prototype,d=Function.prototype,p=Object.prototype,m=c["__core-js_shared__"],y=(f=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"",v=d.toString,g=p.hasOwnProperty,b=p.toString,w=RegExp("^"+v.call(g).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_=c.Symbol,k=h.splice,x=D(c,"Map"),O=D(Object,"create"),P=_?_.prototype:void 0,S=P?P.toString:void 0;function E(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function j(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function C(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function T(e,t){for(var n,r,i=e.length;i--;)if((n=e[i][0])===(r=t)||n!=n&&r!=r)return i;return-1}function A(e,t){for(var i,o=0,a=(t=function(e,t){if(L(e))return!1;var i=typeof e;if("number"==i||"symbol"==i||"boolean"==i||null==e||N(e))return!0;return r.test(e)||!n.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:L(i=t)?i:R(i)).length;null!=e&&o<a;)e=e[B(t[o++])];return o&&o==a?e:void 0}function z(e){return!(!F(e)||(t=e,y&&y in t))&&(function(e){var t=F(e)?b.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?w:s).test(function(e){if(null!=e){try{return v.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function I(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function D(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return z(n)?n:void 0}E.prototype.clear=function(){this.__data__=O?O(null):{}},E.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},E.prototype.get=function(e){var t=this.__data__;if(O){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return g.call(t,e)?t[e]:void 0},E.prototype.has=function(e){var t=this.__data__;return O?void 0!==t[e]:g.call(t,e)},E.prototype.set=function(e,t){return this.__data__[e]=O&&void 0===t?"__lodash_hash_undefined__":t,this},j.prototype.clear=function(){this.__data__=[]},j.prototype.delete=function(e){var t=this.__data__,n=T(t,e);return!(n<0)&&(n==t.length-1?t.pop():k.call(t,n,1),!0)},j.prototype.get=function(e){var t=this.__data__,n=T(t,e);return n<0?void 0:t[n][1]},j.prototype.has=function(e){return T(this.__data__,e)>-1},j.prototype.set=function(e,t){var n=this.__data__,r=T(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},C.prototype.clear=function(){this.__data__={hash:new E,map:new(x||j),string:new E}},C.prototype.delete=function(e){return I(this,e).delete(e)},C.prototype.get=function(e){return I(this,e).get(e)},C.prototype.has=function(e){return I(this,e).has(e)},C.prototype.set=function(e,t){return I(this,e).set(e,t),this};var R=M((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(N(e))return S?S.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return i.test(e)&&n.push(""),e.replace(o,(function(e,t,r,i){n.push(r?i.replace(a,"$1"):t||e)})),n}));function B(e){if("string"==typeof e||N(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function M(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(M.Cache||C),n}M.Cache=C;var L=Array.isArray;function F(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function N(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==b.call(e)}e.exports=function(e,t,n){var r=null==e?void 0:A(e,t);return void 0===r?n:r}}).call(this,n(53))},function(e,t,n){const r=n(511),i=n(210);class o{constructor(e){this.createAjvInstance(e),this.addDefaultTypes()}createAjvInstance(e){this.typesSchemas={},this.compiled=!1,this.ajv=new r({verbose:!0}),this.ajv.addSchema(n(545),"definitions"),this.ajv.addSchema(n(546),"protocol"),e&&Object.keys(e).forEach(t=>this.addType(t,e[t]))}addDefaultTypes(){this.addTypes(n(547)),this.addTypes(n(548)),this.addTypes(n(549)),this.addTypes(n(550))}addTypes(e){Object.keys(e).forEach(t=>this.addType(t,e[t]))}typeToSchemaName(e){return e.replace("|","_")}addType(e,t){const n=this.typeToSchemaName(e);null==this.typesSchemas[n]&&(t||(t={oneOf:[{enum:[e]},{type:"array",items:[{enum:[e]},{oneOf:[{type:"object"},{type:"array"}]}]}]}),this.typesSchemas[n]=t,this.compiled?this.createAjvInstance(this.typesSchemas):this.ajv.addSchema(t,n),this.ajv.removeSchema("dataType"),this.ajv.addSchema({title:"dataType",oneOf:[{enum:["native"]}].concat(Object.keys(this.typesSchemas).map(e=>({$ref:this.typeToSchemaName(e)})))},"dataType"))}validateType(e){let t=this.ajv.validate("dataType",e);if(this.compiled=!0,!t)throw console.log(JSON.stringify(this.ajv.errors[0],null,2)),"dataType"==this.ajv.errors[0].parentSchema.title&&this.validateTypeGoingInside(this.ajv.errors[0].data),new Error("validation error")}validateTypeGoingInside(e){if(Array.isArray(e)){i.ok(null!=this.typesSchemas[this.typeToSchemaName(e[0])],e+" is an undefined type");let t=this.ajv.validate(e[0],e);if(this.compiled=!0,!t)throw console.log(JSON.stringify(this.ajv.errors[0],null,2)),"dataType"==this.ajv.errors[0].parentSchema.title&&this.validateTypeGoingInside(this.ajv.errors[0].data),new Error("validation error")}else{if("native"==e)return;i.ok(null!=this.typesSchemas[this.typeToSchemaName(e)],e+" is an undefined type")}}validateProtocol(e){let t=this.ajv.validate("protocol",e);i.ok(t,JSON.stringify(this.ajv.errors,null,2)),function e(t,n,r){const i=new o(n.typesSchemas);Object.keys(t).forEach(n=>{"types"==n?(Object.keys(t[n]).forEach(e=>i.addType(e)),Object.keys(t[n]).forEach(e=>{try{i.validateType(t[n][e],r+"."+n+"."+e)}catch(t){throw new Error("Error at "+r+"."+n+"."+e)}})):e(t[n],i,r+"."+n)})}(e,this,"root")}}e.exports=o},function(e,t,n){"use strict";var r=n(512),i=n(397),o=n(516),a=n(436),s=n(437),u=n(517),l=n(518),c=n(539),f=n(209);e.exports=v,v.prototype.validate=function(e,t){var n;if("string"==typeof e){if(!(n=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var r=this._addSchema(e);n=r.validate||this._compile(r)}var i=n(t);!0!==n.$async&&(this.errors=n.errors);return i},v.prototype.compile=function(e,t){var n=this._addSchema(e,void 0,t);return n.validate||this._compile(n)},v.prototype.addSchema=function(e,t,n,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)this.addSchema(e[o],void 0,n,r);return this}var a=this._getId(e);if(void 0!==a&&"string"!=typeof a)throw new Error("schema id must be string");return x(this,t=i.normalizeId(t||a)),this._schemas[t]=this._addSchema(e,n,r,!0),this},v.prototype.addMetaSchema=function(e,t,n){return this.addSchema(e,t,n,!0),this},v.prototype.validateSchema=function(e,t){var n=e.$schema;if(void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(!(n=n||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(p)?p:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var r=this.validate(n,e);if(!r&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return r},v.prototype.getSchema=function(e){var t=g(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var n=i.schema.call(e,{schema:{}},t);if(n){var o=n.schema,s=n.root,u=n.baseId,l=r.call(e,o,s,void 0,u);return e._fragments[t]=new a({ref:t,fragment:!0,schema:o,root:s,baseId:u,validate:l}),l}}(this,e)}},v.prototype.removeSchema=function(e){if(e instanceof RegExp)return b(this,this._schemas,e),b(this,this._refs,e),this;switch(typeof e){case"undefined":return b(this,this._schemas),b(this,this._refs),this._cache.clear(),this;case"string":var t=g(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var n=this._opts.serialize,r=n?n(e):e;this._cache.del(r);var o=this._getId(e);o&&(o=i.normalizeId(o),delete this._schemas[o],delete this._refs[o])}return this},v.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},v.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var n=void 0===(t=t||{}).separator?", ":t.separator,r=void 0===t.dataVar?"data":t.dataVar,i="",o=0;o<e.length;o++){var a=e[o];a&&(i+=r+a.dataPath+" "+a.message+n)}return i.slice(0,-n.length)},v.prototype._addSchema=function(e,t,n,r){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var o=this._opts.serialize,s=o?o(e):e,u=this._cache.get(s);if(u)return u;r=r||!1!==this._opts.addUsedSchema;var l=i.normalizeId(this._getId(e));l&&r&&x(this,l);var c,f=!1!==this._opts.validateSchema&&!t;f&&!(c=l&&l==i.normalizeId(e.$schema))&&this.validateSchema(e,!0);var h=i.ids.call(this,e),d=new a({id:l,schema:e,localRefs:h,cacheKey:s,meta:n});"#"!=l[0]&&r&&(this._refs[l]=d);this._cache.put(s,d),f&&c&&this.validateSchema(e,!0);return d},v.prototype._compile=function(e,t){if(e.compiling)return e.validate=o,o.schema=e.schema,o.errors=null,o.root=t||o,!0===e.schema.$async&&(o.$async=!0),o;var n,i;e.compiling=!0,e.meta&&(n=this._opts,this._opts=this._metaOpts);try{i=r.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=n)}return e.validate=i,e.refs=i.refs,e.refVal=i.refVal,e.root=i.root,i;function o(){var t=e.validate,n=t.apply(this,arguments);return o.errors=t.errors,n}},v.prototype.compileAsync=n(540);var h=n(541);v.prototype.addKeyword=h.add,v.prototype.getKeyword=h.get,v.prototype.removeKeyword=h.remove,v.prototype.validateKeyword=h.validate;var d=n(399);v.ValidationError=d.Validation,v.MissingRefError=d.MissingRef,v.$dataMetaSchema=c;var p="http://json-schema.org/draft-07/schema",m=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],y=["/properties"];function v(e){if(!(this instanceof v))return new v(e);e=this._opts=f.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:O,warn:O,error:O};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=u(e.format),this._cache=e.cache||new o,this._loadingSchemas={},this._compilations=[],this.RULES=l(),this._getId=function(e){switch(e.schemaId){case"auto":return k;case"id":return w;default:return _}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=s),this._metaOpts=function(e){for(var t=f.copy(e._opts),n=0;n<m.length;n++)delete t[m[n]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var n=e._opts.formats[t];e.addFormat(t,n)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var n=e._opts.keywords[t];e.addKeyword(t,n)}}(this),function(e){var t;e._opts.$data&&(t=n(544),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var r=n(443);e._opts.$data&&(r=c(r,y));e.addMetaSchema(r,p,!0),e._refs["http://json-schema.org/schema"]=p}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var n in t)e.addSchema(t[n],n)}(this)}function g(e,t){return t=i.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function b(e,t,n){for(var r in t){var i=t[r];i.meta||n&&!n.test(r)||(e._cache.del(i.cacheKey),delete t[r])}}function w(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function _(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function k(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function x(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function O(){}},function(e,t,n){"use strict";var r=n(397),i=n(209),o=n(399),a=n(437),s=n(438),u=i.ucs2length,l=n(398),c=o.Validation;function f(e,t,n){var r=d.call(this,e,t,n);return r>=0?{index:r,compiling:!0}:(r=this._compilations.length,this._compilations[r]={schema:e,root:t,baseId:n},{index:r,compiling:!1})}function h(e,t,n){var r=d.call(this,e,t,n);r>=0&&this._compilations.splice(r,1)}function d(e,t,n){for(var r=0;r<this._compilations.length;r++){var i=this._compilations[r];if(i.schema==e&&i.root==t&&i.baseId==n)return r}return-1}function p(e,t){return"var pattern"+e+" = new RegExp("+i.toQuotedString(t[e])+");"}function m(e){return"var default"+e+" = defaults["+e+"];"}function y(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function v(e){return"var customRule"+e+" = customRules["+e+"];"}function g(e,t){if(!e.length)return"";for(var n="",r=0;r<e.length;r++)n+=t(r,e);return n}e.exports=function e(t,n,d,b){var w=this,_=this._opts,k=[void 0],x={},O=[],P={},S=[],E={},j=[];n=n||{schema:t,refVal:k,refs:x};var C=f.call(this,t,n,b),T=this._compilations[C.index];if(C.compiling)return T.callValidate=function e(){var t=T.validate,n=t.apply(this,arguments);return e.errors=t.errors,n};var A=this._formats,z=this.RULES;try{var I=R(t,n,d,b);T.validate=I;var D=T.callValidate;return D&&(D.schema=I.schema,D.errors=null,D.refs=I.refs,D.refVal=I.refVal,D.root=I.root,D.$async=I.$async,_.sourceCode&&(D.source=I.source)),I}finally{h.call(this,t,n,b)}function R(t,a,f,h){var d=!a||a&&a.schema==t;if(a.schema!=n.schema)return e.call(w,t,a,f,h);var b,P=!0===t.$async,E=s({isTop:!0,schema:t,isRoot:d,baseId:h,root:a,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:o.MissingRef,RULES:z,validate:s,util:i,resolve:r,resolveRef:B,usePattern:F,useDefault:N,useCustomRule:U,opts:_,formats:A,logger:w.logger,self:w});E=g(k,y)+g(O,p)+g(S,m)+g(j,v)+E,_.processCode&&(E=_.processCode(E));try{b=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",E)(w,z,A,n,k,S,j,l,u,c),k[0]=b}catch(e){throw w.logger.error("Error compiling schema, function code:",E),e}return b.schema=t,b.errors=null,b.refs=x,b.refVal=k,b.root=d?b:a,P&&(b.$async=!0),!0===_.sourceCode&&(b.source={code:E,patterns:O,defaults:S}),b}function B(t,i,o){i=r.url(t,i);var a,s,u=x[i];if(void 0!==u)return L(a=k[u],s="refVal["+u+"]");if(!o&&n.refs){var l=n.refs[i];if(void 0!==l)return L(a=n.refVal[l],s=M(i,a))}s=M(i);var c=r.call(w,R,n,i);if(void 0===c){var f=d&&d[i];f&&(c=r.inlineRef(f,_.inlineRefs)?f:e.call(w,f,n,d,t))}if(void 0!==c)return function(e,t){var n=x[e];k[n]=t}(i,c),L(c,s);!function(e){delete x[e]}(i)}function M(e,t){var n=k.length;return k[n]=t,x[e]=n,"refVal"+n}function L(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function F(e){var t=P[e];return void 0===t&&(t=P[e]=O.length,O[t]=e),"pattern"+t}function N(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return i.toQuotedString(e);case"object":if(null===e)return"null";var t=a(e),n=E[t];return void 0===n&&(n=E[t]=S.length,S[n]=e),"default"+n}}function U(e,t,n,r){if(!1!==w._opts.validateSchema){var i=e.definition.dependencies;if(i&&!i.every((function(e){return Object.prototype.hasOwnProperty.call(n,e)})))throw new Error("parent schema must have all required keywords: "+i.join(","));var o=e.definition.validateSchema;if(o)if(!o(t)){var a="keyword schema is invalid: "+w.errorsText(o.errors);if("log"!=w._opts.validateSchema)throw new Error(a);w.logger.error(a)}}var s,u=e.definition.compile,l=e.definition.inline,c=e.definition.macro;if(u)s=u.call(w,t,n,r);else if(c)s=c.call(w,t,n,r),!1!==_.validateSchema&&w.validateSchema(s,!0);else if(l)s=l.call(w,r,e.keyword,t,n);else if(!(s=e.definition.validate))return;if(void 0===s)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var f=j.length;return j[f]=s,{code:"customRule"+f,validate:s}}}},function(e,t,n){
/** @license URI.js v4.2.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){t[0]=t[0].slice(0,-1);for(var r=t.length-1,i=1;i<r;++i)t[i]=t[i].slice(1,-1);return t[r]=t[r].slice(1),t.join("")}return t[0]}function n(e){return"(?:"+e+")"}function r(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function o(e){var r=t("[0-9]","[A-Fa-f]"),i=n(n("%[EFef]"+r+"%"+r+r+"%"+r+r)+"|"+n("%[89A-Fa-f]"+r+"%"+r+r)+"|"+n("%"+r+r)),o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",a=t("[\\:\\/\\?\\#\\[\\]\\@]",o),s=e?"[\\uE000-\\uF8FF]":"[]",u=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),l=n("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),c=n(n(i+"|"+t(u,o,"[\\:]"))+"*"),f=(n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("[1-9][0-9]")+"|[0-9]"),n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("0?[1-9][0-9]")+"|0?0?[0-9]")),h=n(f+"\\."+f+"\\."+f+"\\."+f),d=n(r+"{1,4}"),p=n(n(d+"\\:"+d)+"|"+h),m=n(n(d+"\\:")+"{6}"+p),y=n("\\:\\:"+n(d+"\\:")+"{5}"+p),v=n(n(d)+"?\\:\\:"+n(d+"\\:")+"{4}"+p),g=n(n(n(d+"\\:")+"{0,1}"+d)+"?\\:\\:"+n(d+"\\:")+"{3}"+p),b=n(n(n(d+"\\:")+"{0,2}"+d)+"?\\:\\:"+n(d+"\\:")+"{2}"+p),w=n(n(n(d+"\\:")+"{0,3}"+d)+"?\\:\\:"+d+"\\:"+p),_=n(n(n(d+"\\:")+"{0,4}"+d)+"?\\:\\:"+p),k=n(n(n(d+"\\:")+"{0,5}"+d)+"?\\:\\:"+d),x=n(n(n(d+"\\:")+"{0,6}"+d)+"?\\:\\:"),O=n([m,y,v,g,b,w,_,k,x].join("|")),P=n(n(u+"|"+i)+"+"),S=(n(O+"\\%25"+P),n(O+n("\\%25|\\%(?!"+r+"{2})")+P)),E=n("[vV]"+r+"+\\."+t(u,o,"[\\:]")+"+"),j=n("\\["+n(S+"|"+O+"|"+E)+"\\]"),C=n(n(i+"|"+t(u,o))+"*"),T=n(j+"|"+h+"(?!"+C+")|"+C),A=n("[0-9]*"),z=n(n(c+"@")+"?"+T+n("\\:"+A)+"?"),I=n(i+"|"+t(u,o,"[\\:\\@]")),D=n(I+"*"),R=n(I+"+"),B=n(n(i+"|"+t(u,o,"[\\@]"))+"+"),M=n(n("\\/"+D)+"*"),L=n("\\/"+n(R+M)+"?"),F=n(B+M),N=n(R+M),U="(?!"+I+")",$=(n(M+"|"+L+"|"+F+"|"+N+"|"+U),n(n(I+"|"+t("[\\/\\?]",s))+"*")),V=n(n(I+"|[\\/\\?]")+"*"),q=n(n("\\/\\/"+z+M)+"|"+L+"|"+N+"|"+U),W=n(l+"\\:"+q+n("\\?"+$)+"?"+n("\\#"+V)+"?"),H=n(n("\\/\\/"+z+M)+"|"+L+"|"+F+"|"+U),K=n(H+n("\\?"+$)+"?"+n("\\#"+V)+"?");return n(W+"|"+K),n(l+"\\:"+q+n("\\?"+$)+"?"),n(n("\\/\\/("+n("("+c+")@")+"?("+T+")"+n("\\:("+A+")")+"?)")+"?("+M+"|"+L+"|"+N+"|"+U+")"),n("\\?("+$+")"),n("\\#("+V+")"),n(n("\\/\\/("+n("("+c+")@")+"?("+T+")"+n("\\:("+A+")")+"?)")+"?("+M+"|"+L+"|"+F+"|"+U+")"),n("\\?("+$+")"),n("\\#("+V+")"),n(n("\\/\\/("+n("("+c+")@")+"?("+T+")"+n("\\:("+A+")")+"?)")+"?("+M+"|"+L+"|"+N+"|"+U+")"),n("\\?("+$+")"),n("\\#("+V+")"),n("("+c+")@"),n("\\:("+A+")"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",u,o),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",u,o),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",u,o),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",u,o),"g"),NOT_QUERY:new RegExp(t("[^\\%]",u,o,"[\\:\\@\\/\\?]",s),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",u,o,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",u,o),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",u,a),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+h+")$"),IPV6ADDRESS:new RegExp("^\\[?("+O+")"+n(n("\\%25|\\%(?!"+r+"{2})")+"("+P+")")+"?\\]?$")}}var a=o(!1),s=o(!0),u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=2147483647,c=/^xn--/,f=/[^\0-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,m=String.fromCharCode;function y(e){throw new RangeError(d[e])}function v(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]);var i=function(e,t){for(var n=[],r=e.length;r--;)n[r]=t(e[r]);return n}((e=e.replace(h,".")).split("."),t).join(".");return r+i}function g(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t}var b=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},w=function(e,t,n){var r=0;for(e=n?p(e/700):e>>1,e+=p(e/t);e>455;r+=36)e=p(e/35);return p(r+36*e/(e+38))},_=function(e){var t,n=[],r=e.length,i=0,o=128,a=72,s=e.lastIndexOf("-");s<0&&(s=0);for(var u=0;u<s;++u)e.charCodeAt(u)>=128&&y("not-basic"),n.push(e.charCodeAt(u));for(var c=s>0?s+1:0;c<r;){for(var f=i,h=1,d=36;;d+=36){c>=r&&y("invalid-input");var m=(t=e.charCodeAt(c++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(m>=36||m>p((l-i)/h))&&y("overflow"),i+=m*h;var v=d<=a?1:d>=a+26?26:d-a;if(m<v)break;var g=36-v;h>p(l/g)&&y("overflow"),h*=g}var b=n.length+1;a=w(i-f,b,0==f),p(i/b)>l-o&&y("overflow"),o+=p(i/b),i%=b,n.splice(i++,0,o)}return String.fromCodePoint.apply(String,n)},k=function(e){var t=[],n=(e=g(e)).length,r=128,i=0,o=72,a=!0,s=!1,u=void 0;try{for(var c,f=e[Symbol.iterator]();!(a=(c=f.next()).done);a=!0){var h=c.value;h<128&&t.push(m(h))}}catch(e){s=!0,u=e}finally{try{!a&&f.return&&f.return()}finally{if(s)throw u}}var d=t.length,v=d;for(d&&t.push("-");v<n;){var _=l,k=!0,x=!1,O=void 0;try{for(var P,S=e[Symbol.iterator]();!(k=(P=S.next()).done);k=!0){var E=P.value;E>=r&&E<_&&(_=E)}}catch(e){x=!0,O=e}finally{try{!k&&S.return&&S.return()}finally{if(x)throw O}}var j=v+1;_-r>p((l-i)/j)&&y("overflow"),i+=(_-r)*j,r=_;var C=!0,T=!1,A=void 0;try{for(var z,I=e[Symbol.iterator]();!(C=(z=I.next()).done);C=!0){var D=z.value;if(D<r&&++i>l&&y("overflow"),D==r){for(var R=i,B=36;;B+=36){var M=B<=o?1:B>=o+26?26:B-o;if(R<M)break;var L=R-M,F=36-M;t.push(m(b(M+L%F,0))),R=p(L/F)}t.push(m(b(R,0))),o=w(i,j,v==d),i=0,++v}}}catch(e){T=!0,A=e}finally{try{!C&&I.return&&I.return()}finally{if(T)throw A}}++i,++r}return t.join("")},x=function(e){return v(e,(function(e){return f.test(e)?"xn--"+k(e):e}))},O=function(e){return v(e,(function(e){return c.test(e)?_(e.slice(4).toLowerCase()):e}))},P={};function S(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function E(e){for(var t="",n=0,r=e.length;n<r;){var i=parseInt(e.substr(n+1,2),16);if(i<128)t+=String.fromCharCode(i),n+=3;else if(i>=194&&i<224){if(r-n>=6){var o=parseInt(e.substr(n+4,2),16);t+=String.fromCharCode((31&i)<<6|63&o)}else t+=e.substr(n,6);n+=6}else if(i>=224){if(r-n>=9){var a=parseInt(e.substr(n+4,2),16),s=parseInt(e.substr(n+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}else t+=e.substr(n,9);n+=9}else t+=e.substr(n,3),n+=3}return t}function j(e,t){function n(e){var n=E(e);return n.match(t.UNRESERVED)?n:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,n).replace(t.NOT_USERINFO,S).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_HOST,S).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,n).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,S).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,n).replace(t.NOT_QUERY,S).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,n).replace(t.NOT_FRAGMENT,S).replace(t.PCT_ENCODED,i)),e}function C(e){return e.replace(/^0*(.*)/,"$1")||"0"}function T(e,t){var n=e.match(t.IPV4ADDRESS)||[],r=u(n,2)[1];return r?r.split(".").map(C).join("."):e}function A(e,t){var n=e.match(t.IPV6ADDRESS)||[],r=u(n,3),i=r[1],o=r[2];if(i){for(var a=i.toLowerCase().split("::").reverse(),s=u(a,2),l=s[0],c=s[1],f=c?c.split(":").map(C):[],h=l.split(":").map(C),d=t.IPV4ADDRESS.test(h[h.length-1]),p=d?7:8,m=h.length-p,y=Array(p),v=0;v<p;++v)y[v]=f[v]||h[m+v]||"";d&&(y[p-1]=T(y[p-1],t));var g=y.reduce((function(e,t,n){if(!t||"0"===t){var r=e[e.length-1];r&&r.index+r.length===n?r.length++:e.push({index:n,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(g&&g.length>1){var w=y.slice(0,g.index),_=y.slice(g.index+g.length);b=w.join(":")+"::"+_.join(":")}else b=y.join(":");return o&&(b+="%"+o),b}return e}var z=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,I=void 0==="".match(/(){0}/)[1];function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=!1!==t.iri?s:a;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(z);if(i){I?(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5])):(n.scheme=i[1]||void 0,n.userinfo=-1!==e.indexOf("@")?i[3]:void 0,n.host=-1!==e.indexOf("//")?i[4]:void 0,n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=-1!==e.indexOf("?")?i[7]:void 0,n.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),n.host&&(n.host=A(T(n.host,r),r)),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");var o=P[(t.scheme||n.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)j(n,r);else{if(n.host&&(t.domainHost||o&&o.domainHost))try{n.host=x(n.host.replace(r.PCT_ENCODED,E).toLowerCase())}catch(e){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+e}j(n,a)}o&&o.parse&&o.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}function R(e,t){var n=!1!==t.iri?s:a,r=[];return void 0!==e.userinfo&&(r.push(e.userinfo),r.push("@")),void 0!==e.host&&r.push(A(T(String(e.host),n),n).replace(n.IPV6ADDRESS,(function(e,t,n){return"["+t+(n?"%25"+n:"")+"]"}))),"number"==typeof e.port&&(r.push(":"),r.push(e.port.toString(10))),r.length?r.join(""):void 0}var B=/^\.\.?\//,M=/^\/\.(\/|$)/,L=/^\/\.\.(\/|$)/,F=/^\/?(?:.|\n)*?(?=\/|$)/;function N(e){for(var t=[];e.length;)if(e.match(B))e=e.replace(B,"");else if(e.match(M))e=e.replace(M,"/");else if(e.match(L))e=e.replace(L,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(F);if(!n)throw new Error("Unexpected dot segment condition");var r=n[0];e=e.slice(r.length),t.push(r)}return t.join("")}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.iri?s:a,r=[],i=P[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(n.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?O(e.host):x(e.host.replace(n.PCT_ENCODED,E).toLowerCase())}catch(n){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+n}j(e,n),"suffix"!==t.reference&&e.scheme&&(r.push(e.scheme),r.push(":"));var o=R(e,t);if(void 0!==o&&("suffix"!==t.reference&&r.push("//"),r.push(o),e.path&&"/"!==e.path.charAt(0)&&r.push("/")),void 0!==e.path){var u=e.path;t.absolutePath||i&&i.absolutePath||(u=N(u)),void 0===o&&(u=u.replace(/^\/\//,"/%2F")),r.push(u)}return void 0!==e.query&&(r.push("?"),r.push(e.query)),void 0!==e.fragment&&(r.push("#"),r.push(e.fragment)),r.join("")}function $(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3],i={};return r||(e=D(U(e,n),n),t=D(U(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=N(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=N(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=N(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=N(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function V(e,t){return e&&e.toString().replace(t&&t.iri?s.PCT_ENCODED:a.PCT_ENCODED,E)}var q={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},W={scheme:"https",domainHost:q.domainHost,parse:q.parse,serialize:q.serialize},H={},K="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",G="[0-9A-Fa-f]",J=n(n("%[EFef]"+G+"%"+G+G+"%"+G+G)+"|"+n("%[89A-Fa-f]"+G+"%"+G+G)+"|"+n("%"+G+G)),Z=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),Y=new RegExp(K,"g"),Q=new RegExp(J,"g"),X=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',Z),"g"),ee=new RegExp(t("[^]",K,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),te=ee;function ne(e){var t=E(e);return t.match(Y)?t:e}var re={scheme:"mailto",parse:function(e,t){var n=e,r=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var i=!1,o={},a=n.query.split("&"),s=0,u=a.length;s<u;++s){var l=a[s].split("=");switch(l[0]){case"to":for(var c=l[1].split(","),f=0,h=c.length;f<h;++f)r.push(c[f]);break;case"subject":n.subject=V(l[1],t);break;case"body":n.body=V(l[1],t);break;default:i=!0,o[V(l[0],t)]=V(l[1],t)}}i&&(n.headers=o)}n.query=void 0;for(var d=0,p=r.length;d<p;++d){var m=r[d].split("@");if(m[0]=V(m[0]),t.unicodeSupport)m[1]=V(m[1],t).toLowerCase();else try{m[1]=x(V(m[1],t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}r[d]=m.join("@")}return n},serialize:function(e,t){var n,r=e,o=null!=(n=e.to)?n instanceof Array?n:"number"!=typeof n.length||n.split||n.setInterval||n.call?[n]:Array.prototype.slice.call(n):[];if(o){for(var a=0,s=o.length;a<s;++a){var u=String(o[a]),l=u.lastIndexOf("@"),c=u.slice(0,l).replace(Q,ne).replace(Q,i).replace(X,S),f=u.slice(l+1);try{f=t.iri?O(f):x(V(f,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}o[a]=c+"@"+f}r.path=o.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var d=[];for(var p in h)h[p]!==H[p]&&d.push(p.replace(Q,ne).replace(Q,i).replace(ee,S)+"="+h[p].replace(Q,ne).replace(Q,i).replace(te,S));return d.length&&(r.query=d.join("&")),r}},ie=/^([^\:]+)\:(.*)/,oe={scheme:"urn",parse:function(e,t){var n=e.path&&e.path.match(ie),r=e;if(n){var i=t.scheme||r.scheme||"urn",o=n[1].toLowerCase(),a=n[2],s=i+":"+(t.nid||o),u=P[s];r.nid=o,r.nss=a,r.path=void 0,u&&(r=u.parse(r,t))}else r.error=r.error||"URN can not be parsed.";return r},serialize:function(e,t){var n=t.scheme||e.scheme||"urn",r=e.nid,i=n+":"+(t.nid||r),o=P[i];o&&(e=o.serialize(e,t));var a=e,s=e.nss;return a.path=(r||t.nid)+":"+s,a}},ae=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,se={scheme:"urn:uuid",parse:function(e,t){var n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&n.uuid.match(ae)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e,t){var n=e;return n.nss=(e.uuid||"").toLowerCase(),n}};P[q.scheme]=q,P[W.scheme]=W,P[re.scheme]=re,P[oe.scheme]=oe,P[se.scheme]=se,e.SCHEMES=P,e.pctEncChar=S,e.pctDecChars=E,e.parse=D,e.removeDotSegments=N,e.serialize=U,e.resolveComponents=$,e.resolve=function(e,t,n){var r=function(e,t){var n=e;if(t)for(var r in t)n[r]=t[r];return n}({scheme:"null"},n);return U($(D(e,r),D(t,r),r,!0),r)},e.normalize=function(e,t){return"string"==typeof e?e=U(D(e,t),t):"object"===r(e)&&(e=D(U(e,t),t)),e},e.equal=function(e,t,n){return"string"==typeof e?e=U(D(e,n),n):"object"===r(e)&&(e=U(e,n)),"string"==typeof t?t=U(D(t,n),n):"object"===r(t)&&(t=U(t,n)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?s.ESCAPE:a.ESCAPE,S)},e.unescapeComponent=V,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";e.exports=function(e){for(var t,n=0,r=e.length,i=0;i<r;)n++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<r&&56320==(64512&(t=e.charCodeAt(i)))&&i++;return n}},function(e,t,n){"use strict";var r=e.exports=function(e,t,n){"function"==typeof t&&(n=t,t={}),function e(t,n,i,o,a,s,u,l,c,f){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var h in n(o,a,s,u,l,c,f),o){var d=o[h];if(Array.isArray(d)){if(h in r.arrayKeywords)for(var p=0;p<d.length;p++)e(t,n,i,d[p],a+"/"+h+"/"+p,s,a,h,o,p)}else if(h in r.propsKeywords){if(d&&"object"==typeof d)for(var m in d)e(t,n,i,d[m],a+"/"+h+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),s,a,h,o,m)}else(h in r.keywords||t.allKeys&&!(h in r.skipKeywords))&&e(t,n,i,d,a+"/"+h,s,a,h,o)}i(o,a,s,u,l,c,f)}}(t,"function"==typeof(n=t.cb||n)?n:n.pre||function(){},n.post||function(){},e,"",e)};r.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},r.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},r.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},r.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(e,t,n){"use strict";var r=e.exports=function(){this._cache={}};r.prototype.put=function(e,t){this._cache[e]=t},r.prototype.get=function(e){return this._cache[e]},r.prototype.del=function(e){delete this._cache[e]},r.prototype.clear=function(){this._cache={}}},function(e,t,n){"use strict";var r=n(209),i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31],a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,s=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,u=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,l=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,c=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,f=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,h=/^(?:\/(?:[^~/]|~0|~1)*)*$/,d=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,p=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function m(e){return e="full"==e?"full":"fast",r.copy(m[e])}function y(e){var t=e.match(i);if(!t)return!1;var n=+t[1],r=+t[2],a=+t[3];return r>=1&&r<=12&&a>=1&&a<=(2==r&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(n)?29:o[r])}function v(e,t){var n=e.match(a);if(!n)return!1;var r=n[1],i=n[2],o=n[3],s=n[5];return(r<=23&&i<=59&&o<=59||23==r&&59==i&&60==o)&&(!t||s)}e.exports=m,m.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":l,url:c,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:_,uuid:f,"json-pointer":h,"json-pointer-uri-fragment":d,"relative-json-pointer":p},m.full={date:y,time:v,"date-time":function(e){var t=e.split(g);return 2==t.length&&y(t[0])&&v(t[1],!0)},uri:function(e){return b.test(e)&&u.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":l,url:c,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:_,uuid:f,"json-pointer":h,"json-pointer-uri-fragment":d,"relative-json-pointer":p};var g=/t|\s/i;var b=/\/|:/;var w=/[^\\]\\Z/;function _(e){if(w.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},function(e,t,n){"use strict";var r=n(519),i=n(209).toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=i(t),e.types=i(["number","integer","string","array","object","boolean","null"]),e.forEach((function(n){n.rules=n.rules.map((function(n){var i;if("object"==typeof n){var o=Object.keys(n)[0];i=n[o],n=o,i.forEach((function(n){t.push(n),e.all[n]=!0}))}return t.push(n),e.all[n]={keyword:n,code:r[n],implements:i}})),e.all.$comment={keyword:"$comment",code:r.$comment},n.type&&(e.types[n.type]=n)})),e.keywords=i(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},function(e,t,n){"use strict";e.exports={$ref:n(520),allOf:n(521),anyOf:n(522),$comment:n(523),const:n(524),contains:n(525),dependencies:n(526),enum:n(527),format:n(528),if:n(529),items:n(530),maximum:n(439),minimum:n(439),maxItems:n(440),minItems:n(440),maxLength:n(441),minLength:n(441),maxProperties:n(442),minProperties:n(442),multipleOf:n(531),not:n(532),oneOf:n(533),pattern:n(534),properties:n(535),propertyNames:n(536),required:n(537),uniqueItems:n(538),validate:n(438)}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i,o=" ",a=e.level,s=e.dataLevel,u=e.schema[t],l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(s||""),h="valid"+a;if("#"==u||"#/"==u)e.isRoot?(r=e.async,i="validate"):(r=!0===e.root.schema.$async,i="root.refVal[0]");else{var d=e.resolveRef(e.baseId,u,e.isRoot);if(void 0===d){var p=e.MissingRefError.message(e.baseId,u);if("fail"==e.opts.missingRefs){e.logger.error(p),(g=g||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(u)+"' } ",!1!==e.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(u)+"' "),e.opts.verbose&&(o+=" , schema: "+e.util.toQuotedString(u)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),o+=" } "):o+=" {} ";var m=o;o=g.pop(),!e.compositeRule&&c?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(o+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,u,p);e.logger.warn(p),c&&(o+=" if (true) { ")}}else if(d.inline){var y=e.util.copy(e);y.level++;var v="valid"+y.level;y.schema=d.schema,y.schemaPath="",y.errSchemaPath=u,o+=" "+e.validate(y).replace(/validate\.schema/g,d.code)+" ",c&&(o+=" if ("+v+") { ")}else r=!0===d.$async||e.async&&!1!==d.$async,i=d.code}if(i){var g;(g=g||[]).push(o),o="",e.opts.passContext?o+=" "+i+".call(this, ":o+=" "+i+"( ",o+=" "+f+", (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var b=o+=" , "+(s?"data"+(s-1||""):"parentData")+" , "+(s?e.dataPathArr[s]:"parentDataProperty")+", rootData)  ";if(o=g.pop(),r){if(!e.async)throw new Error("async schema referenced by sync schema");c&&(o+=" var "+h+"; "),o+=" try { await "+b+"; ",c&&(o+=" "+h+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",c&&(o+=" "+h+" = false; "),o+=" } ",c&&(o+=" if ("+h+") { ")}else o+=" if (!"+b+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",c&&(o+=" else { ")}return o}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.schema[t],o=e.schemaPath+e.util.getProperty(t),a=e.errSchemaPath+"/"+t,s=!e.opts.allErrors,u=e.util.copy(e),l="";u.level++;var c="valid"+u.level,f=u.baseId,h=!0,d=i;if(d)for(var p,m=-1,y=d.length-1;m<y;)p=d[m+=1],(e.opts.strictKeywords?"object"==typeof p&&Object.keys(p).length>0:e.util.schemaHasRules(p,e.RULES.all))&&(h=!1,u.schema=p,u.schemaPath=o+"["+m+"]",u.errSchemaPath=a+"/"+m,r+="  "+e.validate(u)+" ",u.baseId=f,s&&(r+=" if ("+c+") { ",l+="}"));return s&&(r+=h?" if (true) { ":" "+l.slice(0,-1)+" "),r=e.util.cleanUpCode(r)}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,c="data"+(o||""),f="valid"+i,h="errs__"+i,d=e.util.copy(e),p="";d.level++;var m="valid"+d.level;if(a.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0:e.util.schemaHasRules(t,e.RULES.all)}))){var y=d.baseId;r+=" var "+h+" = errors; var "+f+" = false;  ";var v=e.compositeRule;e.compositeRule=d.compositeRule=!0;var g=a;if(g)for(var b,w=-1,_=g.length-1;w<_;)b=g[w+=1],d.schema=b,d.schemaPath=s+"["+w+"]",d.errSchemaPath=u+"/"+w,r+="  "+e.validate(d)+" ",d.baseId=y,r+=" "+f+" = "+f+" || "+m+"; if (!"+f+") { ",p+="}";e.compositeRule=d.compositeRule=v,r+=" "+p+" if (!"+f+") {   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } "),r=e.util.cleanUpCode(r)}else l&&(r+=" if (true) { ");return r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.schema[t],o=e.errSchemaPath+"/"+t,a=(e.opts.allErrors,e.util.toQuotedString(i));return!0===e.opts.$comment?r+=" console.log("+a+");":"function"==typeof e.opts.$comment&&(r+=" self._opts.$comment("+a+", "+e.util.toQuotedString(o)+", validate.root.schema);"),r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,c="data"+(o||""),f="valid"+i,h=e.opts.$data&&a&&a.$data;h&&(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; "),h||(r+=" var schema"+i+" = validate.schema"+s+";"),r+="var "+f+" = equal("+c+", schema"+i+"); if (!"+f+") {   ";var d=d||[];d.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValue: schema"+i+" } ",!1!==e.opts.messages&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var p=r;return r=d.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+p+"]); ":r+=" validate.errors = ["+p+"]; return false; ":r+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",l&&(r+=" else { "),r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,c="data"+(o||""),f="valid"+i,h="errs__"+i,d=e.util.copy(e);d.level++;var p="valid"+d.level,m="i"+i,y=d.dataLevel=e.dataLevel+1,v="data"+y,g=e.baseId,b=e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0:e.util.schemaHasRules(a,e.RULES.all);if(r+="var "+h+" = errors;var "+f+";",b){var w=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=a,d.schemaPath=s,d.errSchemaPath=u,r+=" var "+p+" = false; for (var "+m+" = 0; "+m+" < "+c+".length; "+m+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var _=c+"["+m+"]";d.dataPathArr[y]=m;var k=e.validate(d);d.baseId=g,e.util.varOccurences(k,v)<2?r+=" "+e.util.varReplace(k,v,_)+" ":r+=" var "+v+" = "+_+"; "+k+" ",r+=" if ("+p+") break; }  ",e.compositeRule=d.compositeRule=w,r+="  if (!"+p+") {"}else r+=" if ("+c+".length == 0) {";var x=x||[];x.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should contain a valid item' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var O=r;return r=x.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+O+"]); ":r+=" validate.errors = ["+O+"]; return false; ":r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",b&&(r+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(r+=" } "),r=e.util.cleanUpCode(r)}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,c="data"+(o||""),f="errs__"+i,h=e.util.copy(e),d="";h.level++;var p="valid"+h.level,m={},y={},v=e.opts.ownProperties;for(_ in a){var g=a[_],b=Array.isArray(g)?y:m;b[_]=g}r+="var "+f+" = errors;";var w=e.errorPath;for(var _ in r+="var missing"+i+";",y)if((b=y[_]).length){if(r+=" if ( "+c+e.util.getProperty(_)+" !== undefined ",v&&(r+=" && Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(_)+"') "),l){r+=" && ( ";var k=b;if(k)for(var x=-1,O=k.length-1;x<O;){T=k[x+=1],x&&(r+=" || "),r+=" ( ( "+(D=c+(I=e.util.getProperty(T)))+" === undefined ",v&&(r+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(T)+"') "),r+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?T:I)+") ) "}r+=")) {  ";var P="missing"+i,S="' + "+P+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,P,!0):w+" + "+P);var E=E||[];E.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(_)+"', missingProperty: '"+S+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(r+=" , message: 'should have ",1==b.length?r+="property "+e.util.escapeQuotes(b[0]):r+="properties "+e.util.escapeQuotes(b.join(", ")),r+=" when property "+e.util.escapeQuotes(_)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var j=r;r=E.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+j+"]); ":r+=" validate.errors = ["+j+"]; return false; ":r+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var C=b;if(C)for(var T,A=-1,z=C.length-1;A<z;){T=C[A+=1];var I=e.util.getProperty(T),D=(S=e.util.escapeQuotes(T),c+I);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,T,e.opts.jsonPointers)),r+=" if ( "+D+" === undefined ",v&&(r+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(T)+"') "),r+=") {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(_)+"', missingProperty: '"+S+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(r+=" , message: 'should have ",1==b.length?r+="property "+e.util.escapeQuotes(b[0]):r+="properties "+e.util.escapeQuotes(b.join(", ")),r+=" when property "+e.util.escapeQuotes(_)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",l&&(d+="}",r+=" else { ")}e.errorPath=w;var R=h.baseId;for(var _ in m){g=m[_];(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0:e.util.schemaHasRules(g,e.RULES.all))&&(r+=" "+p+" = true; if ( "+c+e.util.getProperty(_)+" !== undefined ",v&&(r+=" && Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(_)+"') "),r+=") { ",h.schema=g,h.schemaPath=s+e.util.getProperty(_),h.errSchemaPath=u+"/"+e.util.escapeFragment(_),r+="  "+e.validate(h)+" ",h.baseId=R,r+=" }  ",l&&(r+=" if ("+p+") { ",d+="}"))}return l&&(r+="   "+d+" if ("+f+" == errors) {"),r=e.util.cleanUpCode(r)}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,c="data"+(o||""),f="valid"+i,h=e.opts.$data&&a&&a.$data;h&&(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ");var d="i"+i,p="schema"+i;h||(r+=" var "+p+" = validate.schema"+s+";"),r+="var "+f+";",h&&(r+=" if (schema"+i+" === undefined) "+f+" = true; else if (!Array.isArray(schema"+i+")) "+f+" = false; else {"),r+=f+" = false;for (var "+d+"=0; "+d+"<"+p+".length; "+d+"++) if (equal("+c+", "+p+"["+d+"])) { "+f+" = true; break; }",h&&(r+="  }  "),r+=" if (!"+f+") {   ";var m=m||[];m.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+i+" } ",!1!==e.opts.messages&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var y=r;return r=m.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",l&&(r+=" else { "),r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,c="data"+(o||"");if(!1===e.opts.format)return l&&(r+=" if (true) { "),r;var f,h=e.opts.$data&&a&&a.$data;h?(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",f="schema"+i):f=a;var d=e.opts.unknownFormats,p=Array.isArray(d);if(h){r+=" var "+(m="format"+i)+" = formats["+f+"]; var "+(y="isObject"+i)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(v="formatType"+i)+" = "+y+" && "+m+".type || 'string'; if ("+y+") { ",e.async&&(r+=" var async"+i+" = "+m+".async; "),r+=" "+m+" = "+m+".validate; } if (  ",h&&(r+=" ("+f+" !== undefined && typeof "+f+" != 'string') || "),r+=" (","ignore"!=d&&(r+=" ("+f+" && !"+m+" ",p&&(r+=" && self._opts.unknownFormats.indexOf("+f+") == -1 "),r+=") || "),r+=" ("+m+" && "+v+" == '"+n+"' && !(typeof "+m+" == 'function' ? ",e.async?r+=" (async"+i+" ? await "+m+"("+c+") : "+m+"("+c+")) ":r+=" "+m+"("+c+") ",r+=" : "+m+".test("+c+"))))) {"}else{var m;if(!(m=e.formats[a])){if("ignore"==d)return e.logger.warn('unknown format "'+a+'" ignored in schema at path "'+e.errSchemaPath+'"'),l&&(r+=" if (true) { "),r;if(p&&d.indexOf(a)>=0)return l&&(r+=" if (true) { "),r;throw new Error('unknown format "'+a+'" is used in schema at path "'+e.errSchemaPath+'"')}var y,v=(y="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(y){var g=!0===m.async;m=m.validate}if(v!=n)return l&&(r+=" if (true) { "),r;if(g){if(!e.async)throw new Error("async format in sync schema");r+=" if (!(await "+(b="formats"+e.util.getProperty(a)+".validate")+"("+c+"))) { "}else{r+=" if (! ";var b="formats"+e.util.getProperty(a);y&&(b+=".validate"),r+="function"==typeof m?" "+b+"("+c+") ":" "+b+".test("+c+") ",r+=") { "}}var w=w||[];w.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { format:  ",r+=h?""+f:""+e.util.toQuotedString(a),r+="  } ",!1!==e.opts.messages&&(r+=" , message: 'should match format \"",r+=h?"' + "+f+" + '":""+e.util.escapeQuotes(a),r+="\"' "),e.opts.verbose&&(r+=" , schema:  ",r+=h?"validate.schema"+s:""+e.util.toQuotedString(a),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var _=r;return r=w.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+_+"]); ":r+=" validate.errors = ["+_+"]; return false; ":r+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",l&&(r+=" else { "),r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,c="data"+(o||""),f="valid"+i,h="errs__"+i,d=e.util.copy(e);d.level++;var p="valid"+d.level,m=e.schema.then,y=e.schema.else,v=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0:e.util.schemaHasRules(m,e.RULES.all)),g=void 0!==y&&(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0:e.util.schemaHasRules(y,e.RULES.all)),b=d.baseId;if(v||g){var w;d.createErrors=!1,d.schema=a,d.schemaPath=s,d.errSchemaPath=u,r+=" var "+h+" = errors; var "+f+" = true;  ";var _=e.compositeRule;e.compositeRule=d.compositeRule=!0,r+="  "+e.validate(d)+" ",d.baseId=b,d.createErrors=!0,r+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=d.compositeRule=_,v?(r+=" if ("+p+") {  ",d.schema=e.schema.then,d.schemaPath=e.schemaPath+".then",d.errSchemaPath=e.errSchemaPath+"/then",r+="  "+e.validate(d)+" ",d.baseId=b,r+=" "+f+" = "+p+"; ",v&&g?r+=" var "+(w="ifClause"+i)+" = 'then'; ":w="'then'",r+=" } ",g&&(r+=" else { ")):r+=" if (!"+p+") { ",g&&(d.schema=e.schema.else,d.schemaPath=e.schemaPath+".else",d.errSchemaPath=e.errSchemaPath+"/else",r+="  "+e.validate(d)+" ",d.baseId=b,r+=" "+f+" = "+p+"; ",v&&g?r+=" var "+(w="ifClause"+i)+" = 'else'; ":w="'else'",r+=" } "),r+=" if (!"+f+") {   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { failingKeyword: "+w+" } ",!1!==e.opts.messages&&(r+=" , message: 'should match \"' + "+w+" + '\" schema' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",l&&(r+=" else { "),r=e.util.cleanUpCode(r)}else l&&(r+=" if (true) { ");return r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,c="data"+(o||""),f="valid"+i,h="errs__"+i,d=e.util.copy(e),p="";d.level++;var m="valid"+d.level,y="i"+i,v=d.dataLevel=e.dataLevel+1,g="data"+v,b=e.baseId;if(r+="var "+h+" = errors;var "+f+";",Array.isArray(a)){var w=e.schema.additionalItems;if(!1===w){r+=" "+f+" = "+c+".length <= "+a.length+"; ";var _=u;u=e.errSchemaPath+"/additionalItems",r+="  if (!"+f+") {   ";var k=k||[];k.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+a.length+" } ",!1!==e.opts.messages&&(r+=" , message: 'should NOT have more than "+a.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var x=r;r=k.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+x+"]); ":r+=" validate.errors = ["+x+"]; return false; ":r+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u=_,l&&(p+="}",r+=" else { ")}var O=a;if(O)for(var P,S=-1,E=O.length-1;S<E;)if(P=O[S+=1],e.opts.strictKeywords?"object"==typeof P&&Object.keys(P).length>0:e.util.schemaHasRules(P,e.RULES.all)){r+=" "+m+" = true; if ("+c+".length > "+S+") { ";var j=c+"["+S+"]";d.schema=P,d.schemaPath=s+"["+S+"]",d.errSchemaPath=u+"/"+S,d.errorPath=e.util.getPathExpr(e.errorPath,S,e.opts.jsonPointers,!0),d.dataPathArr[v]=S;var C=e.validate(d);d.baseId=b,e.util.varOccurences(C,g)<2?r+=" "+e.util.varReplace(C,g,j)+" ":r+=" var "+g+" = "+j+"; "+C+" ",r+=" }  ",l&&(r+=" if ("+m+") { ",p+="}")}if("object"==typeof w&&(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0:e.util.schemaHasRules(w,e.RULES.all))){d.schema=w,d.schemaPath=e.schemaPath+".additionalItems",d.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" "+m+" = true; if ("+c+".length > "+a.length+") {  for (var "+y+" = "+a.length+"; "+y+" < "+c+".length; "+y+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers,!0);j=c+"["+y+"]";d.dataPathArr[v]=y;C=e.validate(d);d.baseId=b,e.util.varOccurences(C,g)<2?r+=" "+e.util.varReplace(C,g,j)+" ":r+=" var "+g+" = "+j+"; "+C+" ",l&&(r+=" if (!"+m+") break; "),r+=" } }  ",l&&(r+=" if ("+m+") { ",p+="}")}}else if(e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0:e.util.schemaHasRules(a,e.RULES.all)){d.schema=a,d.schemaPath=s,d.errSchemaPath=u,r+="  for (var "+y+" = 0; "+y+" < "+c+".length; "+y+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers,!0);j=c+"["+y+"]";d.dataPathArr[v]=y;C=e.validate(d);d.baseId=b,e.util.varOccurences(C,g)<2?r+=" "+e.util.varReplace(C,g,j)+" ":r+=" var "+g+" = "+j+"; "+C+" ",l&&(r+=" if (!"+m+") break; "),r+=" }"}return l&&(r+=" "+p+" if ("+h+" == errors) {"),r=e.util.cleanUpCode(r)}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(a||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,i+="var division"+o+";if (",h&&(i+=" "+r+" !== undefined && ( typeof "+r+" != 'number' || "),i+=" (division"+o+" = "+f+" / "+r+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+o+" !== parseInt(division"+o+") ",i+=" ) ",h&&(i+="  )  "),i+=" ) {   ";var d=d||[];d.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { multipleOf: "+r+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be multiple of ",i+=h?"' + "+r:r+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var p=i;return i=d.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+p+"]); ":i+=" validate.errors = ["+p+"]; return false; ":i+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",c&&(i+=" else { "),i}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,c="data"+(o||""),f="errs__"+i,h=e.util.copy(e);h.level++;var d="valid"+h.level;if(e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0:e.util.schemaHasRules(a,e.RULES.all)){h.schema=a,h.schemaPath=s,h.errSchemaPath=u,r+=" var "+f+" = errors;  ";var p,m=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1,h.opts.allErrors&&(p=h.opts.allErrors,h.opts.allErrors=!1),r+=" "+e.validate(h)+" ",h.createErrors=!0,p&&(h.opts.allErrors=p),e.compositeRule=h.compositeRule=m,r+=" if ("+d+") {   ";var y=y||[];y.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var v=r;r=y.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(r+=" if (false) { ");return r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,c="data"+(o||""),f="valid"+i,h="errs__"+i,d=e.util.copy(e),p="";d.level++;var m="valid"+d.level,y=d.baseId,v="prevValid"+i,g="passingSchemas"+i;r+="var "+h+" = errors , "+v+" = false , "+f+" = false , "+g+" = null; ";var b=e.compositeRule;e.compositeRule=d.compositeRule=!0;var w=a;if(w)for(var _,k=-1,x=w.length-1;k<x;)_=w[k+=1],(e.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0:e.util.schemaHasRules(_,e.RULES.all))?(d.schema=_,d.schemaPath=s+"["+k+"]",d.errSchemaPath=u+"/"+k,r+="  "+e.validate(d)+" ",d.baseId=y):r+=" var "+m+" = true; ",k&&(r+=" if ("+m+" && "+v+") { "+f+" = false; "+g+" = ["+g+", "+k+"]; } else { ",p+="}"),r+=" if ("+m+") { "+f+" = "+v+" = true; "+g+" = "+k+"; }";return e.compositeRule=d.compositeRule=b,r+=p+"if (!"+f+") {   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { passingSchemas: "+g+" } ",!1!==e.opts.messages&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(a||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,i+="if ( ",h&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'string') || "),i+=" !"+(h?"(new RegExp("+r+"))":e.usePattern(s))+".test("+f+") ) {   ";var d=d||[];d.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { pattern:  ",i+=h?""+r:""+e.util.toQuotedString(s),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match pattern \"",i+=h?"' + "+r+" + '":""+e.util.escapeQuotes(s),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+e.util.toQuotedString(s),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var p=i;return i=d.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+p+"]); ":i+=" validate.errors = ["+p+"]; return false; ":i+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",c&&(i+=" else { "),i}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,c="data"+(o||""),f="errs__"+i,h=e.util.copy(e),d="";h.level++;var p="valid"+h.level,m="key"+i,y="idx"+i,v=h.dataLevel=e.dataLevel+1,g="data"+v,b="dataProperties"+i,w=Object.keys(a||{}),_=e.schema.patternProperties||{},k=Object.keys(_),x=e.schema.additionalProperties,O=w.length||k.length,P=!1===x,S="object"==typeof x&&Object.keys(x).length,E=e.opts.removeAdditional,j=P||S||E,C=e.opts.ownProperties,T=e.baseId,A=e.schema.required;if(A&&(!e.opts.$data||!A.$data)&&A.length<e.opts.loopRequired)var z=e.util.toHash(A);if(r+="var "+f+" = errors;var "+p+" = true;",C&&(r+=" var "+b+" = undefined;"),j){if(r+=C?" "+b+" = "+b+" || Object.keys("+c+"); for (var "+y+"=0; "+y+"<"+b+".length; "+y+"++) { var "+m+" = "+b+"["+y+"]; ":" for (var "+m+" in "+c+") { ",O){if(r+=" var isAdditional"+i+" = !(false ",w.length)if(w.length>8)r+=" || validate.schema"+s+".hasOwnProperty("+m+") ";else{var I=w;if(I)for(var D=-1,R=I.length-1;D<R;)G=I[D+=1],r+=" || "+m+" == "+e.util.toQuotedString(G)+" "}if(k.length){var B=k;if(B)for(var M=-1,L=B.length-1;M<L;)ie=B[M+=1],r+=" || "+e.usePattern(ie)+".test("+m+") "}r+=" ); if (isAdditional"+i+") { "}if("all"==E)r+=" delete "+c+"["+m+"]; ";else{var F=e.errorPath,N="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),P)if(E)r+=" delete "+c+"["+m+"]; ";else{r+=" "+p+" = false; ";var U=u;u=e.errSchemaPath+"/additionalProperties",(te=te||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { additionalProperty: '"+N+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var $=r;r=te.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+$+"]); ":r+=" validate.errors = ["+$+"]; return false; ":r+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=U,l&&(r+=" break; ")}else if(S)if("failing"==E){r+=" var "+f+" = errors;  ";var V=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=x,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var q=c+"["+m+"]";h.dataPathArr[v]=m;var W=e.validate(h);h.baseId=T,e.util.varOccurences(W,g)<2?r+=" "+e.util.varReplace(W,g,q)+" ":r+=" var "+g+" = "+q+"; "+W+" ",r+=" if (!"+p+") { errors = "+f+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+c+"["+m+"]; }  ",e.compositeRule=h.compositeRule=V}else{h.schema=x,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);q=c+"["+m+"]";h.dataPathArr[v]=m;W=e.validate(h);h.baseId=T,e.util.varOccurences(W,g)<2?r+=" "+e.util.varReplace(W,g,q)+" ":r+=" var "+g+" = "+q+"; "+W+" ",l&&(r+=" if (!"+p+") break; ")}e.errorPath=F}O&&(r+=" } "),r+=" }  ",l&&(r+=" if ("+p+") { ",d+="}")}var H=e.opts.useDefaults&&!e.compositeRule;if(w.length){var K=w;if(K)for(var G,J=-1,Z=K.length-1;J<Z;){var Y=a[G=K[J+=1]];if(e.opts.strictKeywords?"object"==typeof Y&&Object.keys(Y).length>0:e.util.schemaHasRules(Y,e.RULES.all)){var Q=e.util.getProperty(G),X=(q=c+Q,H&&void 0!==Y.default);h.schema=Y,h.schemaPath=s+Q,h.errSchemaPath=u+"/"+e.util.escapeFragment(G),h.errorPath=e.util.getPath(e.errorPath,G,e.opts.jsonPointers),h.dataPathArr[v]=e.util.toQuotedString(G);W=e.validate(h);if(h.baseId=T,e.util.varOccurences(W,g)<2){W=e.util.varReplace(W,g,q);var ee=q}else{ee=g;r+=" var "+g+" = "+q+"; "}if(X)r+=" "+W+" ";else{if(z&&z[G]){r+=" if ( "+ee+" === undefined ",C&&(r+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(G)+"') "),r+=") { "+p+" = false; ";F=e.errorPath,U=u;var te,ne=e.util.escapeQuotes(G);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(F,G,e.opts.jsonPointers)),u=e.errSchemaPath+"/required",(te=te||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+ne+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+ne+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";$=r;r=te.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+$+"]); ":r+=" validate.errors = ["+$+"]; return false; ":r+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=U,e.errorPath=F,r+=" } else { "}else l?(r+=" if ( "+ee+" === undefined ",C&&(r+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(G)+"') "),r+=") { "+p+" = true; } else { "):(r+=" if ("+ee+" !== undefined ",C&&(r+=" &&   Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(G)+"') "),r+=" ) { ");r+=" "+W+" } "}}l&&(r+=" if ("+p+") { ",d+="}")}}if(k.length){var re=k;if(re)for(var ie,oe=-1,ae=re.length-1;oe<ae;){Y=_[ie=re[oe+=1]];if(e.opts.strictKeywords?"object"==typeof Y&&Object.keys(Y).length>0:e.util.schemaHasRules(Y,e.RULES.all)){h.schema=Y,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ie),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ie),r+=C?" "+b+" = "+b+" || Object.keys("+c+"); for (var "+y+"=0; "+y+"<"+b+".length; "+y+"++) { var "+m+" = "+b+"["+y+"]; ":" for (var "+m+" in "+c+") { ",r+=" if ("+e.usePattern(ie)+".test("+m+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);q=c+"["+m+"]";h.dataPathArr[v]=m;W=e.validate(h);h.baseId=T,e.util.varOccurences(W,g)<2?r+=" "+e.util.varReplace(W,g,q)+" ":r+=" var "+g+" = "+q+"; "+W+" ",l&&(r+=" if (!"+p+") break; "),r+=" } ",l&&(r+=" else "+p+" = true; "),r+=" }  ",l&&(r+=" if ("+p+") { ",d+="}")}}}return l&&(r+=" "+d+" if ("+f+" == errors) {"),r=e.util.cleanUpCode(r)}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,c="data"+(o||""),f="errs__"+i,h=e.util.copy(e);h.level++;var d="valid"+h.level;if(r+="var "+f+" = errors;",e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0:e.util.schemaHasRules(a,e.RULES.all)){h.schema=a,h.schemaPath=s,h.errSchemaPath=u;var p="key"+i,m="idx"+i,y="i"+i,v="' + "+p+" + '",g="data"+(h.dataLevel=e.dataLevel+1),b="dataProperties"+i,w=e.opts.ownProperties,_=e.baseId;w&&(r+=" var "+b+" = undefined; "),r+=w?" "+b+" = "+b+" || Object.keys("+c+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+p+" = "+b+"["+m+"]; ":" for (var "+p+" in "+c+") { ",r+=" var startErrs"+i+" = errors; ";var k=p,x=e.compositeRule;e.compositeRule=h.compositeRule=!0;var O=e.validate(h);h.baseId=_,e.util.varOccurences(O,g)<2?r+=" "+e.util.varReplace(O,g,k)+" ":r+=" var "+g+" = "+k+"; "+O+" ",e.compositeRule=h.compositeRule=x,r+=" if (!"+d+") { for (var "+y+"=startErrs"+i+"; "+y+"<errors; "+y+"++) { vErrors["+y+"].propertyName = "+p+"; }   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+v+"' } ",!1!==e.opts.messages&&(r+=" , message: 'property name \\'"+v+"\\' is invalid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),l&&(r+=" break; "),r+=" } }"}return l&&(r+="  if ("+f+" == errors) {"),r=e.util.cleanUpCode(r)}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,c="data"+(o||""),f="valid"+i,h=e.opts.$data&&a&&a.$data;h&&(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ");var d="schema"+i;if(!h)if(a.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var p=[],m=a;if(m)for(var y,v=-1,g=m.length-1;v<g;){y=m[v+=1];var b=e.schema.properties[y];b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0:e.util.schemaHasRules(b,e.RULES.all))||(p[p.length]=y)}}else p=a;if(h||p.length){var w=e.errorPath,_=h||p.length>=e.opts.loopRequired,k=e.opts.ownProperties;if(l)if(r+=" var missing"+i+"; ",_){h||(r+=" var "+d+" = validate.schema"+s+"; ");var x="' + "+(C="schema"+i+"["+(S="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,C,e.opts.jsonPointers)),r+=" var "+f+" = true; ",h&&(r+=" if (schema"+i+" === undefined) "+f+" = true; else if (!Array.isArray(schema"+i+")) "+f+" = false; else {"),r+=" for (var "+S+" = 0; "+S+" < "+d+".length; "+S+"++) { "+f+" = "+c+"["+d+"["+S+"]] !== undefined ",k&&(r+=" &&   Object.prototype.hasOwnProperty.call("+c+", "+d+"["+S+"]) "),r+="; if (!"+f+") break; } ",h&&(r+="  }  "),r+="  if (!"+f+") {   ",(j=j||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var O=r;r=j.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+O+"]); ":r+=" validate.errors = ["+O+"]; return false; ":r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var P=p;if(P)for(var S=-1,E=P.length-1;S<E;){A=P[S+=1],S&&(r+=" || "),r+=" ( ( "+(R=c+(D=e.util.getProperty(A)))+" === undefined ",k&&(r+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(A)+"') "),r+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?A:D)+") ) "}r+=") {  ";var j;x="' + "+(C="missing"+i)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,C,!0):w+" + "+C),(j=j||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";O=r;r=j.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+O+"]); ":r+=" validate.errors = ["+O+"]; return false; ":r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(_){h||(r+=" var "+d+" = validate.schema"+s+"; ");var C;x="' + "+(C="schema"+i+"["+(S="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,C,e.opts.jsonPointers)),h&&(r+=" if ("+d+" && !Array.isArray("+d+")) {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+d+" !== undefined) { "),r+=" for (var "+S+" = 0; "+S+" < "+d+".length; "+S+"++) { if ("+c+"["+d+"["+S+"]] === undefined ",k&&(r+=" || ! Object.prototype.hasOwnProperty.call("+c+", "+d+"["+S+"]) "),r+=") {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(r+="  }  ")}else{var T=p;if(T)for(var A,z=-1,I=T.length-1;z<I;){A=T[z+=1];var D=e.util.getProperty(A),R=(x=e.util.escapeQuotes(A),c+D);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,A,e.opts.jsonPointers)),r+=" if ( "+R+" === undefined ",k&&(r+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(A)+"') "),r+=") {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=w}else l&&(r+=" if (true) {");return r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(a||""),h="valid"+o,d=e.opts.$data&&s&&s.$data;if(d?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,(s||d)&&!1!==e.opts.uniqueItems){d&&(i+=" var "+h+"; if ("+r+" === false || "+r+" === undefined) "+h+" = true; else if (typeof "+r+" != 'boolean') "+h+" = false; else { "),i+=" var i = "+f+".length , "+h+" = true , j; if (i > 1) { ";var p=e.schema.items&&e.schema.items.type,m=Array.isArray(p);if(!p||"object"==p||"array"==p||m&&(p.indexOf("object")>=0||p.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+f+"[i], "+f+"[j])) { "+h+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+f+"[i]; ";var y="checkDataType"+(m?"s":"");i+=" if ("+e.util[y](p,"item",!0)+") continue; ",m&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",d&&(i+="  }  "),i+=" if (!"+h+") {   ";var v=v||[];v.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var g=i;i=v.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",c&&(i+=" else { ")}else c&&(i+=" if (true) { ");return i}},function(e,t,n){"use strict";var r=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var n=0;n<t.length;n++){e=JSON.parse(JSON.stringify(e));var i,o=t[n].split("/"),a=e;for(i=1;i<o.length;i++)a=a[o[i]];for(i=0;i<r.length;i++){var s=r[i],u=a[s];u&&(a[s]={anyOf:[u,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]})}}return e}},function(e,t,n){"use strict";var r=n(399).MissingRef;e.exports=function e(t,n,i){var o=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof n&&(i=n,n=void 0);var a=s(t).then((function(){var e=o._addSchema(t,void 0,n);return e.validate||function e(t){try{return o._compile(t)}catch(e){if(e instanceof r)return i(e);throw e}function i(r){var i=r.missingSchema;if(l(i))throw new Error("Schema "+i+" is loaded but "+r.missingRef+" cannot be resolved");var a=o._loadingSchemas[i];return a||(a=o._loadingSchemas[i]=o._opts.loadSchema(i)).then(u,u),a.then((function(e){if(!l(i))return s(e).then((function(){l(i)||o.addSchema(e,i,void 0,n)}))})).then((function(){return e(t)}));function u(){delete o._loadingSchemas[i]}function l(e){return o._refs[e]||o._schemas[e]}}}(e)}));i&&a.then((function(e){i(null,e)}),i);return a;function s(t){var n=t.$schema;return n&&!o.getSchema(n)?e.call(o,{$ref:n},!0):Promise.resolve()}}},function(e,t,n){"use strict";var r=/^[a-z_$][a-z0-9_$-]*$/i,i=n(542),o=n(543);e.exports={add:function(e,t){var n=this.RULES;if(n.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!r.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var o=t.type;if(Array.isArray(o))for(var a=0;a<o.length;a++)u(e,o[a],t);else u(e,o,t);var s=t.metaSchema;s&&(t.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(s,!0))}function u(e,t,r){for(var o,a=0;a<n.length;a++){var s=n[a];if(s.type==t){o=s;break}}o||(o={type:t,rules:[]},n.push(o));var u={keyword:e,definition:r,custom:!0,code:i,implements:r.implements};o.rules.push(u),n.custom[e]=u}return n.keywords[e]=n.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var n=0;n<t.length;n++)for(var r=t[n].rules,i=0;i<r.length;i++)if(r[i].keyword==e){r.splice(i,1);break}return this},validate:function e(t,n){e.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(o,!0);if(r(t))return!0;if(e.errors=r.errors,n)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i,o=" ",a=e.level,s=e.dataLevel,u=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h="data"+(s||""),d="valid"+a,p="errs__"+a,m=e.opts.$data&&u&&u.$data;m?(o+=" var schema"+a+" = "+e.util.getData(u.$data,s,e.dataPathArr)+"; ",i="schema"+a):i=u;var y,v,g,b,w,_="definition"+a,k=this.definition,x="";if(m&&k.$data){w="keywordValidate"+a;var O=k.validateSchema;o+=" var "+_+" = RULES.custom['"+t+"'].definition; var "+w+" = "+_+".validate;"}else{if(!(b=e.useCustomRule(this,u,e.schema,e)))return;i="validate.schema"+l,w=b.code,y=k.compile,v=k.inline,g=k.macro}var P=w+".errors",S="i"+a,E="ruleErr"+a,j=k.async;if(j&&!e.async)throw new Error("async keyword in sync schema");if(v||g||(o+=P+" = null;"),o+="var "+p+" = errors;var "+d+";",m&&k.$data&&(x+="}",o+=" if ("+i+" === undefined) { "+d+" = true; } else { ",O&&(x+="}",o+=" "+d+" = "+_+".validateSchema("+i+"); if ("+d+") { ")),v)k.statements?o+=" "+b.validate+" ":o+=" "+d+" = "+b.validate+"; ";else if(g){var C=e.util.copy(e);x="";C.level++;var T="valid"+C.level;C.schema=b.validate,C.schemaPath="";var A=e.compositeRule;e.compositeRule=C.compositeRule=!0;var z=e.validate(C).replace(/validate\.schema/g,w);e.compositeRule=C.compositeRule=A,o+=" "+z}else{(B=B||[]).push(o),o="",o+="  "+w+".call( ",e.opts.passContext?o+="this":o+="self",y||!1===k.schema?o+=" , "+h+" ":o+=" , "+i+" , "+h+" , validate.schema"+e.schemaPath+" ",o+=" , (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var I=s?"data"+(s-1||""):"parentData",D=s?e.dataPathArr[s]:"parentDataProperty",R=o+=" , "+I+" , "+D+" , rootData )  ";o=B.pop(),!1===k.errors?(o+=" "+d+" = ",j&&(o+="await "),o+=R+"; "):o+=j?" var "+(P="customErrors"+a)+" = null; try { "+d+" = await "+R+"; } catch (e) { "+d+" = false; if (e instanceof ValidationError) "+P+" = e.errors; else throw e; } ":" "+P+" = null; "+d+" = "+R+"; "}if(k.modifying&&(o+=" if ("+I+") "+h+" = "+I+"["+D+"];"),o+=""+x,k.valid)f&&(o+=" if (true) { ");else{var B;o+=" if ( ",void 0===k.valid?(o+=" !",o+=g?""+T:""+d):o+=" "+!k.valid+" ",o+=") { ",r=this.keyword,(B=B||[]).push(o),o="",(B=B||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(r||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),o+=" } "):o+=" {} ";var M=o;o=B.pop(),!e.compositeRule&&f?e.async?o+=" throw new ValidationError(["+M+"]); ":o+=" validate.errors = ["+M+"]; return false; ":o+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var L=o;o=B.pop(),v?k.errors?"full"!=k.errors&&(o+="  for (var "+S+"="+p+"; "+S+"<errors; "+S+"++) { var "+E+" = vErrors["+S+"]; if ("+E+".dataPath === undefined) "+E+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+E+".schemaPath === undefined) { "+E+'.schemaPath = "'+c+'"; } ',e.opts.verbose&&(o+=" "+E+".schema = "+i+"; "+E+".data = "+h+"; "),o+=" } "):!1===k.errors?o+=" "+L+" ":(o+=" if ("+p+" == errors) { "+L+" } else {  for (var "+S+"="+p+"; "+S+"<errors; "+S+"++) { var "+E+" = vErrors["+S+"]; if ("+E+".dataPath === undefined) "+E+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+E+".schemaPath === undefined) { "+E+'.schemaPath = "'+c+'"; } ',e.opts.verbose&&(o+=" "+E+".schema = "+i+"; "+E+".data = "+h+"; "),o+=" } } "):g?(o+="   var err =   ",!1!==e.createErrors?(o+=" { keyword: '"+(r||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):!1===k.errors?o+=" "+L+" ":(o+=" if (Array.isArray("+P+")) { if (vErrors === null) vErrors = "+P+"; else vErrors = vErrors.concat("+P+"); errors = vErrors.length;  for (var "+S+"="+p+"; "+S+"<errors; "+S+"++) { var "+E+" = vErrors["+S+"]; if ("+E+".dataPath === undefined) "+E+".dataPath = (dataPath || '') + "+e.errorPath+";  "+E+'.schemaPath = "'+c+'";  ',e.opts.verbose&&(o+=" "+E+".schema = "+i+"; "+E+".data = "+h+"; "),o+=" } } else { "+L+" } "),o+=" } ",f&&(o+=" else { ")}return o}},function(e,t,n){"use strict";var r=n(443);e.exports={$id:"https://github.com/epoberezkin/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:r.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:r.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},function(e){e.exports=JSON.parse('{"title":"definitions","definitions":{"contextualizedFieldName":{"type":"string","pattern":"^(this\\\\.)?.+$"},"dataTypeArgsCount":{"oneOf":[{"$ref":"#/definitions/contextualizedFieldName"},{"type":"number"}]},"fieldName":{"type":"string","pattern":"^[a-zA-Z0-9_]+$"}},"type":"object"}')},function(e){e.exports=JSON.parse('{"title":"protocol","type":"object","properties":{"types":{"type":"object","patternProperties":{"^[0-9a-zA-Z_]+$":{"oneOf":[{"type":"string"},{"type":"array","items":[{"type":"string"},{"oneOf":[{"type":"object"},{"type":"array"}]}]}]}},"additionalProperties":false}},"patternProperties":{"^(?!types)[a-zA-Z_]+$":{"$ref":"#"}},"additionalProperties":false}')},function(e){e.exports=JSON.parse('{"i8":{"enum":["i8"]},"u8":{"enum":["u8"]},"i16":{"enum":["i16"]},"u16":{"enum":["u16"]},"i32":{"enum":["i32"]},"u32":{"enum":["u32"]},"f32":{"enum":["f32"]},"f64":{"enum":["f64"]},"li8":{"enum":["li8"]},"lu8":{"enum":["lu8"]},"li16":{"enum":["li16"]},"lu16":{"enum":["lu16"]},"li32":{"enum":["li32"]},"lu32":{"enum":["lu32"]},"lf32":{"enum":["lf32"]},"lf64":{"enum":["lf64"]},"i64":{"enum":["i64"]},"li64":{"enum":["li64"]},"u64":{"enum":["u64"]},"lu64":{"enum":["lu64"]}}')},function(e){e.exports=JSON.parse('{"varint":{"enum":["varint"]},"bool":{"enum":["bool"]},"pstring":{"title":"pstring","type":"array","items":[{"enum":["pstring"]},{"oneOf":[{"type":"object","properties":{"countType":{"$ref":"dataType"}},"additionalProperties":false,"required":["countType"]},{"type":"object","properties":{"count":{"$ref":"definitions#/definitions/dataTypeArgsCount"}},"additionalProperties":false,"required":["count"]}]}],"additionalItems":false},"buffer":{"title":"buffer","type":"array","items":[{"enum":["buffer"]},{"oneOf":[{"type":"object","properties":{"countType":{"$ref":"dataType"}},"additionalProperties":false,"required":["countType"]},{"type":"object","properties":{"count":{"$ref":"definitions#/definitions/dataTypeArgsCount"}},"additionalProperties":false,"required":["count"]}]}]},"void":{"enum":["void"]},"bitfield":{"title":"bitfield","type":"array","items":[{"enum":["bitfield"]},{"type":"array","items":{"type":"object","properties":{"name":{"$ref":"definitions#/definitions/fieldName"},"size":{"type":"number"},"signed":{"type":"boolean"}},"required":["name","size","signed"],"additionalProperties":false},"additionalItems":false}],"additionalItems":false},"cstring":{"enum":["cstring"]},"mapper":{"title":"mapper","type":"array","items":[{"enum":["mapper"]},{"type":"object","properties":{"type":{"$ref":"dataType"},"mappings":{"type":"object","patternProperties":{"^[-a-zA-Z0-9 _]+$":{"type":"string"}},"additionalProperties":false}},"required":["type","mappings"],"additionalProperties":false}],"additionalItems":false}}')},function(e){e.exports=JSON.parse('{"array":{"title":"array","type":"array","items":[{"enum":["array"]},{"oneOf":[{"type":"object","properties":{"type":{"$ref":"dataType"},"countType":{"$ref":"dataType"}},"additionalProperties":false,"required":["type","countType"]},{"type":"object","properties":{"type":{"$ref":"dataType"},"count":{"$ref":"definitions#/definitions/dataTypeArgsCount"}},"additionalProperties":false,"required":["type","count"]}]}],"additionalItems":false},"count":{"title":"count","type":"array","items":[{"enum":["count"]},{"type":"object","properties":{"countFor":{"$ref":"definitions#/definitions/contextualizedFieldName"},"type":{"$ref":"dataType"}},"required":["countFor","type"],"additionalProperties":false}],"additionalItems":false},"container":{"title":"container","type":"array","items":[{"enum":["container"]},{"type":"array","items":{"type":"object","properties":{"anon":{"type":"boolean"},"name":{"$ref":"definitions#/definitions/fieldName"},"type":{"$ref":"dataType"}},"oneOf":[{"required":["anon"]},{"required":["name"]}],"required":["type"],"additionalProperties":false},"additionalItems":false}],"additionalItems":false}}')},function(e){e.exports=JSON.parse('{"switch":{"title":"switch","type":"array","items":[{"enum":["switch"]},{"type":"object","properties":{"compareTo":{"$ref":"definitions#/definitions/contextualizedFieldName"},"compareToValue":{"type":"string"},"fields":{"type":"object","patternProperties":{"^[-a-zA-Z0-9 _:]+$":{"$ref":"dataType"}},"additionalProperties":false},"default":{"$ref":"dataType"}},"oneOf":[{"required":["compareTo","fields"]},{"required":["compareToValue","fields"]}],"additionalProperties":false}],"additionalItems":false},"option":{"title":"option","type":"array","items":[{"enum":["option"]},{"$ref":"dataType"}],"additionalItems":false}}')},function(e,t,n){const{getField:r,getCount:i,sendCount:o,calcCount:a,tryDoc:s}=n(172);e.exports={array:[function(e,t,n,r){const o={value:[],size:0};let a,{count:u,size:l}=i.call(this,e,t,n,r);t+=l,o.size+=l;for(let i=0;i<u;i++)({size:l,value:a}=s(()=>this.read(e,t,n.type,r),i)),o.size+=l,t+=l,o.value.push(a);return o},function(e,t,n,r,i){return n=o.call(this,e.length,t,n,r,i),e.reduce((e,n,o)=>s(()=>this.write(n,t,e,r.type,i),o),n)},function(e,t,n){let r=a.call(this,e.length,t,n);return r=e.reduce((e,r,i)=>s(()=>e+this.sizeOf(r,t.type,n),i),r),r},n(403).array],count:[function(e,t,{type:n},r){return this.read(e,t,n,r)},function(e,t,n,{countFor:i,type:o},a){return this.write(r(i,a).length,t,n,o,a)},function(e,{countFor:t,type:n},i){return this.sizeOf(r(t,i).length,n,i)},n(403).count],container:[function(e,t,n,r){const i={value:{"..":r},size:0};return n.forEach(({type:n,name:r,anon:o})=>{s(()=>{const a=this.read(e,t,n,i.value);i.size+=a.size,t+=a.size,o?void 0!==a.value&&Object.keys(a.value).forEach(e=>{i.value[e]=a.value[e]}):i.value[r]=a.value},r||"unknown")}),delete i.value[".."],i},function(e,t,n,r,i){return e[".."]=i,n=r.reduce((n,{type:r,name:i,anon:o})=>s(()=>this.write(o?e:e[i],t,n,r,e),i||"unknown"),n),delete e[".."],n},function(e,t,n){e[".."]=n;const r=t.reduce((t,{type:n,name:r,anon:i})=>t+s(()=>this.sizeOf(i?e:e[r],n,e),r||"unknown"),0);return delete e[".."],r},n(403).container]}},function(e,t,n){const{getField:r,getFieldInfo:i,tryDoc:o,PartialReadError:a}=n(172);e.exports={switch:[function(e,t,{compareTo:n,fields:a,compareToValue:s,default:u},l){if(n=void 0!==s?s:r(n,l),void 0===a[n]&&void 0===u)throw new Error(n+" has no associated fieldInfo in switch");const c=void 0===a[n],f=c?u:a[n],h=i(f);return o(()=>this.read(e,t,h,l),c?"default":n)},function(e,t,n,{compareTo:a,fields:s,compareToValue:u,default:l},c){if(a=void 0!==u?u:r(a,c),void 0===s[a]&&void 0===l)throw new Error(a+" has no associated fieldInfo in switch");const f=void 0===s[a],h=i(f?l:s[a]);return o(()=>this.write(e,t,n,h,c),f?"default":a)},function(e,{compareTo:t,fields:n,compareToValue:a,default:s},u){if(t=void 0!==a?a:r(t,u),void 0===n[t]&&void 0===s)throw new Error(t+" has no associated fieldInfo in switch");const l=void 0===n[t],c=i(l?s:n[t]);return o(()=>this.sizeOf(e,c,u),l?"default":t)},n(446).switch],option:[function(e,t,n,r){if(e.length<t+1)throw new a;if(0!==e.readUInt8(t++)){const i=this.read(e,t,n,r);return i.size++,i}return{size:1}},function(e,t,n,r,i){null!=e?(t.writeUInt8(1,n++),n=this.write(e,t,n,r,i)):t.writeUInt8(0,n++);return n},function(e,t,n){return null==e?1:this.sizeOf(e,t,n)+1},n(446).option]}},function(e,t,n){(t=e.exports=n(447)).Stream=t,t.Readable=t,t.Writable=n(451),t.Duplex=n(212),t.Transform=n(452),t.PassThrough=n(559),t.finished=n(406),t.pipeline=n(560)},function(e,t){},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(85).Buffer,s=n(556).inspect,u=s&&s.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,l;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,n,r,i=a.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,n=i,r=s,a.prototype.copy.call(t,n,r),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&o(t.prototype,n),l&&o(t,l),e}()},function(e,t){},function(e,t,n){"use strict";(function(t){var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(406),a=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),f=Symbol("handlePromise"),h=Symbol("stream");function d(e,t){return{value:e,done:t}}function p(e){var t=e[a];if(null!==t){var n=e[h].read();null!==n&&(e[c]=null,e[a]=null,e[s]=null,t(d(n,!1)))}}function m(e){t.nextTick(p,e)}var y=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((i(r={get stream(){return this[h]},next:function(){var e=this,n=this[u];if(null!==n)return Promise.reject(n);if(this[l])return Promise.resolve(d(void 0,!0));if(this[h].destroyed)return new Promise((function(n,r){t.nextTick((function(){e[u]?r(e[u]):n(d(void 0,!0))}))}));var r,i=this[c];if(i)r=new Promise(function(e,t){return function(n,r){e.then((function(){t[l]?n(d(void 0,!0)):t[f](n,r)}),r)}}(i,this));else{var o=this[h].read();if(null!==o)return Promise.resolve(d(o,!1));r=new Promise(this[f])}return this[c]=r,r}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(d(void 0,!0))}))}))})),r),y);e.exports=function(e){var t,n=Object.create(v,(i(t={},h,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,l,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var r=n[h].read();r?(n[c]=null,n[a]=null,n[s]=null,e(d(r,!1))):(n[a]=e,n[s]=t)},writable:!0}),t));return n[c]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[s];return null!==t&&(n[c]=null,n[a]=null,n[s]=null,t(e)),void(n[u]=e)}var r=n[a];null!==r&&(n[c]=null,n[a]=null,n[s]=null,r(d(void 0,!0))),n[l]=!0})),e.on("readable",m.bind(null,n)),n}}).call(this,n(56))},function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(e,t,n){"use strict";e.exports=i;var r=n(452);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(124)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){"use strict";var r;var i=n(211).codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function u(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;e.on("close",(function(){s=!0})),void 0===r&&(r=n(406)),r(e,{readable:t,writable:i},(function(e){if(e)return o(e);s=!0,o()}));var u=!1;return function(t){if(!s&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new a("pipe"))}}function l(e){e()}function c(e,t){return e.pipe(t)}function f(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var a=t.map((function(e,n){var o=n<t.length-1;return u(e,o,n>0,(function(e){r||(r=e),e&&a.forEach(l),o||(a.forEach(l),i(r))}))}));return t.reduce(c)}},function(module,exports,__webpack_require__){(function(Buffer){const numeric=__webpack_require__(444),utils=__webpack_require__(445),conditionalDatatypes=__webpack_require__(562),structuresDatatypes=__webpack_require__(563),utilsDatatypes=__webpack_require__(564),{tryCatch:tryCatch}=__webpack_require__(172);class ProtoDefCompiler{constructor(){this.readCompiler=new ReadCompiler,this.writeCompiler=new WriteCompiler,this.sizeOfCompiler=new SizeOfCompiler}addTypes(e){this.readCompiler.addTypes(e.Read),this.writeCompiler.addTypes(e.Write),this.sizeOfCompiler.addTypes(e.SizeOf)}addTypesToCompile(e){this.readCompiler.addTypesToCompile(e),this.writeCompiler.addTypesToCompile(e),this.sizeOfCompiler.addTypesToCompile(e)}addProtocol(e,t){this.readCompiler.addProtocol(e,t),this.writeCompiler.addProtocol(e,t),this.sizeOfCompiler.addProtocol(e,t)}compileProtoDefSync(e={printCode:!1}){const t=this.sizeOfCompiler.generate(),n=this.writeCompiler.generate(),r=this.readCompiler.generate();e.printCode&&(console.log("// SizeOf:"),console.log(t),console.log("// Write:"),console.log(n),console.log("// Read:"),console.log(r));const i=this.sizeOfCompiler.compile(t),o=this.writeCompiler.compile(n),a=this.readCompiler.compile(r);return new CompiledProtodef(i,o,a)}}class CompiledProtodef{constructor(e,t,n){this.sizeOfCtx=e,this.writeCtx=t,this.readCtx=n}read(e,t,n){const r=this.readCtx[n];if(!r)throw new Error("missing data type: "+n);return r(e,t)}write(e,t,n,r){const i=this.writeCtx[r];if(!i)throw new Error("missing data type: "+r);return i(e,t,n)}sizeOf(e,t){const n=this.sizeOfCtx[t];if(!n)throw new Error("missing data type: "+t);return"function"==typeof n?n(e):n}createPacketBuffer(e,t){const n=tryCatch(()=>this.sizeOf(t,e),e=>{throw e.message=`SizeOf error for ${e.field} : ${e.message}`,e}),r=Buffer.allocUnsafe(n);return tryCatch(()=>this.write(t,r,0,e),e=>{throw e.message=`Write error for ${e.field} : ${e.message}`,e}),r}parsePacketBuffer(e,t,n=0){const{value:r,size:i}=tryCatch(()=>this.read(t,n,e),e=>{throw e.message=`Read error for ${e.field} : ${e.message}`,e});return{data:r,metadata:{size:i},buffer:t.slice(0,i)}}}class Compiler{constructor(){this.primitiveTypes={},this.native={},this.context={},this.types={},this.scopeStack=[],this.parameterizableTypes={}}addNativeType(e,t){this.primitiveTypes[e]="native."+e,this.native[e]=t,this.types[e]="native"}addContextType(e,t){this.primitiveTypes[e]="ctx."+e,this.context[e]=t.toString()}addParametrizableType(e,t){this.parameterizableTypes[e]=t}addTypes(e){for(const[t,[n,r]]of Object.entries(e))"native"===n?this.addNativeType(t,r):"context"===n?this.addContextType(t,r):"parametrizable"===n&&this.addParametrizableType(t,r)}addTypesToCompile(e){for(const[t,n]of Object.entries(e))this.types[t]&&"native"!==this.types[t]||(this.types[t]=n)}addProtocol(e,t){const n=this;!function e(t,r){void 0!==t&&(t.types&&n.addTypesToCompile(t.types),e(t[r.shift()],r))}(e,t.slice(0))}indent(e,t="  "){return e.split("\n").map(e=>t+e).join("\n")}getField(e){const t=e.split("/");let n=this.scopeStack.length-1;const r={value:!0,enum:!0};for(;t.length;){const e=this.scopeStack[n],i=t.shift();if(".."===i){n--;continue}if(e[i])return e[i]+(t.length?"."+t.join("."):"");if(0!==t.length)throw new Error("Cannot access properties of undefined field");let o=0;r[i]&&o++;for(let e=0;e<n;e++)this.scopeStack[e][i]&&o++;return e[i]=i+(o||""),e[i]}throw new Error("Unknown field "+t)}generate(){this.scopeStack=[{}];const e=[];for(const t in this.context)e[t]=this.context[t];for(const t in this.types)e[t]||("native"!==this.types[t]?(e[t]=this.compileType(this.types[t]),e[t].startsWith("ctx")&&(e[t]="function () { return "+e[t]+"(...arguments) }"),isNaN(e[t])||(e[t]=this.wrapCode("  return "+e[t]))):e[t]="native."+t);return"() => {\n"+this.indent("const ctx = {\n"+this.indent(Object.keys(e).map(t=>t+": "+e[t]).join(",\n"))+"\n}\nreturn ctx")+"\n}"}compile(code){const native=this.native,{PartialReadError:PartialReadError}=__webpack_require__(172);return eval(code)()}}class ReadCompiler extends Compiler{constructor(){super(),this.addTypes(conditionalDatatypes.Read),this.addTypes(structuresDatatypes.Read),this.addTypes(utilsDatatypes.Read);for(const e in numeric)this.addNativeType(e,numeric[e][0]);for(const e in utils)this.addNativeType(e,utils[e][0])}compileType(e){if(e instanceof Array){if(this.parameterizableTypes[e[0]])return this.parameterizableTypes[e[0]](this,e[1]);if(this.types[e[0]]&&"native"!==this.types[e[0]])return this.wrapCode("return "+this.callType(e[0],"offset",Object.values(e[1])));throw new Error("Unknown parametrizable type: "+e[0])}return"native"===e?"null":this.types[e]?"ctx."+e:this.primitiveTypes[e]}wrapCode(e,t=[]){return t.length>0?"(buffer, offset, "+t.join(", ")+") => {\n"+this.indent(e)+"\n}":"(buffer, offset) => {\n"+this.indent(e)+"\n}"}callType(e,t="offset",n=[]){if(e instanceof Array&&this.types[e[0]]&&"native"!==this.types[e[0]])return this.callType(e[0],t,Object.values(e[1]));e instanceof Array&&"container"===e[0]&&this.scopeStack.push({});const r=this.compileType(e);return e instanceof Array&&"container"===e[0]&&this.scopeStack.pop(),n.length>0?"("+r+`)(buffer, ${t}, `+n.map(e=>this.getField(e)).join(", ")+")":"("+r+`)(buffer, ${t})`}}class WriteCompiler extends Compiler{constructor(){super(),this.addTypes(conditionalDatatypes.Write),this.addTypes(structuresDatatypes.Write),this.addTypes(utilsDatatypes.Write);for(const e in numeric)this.addNativeType(e,numeric[e][1]);for(const e in utils)this.addNativeType(e,utils[e][1])}compileType(e){if(e instanceof Array){if(this.parameterizableTypes[e[0]])return this.parameterizableTypes[e[0]](this,e[1]);if(this.types[e[0]]&&"native"!==this.types[e[0]])return this.wrapCode("return "+this.callType("value",e[0],"offset",Object.values(e[1])));throw new Error("Unknown parametrizable type: "+e[0])}return"native"===e?"null":this.types[e]?"ctx."+e:this.primitiveTypes[e]}wrapCode(e,t=[]){return t.length>0?"(value, buffer, offset, "+t.join(", ")+") => {\n"+this.indent(e)+"\n}":"(value, buffer, offset) => {\n"+this.indent(e)+"\n}"}callType(e,t,n="offset",r=[]){if(t instanceof Array&&this.types[t[0]]&&"native"!==this.types[t[0]])return this.callType(e,t[0],n,Object.values(t[1]));t instanceof Array&&"container"===t[0]&&this.scopeStack.push({});const i=this.compileType(t);return t instanceof Array&&"container"===t[0]&&this.scopeStack.pop(),r.length>0?"("+i+`)(${e}, buffer, ${n}, `+r.map(e=>this.getField(e)).join(", ")+")":"("+i+`)(${e}, buffer, ${n})`}}class SizeOfCompiler extends Compiler{constructor(){super(),this.addTypes(conditionalDatatypes.SizeOf),this.addTypes(structuresDatatypes.SizeOf),this.addTypes(utilsDatatypes.SizeOf);for(const e in numeric)this.addNativeType(e,numeric[e][2]);for(const e in utils)this.addNativeType(e,utils[e][2])}addNativeType(e,t){this.primitiveTypes[e]="native."+e,isNaN(t)?this.native[e]=t:this.native[e]=e=>t,this.types[e]="native"}compileType(e){if(e instanceof Array){if(this.parameterizableTypes[e[0]])return this.parameterizableTypes[e[0]](this,e[1]);if(this.types[e[0]]&&"native"!==this.types[e[0]])return this.wrapCode("return "+this.callType("value",e[0],Object.values(e[1])));throw new Error("Unknown parametrizable type: "+e[0])}return"native"===e?"null":isNaN(this.primitiveTypes[e])&&this.types[e]?"ctx."+e:this.primitiveTypes[e]}wrapCode(e,t=[]){return t.length>0?"(value, "+t.join(", ")+") => {\n"+this.indent(e)+"\n}":"(value) => {\n"+this.indent(e)+"\n}"}callType(e,t,n=[]){if(t instanceof Array&&this.types[t[0]]&&"native"!==this.types[t[0]])return this.callType(e,t[0],Object.values(t[1]));t instanceof Array&&"container"===t[0]&&this.scopeStack.push({});const r=this.compileType(t);return t instanceof Array&&"container"===t[0]&&this.scopeStack.pop(),isNaN(r)?n.length>0?"("+r+`)(${e}, `+n.map(e=>this.getField(e)).join(", ")+")":"("+r+`)(${e})`:r}}module.exports={ReadCompiler:ReadCompiler,WriteCompiler:WriteCompiler,SizeOfCompiler:SizeOfCompiler,ProtoDefCompiler:ProtoDefCompiler,CompiledProtodef:CompiledProtodef}}).call(this,__webpack_require__(85).Buffer)},function(e,t){e.exports={Read:{switch:["parametrizable",(e,t)=>{let n=t.compareTo?t.compareTo:t.compareToValue;const r=[];n.startsWith("$")?r.push(n):t.compareTo&&(n=e.getField(n));let i=`switch (${n}) {\n`;for(const n in t.fields){let r=n;isNaN(r)&&"true"!==r&&"false"!==r&&(r=`"${r}"`),i+=e.indent(`case ${r}: return `+e.callType(t.fields[n]))+"\n"}return i+=e.indent("default: return "+e.callType(t.default?t.default:"void"))+"\n",i+="}",e.wrapCode(i,r)}],option:["parametrizable",(e,t)=>{let n="const {value} = ctx.bool(buffer, offset)\n";return n+="if (value) {\n",n+="  const { value, size } = "+e.callType(t,"offset + 1")+"\n",n+="  return { value, size: size + 1 }\n",n+="}\n",n+="return { value: undefined, size: 1}",e.wrapCode(n)}]},Write:{switch:["parametrizable",(e,t)=>{let n=t.compareTo?t.compareTo:t.compareToValue;const r=[];n.startsWith("$")?r.push(n):t.compareTo&&(n=e.getField(n));let i=`switch (${n}) {\n`;for(const n in t.fields){let r=n;isNaN(r)&&"true"!==r&&"false"!==r&&(r=`"${r}"`),i+=e.indent(`case ${r}: return `+e.callType("value",t.fields[n]))+"\n"}return i+=e.indent("default: return "+e.callType("value",t.default?t.default:"void"))+"\n",i+="}",e.wrapCode(i,r)}],option:["parametrizable",(e,t)=>{let n="if (value != null) {\n";return n+="  offset = ctx.bool(1, buffer, offset)\n",n+="  offset = "+e.callType("value",t)+"\n",n+="} else {\n",n+="  offset = ctx.bool(0, buffer, offset)\n",n+="}\n",n+="return offset",e.wrapCode(n)}]},SizeOf:{switch:["parametrizable",(e,t)=>{let n=t.compareTo?t.compareTo:t.compareToValue;const r=[];n.startsWith("$")?r.push(n):t.compareTo&&(n=e.getField(n));let i=`switch (${n}) {\n`;for(const n in t.fields){let r=n;isNaN(r)&&"true"!==r&&"false"!==r&&(r=`"${r}"`),i+=e.indent(`case ${r}: return `+e.callType("value",t.fields[n]))+"\n"}return i+=e.indent("default: return "+e.callType("value",t.default?t.default:"void"))+"\n",i+="}",e.wrapCode(i,r)}],option:["parametrizable",(e,t)=>{let n="if (value != null) {\n";return n+="  return 1 + "+e.callType("value",t)+"\n",n+="}\n",n+="return 1",e.wrapCode(n)}]}}},function(e,t){function n(e){const t=[];for(const n in e){const{type:r,anon:i}=e[n];if(!i||r instanceof Array&&"bitfield"===r[0])t.push(e[n]);else if(r instanceof Array&&"container"===r[0])for(const e in r[1])t.push(r[1][e]);else{if(!(r instanceof Array&&"switch"===r[0]))throw new Error("Cannot inline anonymous type: "+r);{const e=r[1],n=new Set;for(const t in e.fields)if(e.fields[t]instanceof Array&&"container"===e.fields[t][0])for(const r in e.fields[t][1]){const i=e.fields[t][1][r];n.add(i.name)}if(e.default instanceof Array&&"container"===e.default[0])for(const t in e.default[1]){const r=e.default[1][t];n.add(r.name)}for(const r of n.keys()){const n={};let i=e.default;if(i instanceof Array&&"container"===i[0])for(const e in i[1]){const t=i[1][e];if(t.name===r){i=t.type;break}}for(const t in e.fields)if(e.fields[t]instanceof Array&&"container"===e.fields[t][0])for(const i in e.fields[t][1]){if(e.fields[t][1][i].name===r){n[t]=e.fields[t][1][i].type;break}}else n[t]=e.fields[t];i||(i="void"),t.push({name:r,type:["switch",{compareTo:e.compareTo,compareToValue:e.compareToValue,default:i,fields:n}]})}}}}return t}e.exports={Read:{array:["parametrizable",(e,t)=>{let n="";if(t.countType)n+="const { value: count, size: countSize } = "+e.callType(t.countType)+"\n";else{if(!t.count)throw new Error("Array must contain either count or countType");n+="const count = "+t.count+"\n",n+="const countSize = 0\n"}return n+='if (count > 0xffffff) throw new Error("array size is abnormally large, not reading: " + count)\n',n+="const data = []\n",n+="let size = countSize\n",n+="for (let i = 0; i < count; i++) {\n",n+="  const elem = "+e.callType(t.type,"offset + size")+"\n",n+="  data.push(elem.value)\n",n+="  size += elem.size\n",n+="}\n",n+="return { value: data, size }",e.wrapCode(n)}],count:["parametrizable",(e,t)=>{const n="return "+e.callType(t.type);return e.wrapCode(n)}],container:["parametrizable",(e,t)=>{t=n(t);let r="",i="offset";const o=[];for(const n in t){const{type:a,name:s,anon:u}=t[n];let l,c;if(a instanceof Array&&"bitfield"===a[0]&&u){const t=[];for(const{name:n}of a[1]){const r=e.getField(n);t.push(r),n===r?o.push(n):o.push(`${n}: ${r}`)}l="{"+t.join(", ")+"}",c=`anon${n}Size`}else l=e.getField(s),c=l+"Size",s===l?o.push(s):o.push(`${s}: ${l}`);r+=`let { value: ${l}, size: ${c} } = `+e.callType(a,i)+"\n",i+=" + "+c}const a=i.split(" + ");return a.shift(),0===a.length&&a.push("0"),r+="return { value: { "+o.join(", ")+" }, size: "+a.join(" + ")+"}",e.wrapCode(r)}]},Write:{array:["parametrizable",(e,t)=>{let n="";if(t.countType)n+="offset = "+e.callType("value.length",t.countType)+"\n";else if(null===t.count)throw new Error("Array must contain either count or countType");return n+="for (let i = 0; i < value.length; i++) {\n",n+="  offset = "+e.callType("value[i]",t.type)+"\n",n+="}\n",n+="return offset",e.wrapCode(n)}],count:["parametrizable",(e,t)=>{const n="return "+e.callType("value",t.type);return e.wrapCode(n)}],container:["parametrizable",(e,t)=>{t=n(t);let r="";for(const n in t){const{type:i,name:o,anon:a}=t[n];let s;if(i instanceof Array&&"bitfield"===i[0]&&a){const t=[];for(const{name:n}of i[1]){const i=e.getField(n);r+=`const ${i} = value.${n}\n`,n===i?t.push(n):t.push(`${n}: ${i}`)}s="{"+t.join(", ")+"}"}else s=e.getField(o),r+=`let ${s} = value.${o}\n`;r+="offset = "+e.callType(s,i)+"\n"}return r+="return offset",e.wrapCode(r)}]},SizeOf:{array:["parametrizable",(e,t)=>{let n="";if(t.countType)n+="let size = "+e.callType("value.length",t.countType)+"\n";else{if(!t.count)throw new Error("Array must contain either count or countType");n+="let size = 0\n"}return isNaN(e.callType("value[i]",t.type))?(n+="for (let i = 0; i < value.length; i++) {\n",n+="  size += "+e.callType("value[i]",t.type)+"\n",n+="}\n"):n+="size += value.length * "+e.callType("value[i]",t.type)+"\n",n+="return size",e.wrapCode(n)}],count:["parametrizable",(e,t)=>{const n="return "+e.callType("value",t.type);return e.wrapCode(n)}],container:["parametrizable",(e,t)=>{t=n(t);let r="let size = 0\n";for(const n in t){const{type:i,name:o,anon:a}=t[n];let s;if(i instanceof Array&&"bitfield"===i[0]&&a){const t=[];for(const{name:n}of i[1]){const i=e.getField(n);r+=`const ${i} = value.${n}\n`,n===i?t.push(n):t.push(`${n}: ${i}`)}s="{"+t.join(", ")+"}"}else s=e.getField(o),r+=`let ${s} = value.${o}\n`;r+="size += "+e.callType(s,i)+"\n"}return r+="return size",e.wrapCode(r)}]}}},function(e,t){function n(e){const t={};for(let n in e){const i=e[n];n=r(n),t[i]=isNaN(n)?n:parseInt(n,10)}return t}function r(e){return e.match(/^0x[0-9a-f]+$/i)?parseInt(e.substring(2),16):e}e.exports={Read:{pstring:["parametrizable",(e,t)=>{let n="";if(t.countType)n+="const { value: count, size: countSize } = "+e.callType(t.countType)+"\n";else{if(!t.count)throw new Error("pstring must contain either count or countType");n+="const count = "+t.count+"\n",n+="const countSize = 0\n"}return n+="offset += countSize\n",n+="if (offset + count > buffer.length) {\n",n+='  throw new PartialReadError("Missing characters in string, found size is " + buffer.length + " expected size was " + (offset + count))\n',n+="}\n",n+="return { value: buffer.toString('utf8', offset, offset + count), size: count + countSize }",e.wrapCode(n)}],buffer:["parametrizable",(e,t)=>{let n="";if(t.countType)n+="const { value: count, size: countSize } = "+e.callType(t.countType)+"\n";else{if(!t.count)throw new Error("buffer must contain either count or countType");n+="const count = "+t.count+"\n",n+="const countSize = 0\n"}return n+="offset += countSize\n",n+="if (offset + count > buffer.length) {\n",n+="  throw new PartialReadError()\n",n+="}\n",n+="return { value: buffer.slice(offset, offset + count), size: count + countSize }",e.wrapCode(n)}],bitfield:["parametrizable",(e,t)=>{let n="";const r=Math.ceil(t.reduce((e,{size:t})=>e+t,0)/8);n+=`if ( offset + ${r} > buffer.length) { throw new PartialReadError() }\n`;const i=[];let o=8;n+="let bits = buffer[offset++]\n";for(const r in t){const{name:a,size:s,signed:u}=t[r],l=e.getField(a);for(;o<s;)o+=8,n+="bits = (bits << 8) | buffer[offset++]\n";n+=`let ${l} = (bits >> `+(o-s)+") & 0x"+((1<<s)-1).toString(16)+"\n",u&&(n+=`${l} -= (${l} & 0x`+(1<<s-1).toString(16)+") << 1\n"),o-=s,a===l?i.push(a):i.push(`${a}: ${l}`)}return n+="return { value: { "+i.join(", ")+` }, size: ${r} }`,e.wrapCode(n)}],mapper:["parametrizable",(e,t)=>{let n="const { value, size } = "+e.callType(t.type)+"\n";return n+="return { value: "+JSON.stringify(function(e){const t={};for(let n in e){let i=e[n];n=r(n),isNaN(i)||(i=Number(i)),"true"===i&&(i=!0),"false"===i&&(i=!1),t[n]=i}return t}(t.mappings))+"[value] || value, size }",e.wrapCode(n)}]},Write:{pstring:["parametrizable",(e,t)=>{let n="const length = Buffer.byteLength(value, 'utf8')\n";if(t.countType)n+="offset = "+e.callType("length",t.countType)+"\n";else if(null===t.count)throw new Error("pstring must contain either count or countType");return n+="buffer.write(value, offset, length, 'utf8')\n",n+="return offset + length",e.wrapCode(n)}],buffer:["parametrizable",(e,t)=>{let n="";if(t.countType)n+="offset = "+e.callType("value.length",t.countType)+"\n";else if(null===t.count)throw new Error("buffer must contain either count or countType");return n+="value.copy(buffer, offset)\n",n+="return offset + value.length",e.wrapCode(n)}],bitfield:["parametrizable",(e,t)=>{let n="",r=0,i="";for(const o in t){let{name:a,size:s}=t[o];const u=e.getField(a);for(i+=`let ${u} = value.${a}\n`;s>0;){const e=Math.min(8-r,s);""!==n&&(n=`((${n}) << ${e}) | `),n+=`((${u} >> `+(s-e)+") & 0x"+((1<<e)-1).toString(16)+")",s-=e,r+=e,8===r&&(i+="buffer[offset++] = "+n+"\n",r=0,n="")}}return 0!==r&&(i+="buffer[offset++] = ("+n+") << "+(8-r)+"\n"),i+="return offset",e.wrapCode(i)}],mapper:["parametrizable",(e,t)=>{const r=JSON.stringify(n(t.mappings)),i="return "+e.callType(r+"[value] || value",t.type);return e.wrapCode(i)}]},SizeOf:{pstring:["parametrizable",(e,t)=>{let n="let size = Buffer.byteLength(value, 'utf8')\n";if(t.countType)n+="size += "+e.callType("size",t.countType)+"\n";else if(null===t.count)throw new Error("pstring must contain either count or countType");return n+="return size",e.wrapCode(n)}],buffer:["parametrizable",(e,t)=>{let n="let size = value.length\n";if(t.countType)n+="size += "+e.callType("size",t.countType)+"\n";else if(null===t.count)throw new Error("buffer must contain either count or countType");return n+="return size",e.wrapCode(n)}],bitfield:["parametrizable",(e,t)=>""+Math.ceil(t.reduce((e,{size:t})=>e+t,0)/8)],mapper:["parametrizable",(e,t)=>{const r=JSON.stringify(n(t.mappings)),i="return "+e.callType(r+"[value] || value",t.type);return e.wrapCode(i)}]}}},function(e,t,n){const r=n(566);let i=null;function o(e){const t=r(e);return["jpg","jpeg"].includes(t)?"image/jpeg":"image/png"}e.exports=function(e,t={}){const n=new Date,{filename:r=`Screen Shot ${n.toISOString().slice(0,10)} at ${n.toTimeString().slice(0,8).replace(/:/g,".")}.png`,quality:a=1,useBlob:s,download:u=!0}={...t};if(u&&(i=i||document.createElement("a"),i.download=r),s)return new Promise(t=>{e.toBlob(e=>{if(u){const t=URL.createObjectURL(e);i.href=t;const n=new MouseEvent("click");i.dispatchEvent(n),setTimeout(()=>{URL.revokeObjectURL(t)},1)}t(e)},o(r),a)});const l=e.toDataURL(o(r)+";base64",a);if(u){i.href=l;const e=new MouseEvent("click");i.dispatchEvent(e)}return l}},function(e,t,n){"use strict";
/*! file-extension v4.0.5 | (c) silverwind | BSD license */e.exports=function(e,t){if(t||(t={}),!e)return"";var n=(/[^./\\]*$/.exec(e)||[""])[0];return t.preserveCase?n:n.toLowerCase()}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(67),i=n(65),o=n.n(i),a=n(480).MicroGameShell;function s(e,t){t=t||{},this._noa=e,this.element=t.domElement||function(){var e=document.createElement("div");return e.tabindex=1,e.style.position="fixed",e.style.left="0px",e.style.right="0px",e.style.top="0px",e.style.bottom="0px",e.style.height="100%",e.style.overflow="hidden",document.body.appendChild(e),document.body.style.overflow="hidden",document.body.style.height="100%",e.id="noa-container",e}(),this.canvas=function(e){var t=e.querySelector("canvas");t||((t=document.createElement("canvas")).style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.height="100%",t.style.width="100%",t.id="noa-canvas",e.insertBefore(t,e.firstChild));return t}(this.element);this._shell=new a(this.element,10),this._shell.tickRate=t.tickRate,this._shell.maxRenderRate=t.maxRenderRate,this._shell.stickyPointerLock=t.stickyPointerLock,this._shell.stickyFullscreen=t.stickyFullscreen,this.supportsPointerLock=!1,this.pointerInGame=!1,this.isFocused=document.hasFocus(),this.hasPointerLock=!1,this._shell.onTick=e.tick.bind(e),this._shell.onRender=e.render.bind(e),this._shell.onPointerLockChanged=e=>{this.hasPointerLock=e,this.emit(e?"gainedPointerLock":"lostPointerLock"),e&&(this.pointerInGame=!0)},this._shell.onInit=()=>{this._shell.onResize=e.rendering.resize.bind(e.rendering),function(e){if("pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document){e.supportsPointerLock=!0;var t=function(n){e.supportsPointerLock=!1,document.removeEventListener(n.type,t)};document.addEventListener("touchmove",t)}}(this),this.element.addEventListener("mouseenter",()=>{this.pointerInGame=!0}),this.element.addEventListener("mouseleave",()=>{this.pointerInGame=!1}),window.addEventListener("focus",()=>{this.isFocused=!0}),window.addEventListener("blur",()=>{this.isFocused=!1});var t=()=>{this.pointerInGame=!0,this.isFocused=!0,this.element.removeEventListener("mousedown",t)};this.element.addEventListener("mousedown",t),this.emit("DOMready")}}s.prototype=Object.create(o.a.prototype),s.prototype.appendTo=function(e){this.element.appendChild(e)},s.prototype.setPointerLock=function(e){this._shell.pointerLock=!!e};var u=n(0),l=n(161),c=n(218),f=n(343);function h(e,t){var n=e.indexOf(t);n<0||(n===e.length-1?e.pop():e[n]=e.pop())}function d(e,t,n){var r=n||performance.now();if(!t()){var i=performance.now(),o=r+e-(i-n)/2;if(!(i>o))for(var a=0;a<1e3;a++)if(t()||performance.now()>o)return}}function p(e,t,n,r,i){e?function(e,t,n,r,i,o,a,s,u,l,c){for(var f=e.stride[2],h=t.stride[2],d=0;d<o;d++)for(var p=0;p<a;p++)for(var m=e.index(n+d,r+p,i),y=t.index(u+d,l+p,c),v=0;v<s;v++)t.data[y]=e.data[m],m+=f,y+=h}(e,t,n[0],n[1],n[2],r[0],r[1],r[2],i[0],i[1],i[2]):function(e,t,n,r,i,o,a){for(var s=e.stride[2],u=0;u<i;u++)for(var l=0;l<o;l++)for(var c=e.index(t+u,n+l,r),f=0;f<a;f++)e.data[c]=0,c+=s}(t,i[0],i[1],i[2],r[0],r[1],r[2])}function m(e,t,n,r){if(0===e)return r(0,0,0);var i=Math.min(e,t),o=Math.min(e,n);if(e<=n)for(var a=-i;a<=i;a++)for(var s=-i;s<=i;s++){if(r(a,e,s))return!0;if(r(a,-e,s))return!0}if(e<=t)for(var u=-e;u<e;u++)for(var l=1-o;l<o;l++){if(r(u,l,e))return!0;if(r(-u,l,-e))return!0;if(r(e,l,-u))return!0;if(r(-e,l,u))return!0}return!1}function y(e,t,n){return 1023&e|(1023&t)<<10|(1023&n)<<20}function v(){var e={};this.getChunkByIndexes=(t,n,r)=>e[y(t,n,r)]||null,this.storeChunkByIndexes=(t,n,r,i)=>{e[y(t,n,r)]=i},this.removeChunkByIndexes=(t,n,r)=>{delete e[y(t,n,r)]}}function g(){this.arr=[],this.hash={}}function b(e,t,n){if(!(e>0))return()=>{};t=t||"";var r=[],i=[],o=0,a=0,s=0,u=0,l=!0;return function(c){"start"===c?(l&&(r.length=i.length=0,l=!1),o=a=performance.now(),s++):"end"===c?function(){if(u+=performance.now()-o,s===e){var a=t+" total "+(u/e).toFixed(2)+"ms (avg, "+e+" runs)    ";console.log(a,i.map((function(t,i){return n&&r[i]/u<.05?"":t+": "+(r[i]/e).toFixed(2)+"ms    "})).join("")),l=!0,s=0,u=0}}():function(e){var t=performance.now();i.indexOf(e)<0&&i.push(e);var n=i.indexOf(e);r[n]||(r[n]=0),r[n]+=t-a,a=t}(c)}}function w(e,t){var n=e._scene;n._addComponent(new f.c(n));var r=new l.a(o);n._selectionOctree=r,r.blocks=[];var i={};this.rebase=e=>{s(r,e)},this.includesMesh=e=>e._noaContainingBlock||e._noaIsDynamicContent,this.addMesh=(t,n,o,s)=>{if(!n)return t._noaIsDynamicContent=!0,void r.dynamicContent.push(t);var u=Math.floor(o[0]/a),l=Math.floor(o[1]/a),c=Math.floor(o[2]/a),f=y(u,l,c),h=i[f];if(!h){var p=[u*a,l*a,c*a],m=[0,0,0];e.noa.globalToLocal(p,null,m),h=d(m,a),r.blocks.push(h),i[f]=h,h._noaMapKey=f}h.entries.push(t),t._noaContainingBlock=h},this.removeMesh=e=>{if(e._noaIsDynamicContent&&(e._noaIsDynamicContent=null,h(r.dynamicContent,e)),e._noaContainingBlock){e._noaContainingChunk=null;var t=e._noaContainingBlock;h(t.entries,e),0===t.entries.length&&(delete i[t._noaMapKey],h(r.blocks,t))}};var o=()=>{},a=t*e.noa.world.chunkSize,s=(e,t)=>{e.blocks.forEach(e=>{e.minPoint.subtractInPlace(t),e.maxPoint.subtractInPlace(t),e._boundingVectors.forEach(e=>e.subtractInPlace(t)),e.blocks&&s(e,t)})},d=(e,t)=>{var n=new u.e(e[0],e[1],e[2]),r=new u.e(e[0]+t,e[1]+t,e[2]+t);return new c.a(n,r,void 0,void 0,void 0,o)}}g.prototype.forEach=function(e,t){this.arr.forEach(e,t)},g.prototype.includes=function(e,t,n){var r=y(e,t,n);return!!this.hash[r]},g.prototype.add=function(e,t,n){var r=y(e,t,n);this.hash[r]||(this.arr.push([e,t,n,r]),this.hash[r]=!0)},g.prototype.removeByIndex=function(e){var t=this.arr[e];delete this.hash[t[3]],this.arr.splice(e,1)},g.prototype.remove=function(e,t,n){var r=y(e,t,n);if(this.hash[r]){delete this.hash[r];for(var i=0;i<this.arr.length;i++)if(r===this.arr[i][3])return void this.arr.splice(i,1);throw"internal bug with location queue - hash value overlapped"}},g.prototype.count=function(){return this.arr.length},g.prototype.isEmpty=function(){return 0===this.arr.length},g.prototype.empty=function(){this.arr.length=0,this.hash={}},g.prototype.pop=function(){var e=this.arr.pop();return delete this.hash[e[3]],e},g.prototype.copyFrom=function(e){for(var t in this.arr=e.arr.slice(),this.hash={},e.hash)this.hash[t]=!0},g.prototype.sortByDistance=function(e){var t={};for(var n of this.arr)t[n]=e(n);this.arr.sort((e,n)=>t[n]-t[e]),t=null};var _=n(22),k=n(79),x=n(13),O=n(113),P=n(33),S=n(7),E=n(8),j=n(160),C=(n(97),n(42),n(77)),T={showFPS:!1,antiAlias:!0,clearColor:[.8,.9,1],ambientColor:[1,1,1],lightDiffuse:[1,1,1],lightSpecular:[1,1,1],groundLightColor:[.5,.5,.5],useAO:!0,AOmultipliers:[.93,.8,.5],reverseAOmultiplier:1,preserveDrawingBuffer:!0,octreeBlockSize:2};function A(e,t,n){this.noa=e,t=Object.assign({},T,t),this.useAO=!!t.useAO,this.aoVals=t.AOmultipliers,this.revAoVal=t.reverseAOmultiplier,this.meshingCutoffTime=6,this._meshesToFreeze=[],function(e,t,n){e._engine=new x.a(t,n.antiAlias,{preserveDrawingBuffer:n.preserveDrawingBuffer}),e._scene=new _.a(e._engine);var r=e._scene;r.detachControl();var i=Math.round(n.octreeBlockSize);e._octreeManager=new w(e,i),e._cameraHolder=new j.TransformNode("camHolder",r),e._camera=new k.a("camera",new u.e(0,0,0),r),e._camera.parent=e._cameraHolder,e._camera.minZ=.01,e._cameraHolder.visibility=!1,e._camScreen=E.a.CreatePlane("camScreen",10,r),e.addMeshToScene(e._camScreen),e._camScreen.position.z=.1,e._camScreen.parent=e._camera,e._camScreenMat=e.makeStandardMaterial("camscreenmat"),e._camScreen.material=e._camScreenMat,e._camScreen.setEnabled(!1),e._camLocBlock=0;var o=new u.e(.1,1,.3);function a(e){return new S.a(e[0],e[1],e[2])}e._light=new O.a("light",o,r),r.clearColor=a(n.clearColor),r.ambientColor=a(n.ambientColor),e._light.diffuse=a(n.lightDiffuse),e._light.specular=a(n.lightSpecular),e._light.groundColor=a(n.groundLightColor),e.flatMaterial=e.makeStandardMaterial("flatmat")}(this,n,t),t.showFPS&&function(){var e=document.createElement("div");e.id="noa_fps";"color:white; background-color:rgba(0,0,0,0.5);","font:14px monospace; text-align:center;","min-width:2em; margin:4px;",e.style="position:absolute; top:0; right:0; z-index:0;color:white; background-color:rgba(0,0,0,0.5);font:14px monospace; text-align:center;min-width:2em; margin:4px;",document.body.appendChild(e);var t=0,n=0,r=performance.now(),i=r;D=function(){t++;var o=performance.now();if(o-i>n&&(n=o-i),i=o,!(o-r<1e3)){var a=Math.round(t/(o-r)*1e3),s=Math.round(1/n*1e3);e.innerHTML=a+"<br>"+s,t=0,n=0,r=o}}}()}A.prototype.getScene=function(){return this._scene},A.prototype.tick=function(e){},A.prototype.render=function(){I("start"),function(e){var t=e.noa.camera,n=t._localGetTargetPosition();e._cameraHolder.position.copyFromFloats(n[0],n[1],n[2]),e._cameraHolder.rotation.x=t.pitch,e._cameraHolder.rotation.y=t.heading,e._camera.position.z=-t.currentZoom;var r=t._localGetPosition(),i=e.noa.worldOriginOffset,o=Math.floor(r[0]+i[0]),a=Math.floor(r[1]+i[1]),s=Math.floor(r[2]+i[2]),u=e.noa.getBlock(o,a,s);!function(e,t){if(t===e._camLocBlock)return;if(0===t)e._camScreen.setEnabled(!1);else{var n=e.noa.registry.getBlockFaceMaterial(t,0);if(n){var r=e.noa.registry.getMaterialData(n),i=r.color,o=r.alpha;i&&o&&o<1&&(e._camScreenMat.diffuseColor.set(0,0,0),e._camScreenMat.ambientColor.set(i[0],i[1],i[2]),e._camScreenMat.alpha=o,e._camScreen.setEnabled(!0))}}e._camLocBlock=t}(e,u)}(this),I("updateCamera"),this._engine.beginFrame(),I("beginFrame"),this._scene.render(),I("render"),D(),this._engine.endFrame(),I("endFrame"),I("end")},A.prototype.postRender=function(){for(;this._meshesToFreeze.length>0;)this._meshesToFreeze.pop().freezeWorldMatrix()},A.prototype.resize=function(e){this._engine.resize(),this.noa._paused&&this._scene.render()},A.prototype.highlightBlockFace=function(e,t,n){var r=function(e){var t=e._highlightMesh;if(!t){t=E.a.CreatePlane("highlight",1,e._scene);var n=e.makeStandardMaterial("highlightMat");n.backFaceCulling=!1,n.emissiveColor=new S.a(1,1,1),n.alpha=.2,t.material=n;var r=.5,i=E.a.CreateLines("hightlightLines",[new u.e(r,r,0),new u.e(r,-r,0),new u.e(-r,-r,0),new u.e(-r,r,0),new u.e(r,r,0)],e._scene);i.color=new S.a(1,1,1),i.parent=t,e.addMeshToScene(t),e.addMeshToScene(i),e._highlightMesh=t}return t}(this);if(e){this.noa.globalToLocal(t,null,z);for(var i=.001+.001*C.dist(this.noa.camera._localGetPosition(),z),o=0;o<3;o++)0===n[o]?z[o]+=.5:z[o]+=n[o]>0?1+i:-i;r.position.copyFromFloats(z[0],z[1],z[2]),r.rotation.x=n[1]?Math.PI/2:0,r.rotation.y=n[0]?Math.PI/2:0}r.setEnabled(e)};var z=[];A.prototype.addMeshToScene=function(e,t,n,r){if(!this._octreeManager.includesMesh(e)){if(!e.parent){n||(n=[e.position.x,e.position.y,e.position.z]);var i=[];this.noa.globalToLocal(n,null,i),e.position.copyFromFloats(i[0],i[1],i[2])}t&&(e.freezeWorldMatrix(),e.freezeNormals&&e.freezeNormals()),this._octreeManager.addMesh(e,t,n,r),e.onDisposeObservable.add(()=>{this._octreeManager.removeMesh(e)})}},A.prototype.makeStandardMaterial=function(e){var t=new P.a(e,this._scene);return t.specularColor.copyFromFloats(0,0,0),t.ambientColor.copyFromFloats(1,1,1),t.diffuseColor.copyFromFloats(1,1,1),t},A.prototype.prepareChunkForRendering=function(e){},A.prototype.disposeChunkForRendering=function(e){},A.prototype._rebaseOrigin=function(e){var t=new u.e(e[0],e[1],e[2]);this._scene.meshes.forEach(e=>{e.parent||(e.position.subtractInPlace(t),e._isWorldMatrixFrozen&&(e.unfreezeWorldMatrix(),this._meshesToFreeze.push(e)))}),this._octreeManager.rebase(t)},A.prototype.debug_SceneCheck=function(){var e=this._scene.meshes,t=this._octree.dynamicContent,n=[],r=0,i=0,o=this._scene.materials,a=[];o.forEach(e=>{e.subMaterials?e.subMaterials.forEach(e=>a.push(e)):a.push(e)}),this._octree.blocks.forEach((function(e){r++,e.entries.forEach(e=>n.push(e))})),e.forEach((function(e){if(e._isDisposed&&l(e,"disposed mesh in scene"),0!==e.getIndices().length)if(c(e,t,n)&&l(e,"non-empty mesh missing from octree"),e.material){i+=e.subMeshes?e.subMeshes.length:1;var r=e.material.subMaterials||[e.material];r.forEach((function(e){c(e,r)&&l(e,"mesh material not in scene")}))}else l(e,"non-empty scene mesh with no material")}));var s=[];a.forEach(t=>{var n=!1;e.forEach(e=>{e.material===t&&(n=!0),e.material&&e.material.subMaterials&&e.material.subMaterials.includes(t)&&(n=!0)}),n||s.push(t.name)}),s.length&&console.warn("Materials unused by any mesh: ",s.join(", ")),t.forEach((function(t){c(t,e)&&l(t,"octree/dynamic mesh not in scene")})),n.forEach((function(t){c(t,e)&&l(t,"octree block mesh not in scene")}));var u=Math.round(10*n.length/r)/10;function l(e,t){console.warn(e.name+" --- "+t)}function c(e,t,n){return!!e&&(!t.includes(e)&&(!n||!n.includes(e)))}return console.log("meshes - octree:",n.length,"  dynamic:",t.length,"   subMeshes:",i,"   avg meshes/octreeBlock:",u),"done."},A.prototype.debug_MeshCount=function(){var e={};for(var t in this._scene.meshes.forEach(t=>{var n=t.name||"";n=(n=(n=(n=n.replace(/-\d+.*/,"#")).replace(/\d+.*/,"#")).replace(/(rotHolder|camHolder|camScreen)/,"rendering use")).replace(/atlas sprite .*/,"atlas sprites"),e[n]=e[n]||0,e[n]++}),e)console.log("   "+(e[t]+"       ").substr(0,7)+t)};var I=()=>{},D=function(){};var R=n(78),B=M;function M(e,t,n,r,i,o,a){this.noa=e,this.isDisposed=!1,this.requestID=t,this.voxels=a,this.i=n,this.j=r,this.k=i,this.size=o,this.x=n*o,this.y=r*o,this.z=i*o,this.pos=[this.x,this.y,this.z],this._terrainDirty=!1,this._objectsDirty=!1,e._terrainMesher.initChunk(this),e._objectMesher.initChunk(this),this.isFull=!1,this.isEmpty=!1;var s=Array.from(Array(27),()=>null);this._neighbors=new R(s,[3,3,3]).lo(1,1,1),this._neighbors.set(0,0,0,this),this._neighborCount=0,this._timesMeshed=0,F(this)}function L(e,t,n,r,i,o){var a=t[n];a&&a(e.x+r,e.y+i,e.z+o)}function F(e){for(var t=!0,n=!0,r=e.voxels,i=r.data,o=r.shape[0],a=e.noa.registry._opacityLookup,s=e.noa.registry._blockHandlerLookup,u=e.noa.registry._objectLookup,l=e.noa._objectMesher,c=0;c<o;++c)for(var f=0;f<o;++f)for(var h=r.index(c,f,0),d=0;d<o;++d,++h){var p=i[h];if(0!==p){t=t&&a[p],n=!1,u[p]&&(l.setObjectBlock(e,p,c,f,d),e._objectsDirty=!0);var m=s[p];m&&L(e,m,"onLoad",c,f,d)}else t=!1}e.isFull=t,e.isEmpty=n,e._terrainDirty=!e.isEmpty}function N(e,t){for(var n=e.voxels,r=n.data,i=e.noa.registry._blockHandlerLookup,o=n.shape[0],a=0;a<o;++a)for(var s=0;s<o;++s)for(var u=n.index(a,s,0),l=0;l<o;++l,++u){var c=r[u];c>0&&i[c]&&L(e,i[c],t,a,s,l)}}M._createVoxelArray=function(e){var t=new Uint16Array(e*e*e);return new R(t,[e,e,e])},M.prototype._updateVoxelArray=function(e){N(this,"onUnload"),this.noa._objectMesher.disposeChunk(this),this.noa._terrainMesher.disposeChunk(this),this.voxels=e,this._terrainDirty=!1,this._objectsDirty=!1,this.noa._objectMesher.initChunk(this),this.noa._terrainMesher.initChunk(this),F(this)},M.prototype.get=function(e,t,n){return this.voxels.get(e,t,n)},M.prototype.getSolidityAt=function(e,t,n){return this.noa.registry._solidityLookup[this.voxels.get(e,t,n)]},M.prototype.set=function(e,t,n,r,i,o,a){var s=this.voxels.get(e,t,n);if(r!==s){this.voxels.set(e,t,n,r);var u=this.noa.registry._solidityLookup,l=this.noa.registry._objectLookup,c=this.noa.registry._opacityLookup,f=this.noa.registry._blockHandlerLookup,h=f[s],d=f[r];h&&L(this,h,"onUnset",e,t,n),d&&L(this,d,"onSet",e,t,n);var p=this.noa._objectMesher,m=l[s],y=l[r];m&&p.setObjectBlock(this,0,e,t,n),y&&p.setObjectBlock(this,r,e,t,n),c[r]||(this.isFull=!1),0!==r&&(this.isEmpty=!1);var v=u[s]!==u[r],g=c[s]!==c[r];if((m||y)&&(this._objectsDirty=!0),(v||g||!y&&0!==r)&&(this._terrainDirty=!0),(this._terrainDirty||this._objectsDirty)&&this.noa.world._queueChunkForRemesh(this),v||g)for(var b=this.size-1,w=0===t?-1:0,_=0===n?-1:0,k=e===b?1:0,x=t===b?1:0,O=n===b?1:0,P=0===e?-1:0;P<=k;P++)for(var S=w;S<=x;S++)for(var E=_;E<=O;E++)if(0!=(P|S|E)){var j=this._neighbors.get(P,S,E);if(!j)return;j._terrainDirty=!0,this.noa.world._queueChunkForRemesh(j)}}},M.prototype.updateMeshes=function(){this._terrainDirty&&(this.noa._terrainMesher.meshChunk(this),this._timesMeshed++,this._terrainDirty=!1),this._objectsDirty&&(this.noa._objectMesher.buildObjectMeshes(this),this._objectsDirty=!1)},M.prototype.dispose=function(){N(this,"onUnload"),this.noa._objectMesher.disposeChunk(this),this.noa._terrainMesher.disposeChunk(this),this.voxels.data=null,this.voxels=null,this._neighbors.data=null,this._neighbors=null,this.isDisposed=!0};var U={chunkSize:24,chunkAddDistance:[2,2],chunkRemoveDistance:[3,3],worldGenWhilePaused:!1,manuallyControlChunkLoading:!1};function $(e,t){var n;this.noa=e,t=Object.assign({},U,t),this.playerChunkLoaded=!1,this.Chunk=B,this.chunkSize=t.chunkSize,this.chunkAddDistance=[1,1],this.chunkRemoveDistance=[1,1],this.setAddRemoveDistance(t.chunkAddDistance,t.chunkRemoveDistance),this.manuallyControlChunkLoading=!!t.manuallyControlChunkLoading,this.minNeighborsToMesh=6,this.tickInUnloadedChunks=t.tickInUnloadedChunks,this.maxChunksPendingCreation=10,this.maxChunksPendingMeshing=10,this.maxProcessingPerTick=9,this.maxProcessingPerRender=5,this.worldGenWhilePaused=t.worldGenWhilePaused,this._cachedWorldName="",this._lastPlayerChunkHash=0,this._chunkAddSearchDistance=0,(n=this)._chunksKnown=new g,n._chunksToMesh=new g,n._chunksPending=new g,n._chunksToRemove=new g,n._chunksToRequest=new g,n._chunksToMeshFirst=new g,this._storage=new v;var r=this.chunkSize;this._coordsToChunkIndexes=G,this._coordsToChunkLocals=J,0==(r&r-1)&&(this._coordShiftBits=0|Math.log2(r),this._coordMask=r-1|0,this._coordsToChunkIndexes=Z,this._coordsToChunkLocals=Y)}$.prototype=Object.create(o.a.prototype),$.prototype.getBlockID=function(e,t,n){var[r,i,o]=this._coordsToChunkIndexes(e,t,n),a=this._storage.getChunkByIndexes(r,i,o);if(!a)return 0;var[s,u,l]=this._coordsToChunkLocals(e,t,n);return a.voxels.get(s,u,l)},$.prototype.getBlockSolidity=function(e,t,n){var[r,i,o]=this._coordsToChunkIndexes(e,t,n),a=this._storage.getChunkByIndexes(r,i,o);if(!a)return!1;var[s,u,l]=this._coordsToChunkLocals(e,t,n);return!!a.getSolidityAt(s,u,l)},$.prototype.getBlockOpacity=function(e,t,n){var r=this.getBlockID(e,t,n);return this.noa.registry.getBlockOpacity(r)},$.prototype.getBlockFluidity=function(e,t,n){var r=this.getBlockID(e,t,n);return this.noa.registry.getBlockFluidity(r)},$.prototype.getBlockProperties=function(e,t,n){var r=this.getBlockID(e,t,n);return this.noa.registry.getBlockProps(r)},$.prototype.setBlockID=function(e,t,n,r){var[i,o,a]=this._coordsToChunkIndexes(t,n,r),s=this._storage.getChunkByIndexes(i,o,a);if(s){var[u,l,c]=this._coordsToChunkLocals(t,n,r);return s.set(u,l,c,e,t,n,r)}},$.prototype.isBoxUnobstructed=function(e){for(var t=e.base,n=e.max,r=Math.floor(t[0]);r<n[0]+1;r++)for(var i=Math.floor(t[1]);i<n[1]+1;i++)for(var o=Math.floor(t[2]);o<n[2]+1;o++)if(this.getBlockSolidity(r,i,o))return!1;return!0},$.prototype.setChunkData=function(e,t,n){!function(e,t,n,r){var i=t.split("|"),o=parseInt(i.shift()),a=parseInt(i.shift()),s=parseInt(i.shift()),u=i.join("|");if(e._chunksPending.remove(o,a,s),u!==e.noa.worldName)return;if(!e._chunksKnown.includes(o,a,s))return;if(e._chunksToRemove.includes(o,a,s))return;var l=e._storage.getChunkByIndexes(o,a,s);if(l)l._updateVoxelArray(n);else{var c=e.chunkSize;l=new B(e.noa,t,o,a,s,c,n),e._storage.storeChunkByIndexes(o,a,s,l),l.userData=r,e.noa.rendering.prepareChunkForRendering(l),e.emit("chunkAdded",l)}K(e,l),X(e,o,a,s,l),re("receive")}(this,e,t,n)},$.prototype.setAddRemoveDistance=function(e=2,t=3){var n=Array.isArray(e)?e:[e,e],r=Array.isArray(t)?t:[t,t];r[0]<n[0]+1&&(r[0]=n[0]+1),r[1]<n[1]+1&&(r[1]=n[1]+1),this.chunkAddDistance=n,this.chunkRemoveDistance=r,this._chunkAddSearchDistance=0},$.prototype.invalidateVoxelsInAABB=function(e){!function(e,t){for(var n=e._coordsToChunkIndexes(t.base[0],t.base[1],t.base[2]),r=e._coordsToChunkIndexes(t.max[0],t.max[1],t.max[2]),i=0;i<3;i++)Number.isFinite(t.base[i])||(n[i]=t.base[i]),Number.isFinite(t.max[i])||(r[i]=t.max[i]);e._chunksKnown.forEach(t=>{for(var i=0;i<3;i++)if(t[i]<n[i]||t[i]>=r[i])return;e._chunksToRemove.add(t[0],t[1],t[2]),e._chunksToMesh.remove(t[0],t[1],t[2]),e._chunksToRequest.remove(t[0],t[1],t[2]),e._chunksToMeshFirst.remove(t[0],t[1],t[2])})}(this,e)},$.prototype.manuallyLoadChunk=function(e,t,n){if(!this.manuallyControlChunkLoading)throw V;var[r,i,o]=this._coordsToChunkIndexes(e,t,n);this._chunksKnown.add(r,i,o),this._chunksToRequest.add(r,i,o)},$.prototype.manuallyUnloadChunk=function(e,t,n){if(!this.manuallyControlChunkLoading)throw V;var[r,i,o]=this._coordsToChunkIndexes(e,t,n);this._chunksToRemove.add(r,i,o),this._chunksToMesh.remove(r,i,o),this._chunksToRequest.remove(r,i,o),this._chunksToMeshFirst.remove(r,i,o)};var V="Set `noa.world.manuallyControlChunkLoading` if you need this API";function q(e){var t=e.noa.entities.getPosition(e.noa.playerEntity);return e._coordsToChunkIndexes(t[0],t[1],t[2])}$.prototype.tick=function(){var e=performance.now();this._cachedWorldName!==this.noa.worldName&&(!function(e){e._chunksToRemove.copyFrom(e._chunksKnown),e._chunksToRequest.empty(),e._chunksToMesh.empty(),e._chunksToMeshFirst.empty();var t=q(e);Q(e._chunksToRemove,t[0],t[1],t[2])}(this),this._cachedWorldName=this.noa.worldName,this._chunkAddSearchDistance=0);var[t,n,r]=q(this),i=y(t,n,r),o=i!=this._lastPlayerChunkHash;o&&(this.emit("playerEnteredChunk",t,n,r),this._lastPlayerChunkHash=i,this._chunkAddSearchDistance=0),ne("start"),re("start"),this.manuallyControlChunkLoading||(o&&(!function(e,t,n,r){var i=e.chunkRemoveDistance[0],o=e.chunkRemoveDistance[1],a=i*i*2,s=i*i*2+o*o,u=e._chunksToRemove;e._chunksKnown.forEach(i=>{if(!u.includes(i[0],i[1],i[2])){var l=i[0]-t,c=i[1]-n,f=i[2]-r,h=l*l+f*f;Math.abs(c)<=o&&h<=a&&h+c*c<=s||(e._chunksToRemove.add(i[0],i[1],i[2]),e._chunksToMesh.remove(i[0],i[1],i[2]),e._chunksToRequest.remove(i[0],i[1],i[2]),e._chunksToMeshFirst.remove(i[0],i[1],i[2]))}}),Q(u,t,n,r)}(this,t,n,r),ne("remQueue")),function(e,t,n,r){var i=e._chunksToRequest;if(i.count()>50)return;var o=Math.ceil(e.chunkAddDistance[0]),a=Math.ceil(e.chunkAddDistance[1]),s=Math.max(o,a);if(e._chunkAddSearchDistance>s)return;for(var u=o*o*2+a*a,l=e._chunksKnown,c=e._chunksToRemove,f=Math.max(0,e._chunkAddSearchDistance),h=!1,d=!1;f<=s&&(m(f,o,a,(e,o,a)=>{var s=t+e,f=n+o,p=r+a;return l.includes(s,f,p)?(c.includes(s,f,p)&&(h=!0),!1):!(e*e+o*o+a*a>u)&&(l.add(s,f,p),i.add(s,f,p),i.count()>100?(d=!0,!0):void 0)}),!d);f++)h||(e._chunkAddSearchDistance=f+1);Q(i,t,n,r)}(this,t,n,r),ne("addQueue"));var a=Math.max(.5,this.maxProcessingPerTick);d(a,()=>{var e=function(e){var t=e._chunksToRequest;if(t.isEmpty())return!0;var n=e._chunksPending.count(),r=e._chunksToMesh.count();if(n>=e.maxChunksPendingCreation)return!0;if(r>=e.maxChunksPendingMeshing)return!0;var i=t.pop();return function(e,t,n,r){var i=e.chunkSize,o=B._createVoxelArray(e.chunkSize),a=e.noa.worldName,s=[t,n,r,a].join("|"),u=t*i,l=n*i,c=r*i;e._chunksPending.add(t,n,r),e.emit("worldDataNeeded",s,o,u,l,c,a),re("request")}(e,i[0],i[1],i[2]),t.isEmpty()}(this);return ne("requests"),e=e&&function(e){var t=e._chunksToRemove;if(t.isEmpty())return!0;var n=t.pop();return function(e,t,n,r){var i=e._storage.getChunkByIndexes(t,n,r);i&&(e.emit("chunkBeingRemoved",i.requestID,i.voxels,i.userData),e.noa.rendering.disposeChunkForRendering(i),i.dispose(),re("dispose"),X(e,t,n,r,null));e._storage.removeChunkByIndexes(t,n,r),e._chunksKnown.remove(t,n,r),e._chunksToMesh.remove(t,n,r),e._chunksToMeshFirst.remove(t,n,r)}(e,n[0],n[1],n[2]),t.isEmpty()}(this),ne("removes"),e=e&&H(this,!1),ne("meshes"),e},e),(a-=performance.now()-e)>.5&&(!function(e){var t=e._chunksToMesh.count()+e._chunksToMeshFirst.count();if(t>5)return;for(var n=e._chunksKnown.arr,r=Math.min(50,n.length),i=0;i<r;i++){W=(W+1)%n.length;var o=n[W],a=e._storage.getChunkByIndexes(o[0],o[1],o[2]);if(a)if(K(e,a)&&t++,t>5)return}}(this),ne("looking"),d(a,()=>{var e=H(this,!1);return ne("meshes"),e},e));var s=this._storage.getChunkByIndexes(t,n,r);this.playerChunkLoaded=!!s,re("end",this),ne("end")},$.prototype.render=function(){var e=this.maxProcessingPerRender;e>0&&d(e,()=>H(this,!0))},$.prototype._getChunkByCoords=function(e,t,n){var[r,i,o]=this._coordsToChunkIndexes(e,t,n);return this._storage.getChunkByIndexes(r,i,o)},$.prototype._queueChunkForRemesh=function(e){K(this,e)};var W=-1;function H(e,t){var n=e._chunksToMeshFirst;if(n.isEmpty()&&!t&&(n=e._chunksToMesh),n.isEmpty())return!0;var r=n.pop();if(!e._chunksToRemove.includes(r[0],r[1],r[2])){var i=e._storage.getChunkByIndexes(r[0],r[1],r[2]);i&&function(e,t){e._chunksToMesh.remove(t.i,t.j,t.k),e._chunksToMeshFirst.remove(t.i,t.j,t.k),t.updateMeshes(),re("mesh")}(e,i)}}function K(e,t){if(t._terrainDirty||t._objectsDirty){var n=t._neighborCount;if(!(n<t.minNeighborsToMesh))return(26===n?e._chunksToMeshFirst:e._chunksToMesh).add(t.i,t.j,t.k),!0}}function G(e,t,n){var r=this.chunkSize;return[0|Math.floor(e/r),0|Math.floor(t/r),0|Math.floor(n/r)]}function J(e,t,n){var r=this.chunkSize,i=e%r|0;i<0&&(i+=r);var o=t%r|0;o<0&&(o+=r);var a=n%r|0;return a<0&&(a+=r),[i,o,a]}function Z(e,t,n){var r=this._coordShiftBits;return[e>>r|0,t>>r|0,n>>r|0]}function Y(e,t,n){var r=this._coordMask;return[e&r|0,t&r|0,n&r|0]}function Q(e,t,n,r){e.sortByDistance(e=>{var i=e[0]-t,o=e[1]-n,a=e[2]-r;return 10*(i*i+a*a)+Math.abs(o)})}function X(e,t,n,r,i){for(var o=!i||i&&!i.isEmpty,a=-1;a<=1;a++)for(var s=-1;s<=1;s++)for(var u=-1;u<=1;u++)if(0!=(a|s|u)){var l=e._storage.getChunkByIndexes(t+a,n+s,r+u);if(l){o&&(l._terrainDirty=!0),i&&!i._neighbors.get(a,s,u)&&(i._neighborCount++,i._neighbors.set(a,s,u,l));var c=l._neighbors.get(-a,-s,-u);i&&!c&&(l._neighborCount++,l._neighbors.set(-a,-s,-u,i),26===l._neighborCount&&K(e,l)),!i&&c&&(l._neighborCount--,l._neighbors.set(-a,-s,-u,null))}}}function ee(e,t,n,r){var i=0,o=0,a=0,s=0,u=[];n.forEach(t=>{var n=e._storage.getChunkByIndexes(t[0],t[1],t[2]);n&&(a++,u.push(n._timesMeshed),n.isFull&&i++,n.isEmpty&&o++,26===n._neighborCount&&s++)});var l=n.length.toString().padEnd(8);if(l+=("exist: "+a).padEnd(12),l+=("full: "+i).padEnd(12),l+=("empty: "+o).padEnd(12),l+=("surr: "+s).padEnd(12),r){var c=u.reduce((e,t)=>e+t,0),f=u.reduce((e,t)=>Math.max(e,t),0),h=u.reduce((e,t)=>Math.min(e,t),0);l+="times meshed: avg "+(c/a).toFixed(2),l+="  max "+f,l+="  min "+h}console.log(t,l)}$.prototype.report=function(){console.log("World report - playerChunkLoaded: ",this.playerChunkLoaded),ee(this,"  known:     ",this._chunksKnown.arr,!0),ee(this,"  to request:",this._chunksToRequest.arr),ee(this,"  to remove: ",this._chunksToRemove.arr),ee(this,"  creating:  ",this._chunksPending.arr),ee(this,"  to mesh:   ",this._chunksToMesh.arr.concat(this._chunksToMeshFirst.arr))};var te,ne=b(0,"world ticks:",1),re=()=>{},ie=n(481),oe=function(e,t,n){return function(e,t,n){t=Object.assign({},ae,t);var r=ie(n,t),i=t.bindings;for(var o in i){var a=Array.isArray(i[o])?i[o]:[i[o]];a.unshift(o),r.bind.apply(r,a)}return r}(0,t,n)},ae={bindings:{forward:["W","<up>"],left:["A","<left>"],backward:["S","<down>"],right:["D","<right>"],fire:"<mouse 1>","mid-fire":["<mouse 2>","Q"],"alt-fire":["<mouse 3>","E"],jump:"<space>"}};te=n(483);var se=function(e,t){return function(e,t){t=Object.assign({},ue,t);var n=e.world,r=e.registry._solidityLookup,i=e.registry._fluidityLookup,o=e.registry._colisionLookup,a=e.worldOriginOffset;return te(t,(e,t,i)=>{var o=n.getBlockID(e+a[0],t+a[1],i+a[2]);return!!r[o]},(e,t,r)=>{var o=n.getBlockID(e+a[0],t+a[1],r+a[2]);return i[o]},(e,t,r)=>{var i=n.getBlockID(e+a[0],t+a[1],r+a[2]);return o[i]})}(e,t)},ue={gravity:[0,-10,0],airDrag:.1};var le=n(77),ce=n(312),fe=n(486),he={inverseX:!1,inverseY:!1,sensitivityX:10,sensitivityY:10,initialZoom:0,zoomSpeed:.2};function de(e,t){this.noa=e,t=Object.assign({},he,t),this.sensitivityX=t.sensitivityX,this.sensitivityY=t.sensitivityY,this.inverseX=t.inverseX,this.inverseY=t.inverseY,this.heading=0,this.pitch=0,this.cameraTarget=this.noa.ents.createEntity(["position"]);var n=.9*e.ents.getPositionData(e.playerEntity).height;e.ents.addComponent(this.cameraTarget,"followsEntity",{entity:e.playerEntity,offset:[0,n,0]}),this.zoomDistance=t.initialZoom,this.zoomSpeed=t.zoomSpeed,this.currentZoom=t.initialZoom,this._dirVector=le.fromValues(0,0,1)}de.prototype._localGetTargetPosition=function(){var e=this.noa.ents.getPositionData(this.cameraTarget);return le.copy(pe,e._renderPosition)},de.prototype._localGetPosition=function(){var e=this._localGetTargetPosition();return 0===this.currentZoom?e:le.scaleAndAdd(e,e,this._dirVector,-this.currentZoom)};var pe=le.create();de.prototype.getTargetPosition=function(){var e=this._localGetTargetPosition();return this.noa.localToGlobal(e,me)};var me=[];de.prototype.getPosition=function(){var e=this._localGetPosition();return this.noa.localToGlobal(e,me)},de.prototype.getDirection=function(){return this._dirVector},de.prototype.applyInputsToCamera=function(){var e=this.noa.inputs.state;!function(e){var t=e.dx,n=e.dy,r=Math.abs(t)>400&&Math.abs(t/ve)>4,i=Math.abs(n)>400&&Math.abs(n/ge)>4;r||i?(e.dx=ve,e.dy=ge,ve=(ve+t)/2,ge=(ge+n)/2):(ve=t||1,ge=n||1)}(e);var t=.0066*Math.PI/180,n=e.dy*this.sensitivityY*t,r=e.dx*this.sensitivityX*t;this.inverseY&&(n=-n),this.inverseX&&(r=-r);var i=2*Math.PI;this.heading+=r<0?r+i:r,this.heading>i&&(this.heading-=i);var o=Math.PI/2-.001;this.pitch=Math.max(-o,Math.min(o,this.pitch+n)),le.set(this._dirVector,0,0,1),le.rotateX(this._dirVector,this._dirVector,ye,this.pitch),le.rotateY(this._dirVector,this._dirVector,ye,this.heading)};var ye=le.create();de.prototype.updateBeforeEntityRenderSystems=function(){this.currentZoom+=(this.zoomDistance-this.currentZoom)*this.zoomSpeed},de.prototype.updateAfterEntityRenderSystems=function(){var e=function(e){e._sweepBox||(e._sweepBox=new ce([0,0,0],[.2,.2,.2]),e._sweepGetVoxel=e.noa.world.getBlockSolidity.bind(e.noa.world),e._sweepVec=le.create(),e._sweepHit=()=>!0);var t=le.copy(e._sweepVec,e._localGetTargetPosition());le.add(t,t,e.noa.worldOriginOffset);for(var n=0;n<3;n++)t[n]-=.1;e._sweepBox.setPosition(t);var r=Math.max(e.zoomDistance,e.currentZoom)+.1;return le.scale(e._sweepVec,e.getDirection(),-r),fe(e._sweepGetVoxel,e._sweepBox,e._sweepVec,e._sweepHit,!0)}(this);this.currentZoom>e&&(this.currentZoom=e)};var ve=0,ge=0,be={texturePath:""},we={solid:!0,opaque:!0,fluidDensity:1,viscosity:.5};function _e(e,t){this.noa=e,t=Object.assign({},be,t);var n=[!1],r=[null],i=[!1],o=[!1],a=[!1],s=[0,0,0,0,0,0],u=[null],l=[null],c=[null],f={},h=[null],d=t.texturePath;this.registerBlock=function(e,t){t=t||{},we.solid=!t.fluid,we.opaque=!t.fluid;var h=Object.assign({},we,t);if(e<1||e>65535)throw"Block id out of range: "+e;for(;e>n.length;)this.registerBlock(n.length,{});n[e]=!!h.solid,i[e]=!!h.opaque,o[e]=!!h.fluid,r[e]=h.customColision?h.customColision:null,a[e]=!!h.blockMesh,l[e]=h.blockMesh||null;var d,p=h.material||null;if(p)if("string"==typeof p)d=[p,p,p,p,p,p];else if(p.length&&2==p.length)d=[p[1],p[1],p[0],p[0],p[1],p[1]];else if(p.length&&3==p.length)d=[p[2],p[2],p[0],p[1],p[2],p[2]];else{if(!p.length||6!=p.length)throw"Invalid material parameter: "+p;d=p}else d=[null,null,null,null,null,null];for(var m=0;m<6;++m)s[6*e+m]=ke(this,f,d[m],!0);u[e]={},o[e]&&(u[e].fluidDensity=h.fluidDensity,u[e].viscosity=h.viscosity);var y=h.onLoad||h.onUnload||h.onSet||h.onUnset||h.onCustomMeshCreate;return c[e]=y?new xe(h):null,e},this.registerMaterial=function(e,t,n,r,i){var o=f[e]||h.length;f[e]=o;var a=1;return t&&4==t.length&&(a=t.pop()),h[o]={color:t||[1,1,1],alpha:a,texture:n?d+n:"",textureAlpha:!!r,renderMat:i||null},o},this.getBlockSolidity=function(e){return n[e]},this.getBlockCustomColision=function(e){return r[e]},this.getBlockOpacity=function(e){return i[e]},this.getBlockFluidity=function(e){return o[e]},this.getBlockProps=function(e){return u[e]},this.getBlockFaceMaterial=function(e,t){return s[6*e+t]},this.getMaterialColor=function(e){return h[e].color},this.getMaterialTexture=function(e){return h[e].texture},this.getMaterialData=function(e){return h[e]},this._solidityLookup=n,this._opacityLookup=i,this._fluidityLookup=o,this._objectLookup=a,this._blockMeshLookup=l,this._blockHandlerLookup=c,this._colisionLookup=r,this._getMaterialVertexColor=function(e){return h[e].texture?p:h[e].color};var p=[1,1,1];this.registerMaterial("dirt",[.4,.3,0],null),this.registerBlock(1,{material:"dirt"})}function ke(e,t,n,r){if(!n)return 0;var i=t[n];return void 0===i&&r&&(i=e.registerMaterial(n)),i}function xe(e){this.onLoad=e.onLoad||null,this.onUnload=e.onUnload||null,this.onSet=e.onSet||null,this.onUnset=e.onUnset||null,this.onCustomMeshCreate=e.onCustomMeshCreate||null}var Oe=n(422),Pe=n(423),Se=n(77),Ee=n(487),je={shadowDistance:10};function Ce(e,t){Ee.call(this),this.noa=e,t=Object.assign({},je,t),this.names={};var r={shadow:t.shadowDistance},i=n(489);for(var o of i.keys()){var a=/\.\/(.*)\.js/.exec(o)[1],s=r[a]||void 0,u=i(o);u.default&&(u=u.default);var l=u(e,s),c=this.createComponent(l);this.names[a]=c}this.isPlayer=function(t){return t===e.playerEntity},this.hasPhysics=this.getComponentAccessor(this.names.physics),this.cameraSmoothed=this.getComponentAccessor(this.names.smoothCamera),this.hasMesh=this.getComponentAccessor(this.names.mesh),this.hasPosition=this.getComponentAccessor(this.names.position);var f=this.getStateAccessor(this.names.position);function h(e,t,n,r,i){var o=e[t]+n,a=e[t]+r;Math.abs(o-Math.round(o))<.002&&(e[t]+=.002),Math.abs(a-Math.round(a))<.001&&(e[t]-=.001)}function d(t,n){Se.copy(n._renderPosition,n._localPosition),Se.add(n.position,n._localPosition,e.worldOriginOffset),Object(Oe.updatePositionExtents)(n);var r=p(t);r&&Object(Pe.setPhysicsFromPosition)(r,n)}this.getPositionData=f,this._localGetPosition=function(e){return f(e)._localPosition},this.getPosition=function(e){return f(e).position},this._localSetPosition=function(e,t){var n=f(e);Se.copy(n._localPosition,t),d(e,n)},this.setPosition=function(t,n,r,i){"number"==typeof n&&(n=[n,r,i]);var o=e.globalToLocal(n,null,[]);this._localSetPosition(t,o)},this.setEntitySize=function(e,t,n,r){var i=f(e);i.width=(t+r)/2,i.height=n,d(e,i)},this._rebaseOrigin=function(e){for(var t of this.getStatesList(this.names.position)){var n=t._localPosition,r=t.width/2;h(n,0,-r,r,t.__id),h(n,1,0,t.height,t.__id),h(n,2,-r,r,t.__id),Se.subtract(n,n,e),d(t.__id,t)}};var p=this.getStateAccessor(this.names.physics);this.getPhysics=p,this.getPhysicsBody=function(e){return p(e).body},this.getMeshData=this.getStateAccessor(this.names.mesh),this.getMovement=this.getStateAccessor(this.names.movement),this.getCollideTerrain=this.getStateAccessor(this.names.collideTerrain),this.getCollideEntities=this.getStateAccessor(this.names.collideEntities),this.onPairwiseEntityCollision=function(e,t){}}function Te(e,t){return!(e[0]>t[3])&&(!(e[1]>t[4])&&(!(e[2]>t[5])&&(!(e[3]<t[0])&&(!(e[4]<t[1])&&!(e[5]<t[2])))))}Ce.prototype=Object.create(Ee.prototype),Ce.prototype.constructor=Ce,Ce.prototype.addComponentAgain=function(e,t,n){this.hasComponent(e,t)&&this.removeComponent(e,t,!0),this.addComponent(e,t,n)},Ce.prototype.isTerrainBlocked=function(e,t,n){for(var r=this.noa.worldOriginOffset,i=Math.floor(e-r[0]),o=Math.floor(t-r[1]),a=Math.floor(n-r[2]),s=[i+.001,o+.001,a+.001,i+.999,o+.999,a+.999],u=this.getStatesList(this.names.collideTerrain),l=0;l<u.length;l++){var c=u[l].__id;if(Te(s,this.getPositionData(c)._extents))return!0}return!1},Ce.prototype.getEntitiesInAABB=function(e,t){var n,r=this.noa.worldOriginOffset,i=[e.base[0]+r[0],e.base[1]+r[1],e.base[2]+r[2],e.max[0]+r[0],e.max[1]+r[1],e.max[2]+r[2]];if(t)for(var o of(n=[],this.getStatesList(t))){var a=this.getPositionData(o.__id);a&&n.push(a)}else n=this.getStatesList(this.names.position);for(var s=[],u=0;u<n.length;u++){var l=n[u];Te(i,l._extents)&&s.push(l.__id)}return s},Ce.prototype.add=function(e,t,n,r,i,o,a){var s=this,u=this.createEntity();if(this.addComponent(u,this.names.position,{position:e||[0,0,0],width:t,height:n}),o){this.addComponent(u,this.names.physics);var l=this.getPhysicsBody(u),c=this.names.smoothCamera;l.onStep=function(){s.addComponentAgain(u,c)}}return r&&(i||(i=Se.create()),this.addComponent(u,this.names.mesh,{mesh:r,offset:i})),a&&this.addComponent(u,this.names.shadow,{size:t}),u};var Ae=n(340),ze=function(){function e(e){for(var t=e._objectSystems||[];t.length;){var n=t.pop();n.mesh&&n.mesh.dispose(),n.dispose()}}function t(e,t,n,r,i,o){var a=e._objectBlocks,s=new Ae.a("object_sps_"+e.requestID,t,{updatable:!1}),u=e.noa.registry._blockHandlerLookup,l=e.noa.registry._blockMeshLookup;for(var c in n){var f,h=l[c],d=n[c],p=d.length,m=u[c];m&&(f=m.onCustomMeshCreate);s.addShape(h,p,{positionFunction:function(e,t,n){var s=d[n],u=a[s];e.position.set(u.i+.5,u.j,u.k+.5),f&&f(e,r+u.i,i+u.j,o+u.k)}}),d.length=0}return s}this.initChunk=function(e){e._objectBlocks={},e._objectSystems=[]},this.disposeChunk=function(t){e(t),t._objectBlocks=null},this.setObjectBlock=function(e,t,n,r,i){var o=y(n,r,i);t?e._objectBlocks[o]=new Ie(t,n,r,i):e._objectBlocks[o]&&delete e._objectBlocks[o]},this.buildObjectMeshes=function(n){De("start"),e(n);var r=n.noa.rendering.getScene(),i=n.noa.registry._blockMeshLookup,o={};for(var a in n._objectBlocks){var s=n._objectBlocks[a].id,u=i[s].material,l=u?r.materials.indexOf(u):-1;o[l]||(o[l]={}),o[l][s]||(o[l][s]=[]),o[l][s].push(a)}De("preprocess");var c=n.i*n.size,f=n.j*n.size,h=n.k*n.size;for(var d in o){var p=t(n,r,o[d],c,f,h);De("made SPS");var m=p.buildMesh();De("built mesh"),m.material=d>-1?r.materials[d]:null,n._objectSystems.push(p),n.noa.rendering.addMeshToScene(m,!0,n.pos,n),De("misc")}De("end")}};function Ie(e,t,n,r){this.id=0|e,this.i=0|t,this.j=0|n,this.k=0|r}var De=()=>{},Re=n(78),Be=n.n(Re),Me=n(87),Le=n(16),Fe=n(100),Ne=n(11),Ue=function(e){var t=new Ke(e),n=new He(e);this.initChunk=function(e){e._terrainMesh=null},this.meshChunk=function(r,i,o,a,s,u,l){Ge("start"),r._terrainMesh&&r._terrainMesh.dispose(),Ge("cleanup");var c=i||e.registry.getBlockFaceMaterial,f=o||e.registry._getMaterialVertexColor,h=void 0===s?e.rendering.useAO:s,d=u||e.rendering.aoVals,m=isNaN(l)?e.rendering.revAoVal:l,y=function(e){var t=e.voxels.shape[0],n=Ve;if(t+2!==n.shape[0]){var r=t+2;n=new Be.a(new Uint16Array(r*r*r),[r,r,r]),Ve=n}var i=qe[0],o=qe[1],a=qe[2],s=qe[3],u=qe[4],l=qe[5],c=qe[6];t!==$e&&($e=t,function(e,t,n,r){for(var i=0;i<3;i++)t[i]=[e-1,0,0][i],n[i]=[1,e,1][i],r[i]=[0,1,e+1][i]}(t,u,l,c));for(var f=0;f<3;f++){i[0]=f;for(var h=0;h<3;h++){i[1]=h;for(var d=0;d<3;d++){i[2]=d;for(var m=0;m<3;m++){var y=i[m];o[m]=u[y],a[m]=l[y],s[m]=c[y]}var v=e._neighbors.get(f-1,h-1,d-1);p(v?v.voxels:null,n,o,a,s)}}}return n}(r);Ge("copy");var v=r.isFull||r.isEmpty,g=t.mesh(y,c,f,h,d,m,v),b=0===g.numQuads?null:n.build(r,g,a);Ge("end"),r._terrainMesh=null,b&&b.getIndices().length>0&&(e.rendering.addMeshToScene(b,!0,r.pos,this),r._terrainMesh=b)},this.disposeChunk=function(e){e._terrainMesh&&e._terrainMesh.dispose()}};var $e,Ve=new Be.a(new Uint16Array(27),[3,3,3]),qe=Array.from(Array(10),()=>[0,0,0]);var We={numQuads:0,materialQuadCounts:{},quadMaterials:[1],positions:[.5],indices:[1],normals:[.5],colors:[.5],uvs:[.5],reset:function(){this.numQuads=0,this.materialQuadCounts={}}};function He(e){function t(t){if(e.registry.getMaterialTexture(t))return!1;var n=e.registry.getMaterialData(t);return 1===n.alpha&&!n.renderMat}function n(e,t,n,r,i,o){for(var a=t*i,s=r*i,u=0;u<i;u++)n[s+u]=e[a+u]+o}function r(t,n){if(n||0==t)return e.rendering.flatMaterial;var r="terrain_mat:"+t;return i[r]||(i[r]=function(t,n){var r=e.registry.getMaterialData(t);if(r.renderMat)return r.renderMat;var i=e.registry.getMaterialTexture(t),o=r.alpha;if(!i&&1===o)return e.rendering.flatMaterial;var a=e.rendering.makeStandardMaterial(n);if(i){var s=e.rendering.getScene(),u=new Ne.a(i,s,!0,!1,Ne.a.NEAREST_SAMPLINGMODE);r.textureAlpha&&(u.hasAlpha=!0),a.diffuseTexture=u}r.alpha<1&&(a.alpha=r.alpha);return a}(t,r)),i[r]}this.build=function(i,o,a){var s=o.numQuads,u=o.materialQuadCounts,l={0:"0"};for(var c in u[0]=0,u)"0"!==c&&(a||t(c)?(u[0]+=u[c],u[c]=0,l[c]="0"):l[c]=c);var f={},h=0;for(var d in u)0!==u[d]&&(f[d]=h,h+=u[d]);for(var p=new Float32Array(12*s),m=new Uint16Array(6*s),y=new Float32Array(12*s),v=new Float32Array(16*s),g=new Float32Array(8*s),b=0;b<s;b++){var w=l[o.quadMaterials[b]],_=f[w],k=4*(_-b);n(o.positions,b,p,_,12,0),n(o.indices,b,m,_,6,k),n(o.normals,b,y,_,12,0),n(o.colors,b,v,_,16,0),n(o.uvs,b,g,_,8,0),f[w]++}var x=e.rendering.getScene(),O="chunk_"+i.requestID,P=new E.a(O,x),S=new Le.a;if(S.positions=p,S.indices=m,S.normals=y,S.colors=v,S.uvs=g,S.applyToMesh(P),1===Object.keys(f).length){var j=l[o.quadMaterials[0]];P.material=r(j,a)}else{var C=new Fe.a("multimat "+O,x);P.subMeshes=[];var T=0;for(var A in f){var z=u[A],I=f[A]-z;new Me.a(T,12*I,12*z,6*I,6*z,P);var D=r(A,a);C.subMaterials[T]=D,T++}P.material=C}return Ge("mesh"),P};var i={}}function Ke(e){var t=new Int16Array(16),n=new Uint16Array(16),r=null,i=e.registry._solidityLookup,o=e.registry._opacityLookup;function a(e,i,o,a){for(var u=o.shape[1],l=t,c=n,f=0,h=2*i,d=o.data,p=o.index(e-1,0,0),m=o.stride[0],y=o.stride[1],v=o.stride[2],g=0;g<u;++g){var b=p;p+=v;for(var w=0;w<u;w++,f++,b+=y){var _=d[b],k=d[b+m];if(_!==k){var x=s(_,k,a,h);x&&(l[f]=x>0?a(_,h):-a(k,h+1),r&&(c[f]=x>0?r(o,e,e-1,w,g):r(o,e-1,e,w,g)))}}}}function s(e,t,n,r){var i=o[e],a=o[t];if(i&&a)return 0;if(i)return 1;if(a)return-1;var s=n(e,r),u=n(t,r+1);return s===u?0:0===s?-1:0===u?1:0}function u(e,r,i,o,a,s,u,d,g,b,w){var _=0,k=t,x=n,O=[0,0,0],P=[0,0,0],S=[0,0,0];O[r]=e;for(var E=[0,0,0],j=u?p:m,C=u?v:y,T=0;T<s;++T)for(var A=1,z=1,I=0;I<a;I+=A,_+=A){var D=0|k[_];if(D){var R=0|x[_];for(A=1;A<a-I&&j(_+A,k,D,x,R);++A);e:for(z=1;z<s-T;++z)for(var B=0;B<A;++B){if(!j(_+B+z*a,k,D,x,R))break e}var M=Math.abs(D),L=d.numQuads;d.quadMaterials[L]=0|M,d.materialQuadCounts[M]=(d.materialQuadCounts[M]||0)+1;var F=C(d.colors,16*L,g(M),R,b,w);O[i]=I,O[o]=T,P[i]=A,S[o]=z,l(d.positions,12*L,O,P,S);var N=D>0?1:-1;c(d.uvs,8*L,r,A,z,N),E[r]=N,f(d.normals,12*L,E),h(d.indices,6*L,4*L,D,F),d.numQuads++;for(var U=0;U<z;++U)for(var $=0;$<A;++$)k[_+$+U*a]=0}else A=1}}function l(e,t,n,r,i){for(var o=0;o<3;o++)e[t+o]=n[o],e[t+3+o]=n[o]+r[o],e[t+6+o]=n[o]+r[o]+i[o],e[t+9+o]=n[o]+i[o]}function c(e,t,n,r,i,o){for(var a=0;a<8;a++)e[t+a]=0;2===n?(e[t+1]=e[t+3]=i,e[t+2]=e[t+4]=-o*r):(e[t+1]=e[t+7]=r,e[t+4]=e[t+6]=o*i)}function f(e,t,n){for(var r=0;r<12;r++)e[t+r]=n[r%3]}function h(e,t,n,r,i){for(var o=r<0?i?d.A:d.B:i?d.C:d.D,a=0;a<6;a++)e[t+a]=n+o[a]}this.mesh=function(s,l,c,f,h,d,p){i=e.registry._solidityLookup,o=e.registry._opacityLookup;var m=We;m.reset();var y=d===h[0];r=f?y?g:b:null;for(var v=0;v<3;++v){var w=(v+1)%3,_=(v+2)%3,k=s.shape,x=s.transpose(v,w,_).lo(1,1,1).hi(k[v]-2,k[w]-2,k[_]-2),O=x.shape[0]-1,P=x.shape[1],S=x.shape[2];t.length<P*S&&(t=new Int16Array(P*S),n=new Uint16Array(P*S));for(var E=0;E<=O;++E)a(E,v,x,l),u(E,v,w,_,P,S,f,m,c,h,d),p&&(E+=O-1)}return Ge("geometry"),m};var d={A:[0,1,2,0,2,3],B:[1,2,3,0,1,3],C:[0,2,1,0,3,2],D:[3,1,0,3,2,1]};function p(e,t,n,r,i){return n===t[e]&&i===r[e]}function m(e,t,n,r,i){return n===t[e]}function y(e,t,n,r,i,o){for(var a=0;a<16;a+=4)e[t+a]=n[0],e[t+a+1]=n[1],e[t+a+2]=n[2],e[t+a+3]=1;return!0}function v(e,t,n,r,i,o){var a=w(r,0,0),s=w(r,1,0),u=w(r,1,1),l=w(r,0,1);_(e,t,n,a,i,o),_(e,t+4,n,s,i,o),_(e,t+8,n,u,i,o),_(e,t+12,n,l,i,o);return a===u?l!==s||2===l:l!==s&&a+u>l+s}function g(e,t,n,r,o){var a=1,s=1,u=1,l=1;return i[e.get(t,r+1,o)]&&(++u,++l),i[e.get(t,r-1,o)]&&(++a,++s),i[e.get(t,r,o+1)]&&(++s,++l),i[e.get(t,r,o-1)]&&(++a,++u),i[e.get(t,r,o)]?(l=3===l||i[e.get(t,r+1,o+1)]?3:2,s=3===s||i[e.get(t,r-1,o+1)]?3:2,u=3===u||i[e.get(t,r+1,o-1)]?3:2,a=3===a||i[e.get(t,r-1,o-1)]?3:2):(1===l&&i[e.get(t,r+1,o+1)]&&(l=2),1===s&&i[e.get(t,r-1,o+1)]&&(s=2),1===u&&i[e.get(t,r+1,o-1)]&&(u=2),1===a&&i[e.get(t,r-1,o-1)]&&(a=2)),l<<6|u<<4|s<<2|a}function b(e,t,n,r,o){var a=1,s=1,u=1,l=1;return i[e.get(t,r+1,o)]&&(++u,++l),i[e.get(t,r-1,o)]&&(++a,++s),i[e.get(t,r,o+1)]&&(++s,++l),i[e.get(t,r,o-1)]&&(++a,++u),i[e.get(t,r,o)]?(l=3===l||i[e.get(t,r+1,o+1)]?3:2,s=3===s||i[e.get(t,r-1,o+1)]?3:2,u=3===u||i[e.get(t,r+1,o-1)]?3:2,a=3===a||i[e.get(t,r-1,o-1)]?3:2):(1===l&&(i[e.get(t,r+1,o+1)]?l=2:i[e.get(n,r,o+1)]&&i[e.get(n,r+1,o)]&&i[e.get(n,r+1,o+1)]||(l=0)),1===u&&(i[e.get(t,r+1,o-1)]?u=2:i[e.get(n,r,o-1)]&&i[e.get(n,r+1,o)]&&i[e.get(n,r+1,o-1)]||(u=0)),1===s&&(i[e.get(t,r-1,o+1)]?s=2:i[e.get(n,r,o+1)]&&i[e.get(n,r-1,o)]&&i[e.get(n,r-1,o+1)]||(s=0)),1===a&&(i[e.get(t,r-1,o-1)]?a=2:i[e.get(n,r,o-1)]&&i[e.get(n,r-1,o)]&&i[e.get(n,r-1,o-1)]||(a=0))),l<<6|u<<4|s<<2|a}function w(e,t,n){return e>>(t?n?6:4:n?2:0)&3}function _(e,t,n,r,i,o){var a=0===r?o:i[r-1];e[t]=n[0]*a,e[t+1]=n[1]*a,e[t+2]=n[2]*a,e[t+3]=1}}var Ge=()=>{},Je=n(77),Ze=n(78),Ye=n(479),Qe=et,Xe={debug:!1,silent:!1,playerHeight:1.8,playerWidth:.6,playerStart:[0,10,0],playerAutoStep:!1,tickRate:30,maxRenderRate:0,blockTestDistance:10,stickyPointerLock:!0,dragCameraOutsidePointerLock:!0,stickyFullscreen:!1,skipDefaultHighlighting:!1,originRebaseDistance:25,tickInUnloadedChunks:!1,ignorePointerLock:!1};
/*!
 * noa: an experimental voxel game engine.
 * @url      github.com/andyhall/noa
 * @author   Andy Hall <andy@fenomas.com>
 * @license  MIT
 */function et(e){if(!(this instanceof et))return new et(e);this.version=n(505).version,e=Object.assign({},Xe,e),this._paused=!1,this._dragOutsideLock=e.dragCameraOutsidePointerLock,this.ignorePointerLock=e.ignorePointerLock;var t=this;if(!e.silent){var r=e.debug?" (debug)":"";console.log(`noa-engine v${this.version}${r}`)}this.worldOriginOffset=[0,0,0],this._originRebaseDistance=e.originRebaseDistance,this.vec3=Je,this.positionInCurrentTick=0,this.worldName="default",this.container=function(e,t){return new s(e,t)}(this,e),Object.defineProperty(this,"tickRate",{get:()=>this.container._shell.tickRate}),Object.defineProperty(this,"maxRenderRate",{get:()=>this.container._shell.maxRenderRate,set:e=>{this.container._shell.maxRenderRate=e||0}}),this.inputs=oe(0,e,this.container.element),this.registry=function(e,t){return new _e(e,t)}(this,e),this.world=function(e,t){return new $(e,t)}(this,e),this.rendering=function(e,t,n){return new A(e,t,n)}(this,e,this.container.canvas),this.physics=se(this,e),this.entities=function(e,t){return new Ce(e,t)}(this,e),this.ents=this.entities;var i=this.ents;this.playerEntity=i.add(e.playerStart,e.playerWidth,e.playerHeight,null,null,!0,!0),i.addComponent(this.playerEntity,i.names.collideTerrain),i.addComponent(this.playerEntity,i.names.collideEntities);var o=i.getPhysicsBody(this.playerEntity);o.gravityMultiplier=2,o.autoStep=e.playerAutoStep,i.addComponent(this.playerEntity,i.names.receivesInputs),i.addComponent(this.playerEntity,i.names.fadeOnZoom);i.addComponent(this.playerEntity,i.names.movement,{airJumps:1}),this.camera=function(e,t){return new de(e,t)}(this,e),this.blockTestDistance=e.blockTestDistance,this.blockTargetIdCheck=this.registry.getBlockSolidity,this.targetedBlock=null,e.skipDefaultHighlighting||(this.defaultBlockHighlightFunction=function(e){e?t.rendering.highlightBlockFace(!0,e.position,e.normal):t.rendering.highlightBlockFace(!1)},this.on("targetBlockChanged",this.defaultBlockHighlightFunction)),this._terrainMesher=new Ue(this),this._objectMesher=new ze,e.debug&&(window.noa=this,window.scene=this.rendering._scene,window.ndarray=Ze,window.vec3=Je,i.getMovement(1).airJumps=999,this.setViewDistance=function(e){var t=this.world.chunkSize;this.world.chunkAddDistance=e/t,this.world.chunkRemoveDistance=e/t+1,this.world._lastPlayerChunkID=""})}et.prototype=Object.create(o.a.prototype),et.prototype.tick=function(e){if(this._paused)this.world.worldGenWhilePaused&&this.world.tick(e);else if(at("start"),function(e){var t=e.ents.getPositionData(e.playerEntity)._localPosition,n=e._originRebaseDistance;if(Je.sqrLen(t)<n*n)return;for(var r=[],i=0;i<3;i++)r[i]=Math.floor(t[i]),e.worldOriginOffset[i]+=r[i];e.rendering._rebaseOrigin(r),e.entities._rebaseOrigin(r)}(this),this.world.tick(e),at("world"),this.world.playerChunkLoaded||this.world.tickInUnloadedChunks){this.physics.tick(e),at("physics"),this.rendering.tick(e),at("rendering"),function(e){var t=0,n=e.blockTargetIdCheck||e.registry.getBlockSolidity,r=e._localPick(null,null,null,n);if(r){var i=rt;Je.floor(i.adjacent,r.position),Je.copy(i.normal,r.normal),Je.sub(i.position,i.adjacent,i.normal),i.blockID=e.world.getBlockID(i.position[0],i.position[1],i.position[2]),e.targetedBlock=i,t=ot(i.position,i.normal,i.blockID,y)}else e.targetedBlock=null;t!=it&&(e.emit("targetBlockChanged",e.targetedBlock),it=t)}(this),at("targets"),this.entities.tick(e),at("entities"),this.emit("tick",e),at("tick event"),at("end");var t=this.inputs.state;t.scrollx=t.scrolly=t.scrollz=0}else this.rendering.tick(e)},et.prototype.render=function(e,t){this.positionInCurrentTick=t,this._paused?this.world.worldGenWhilePaused&&this.world.render():(st("start"),(this.ignorePointerLock||this.container.hasPointerLock||!this.container.supportsPointerLock||this._dragOutsideLock&&r.isMobile&&this.inputs.state.fire)&&this.camera.applyInputsToCamera(),st("init"),this.world.render(),st("meshing"),this.camera.updateBeforeEntityRenderSystems(),this.entities.render(e),this.camera.updateAfterEntityRenderSystems(),st("entities"),this.emit("beforeRender",e),st("before render"),this.rendering.render(e),this.rendering.postRender(),st("render"),this.emit("afterRender",e),st("after render"),st("end"),this.inputs.state.dx=this.inputs.state.dy=0)},et.prototype.globalToLocal=function(e,t,n){var r=this.worldOriginOffset;if(t){for(var i=0;i<3;i++){var o=e[i]-r[i];o+=t[i],n[i]=o}return n}return Je.sub(n,e,r)},et.prototype.localToGlobal=function(e,t,n){var r=this.worldOriginOffset;if(n){for(var i=0;i<3;i++){var o=Math.floor(e[i]);t[i]=o+r[i],n[i]=e[i]-o}return t}return Je.add(t,e,r)},et.prototype.setPaused=function(e){this._paused=!!e,e||(this.inputs.state.dx=this.inputs.state.dy=0)},et.prototype.getBlock=function(e,t,n){return e.length?this.world.getBlockID(e[0],e[1],e[2]):this.world.getBlockID(e,t,n)},et.prototype.setBlock=function(e,t,n,r){return t.length?this.world.setBlockID(e,t[0],t[1],t[2]):this.world.setBlockID(e,t,n,r)},et.prototype.addBlock=function(e,t,n,r){if(t.length){if(this.entities.isTerrainBlocked(t[0],t[1],t[2]))return;return this.world.setBlockID(e,t[0],t[1],t[2]),e}if(!this.entities.isTerrainBlocked(t,n,r))return this.world.setBlockID(e,t,n,r),e},et.prototype.pick=function(e,t,n,r){return 0===n?null:(e&&(this.globalToLocal(e,null,tt),e=tt),this._localPick(e,t,n,r))};var tt=Je.create();et.prototype._localPick=function(e,t,n,r){if(0===n)return null;var i=r||this.registry.getBlockSolidity,o=this.world,a=this.worldOriginOffset;e||(e=this.camera._localGetTargetPosition()),t=t||this.camera.getDirection(),n=n||this.blockTestDistance;var s=nt._localPosition,u=nt.normal;return Ye((function(e,t,n){var r=o.getBlockID(e+a[0],t+a[1],n+a[2]);return i(r)}),e,t,n,s,u)?(Je.scaleAndAdd(s,s,u,.01),this.localToGlobal(s,nt.position),nt):null};var nt={_localPosition:Je.create(),position:[0,0,0],normal:[0,0,0]};var rt={blockID:0,position:[],normal:[],adjacent:[]},it=0,ot=(e,t,n,r)=>r(e[0],e[1],e[2])^n+7*t[0]+13*t[1]+17*t[2];var at=()=>{},st=()=>{},ut=n(31),lt=n(297),ct=n(234),ft=n(17),ht=n(4),dt=n(90),pt=n(123),mt=n(187),yt=n(39),vt=n(293);function gt(e){let t=null,n=!1,r=!1,i=!1;e.on("beforeRender",(function(){t=ft.h.gamepad&&null!=navigator.getGamepads()[0]?navigator.getGamepads()[0]:null,null!=t&&(!function(t,n,r,i){t=Math.round(t),0==(n=Math.round(n))?(e.inputs.state.forward=!1,e.inputs.state.backward=!1):n>0?(e.inputs.state.forward=!1,e.inputs.state.backward=!0):n<0&&(e.inputs.state.forward=!0,e.inputs.state.backward=!1);0==t?(e.inputs.state.left=!1,e.inputs.state.right=!1):t>0?(e.inputs.state.left=!1,e.inputs.state.right=!0):t<0&&(e.inputs.state.left=!0,e.inputs.state.right=!1);e.camera.heading=e.camera.heading+Math.trunc(10*r)/500,e.camera.pitch=e.camera.pitch+Math.trunc(10*i)/500}(t.axes[0],t.axes[1],t.axes[2],t.axes[3]),e.inputs.state.jump=t.buttons[0].pressed,t.buttons[13].pressed&&e.inputs.down.emit("mid-fire"),t.buttons[2].pressed&&!n&&(e.inputs.down.emit("inventory"),n=!0,setTimeout((function(){n=!1}),200)),t.buttons[6].pressed&&!r&&(e.inputs.down.emit("alt-fire"),r=!0,setTimeout((function(){r=!1}),200)),t.buttons[7].pressed&&!i&&(e.inputs.down.emit("fire"),i=!0,setTimeout((function(){i=!1}),200)))})),setInterval((function(){null!=t&&(t.buttons[4].pressed?e.inputs.state.scrolly=-1:t.buttons[5].pressed?e.inputs.state.scrolly=1:e.inputs.state.scrolly=0)}),140)}var bt=n(105),wt=n(185),_t=n(147),kt=n(109),xt=n(163);ft.c.forEach(e=>document.fonts.load(`10pt "${e}"`)),Object(dt.d)().then(async e=>{Object(ft.w)(e);const t=new Qe(Object(ft.o)());Object(ht.a)(t);const n=new kt.a([{text:"Loading..."}]);n.setCenterText([{text:"Starting..."}]),Object(ht.c)(2).addControl(n.main);const i=t.container.canvas;i.onwheel=function(e){e.preventDefault()},window.addEventListener("beforeunload",(function(e){e.preventDefault(),e.returnValue=""})),i.addEventListener("keydown",e=>{" "==e.key&&e.preventDefault()}),Object(lt.a)(t,ft.h.controls),t.world.maxChunksPendingCreation=1/0,t.ents.createComponent({name:"inventory",state:{items:{},selected:0,tempslot:{},armor:{},crafting:{}}}),Object(ft.s)(t),t.ents.getPhysics(t.playerEntity).body.airDrag=9999,Object(wt.b)(),Object(pt.b)(t),Object(pt.c)(t),Object(ct.c)(t);const o=t.rendering.getScene();o.fogMode=ft.e.fogMode,o.fogStart=ft.e.fogStart,o.fogEnd=ft.e.fogEnd,o.fogDensity=ft.e.fogDensity,o.fogColor=new ut.b(...ft.e.fogColor),Object(lt.b)(t),gt(t),Object(bt.h)(t);let a=0;if(t.on("beforeRender",async()=>{ft.q.ingame||(a++,t.camera.heading=a/2e3,t.camera.pitch=0)}),document.addEventListener("pointerlockchange",()=>{r.isMobile||(document.pointerLockElement==t.container.canvas?(t.ignorePointerLock=!0,t.ents.getState(t.playerEntity,"receivesInputs").ignore=!1):(t.ignorePointerLock=!1,t.ents.getState(t.playerEntity,"receivesInputs").ignore=!0))},!1),n.setCenterText([{text:"Creating workers..."}]),await Object(_t.d)(),await Object(bt.e)(),n.setCenterText([{text:"Checking login data..."}]),Object(ft.r)(await Object(dt.c)(),!1),n.setCenterText([{text:"Finishing..."}]),window.connect=e=>{Object(yt.a)(t,e)},window.enableDebugSettings=()=>{ft.h.debugSettings.makeSettingsVisible=!0},window.forceplay=()=>{Object(ft.v)({ingame:!0})},r.isMobile){Object(vt.a)(t);const e=document.createElement("link");e.rel="stylesheet",e.href="mobile.css",document.head.appendChild(e),document.documentElement.addEventListener("click",(function(){document.fullscreenElement||(document.documentElement.requestFullscreen(),screen.orientation.lock("landscape"))}))}const s=new URLSearchParams(window.location.search);if(n.dispose(),s.get("server")&&Object(yt.a)(t,s.get("server")),null!=s.get("debugWorld")){const e=Object(xt.a)("debugWorld",{gamemode:"creative",gameVersion:ft.i,serverVersion:"",worldsize:32,version:0,seed:2021,generator:ft.u[0],icon:"VoxelCraft2",displayName:"debugWorld"},!0);Object(yt.d)(t,e,{...ft.t,motd:"debugWorld"})}else Object(mt.a)(t)})},,function(e,t,n){"use strict";var r=n(138),i=n(290);var o=function(e){"function"==typeof e?e():e&&"function"==typeof e.unsubscribe&&e.unsubscribe()};t.a=function(e){const t=new i.a;let n,a=0;return new r.a(r=>{n||(n=e.subscribe(t));const i=t.subscribe(r);return a++,()=>{a--,i.unsubscribe(),0===a&&(o(n),n=void 0)}})}}]);